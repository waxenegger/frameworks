   (function (root, factories) {    var modules = factories(root);    for (m in modules)     root[m] = modules[m];   }(this, function (ctx) {    var OPENLAYERS = {};    var OME = {};    if (typeof(ctx) === 'object' && typeof(ctx.ome) === 'object') {     OME.ome = ctx.ome;     var ome = ctx.ome;    }    var A,H=this;function aa(b,d,e){b=b.split(".");e=e||H;b[0]in e||!e.execScript||e.execScript("var "+b[0]);for(var g;b.length&&(g=b.shift());)b.length||void 0===d?e[g]?e=e[g]:e=e[g]={}:e[g]=d}function da(b){b.Mb=function(){return b.Be?b.Be:b.Be=new b}}
function ea(b){var d=typeof b;if("object"==d)if(b){if(b instanceof Array)return"array";if(b instanceof Object)return d;var e=Object.prototype.toString.call(b);if("[object Window]"==e)return"object";if("[object Array]"==e||"number"==typeof b.length&&"undefined"!=typeof b.splice&&"undefined"!=typeof b.propertyIsEnumerable&&!b.propertyIsEnumerable("splice"))return"array";if("[object Function]"==e||"undefined"!=typeof b.call&&"undefined"!=typeof b.propertyIsEnumerable&&!b.propertyIsEnumerable("call"))return"function"}else return"null";
else if("function"==d&&"undefined"==typeof b.call)return"object";return d}function fa(b){return"array"==ea(b)}function ga(b){var d=ea(b);return"array"==d||"object"==d&&"number"==typeof b.length}function ha(b){return"string"==typeof b}function ia(b){return"number"==typeof b}function ja(b){return"function"==ea(b)}function ka(b){var d=typeof b;return"object"==d&&null!=b||"function"==d}function L(b){return b[la]||(b[la]=++ma)}var la="closure_uid_"+(1E9*Math.random()>>>0),ma=0;
function na(b,d,e){return b.call.apply(b.bind,arguments)}function oa(b,d,e){if(!b)throw Error();if(2<arguments.length){var g=Array.prototype.slice.call(arguments,2);return function(){var e=Array.prototype.slice.call(arguments);Array.prototype.unshift.apply(e,g);return b.apply(d,e)}}return function(){return b.apply(d,arguments)}}function pa(b,d,e){pa=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?na:oa;return pa.apply(null,arguments)}
function qa(b,d){var e=Array.prototype.slice.call(arguments,1);return function(){var d=e.slice();d.push.apply(d,arguments);return b.apply(this,d)}}function R(b,d){function e(){}e.prototype=d.prototype;b.za=d.prototype;b.prototype=new e;b.prototype.constructor=b;b.Di=function(b,e,p){for(var q=Array(arguments.length-2),u=2;u<arguments.length;u++)q[u-2]=arguments[u];return d.prototype[e].apply(b,q)}};if("object"!==typeof ra)var ra={};var sa,ta="function"===typeof Object.assign?Object.assign:function(b,d){if(void 0===b||null===b)throw new TypeError("Cannot convert undefined or null to object");for(var e=Object(b),g=1,k=arguments.length;g<k;++g){var p=arguments[g];if(void 0!==p&&null!==p)for(var q in p)p.hasOwnProperty(q)&&(e[q]=p[q])}return e};function va(b){for(var d in b)delete b[d]}function wa(b){var d=[],e;for(e in b)d.push(b[e]);return d}function xa(b){for(var d in b)return!1;return!d};var ya="olm_"+(1E4*Math.random()|0);function za(b){function d(d){var g=b.listener,k=b.ge||b.target;b.ie&&Aa(b);return g.call(k,d)}return b.he=d}function Ba(b,d,e,g){for(var k,p=0,q=b.length;p<q;++p)if(k=b[p],k.listener===d&&k.ge===e)return g&&(k.deleteIndex=p),k}function Ca(b,d){var e=b[ya];return e?e[d]:void 0}function Da(b){var d=b[ya];d||(d=b[ya]={});return d}
function Ea(b,d){var e=Ca(b,d);if(e){for(var g=0,k=e.length;g<k;++g)b.removeEventListener(d,e[g].he),va(e[g]);e.length=0;if(e=b[ya])delete e[d],0===Object.keys(e).length&&delete b[ya]}}function T(b,d,e,g,k){var p=Da(b),q=p[d];q||(q=p[d]=[]);(p=Ba(q,e,g,!1))?k||(p.ie=!1):(p={ge:g,ie:!!k,listener:e,target:b,type:d},b.addEventListener(d,za(p)),q.push(p));return p}function Fa(b,d,e,g){(b=Ca(b,d))&&(e=Ba(b,e,g,!0))&&Aa(e)}
function Aa(b){if(b&&b.target){b.target.removeEventListener(b.type,b.he);var d=Ca(b.target,b.type);if(d){var e="deleteIndex"in b?b.deleteIndex:d.indexOf(b);-1!==e&&d.splice(e,1);0===d.length&&Ea(b.target,b.type)}va(b)}}function Ga(b){var d=Da(b),e;for(e in d)Ea(b,e)};function Ha(b){if(Error.captureStackTrace)Error.captureStackTrace(this,Ha);else{var d=Error().stack;d&&(this.stack=d)}b&&(this.message=String(b))}R(Ha,Error);Ha.prototype.name="CustomError";var Ia;function Ja(b,d){for(var e=b.split("%s"),g="",k=Array.prototype.slice.call(arguments,1);k.length&&1<e.length;)g+=e.shift()+k.shift();return g+e.join("%s")}var Ka=String.prototype.trim?function(b){return b.trim()}:function(b){return b.replace(/^[\s\xa0]+|[\s\xa0]+$/g,"")};
function La(b){if(!Ma.test(b))return b;-1!=b.indexOf("&")&&(b=b.replace(Na,"&amp;"));-1!=b.indexOf("<")&&(b=b.replace(Oa,"&lt;"));-1!=b.indexOf(">")&&(b=b.replace(Pa,"&gt;"));-1!=b.indexOf('"')&&(b=b.replace(Ra,"&quot;"));-1!=b.indexOf("'")&&(b=b.replace(Sa,"&#39;"));-1!=b.indexOf("\x00")&&(b=b.replace(Ta,"&#0;"));return b}var Na=/&/g,Oa=/</g,Pa=/>/g,Ra=/"/g,Sa=/'/g,Ta=/\x00/g,Ma=/[\x00&<>"']/;function Ua(){return-1!=Va.toLowerCase().indexOf("webkit")}function Wa(b,d){return b<d?-1:b>d?1:0}
function Xa(b){return String(b).replace(/\-([a-z])/g,function(b,e){return e.toUpperCase()})}function Ya(b){var d=ha(void 0)?"undefined".replace(/([-()\[\]{}+?*.$\^|,:#<!\\])/g,"\\$1").replace(/\x08/g,"\\x08"):"\\s";return b.replace(new RegExp("(^"+(d?"|["+d+"]+":"")+")([a-z])","g"),function(b,d,k){return d+k.toUpperCase()})};function Za(b,d){d.unshift(b);Ha.call(this,Ja.apply(null,d));d.shift()}R(Za,Ha);Za.prototype.name="AssertionError";function $a(b,d){throw new Za("Failure"+(b?": "+b:""),Array.prototype.slice.call(arguments,1));}function ab(b,d,e){if("boolean"!=typeof b){var g=[ea(b),b],k="Assertion failed";d?(k+=": "+d,g=Array.prototype.slice.call(arguments,2)):k+=": Expected boolean but got %s: %s.";throw new Za(""+k,g||[]);}};function bb(){};function cb(){}cb.prototype.$a=!1;cb.prototype.qa=function(){this.$a||(this.$a=!0,this.aa())};cb.prototype.aa=bb;function db(b,d){this.type=b;this.target=d||null}db.prototype.preventDefault=db.prototype.stopPropagation=function(){this.wh=!0};function eb(b){b.stopPropagation()}function fb(b){b.preventDefault()};function gb(){this.da={};this.Z={}}R(gb,cb);gb.prototype.addEventListener=function(b,d){var e=this.Z[b];e||(e=this.Z[b]=[]);-1===e.indexOf(d)&&e.push(d)};function U(b,d){var e="string"===typeof d?new db(d):d,g=e.type;e.target=b;var k=b.Z[g],p;if(k){g in b.da||(b.da[g]=0);for(var q=0,u=k.length;q<u;++q)if(!1===k[q].call(b,e)||e.wh){p=!1;break}e=b.da[g];for(delete b.da[g];e--;)b.removeEventListener(g,bb);return p}}gb.prototype.aa=function(){Ga(this)};
function hb(b,d){return d?d in b.Z:0<Object.keys(b.Z).length}gb.prototype.removeEventListener=function(b,d){var e=this.Z[b];if(e){var g=e.indexOf(d);b in this.da?(e[g]=bb,++this.da[b]):(e.splice(g,1),0===e.length&&delete this.Z[b])}};function ib(){gb.call(this);this.f=0}R(ib,gb);ib.prototype.A=function(){++this.f;U(this,"change")};function jb(b,d,e){if(Array.isArray("drawend"))for(var g=Array(7),k=0;7>k;++k)g[k]=T(b,"drawend"[k],d,e);else T(b,"drawend",d,e)};function kb(b){db.call(this,b)}R(kb,db);function lb(b){ib.call(this);L(this);this.$={};void 0!==b&&mb(this,b)}R(lb,ib);var nb={};function ob(b){return nb.hasOwnProperty(b)?nb[b]:nb[b]="change:"+b}lb.prototype.get=function(b){var d;this.$.hasOwnProperty(b)&&(d=this.$[b]);return d};lb.prototype.set=function(b,d,e){e?this.$[b]=d:(e=this.$[b],this.$[b]=d,e!==d&&(b=ob(b),U(this,new kb(b)),U(this,new kb("propertychange"))))};function mb(b,d){for(var e in d)b.set(e,d[e],void 0)};function pb(b,d,e){db.call(this,b,e);this.element=d}R(pb,db);function qb(b){lb.call(this);this.a=b?b:[];rb(this)}R(qb,lb);A=qb.prototype;A.clear=function(){for(;0<sb(this);)this.pop()};A.forEach=function(b,d){this.a.forEach(b,d)};A.item=function(b){return this.a[b]};function sb(b){return b.get("length")}function tb(b,d,e){b.a.splice(d,0,e);rb(b);U(b,new pb("add",e,b))}A.pop=function(){return ub(this,sb(this)-1)};A.push=function(b){var d=this.a.length;tb(this,d,b);return d};
A.remove=function(b){var d=this.a,e,g;e=0;for(g=d.length;e<g;++e)if(d[e]===b)return ub(this,e)};function ub(b,d){var e=b.a[d];b.a.splice(d,1);rb(b);U(b,new pb("remove",e,b));return e}function rb(b){b.set("length",b.a.length)};function vb(b){this.length=b.length||b;for(var d=0;d<this.length;d++)this[d]=b[d]||0}vb.prototype.BYTES_PER_ELEMENT=4;vb.prototype.set=function(b,d){d=d||0;for(var e=0;e<b.length&&d+e<this.length;e++)this[d+e]=b[e]};vb.prototype.toString=Array.prototype.join;"undefined"==typeof Float32Array&&(vb.BYTES_PER_ELEMENT=4,vb.prototype.BYTES_PER_ELEMENT=vb.prototype.BYTES_PER_ELEMENT,vb.prototype.set=vb.prototype.set,vb.prototype.toString=vb.prototype.toString,aa("Float32Array",vb,void 0));function wb(b){this.length=b.length||b;for(var d=0;d<this.length;d++)this[d]=b[d]||0}wb.prototype.BYTES_PER_ELEMENT=8;wb.prototype.set=function(b,d){d=d||0;for(var e=0;e<b.length&&d+e<this.length;e++)this[d+e]=b[e]};wb.prototype.toString=Array.prototype.join;if("undefined"==typeof Float64Array){try{wb.BYTES_PER_ELEMENT=8}catch(b){}wb.prototype.BYTES_PER_ELEMENT=wb.prototype.BYTES_PER_ELEMENT;wb.prototype.set=wb.prototype.set;wb.prototype.toString=wb.prototype.toString;aa("Float64Array",wb,void 0)};function xb(b,d,e,g,k){b[0]=d;b[1]=e;b[2]=g;b[3]=k};function yb(){var b=Array(16);zb(b,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);return b}function Bb(){var b=Array(16);zb(b,1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1);return b}function zb(b,d,e,g,k,p,q,u,v,w,z,B,C,D,F,I,J){b[0]=d;b[1]=e;b[2]=g;b[3]=k;b[4]=p;b[5]=q;b[6]=u;b[7]=v;b[8]=w;b[9]=z;b[10]=B;b[11]=C;b[12]=D;b[13]=F;b[14]=I;b[15]=J}
function Cb(b,d){b[0]=d[0];b[1]=d[1];b[2]=d[2];b[3]=d[3];b[4]=d[4];b[5]=d[5];b[6]=d[6];b[7]=d[7];b[8]=d[8];b[9]=d[9];b[10]=d[10];b[11]=d[11];b[12]=d[12];b[13]=d[13];b[14]=d[14];b[15]=d[15]}function Db(b){b[0]=1;b[1]=0;b[2]=0;b[3]=0;b[4]=0;b[5]=1;b[6]=0;b[7]=0;b[8]=0;b[9]=0;b[10]=1;b[11]=0;b[12]=0;b[13]=0;b[14]=0;b[15]=1}
function Eb(b,d){var e=b[0],g=b[1],k=b[2],p=b[3],q=b[4],u=b[5],v=b[6],w=b[7],z=b[8],B=b[9],C=b[10],D=b[11],F=b[12],I=b[13],J=b[14],M=b[15],E=e*u-g*q,G=e*v-k*q,N=e*w-p*q,P=g*v-k*u,O=g*w-p*u,Q=k*w-p*v,V=z*I-B*F,K=z*J-C*F,S=z*M-D*F,ba=B*J-C*I,Y=B*M-D*I,ca=C*M-D*J,X=E*ca-G*Y+N*ba+P*S-O*K+Q*V;0!=X&&(X=1/X,d[0]=(u*ca-v*Y+w*ba)*X,d[1]=(-g*ca+k*Y-p*ba)*X,d[2]=(I*Q-J*O+M*P)*X,d[3]=(-B*Q+C*O-D*P)*X,d[4]=(-q*ca+v*S-w*K)*X,d[5]=(e*ca-k*S+p*K)*X,d[6]=(-F*Q+J*N-M*G)*X,d[7]=(z*Q-C*N+D*G)*X,d[8]=(q*Y-u*S+w*V)*X,
d[9]=(-e*Y+g*S-p*V)*X,d[10]=(F*O-I*N+M*E)*X,d[11]=(-z*O+B*N-D*E)*X,d[12]=(-q*ba+u*K-v*V)*X,d[13]=(e*ba-g*K+k*V)*X,d[14]=(-F*P+I*G-J*E)*X,d[15]=(z*P-B*G+C*E)*X)}function Fb(b,d,e){var g=b[1]*d+b[5]*e+0*b[9]+b[13],k=b[2]*d+b[6]*e+0*b[10]+b[14],p=b[3]*d+b[7]*e+0*b[11]+b[15];b[12]=b[0]*d+b[4]*e+0*b[8]+b[12];b[13]=g;b[14]=k;b[15]=p}function Gb(b,d,e){zb(b,b[0]*d,b[1]*d,b[2]*d,b[3]*d,b[4]*e,b[5]*e,b[6]*e,b[7]*e,1*b[8],1*b[9],1*b[10],1*b[11],b[12],b[13],b[14],b[15])}
function Hb(b,d){var e=b[0],g=b[1],k=b[2],p=b[3],q=b[4],u=b[5],v=b[6],w=b[7],z=Math.cos(d),B=Math.sin(d);b[0]=e*z+q*B;b[1]=g*z+u*B;b[2]=k*z+v*B;b[3]=p*z+w*B;b[4]=e*-B+q*z;b[5]=g*-B+u*z;b[6]=k*-B+v*z;b[7]=p*-B+w*z}new Float64Array(3);new Float64Array(3);new Float64Array(4);new Float64Array(4);new Float64Array(4);new Float64Array(16);function Ib(b,d,e){return Math.min(Math.max(b,d),e)}var Jb=function(){var b;"cosh"in Math?b=Math.cosh:b=function(b){b=Math.exp(b);return(b+1/b)/2};return b}();function Kb(b,d){var e=b%d;return 0>e*d?e+d:e};function Lb(b,d){b[0]+=d[0];b[1]+=d[1]}function Mb(b,d){var e=b[0],g=b[1],k=d[0],p=d[1],q=k[0],k=k[1],u=p[0],p=p[1],v=u-q,w=p-k,e=0===v&&0===w?0:(v*(e-q)+w*(g-k))/(v*v+w*w||0);0>=e||(1<=e?(q=u,k=p):(q+=e*v,k+=e*w));return[q,k]}function Nb(b,d){for(var e=!0,g=b.length-1;0<=g;--g)if(b[g]!=d[g]){e=!1;break}return e}function Ob(b,d){var e=Math.cos(d),g=Math.sin(d),k=b[1]*e+b[0]*g;b[0]=b[0]*e-b[1]*g;b[1]=k}function Pb(b,d){var e=b[0]-d[0],g=b[1]-d[1];return e*e+g*g};function Qb(b,d){if(Array.isArray(b))return b;void 0===d?d=[b,b]:(d[0]=b,d[1]=b);return d};function Rb(b){for(var d=Sb(),e=0,g=b.length;e<g;++e)Tb(d,b[e]);return d}function Ub(b,d,e){return e?(e[0]=b[0]-d,e[1]=b[1]-d,e[2]=b[2]+d,e[3]=b[3]+d,e):[b[0]-d,b[1]-d,b[2]+d,b[3]+d]}function Vb(b,d){return d?(d[0]=b[0],d[1]=b[1],d[2]=b[2],d[3]=b[3],d):b.slice()}function Wb(b,d){return b[0]<=d[0]&&d[2]<=b[2]&&b[1]<=d[1]&&d[3]<=b[3]}function Xb(b,d,e){return b[0]<=d&&d<=b[2]&&b[1]<=e&&e<=b[3]}
function Yb(b,d){var e=b[1],g=b[2],k=b[3],p=d[0],q=d[1],u=0;p<b[0]?u=u|16:p>g&&(u=u|4);q<e?u|=8:q>k&&(u|=2);0===u&&(u=1);return u}function Sb(){return[Infinity,Infinity,-Infinity,-Infinity]}function Zb(b,d,e,g,k){return k?(k[0]=b,k[1]=d,k[2]=e,k[3]=g,k):[b,d,e,g]}function $b(b,d){var e=b[0],g=b[1];return Zb(e,g,e,g,d)}function ac(b,d){return b[0]==d[0]&&b[2]==d[2]&&b[1]==d[1]&&b[3]==d[3]}function Tb(b,d){d[0]<b[0]&&(b[0]=d[0]);d[0]>b[2]&&(b[2]=d[0]);d[1]<b[1]&&(b[1]=d[1]);d[1]>b[3]&&(b[3]=d[1])}
function bc(b,d,e,g,k){for(;e<g;e+=k){var p=b,q=d[e],u=d[e+1];p[0]=Math.min(p[0],q);p[1]=Math.min(p[1],u);p[2]=Math.max(p[2],q);p[3]=Math.max(p[3],u)}return b}function cc(b,d,e){var g;return(g=d.call(e,dc(b)))||(g=d.call(e,[b[2],b[1]]))||(g=d.call(e,[b[2],b[3]]))?g:(g=d.call(e,ec(b)))?g:!1}function fc(b){var d=0;gc(b)||(d=hc(b)*ic(b));return d}function dc(b){return[b[0],b[1]]}function jc(b){return[(b[0]+b[2])/2,(b[1]+b[3])/2]}
function kc(b,d,e,g){var k=d*g[0]/2;g=d*g[1]/2;d=Math.cos(e);var p=Math.sin(e);e=k*d;k*=p;d*=g;var q=g*p,u=b[0],v=b[1];b=u-e+q;g=u-e-q;p=u+e-q;e=u+e+q;var q=v-k-d,u=v-k+d,w=v+k+d,k=v+k-d;return Zb(Math.min(b,g,p,e),Math.min(q,u,w,k),Math.max(b,g,p,e),Math.max(q,u,w,k),void 0)}function ic(b){return b[3]-b[1]}function lc(b,d){var e=Sb();mc(b,d)&&(e[0]=b[0]>d[0]?b[0]:d[0],e[1]=b[1]>d[1]?b[1]:d[1],e[2]=b[2]<d[2]?b[2]:d[2],e[3]=b[3]<d[3]?b[3]:d[3]);return e}function ec(b){return[b[0],b[3]]}
function hc(b){return b[2]-b[0]}function mc(b,d){return b[0]<=d[2]&&b[2]>=d[0]&&b[1]<=d[3]&&b[3]>=d[1]}function gc(b){return b[2]<b[0]||b[3]<b[1]};/*

 Latitude/longitude spherical geodesy formulae taken from
 http://www.movable-type.co.uk/scripts/latlong.html
 Licensed under CC-BY-3.0.
*/
function nc(b){this.Qb=b}function oc(b,d){var e=b[1]*Math.PI/180,g=d[1]*Math.PI/180,k=(g-e)/2,p=(d[0]-b[0])*Math.PI/180/2,e=Math.sin(k)*Math.sin(k)+Math.sin(p)*Math.sin(p)*Math.cos(e)*Math.cos(g);return 2*pc.Qb*Math.atan2(Math.sqrt(e),Math.sqrt(1-e))}
nc.prototype.offset=function(b,d,e){var g=b[1]*Math.PI/180;d/=this.Qb;var k=Math.asin(Math.sin(g)*Math.cos(d)+Math.cos(g)*Math.sin(d)*Math.cos(e));return[180*(b[0]*Math.PI/180+Math.atan2(Math.sin(e)*Math.sin(d)*Math.cos(g),Math.cos(d)-Math.sin(g)*Math.sin(k)))/Math.PI,180*k/Math.PI]};var pc=new nc(6370997);var qc={};qc.degrees=2*Math.PI*pc.Qb/360;qc.ft=.3048;qc.m=1;qc["us-ft"]=1200/3937;
function rc(b){this.a=b.code;this.f=b.units;this.i=void 0!==b.D?b.D:null;this.b=void 0!==b.global?b.global:!1;this.ac=!(!this.b||!this.i);this.j=void 0!==b.cc?b.cc:this.l;this.g=null;this.h=b.Fe;var d=sc,e=b.code,g=tc||H.proj4;if("function"==typeof g&&void 0===d[e]){var k=g.pe(e);if(void 0!==k){void 0===b.Fe&&(this.h=k.Oi);void 0===b.units&&(this.f=k.units);var p,q;for(p in d)if(b=g.pe(p),void 0!==b)if(d=uc(p),b===k)vc([d,this]);else{q=g(p,e);b=q.forward;q=q.inverse;var d=uc(d),u=uc(this);wc(d,u,
xc(b));wc(u,d,xc(q))}}}}rc.prototype.J=function(){return this.i};function yc(b){return b.h||qc[b.f]}rc.prototype.l=function(b,d){if("degrees"==this.f)return b;var e=zc(this,uc("EPSG:4326")),g=[d[0]-b/2,d[1],d[0]+b/2,d[1],d[0],d[1]-b/2,d[0],d[1]+b/2],g=e(g,g,2),e=(oc(g.slice(0,2),g.slice(2,4))+oc(g.slice(4,6),g.slice(6,8)))/2,g=yc(this);void 0!==g&&(e/=g);return e};rc.prototype.cc=function(b,d){return this.j(b,d)};var sc={},Ac={},tc=null;
function vc(b){Bc(b);b.forEach(function(d){b.forEach(function(b){d!==b&&wc(d,b,Cc)})})}function Dc(b){sc[b.a]=b;wc(b,b,Cc)}function Bc(b){var d=[];b.forEach(function(b){d.push(Dc(b))})}function Ec(b){return b?"string"===typeof b?uc(b):b:uc("EPSG:3857")}function wc(b,d,e){b=b.a;d=d.a;b in Ac||(Ac[b]={});Ac[b][d]=e}
function xc(b){return function(d,e,g){var k=d.length;g=void 0!==g?g:2;e=void 0!==e?e:Array(k);var p,q;for(q=0;q<k;q+=g)for(p=b([d[q],d[q+1]]),e[q]=p[0],e[q+1]=p[1],p=g-1;2<=p;--p)e[q+p]=d[q+p];return e}}function uc(b){var d;if(b instanceof rc)d=b;else if("string"===typeof b){d=sc[b];var e=tc||H.proj4;void 0===d&&"function"==typeof e&&void 0!==e.pe(b)&&(d=new rc({code:b}),Dc(d))}else d=null;return d}function Fc(b,d){if(b===d)return!0;var e=b.f===d.f;return b.a===d.a?e:zc(b,d)===Cc&&e}
function Gc(b,d){var e=uc(b),g=uc(d);return zc(e,g)}function zc(b,d){var e=b.a,g=d.a,k;e in Ac&&g in Ac[e]&&(k=Ac[e][g]);void 0===k&&(k=Hc);return k}function Hc(b,d){if(void 0!==d&&b!==d){$a("This should not be used internally.");for(var e=0,g=b.length;e<g;++e)d[e]=b[e];b=d}return b}function Cc(b,d){var e;if(void 0!==d){e=0;for(var g=b.length;e<g;++e)d[e]=b[e];e=d}else e=b.slice();return e};function Ic(b,d,e,g){this.a=b;this.f=d;this.b=e;this.g=g}function Jc(b,d,e){return b.a<=d&&d<=b.f&&b.b<=e&&e<=b.g}function Kc(b,d){return b.a==d.a&&b.b==d.b&&b.f==d.f&&b.g==d.g}function Lc(b,d){return b.a<=d.f&&b.f>=d.a&&b.b<=d.g&&b.g>=d.b};function Mc(b){this.f=b.Ae;this.a=b.Rh?b.Rh:null};function Nc(b){lb.call(this);this.l=uc(b.ba);this.ja=Oc(b.xa);this.oa=b.Ea;this.ua=void 0!==b.state?b.state:"ready";this.nd=void 0!==b.Ma?b.Ma:!1}R(Nc,lb);function Oc(b){if("string"===typeof b)return[new Mc({Ae:b})];if(b instanceof Mc)return[b];if(Array.isArray(b)){for(var d=b.length,e=Array(d),g=0;g<d;g++){var k=b[g];e[g]="string"===typeof k?new Mc({Ae:k}):k}return e}return null}Nc.prototype.P=bb;Nc.prototype.jb=function(){return this.ja};Nc.prototype.W=function(){return this.ua};function Pc(b){lb.call(this);var d=ta({},b);d.opacity=void 0!==b.opacity?b.opacity:1;d.visible=void 0!==b.visible?b.visible:!0;d.zIndex=void 0!==b.zIndex?b.zIndex:0;d.maxResolution=void 0!==b.Bb?b.Bb:Infinity;d.minResolution=void 0!==b.Ob?b.Ob:0;mb(this,d)}R(Pc,lb);function Qc(b){var d=b.get("opacity"),e=b.Hd(),g=b.get("visible"),k=b.J(),p=b.get("zIndex"),q=b.get("maxResolution"),u=b.get("minResolution");return{Ab:b,opacity:Ib(d,0,1),Ud:e,visible:g,Dc:!0,D:k,zIndex:p,Bb:q,Ob:Math.max(u,0)}}
Pc.prototype.J=function(){return this.get("extent")};function Rc(){};function Sc(b,d,e,g){db.call(this,b,d);this.Lb=g}R(Sc,db);function Tc(b){var d=ta({},b);delete d.source;Pc.call(this,d);this.b=this.h=this.g=null;b.map&&this.ta(b.map);T(this,ob("source"),this.ig,this);this.set("source",b.source?b.source:null)}R(Tc,Pc);function Uc(b,d){return b.visible&&d>=b.Ob&&d<b.Bb}A=Tc.prototype;A.Fd=function(b){b=b?b:[];b.push(Qc(this));return b};A.fa=function(){return this.get("source")||null};A.Hd=function(){var b=this.fa();return b?b.W():"undefined"};A.Wg=function(){this.A()};
A.ig=function(){this.b&&(Aa(this.b),this.b=null);var b=this.fa();b&&(this.b=T(b,"change",this.Wg,this));this.A()};A.ta=function(b){this.g&&(Aa(this.g),this.g=null);b||this.A();this.h&&(Aa(this.h),this.h=null);b&&(this.g=T(b,"precompose",function(b){var e=Qc(this);e.Dc=!1;e.zIndex=Infinity;b.Lb.Nb.push(e);b.Lb.Cc[L(this)]=e},this),this.h=T(this,"change",b.S,b),this.A())};function Vc(b){b=b?b:{};var d=ta({},b);delete d.Od;delete d.We;Tc.call(this,d);this.set("preload",void 0!==b.Od?b.Od:0);this.set("useInterimTilesOnError",void 0!==b.We?b.We:!0)}R(Vc,Tc);function Wc(b){return b.get("useInterimTilesOnError")};function Xc(b){return function(d){if(d)return[Ib(d[0],b[0],b[2]),Ib(d[1],b[1],b[3])]}}function Yc(b){return b};function Zc(b,d){return b>d?1:b<d?-1:0}function $c(b,d,e){var g=b.length;if(b[0]<=d)return 0;if(!(d<=b[g-1])){if(0<e)for(e=1;e<g;++e){if(b[e]<d)return e-1}else if(0>e)for(e=1;e<g;++e){if(b[e]<=d)return e}else for(e=1;e<g;++e){if(b[e]==d)return e;if(b[e]<d)return b[e-1]-d<d-b[e]?e-1:e}$a()}return g-1}function ad(b,d){var e,g=ga(d)?d:[d],k=g.length;for(e=0;e<k;e++)b[b.length]=g[e]}function bd(b,d){var e=b.indexOf(d),g=-1<e;g&&b.splice(e,1);return g}
function cd(b,d){var e=b.length;if(e!==d.length)return!1;for(var g=0;g<e;g++)if(b[g]!==d[g])return!1;return!0}function dd(b){var d=ed,e=b.length,g=Array(b.length),k;for(k=0;k<e;k++)g[k]={index:k,value:b[k]};g.sort(function(b,e){return d(b.value,e.value)||b.index-e.index});for(k=0;k<b.length;k++)b[k]=g[k].value};function fd(b){return function(d,e,g){if(void 0!==d)return d=$c(b,d,g),d=Ib(d+e,0,b.length-1),b[d]}}function gd(b,d,e){return function(g,k,p){if(void 0!==g)return g=Math.max(Math.floor(Math.log(d/g)/Math.log(b)+(0<p?0:0>p?1:.5))+k,0),void 0!==e&&(g=Math.min(g,e)),d/Math.pow(b,g)}};function hd(b){if(void 0!==b)return 0}function jd(b,d){if(void 0!==b)return b+d}function kd(b){var d=2*Math.PI/b;return function(b,g){if(void 0!==b)return b=Math.floor((b+g)/d+.5)*d}}function ld(){var b=5*Math.PI/180;return function(d,e){if(void 0!==d)return Math.abs(d+e)<=b?0:d+e}};function md(b,d,e){this.T=b;this.H=d;this.rotation=e};function nd(){return!0}function od(){return!1};function pd(){lb.call(this);this.G=Sb();this.M=-1;this.w={};this.oa=this.B=0}R(pd,lb);pd.prototype.ua=function(b){return this.Ec(b[0],b[1])};pd.prototype.Ec=od;pd.prototype.J=function(b){this.M!=this.f&&(this.G=this.xd(this.G),this.M=this.f);var d=this.G;b?(b[0]=d[0],b[1]=d[1],b[2]=d[2],b[3]=d[3]):b=d;return b};function qd(b,d,e,g,k,p){var q=k[0],u=k[1],v=k[4],w=k[5],z=k[12];k=k[13];for(var B=p?p:[],C=0;d<e;d+=g){var D=b[d],F=b[d+1];B[C++]=q*D+v*F+z;B[C++]=u*D+w*F+k}p&&B.length!=C&&(B.length=C);return B};function rd(){pd.call(this);this.g="XY";this.F=2;this.a=null}R(rd,pd);function sd(b){if("XY"==b)return 2;if("XYZ"==b||"XYM"==b)return 3;if("XYZM"==b)return 4;$a("unsupported layout: "+b)}A=rd.prototype;A.Ec=od;A.xd=function(b){var d=this.a,e=this.a.length,g=this.F;b=Zb(Infinity,Infinity,-Infinity,-Infinity,b);return bc(b,d,0,e,g)};
function td(b,d){b.oa!=b.f&&(va(b.w),b.B=0,b.oa=b.f);if(0>d||0!==b.B&&d<=b.B)return b;var e=d.toString();if(b.w.hasOwnProperty(e))return b.w[e];var g=b.dc(d);if(g.a.length<b.a.length)return b.w[e]=g;b.B=d;return b}A.dc=function(){return this};function ud(b,d,e){b.F=sd(d);b.g=d;b.a=e}function vd(b,d,e,g){if(d)e=sd(d);else{for(d=0;d<g;++d){if(0===e.length){b.g="XY";b.F=2;return}e=e[0]}e=e.length;2==e?d="XY":3==e?d="XYZ":4==e?d="XYZM":($a("unsupported stride: "+e),d=void 0)}b.g=d;b.F=e}
function wd(b,d){b.a&&(d(b.a,b.a,b.F),b.A())}A.rotate=function(b,d){var e=this.a;if(e){for(var g=e.length,k=this.F,p=e?e:[],q=Math.cos(b),u=Math.sin(b),v=d[0],w=d[1],z=0,B=0;B<g;B+=k){var C=e[B]-v,D=e[B+1]-w;p[z++]=v+C*q-D*u;p[z++]=w+C*u+D*q;for(C=B+2;C<B+k;++C)p[z++]=e[C]}e&&p.length!=z&&(p.length=z);this.A()}};
A.Wa=function(b,d){var e=this.a;if(e){var g=e.length,k=this.F,p=e?e:[],q=0,u,v;for(u=0;u<g;u+=k)for(p[q++]=e[u]+b,p[q++]=e[u+1]+d,v=u+2;v<u+k;++v)p[q++]=e[v];e&&p.length!=q&&(p.length=q);this.A()}};function xd(b,d){var e=0,g,k;g=0;for(k=d.length;g<k;++g)b[e++]=d[g];return e}function yd(b,d,e,g){var k,p;k=0;for(p=e.length;k<p;++k){var q=e[k],u;for(u=0;u<g;++u)b[d++]=q[u]}return d}function zd(b,d,e,g,k){k=k?k:[];var p=0,q,u;q=0;for(u=e.length;q<u;++q)d=yd(b,d,e[q],g),k[p++]=d;k.length=p;return k};function Ad(b,d,e,g,k){k=void 0!==k?k:[];for(var p=0;d<e;d+=g)k[p++]=b.slice(d,d+g);k.length=p;return k}function Bd(b,d,e,g,k){k=void 0!==k?k:[];var p=0,q,u;q=0;for(u=e.length;q<u;++q){var v=e[q];k[p++]=Ad(b,d,v,g,k[p]);d=v}k.length=p;return k};function Cd(b,d,e,g,k,p,q){var u=(e-d)/g;if(3>u){for(;d<e;d+=g)p[q++]=b[d],p[q++]=b[d+1];return q}var v=Array(u);v[0]=1;v[u-1]=1;e=[d,e-g];for(var w=0,z;0<e.length;){var B=e.pop(),C=e.pop(),D=0,F=b[C],I=b[C+1],J=b[B],M=b[B+1];for(z=C+g;z<B;z+=g){var E,G=b[z];E=b[z+1];var N=F,P=I,O=J-N,Q=M-P;if(0!==O||0!==Q){var V=((G-N)*O+(E-P)*Q)/(O*O+Q*Q);1<V?(N=J,P=M):0<V&&(N+=O*V,P+=Q*V)}G=N-G;E=P-E;E=G*G+E*E;E>D&&(w=z,D=E)}D>k&&(v[(w-d)/g]=1,C+g<w&&e.push(C,w),w+g<B&&e.push(w,B))}for(z=0;z<u;++z)v[z]&&(p[q++]=
b[d+z*g],p[q++]=b[d+z*g+1]);return q}
function Dd(b,d,e,g,k,p,q,u){var v,w;v=0;for(w=e.length;v<w;++v){var z=e[v];a:{var B=b,C=z,D=g,F=k,I=p;if(d!=C){var J=F*Math.round(B[d]/F),M=F*Math.round(B[d+1]/F);d+=D;I[q++]=J;I[q++]=M;var E=void 0,G=void 0;do if(E=F*Math.round(B[d]/F),G=F*Math.round(B[d+1]/F),d+=D,d==C){I[q++]=E;I[q++]=G;break a}while(E==J&&G==M);for(;d<C;){var N,P;N=F*Math.round(B[d]/F);P=F*Math.round(B[d+1]/F);d+=D;if(N!=E||P!=G){var O=E-J,Q=G-M,V=N-J,K=P-M;O*K==Q*V&&(0>O&&V<O||O==V||0<O&&V>O)&&(0>Q&&K<Q||Q==K||0<Q&&K>Q)||(I[q++]=
E,I[q++]=G,J=E,M=G);E=N;G=P}}I[q++]=E;I[q++]=G}}u.push(q);d=z}return q};function Ed(b,d){rd.call(this);this.wa(b,d)}R(Ed,rd);A=Ed.prototype;A.clone=function(){var b=new Ed(null);ud(b,this.g,this.a.slice());b.A();return b};A.sa=function(){return Ad(this.a,0,this.a.length,this.F)};A.dc=function(b){var d=[];d.length=Cd(this.a,0,this.a.length,this.F,b,d,0);b=new Ed(null);ud(b,"XY",d);b.A();return b};A.ka=function(){return"LinearRing"};A.wa=function(b,d){b?(vd(this,d,b,1),this.a||(this.a=[]),this.a.length=yd(this.a,0,b,this.F)):ud(this,"XY",null);this.A()};function Fd(b,d){rd.call(this);this.wa(b,d)}R(Fd,rd);A=Fd.prototype;A.clone=function(){var b=new Fd(null);ud(b,this.g,this.a.slice());b.A();return b};A.sa=function(){return this.a?this.a.slice():[]};A.xd=function(b){return $b(this.a,b)};A.ka=function(){return"Point"};A.cb=function(b){return Xb(b,this.a[0],this.a[1])};A.wa=function(b,d){b?(vd(this,d,b,0),this.a||(this.a=[]),this.a.length=xd(this.a,b)):ud(this,"XY",null);this.A()};function Gd(b,d,e,g,k){return!cc(k,function(k){return!Hd(b,d,e,g,k[0],k[1])})}function Hd(b,d,e,g,k,p){for(var q=!1,u=b[e-g],v=b[e-g+1];d<e;d+=g){var w=b[d],z=b[d+1];v>p!=z>p&&k<(w-u)*(p-v)/(z-v)+u&&(q=!q);u=w;v=z}return q}function Id(b,d,e,g,k,p){if(0===e.length||!Hd(b,d,e[0],g,k,p))return!1;var q;d=1;for(q=e.length;d<q;++d)if(Hd(b,e[d-1],e[d],g,k,p))return!1;return!0};function Jd(b,d,e,g,k,p,q){var u,v,w,z,B,C=k[p+1],D=[],F=e[0];w=b[F-g];B=b[F-g+1];for(u=d;u<F;u+=g){z=b[u];v=b[u+1];if(C<=B&&v<=C||B<=C&&C<=v)w=(C-B)/(v-B)*(z-w)+w,D.push(w);w=z;B=v}F=NaN;B=-Infinity;D.sort(Zc);w=D[0];u=1;for(v=D.length;u<v;++u){z=D[u];var I=Math.abs(z-w);I>B&&(w=(w+z)/2,Id(b,d,e,g,w,C)&&(F=w,B=I));w=z}isNaN(F)&&(F=k[p]);return q?(q.push(F,C),q):[F,C]};function Kd(b,d,e,g,k){for(var p=[b[d],b[d+1]],q=[],u;d+g<e;d+=g){q[0]=b[d+g];q[1]=b[d+g+1];if(u=k.call(void 0,p,q))return u;p[0]=q[0];p[1]=q[1]}return!1};function Ld(b,d,e,g,k){var p=bc(Sb(),b,d,e,g);return mc(k,p)?Wb(k,p)||p[0]>=k[0]&&p[2]<=k[2]||p[1]>=k[1]&&p[3]<=k[3]?!0:Kd(b,d,e,g,function(b,d){var e=!1,g=Yb(k,b),p=Yb(k,d);if(1===g||1===p)e=!0;else{var B=k[0],C=k[1],D=k[2],F=k[3],I=d[0],J=d[1],M=(J-b[1])/(I-b[0]);p&2&&!(g&2)&&(e=I-(J-F)/M,e=e>=B&&e<=D);e||!(p&4)||g&4||(e=J-(I-D)*M,e=e>=C&&e<=F);e||!(p&8)||g&8||(e=I-(J-C)/M,e=e>=B&&e<=D);e||!(p&16)||g&16||(e=J-(I-B)*M,e=e>=C&&e<=F)}return e}):!1}
function Md(b,d,e,g,k){var p=e[0];if(!(Ld(b,d,p,g,k)||Hd(b,d,p,g,k[0],k[1])||Hd(b,d,p,g,k[0],k[3])||Hd(b,d,p,g,k[2],k[1])||Hd(b,d,p,g,k[2],k[3])))return!1;if(1===e.length)return!0;d=1;for(p=e.length;d<p;++d)if(Gd(b,e[d-1],e[d],g,k))return!1;return!0};function Nd(b,d,e,g){for(var k=0,p=b[e-g],q=b[e-g+1];d<e;d+=g)var u=b[d],v=b[d+1],k=k+(u-p)*(v+q),p=u,q=v;return 0<k}function Od(b,d,e,g){var k=0;g=void 0!==g?g:!1;var p,q;p=0;for(q=d.length;p<q;++p){var u=d[p],k=Nd(b,k,u,e);if(0===p){if(g&&k||!g&&!k)return!1}else if(g&&!k||!g&&k)return!1;k=u}return!0}
function Pd(b,d,e,g,k){k=void 0!==k?k:!1;var p,q;p=0;for(q=e.length;p<q;++p){var u=e[p],v=Nd(b,d,u,g);if(0===p?k&&v||!k&&!v:k&&!v||!k&&v)for(var v=b,w=u,z=g;d<w-z;){var B;for(B=0;B<z;++B){var C=v[d+B];v[d+B]=v[w-z+B];v[w-z+B]=C}d+=z;w-=z}d=u}return d}function Qd(b,d,e,g){var k=0,p,q;p=0;for(q=d.length;p<q;++p)k=Pd(b,k,d[p],e,g);return k};function Rd(b,d){rd.call(this);this.b=[];this.P=-1;this.V=null;this.ca=-1;this.j=null;this.wa(b,d)}R(Rd,rd);A=Rd.prototype;A.clone=function(){var b=new Rd(null),d=this.b.slice();ud(b,this.g,this.a.slice());b.b=d;b.A();return b};A.Ec=function(b,d){return Id(Sd(this),0,this.b,this.F,b,d)};A.sa=function(b){var d;void 0!==b?(d=Sd(this).slice(),Pd(d,0,this.b,this.F,b)):d=this.a;return Bd(d,0,this.b,this.F)};A.xc=function(){return this.b};
function Td(b){if(b.P!=b.f){var d=jc(b.J());b.V=Jd(Sd(b),0,b.b,b.F,d,0);b.P=b.f}return b.V}function Sd(b){if(b.ca!=b.f){var d=b.a;Od(d,b.b,b.F)?b.j=d:(b.j=d.slice(),b.j.length=Pd(b.j,0,b.b,b.F));b.ca=b.f}return b.j}A.dc=function(b){var d=[],e=[];d.length=Dd(this.a,0,this.b,this.F,Math.sqrt(b),d,0,e);b=new Rd(null);ud(b,"XY",d);b.b=e;b.A();return b};A.ka=function(){return"Polygon"};A.cb=function(b){return Md(Sd(this),0,this.b,this.F,b)};
A.wa=function(b,d){if(b){vd(this,d,b,2);this.a||(this.a=[]);var e=zd(this.a,0,b,this.F,this.b);this.a.length=0===e.length?0:e[e.length-1]}else e=this.b,ud(this,"XY",null),this.b=e;this.A()};function Ud(b){var d;lb.call(this);b=b||{};this.b=[0,0];var e={};e.center=void 0!==b.T?b.T:null;this.g=Ec(b.ba);var g,k,p=void 0!==b.vb?b.vb:0;d=void 0!==b.ic?b.ic:28;var q=void 0!==b.ii?b.ii:2;if(void 0!==b.xb)d=b.xb,g=d[0],k=d[d.length-1],d=fd(d);else{g=Ec(b.ba);k=g.J();var u=(k?Math.max(hc(k),ic(k)):360*qc.degrees/yc(g))/256/Math.pow(2,0),v=u/Math.pow(2,28);g=b.Bb;void 0!==g?p=0:g=u/Math.pow(q,p);k=b.Ob;void 0===k&&(k=void 0!==b.ic?void 0!==b.Bb?g/Math.pow(q,d):u/Math.pow(q,d):v);d=p+Math.floor(Math.log(g/
k)/Math.log(q));k=g/Math.pow(q,d-p);d=gd(q,g,d-p)}this.h=g;this.i=k;this.j=p;p=void 0!==b.D?Xc(b.D):Yc;g=Vd(b);this.a=new md(p,d,g);void 0!==b.H?e.resolution=b.H:void 0!==b.zoom&&(e.resolution=this.a.H(this.h,b.zoom-this.j||0,0));e.rotation=void 0!==b.rotation?b.rotation:0;mb(this,e)}R(Ud,lb);A=Ud.prototype;A.yd=function(b,d){return this.a.rotation(b,d||0)};function Wd(b){return b.get("center")}A.O=function(){return this.get("resolution")};A.ha=function(){return this.get("rotation")};
A.W=function(){var b=Wd(this),d=this.g,e=this.O(),g=this.ha();return{T:[Math.round(b[0]/e)*e,Math.round(b[1]/e)*e],ba:void 0!==d?d:null,H:e,rotation:g}};A.rotate=function(b,d){if(void 0!==d){var e,g=Wd(this);void 0!==g&&(e=[g[0]-d[0],g[1]-d[1]],Ob(e,b-this.ha()),Lb(e,d));Xd(this,e)}this.Ub(b)};function Xd(b,d){b.set("center",d)}function Yd(b,d){b.b[1]+=d}A.Ub=function(b){this.set("rotation",b)};
function Vd(b){if(void 0!==b.Gf?b.Gf:1){b=b.yd;if(void 0===b||!0===b)return ld();if(!1===b)return jd;if(ia(b))return kd(b);$a("illegal option for constrainRotation (%s)",b);return jd}return hd};function Zd(){return!0}function $d(b){var d=arguments,e=d.length;return function(){for(var b=0;b<e;b++)if(!d[b].apply(this,arguments))return!1;return!0}};var ae=Array.prototype.indexOf?function(b,d,e){return Array.prototype.indexOf.call(b,d,e)}:function(b,d,e){e=null==e?0:0>e?Math.max(0,b.length+e):e;if(ha(b))return ha(d)&&1==d.length?b.indexOf(d,e):-1;for(;e<b.length;e++)if(e in b&&b[e]===d)return e;return-1},be=Array.prototype.forEach?function(b,d,e){Array.prototype.forEach.call(b,d,e)}:function(b,d,e){for(var g=b.length,k=ha(b)?b.split(""):b,p=0;p<g;p++)p in k&&d.call(e,k[p],p,b)};
function ce(b){var d=b.length;if(0<d){for(var e=Array(d),g=0;g<d;g++)e[g]=b[g];return e}return[]}function de(b,d,e){return 2>=arguments.length?Array.prototype.slice.call(b,d):Array.prototype.slice.call(b,d,e)};var Va;a:{var ee=H.navigator;if(ee){var fe=ee.userAgent;if(fe){Va=fe;break a}}Va=""}function ge(b){return-1!=Va.indexOf(b)};function he(b,d){for(var e in b)d.call(void 0,b[e],e,b)}var ie="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function je(b,d){for(var e,g,k=1;k<arguments.length;k++){g=arguments[k];for(e in g)b[e]=g[e];for(var p=0;p<ie.length;p++)e=ie[p],Object.prototype.hasOwnProperty.call(g,e)&&(b[e]=g[e])}};function ke(){return ge("Opera")||ge("OPR")}function le(){return ge("Trident")||ge("MSIE")}function me(){return(ge("Chrome")||ge("CriOS"))&&!ke()&&!ge("Edge")};function ne(){return ge("Edge")}function oe(){return ge("Gecko")&&!(Ua()&&!ne())&&!(ge("Trident")||ge("MSIE"))&&!ne()};var pe;
function qe(){var b=H.MessageChannel;"undefined"===typeof b&&"undefined"!==typeof window&&window.postMessage&&window.addEventListener&&!ge("Presto")&&(b=function(){var b=document.createElement("IFRAME");b.style.display="none";b.src="";document.documentElement.appendChild(b);var d=b.contentWindow,b=d.document;b.open();b.write("");b.close();var e="callImmediate"+Math.random(),g="file:"==d.location.protocol?"*":d.location.protocol+"//"+d.location.host,b=pa(function(b){if(("*"==g||b.origin==g)&&b.data==
e)this.port1.onmessage()},this);d.addEventListener("message",b,!1);this.port1={};this.port2={postMessage:function(){d.postMessage(e,g)}}});if("undefined"!==typeof b&&!le()){var d=new b,e={},g=e;d.port1.onmessage=function(){if(void 0!==e.next){e=e.next;var b=e.je;e.je=null;b()}};return function(b){g.next={je:b};g=g.next;d.port2.postMessage(0)}}return"undefined"!==typeof document&&"onreadystatechange"in document.createElement("SCRIPT")?function(b){var d=document.createElement("SCRIPT");d.onreadystatechange=
function(){d.onreadystatechange=null;d.parentNode.removeChild(d);d=null;b();b=null};document.documentElement.appendChild(d)}:function(b){H.setTimeout(b,0)}};var re=ke(),se=le(),te=ne(),ue=oe(),ve=Ua()&&!ne();function we(){var b=H.document;return b?b.documentMode:void 0}var xe;a:{var ye="",ze=function(){var b=Va;if(ue)return/rv\:([^\);]+)(\)|;)/.exec(b);if(te)return/Edge\/([\d\.]+)/.exec(b);if(se)return/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(b);if(ve)return/WebKit\/(\S+)/.exec(b);if(re)return/(?:Version)[ \/]?(\S+)/.exec(b)}();ze&&(ye=ze?ze[1]:"");if(se){var Ae=we();if(null!=Ae&&Ae>parseFloat(ye)){xe=String(Ae);break a}}xe=ye}var Be={};
function Ce(b){var d;if(!(d=Be[b])){d=0;for(var e=Ka(String(xe)).split("."),g=Ka(String(b)).split("."),k=Math.max(e.length,g.length),p=0;0==d&&p<k;p++){var q=e[p]||"",u=g[p]||"",v=RegExp("(\\d*)(\\D*)","g"),w=RegExp("(\\d*)(\\D*)","g");do{var z=v.exec(q)||["","",""],B=w.exec(u)||["","",""];if(0==z[0].length&&0==B[0].length)break;d=Wa(0==z[1].length?0:parseInt(z[1],10),0==B[1].length?0:parseInt(B[1],10))||Wa(0==z[2].length,0==B[2].length)||Wa(z[2],B[2])}while(0==d)}d=Be[b]=0<=d}return d}
var De=H.document,Ee=De&&se?we()||("CSS1Compat"==De.compatMode?parseInt(xe,10):5):void 0;var Fe=!se||9<=Number(Ee);!ue&&!se||se&&9<=Number(Ee)||ue&&Ce("1.9.1");se&&Ce("9");function Ge(b,d){this.x=void 0!==b?b:0;this.y=void 0!==d?d:0}A=Ge.prototype;A.clone=function(){return new Ge(this.x,this.y)};A.toString=function(){return"("+this.x+", "+this.y+")"};A.ceil=function(){this.x=Math.ceil(this.x);this.y=Math.ceil(this.y);return this};A.floor=function(){this.x=Math.floor(this.x);this.y=Math.floor(this.y);return this};A.round=function(){this.x=Math.round(this.x);this.y=Math.round(this.y);return this};A.scale=function(b,d){var e=ia(d)?d:b;this.x*=b;this.y*=e;return this};function He(b,d){this.width=b;this.height=d}A=He.prototype;A.clone=function(){return new He(this.width,this.height)};A.toString=function(){return"("+this.width+" x "+this.height+")"};A.ceil=function(){this.width=Math.ceil(this.width);this.height=Math.ceil(this.height);return this};A.floor=function(){this.width=Math.floor(this.width);this.height=Math.floor(this.height);return this};A.round=function(){this.width=Math.round(this.width);this.height=Math.round(this.height);return this};
A.scale=function(b,d){var e=ia(d)?d:b;this.width*=b;this.height*=e;return this};function Ie(b){return b?new Je(Ke(b)):Ia||(Ia=new Je)}function Le(b){var d=document;return ha(b)?d.getElementById(b):b}function Me(b,d){he(d,function(d,g){"style"==g?b.style.cssText=d:"class"==g?b.className=d:"for"==g?b.htmlFor=d:Ne.hasOwnProperty(g)?b.setAttribute(Ne[g],d):0==g.lastIndexOf("aria-",0)||0==g.lastIndexOf("data-",0)?b.setAttribute(g,d):b[g]=d})}
var Ne={cellpadding:"cellPadding",cellspacing:"cellSpacing",colspan:"colSpan",frameborder:"frameBorder",height:"height",maxlength:"maxLength",nonce:"nonce",role:"role",rowspan:"rowSpan",type:"type",usemap:"useMap",valign:"vAlign",width:"width"};
function Oe(b,d,e){var g=arguments,k=document,p=g[0],q=g[1];if(!Fe&&q&&(q.name||q.type)){p=["<",p];q.name&&p.push(' name="',La(q.name),'"');if(q.type){p.push(' type="',La(q.type),'"');var u={};je(u,q);delete u.type;q=u}p.push(">");p=p.join("")}p=k.createElement(p);q&&(ha(q)?p.className=q:fa(q)?p.className=q.join(" "):Me(p,q));2<g.length&&Pe(k,p,g);return p}
function Pe(b,d,e){function g(e){e&&d.appendChild(ha(e)?b.createTextNode(e):e)}for(var k=2;k<e.length;k++){var p=e[k];!ga(p)||ka(p)&&0<p.nodeType?g(p):be(Qe(p)?ce(p):p,g)}}function Re(b,d){b.appendChild(d)}function Se(b){for(var d;d=b.firstChild;)b.removeChild(d)}function Te(b,d,e){b.insertBefore(d,b.childNodes[e]||null)}function Ue(b){b&&b.parentNode&&b.parentNode.removeChild(b)}function Ve(b,d){var e=d.parentNode;e&&e.replaceChild(b,d)}
function We(b,d){if(!b||!d)return!1;if(b.contains&&1==d.nodeType)return b==d||b.contains(d);if("undefined"!=typeof b.compareDocumentPosition)return b==d||!!(b.compareDocumentPosition(d)&16);for(;d&&b!=d;)d=d.parentNode;return d==b}function Ke(b){return 9==b.nodeType?b:b.ownerDocument||b.document}function Qe(b){if(b&&"number"==typeof b.length){if(ka(b))return"function"==typeof b.item||"string"==typeof b.item;if(ja(b))return"function"==typeof b.item}return!1}
function Je(b){this.a=b||H.document||document}Je.prototype.appendChild=Re;function Xe(b,d,e,g){this.top=b;this.right=d;this.bottom=e;this.left=g}A=Xe.prototype;A.clone=function(){return new Xe(this.top,this.right,this.bottom,this.left)};A.toString=function(){return"("+this.top+"t, "+this.right+"r, "+this.bottom+"b, "+this.left+"l)"};A.ceil=function(){this.top=Math.ceil(this.top);this.right=Math.ceil(this.right);this.bottom=Math.ceil(this.bottom);this.left=Math.ceil(this.left);return this};
A.floor=function(){this.top=Math.floor(this.top);this.right=Math.floor(this.right);this.bottom=Math.floor(this.bottom);this.left=Math.floor(this.left);return this};A.round=function(){this.top=Math.round(this.top);this.right=Math.round(this.right);this.bottom=Math.round(this.bottom);this.left=Math.round(this.left);return this};A.scale=function(b,d){var e=ia(d)?d:b;this.left*=b;this.right*=b;this.top*=e;this.bottom*=e;return this};function Ye(b,d,e){if(ha(d))(d=Ze(b,d))&&(b.style[d]=e);else for(var g in d){e=b;var k=d[g],p=Ze(e,g);p&&(e.style[p]=k)}}var $e={};function Ze(b,d){var e=$e[d];if(!e){var g=Xa(d),e=g;void 0===b.style[g]&&(g=(ve?"Webkit":ue?"Moz":se?"ms":re?"O":null)+Ya(g),void 0!==b.style[g]&&(e=g));$e[d]=e}return e}function af(b,d){var e=Ke(b);return e.defaultView&&e.defaultView.getComputedStyle&&(e=e.defaultView.getComputedStyle(b,null))?e[d]||e.getPropertyValue(d)||"":""}
function bf(b){var d;try{d=b.getBoundingClientRect()}catch(e){return{left:0,top:0,right:0,bottom:0}}se&&b.ownerDocument.body&&(b=b.ownerDocument,d.left-=b.documentElement.clientLeft+b.body.clientLeft,d.top-=b.documentElement.clientTop+b.body.clientTop);return d}
function cf(b){var d=df;if("none"!=(af(b,"display")||(b.currentStyle?b.currentStyle.display:null)||b.style&&b.style.display))return d(b);var e=b.style,g=e.display,k=e.visibility,p=e.position;e.visibility="hidden";e.position="absolute";e.display="inline";b=d(b);e.display=g;e.position=p;e.visibility=k;return b}function df(b){var d=b.offsetWidth,e=b.offsetHeight,g=ve&&!d&&!e;return(void 0===d||g)&&b.getBoundingClientRect?(b=bf(b),new He(b.right-b.left,b.bottom-b.top)):new He(d,e)}
function ef(b,d){b.style.display=d?"":"none"}function ff(b,d,e,g){if(/^\d+px?$/.test(d))return parseInt(d,10);var k=b.style[e],p=b.runtimeStyle[e];b.runtimeStyle[e]=b.currentStyle[e];b.style[e]=d;d=b.style[g];b.style[e]=k;b.runtimeStyle[e]=p;return d}function gf(b,d){var e=b.currentStyle?b.currentStyle[d]:null;return e?ff(b,e,"left","pixelLeft"):0}var hf={thin:2,medium:4,thick:6};
function jf(b,d){if("none"==(b.currentStyle?b.currentStyle[d+"Style"]:null))return 0;var e=b.currentStyle?b.currentStyle[d+"Width"]:null;return e in hf?hf[e]:ff(b,e,"left","pixelLeft")};function kf(b,d,e){db.call(this,b);this.map=d;this.Lb=void 0!==e?e:null}R(kf,db);function lf(b,d,e){db.call(this,b);this.a=d;b=e?e:{};this.buttons=mf(b);this.pressure=nf(b,this.buttons);this.bubbles="bubbles"in b?b.bubbles:!1;this.cancelable="cancelable"in b?b.cancelable:!1;this.view="view"in b?b.view:null;this.detail="detail"in b?b.detail:null;this.screenX="screenX"in b?b.screenX:0;this.screenY="screenY"in b?b.screenY:0;this.clientX="clientX"in b?b.clientX:0;this.clientY="clientY"in b?b.clientY:0;this.button="button"in b?b.button:0;this.relatedTarget="relatedTarget"in b?b.relatedTarget:
null;this.pointerId="pointerId"in b?b.pointerId:0;this.width="width"in b?b.width:0;this.height="height"in b?b.height:0;this.pointerType="pointerType"in b?b.pointerType:"";this.isPrimary="isPrimary"in b?b.isPrimary:!1;d.preventDefault&&(this.preventDefault=function(){d.preventDefault()})}R(lf,db);function mf(b){if(b.buttons||of)b=b.buttons;else switch(b.which){case 1:b=1;break;case 2:b=4;break;case 3:b=2;break;default:b=0}return b}
function nf(b,d){var e=0;b.pressure?e=b.pressure:e=d?.5:0;return e}var of=!1;try{of=1===(new MouseEvent("click",{buttons:1})).buttons}catch(b){};function pf(b,d){var e=document.createElement("CANVAS");b&&(e.width=b);d&&(e.height=d);return e.getContext("2d")}
var qf=function(){var b;return function(){if(void 0===b){var d=document.createElement("P"),e,g={webkitTransform:"-webkit-transform",OTransform:"-o-transform",msTransform:"-ms-transform",MozTransform:"-moz-transform",transform:"transform"};document.body.appendChild(d);for(var k in g)k in d.style&&(d.style[k]="translate(1px,1px)",e=H.getComputedStyle(d).getPropertyValue(g[k]));document.body.removeChild(d);b=e&&"none"!==e}return b}}(),rf=function(){var b;return function(){if(void 0===b){var d=document.createElement("P"),
e,g={webkitTransform:"-webkit-transform",OTransform:"-o-transform",msTransform:"-ms-transform",MozTransform:"-moz-transform",transform:"transform"};document.body.appendChild(d);for(var k in g)k in d.style&&(d.style[k]="translate3d(1px,1px,1px)",e=H.getComputedStyle(d).getPropertyValue(g[k]));document.body.removeChild(d);b=e&&"none"!==e}return b}}();
function sf(b,d){var e=b.style;e.WebkitTransform=d;e.MozTransform=d;e.a=d;e.msTransform=d;e.transform=d;se&&Ce("9.0")&&(b.style.transformOrigin="0 0")}function tf(b,d){var e;if(rf()){var g=Array(16);for(e=0;16>e;++e)g[e]=d[e].toFixed(6);sf(b,"matrix3d("+g.join(",")+")")}else if(qf()){var g=[d[0],d[1],d[4],d[5],d[12],d[13]],k=Array(6);for(e=0;6>e;++e)k[e]=g[e].toFixed(6);sf(b,"matrix("+k.join(",")+")")}else b.style.left=Math.round(d[12])+"px",b.style.top=Math.round(d[13])+"px"};var uf=["experimental-webgl","webgl","webkit-3d","moz-webgl"];function vf(b,d){var e,g,k=uf.length;for(g=0;g<k;++g)try{if(e=b.getContext(uf[g],d))return e}catch(p){}return null};var wf,xf="undefined"!==typeof navigator?navigator.userAgent.toLowerCase():"",yf=-1!==xf.indexOf("firefox"),zf=-1!==xf.indexOf("safari")&&-1===xf.indexOf("chrom"),Af=-1!==xf.indexOf("macintosh"),Bf=H.devicePixelRatio||1,Cf=!1,Df=function(){if(!("HTMLCanvasElement"in H))return!1;try{var b=pf();return b?(void 0!==b.setLineDash&&(Cf=!0),!0):!1}catch(d){return!1}}(),Ef="ontouchstart"in H,Ff="PointerEvent"in H,Gf=!!H.navigator.msPointerEnabled,Hf=!1,If=[];
if("WebGLRenderingContext"in H)try{var Jf=vf(document.createElement("CANVAS"),{failIfMajorPerformanceCaveat:!0});Jf&&(Hf=!0,If=Jf.getSupportedExtensions())}catch(b){}wf=Hf;sa=If;function Kf(b,d){this.a=b;this.h=d};function Lf(b){Kf.call(this,b,{mousedown:this.Fg,mousemove:this.Gg,mouseup:this.Jg,mouseover:this.Ig,mouseout:this.Hg});this.f=b.f;this.b=[]}R(Lf,Kf);function Mf(b,d){for(var e=b.b,g=d.clientX,k=d.clientY,p=0,q=e.length,u;p<q&&(u=e[p]);p++){var v=Math.abs(k-u[1]);if(25>=Math.abs(g-u[0])&&25>=v)return!0}return!1}function Nf(b){var d=Of(b,b),e=d.preventDefault;d.preventDefault=function(){b.preventDefault();e()};d.pointerId=1;d.isPrimary=!0;d.pointerType="mouse";return d}A=Lf.prototype;
A.Fg=function(b){if(!Mf(this,b)){if((1).toString()in this.f){var d=Nf(b);Pf(this.a,Qf,d,b);delete this.f[(1).toString()]}d=Nf(b);this.f[(1).toString()]=b;Pf(this.a,Rf,d,b)}};A.Gg=function(b){if(!Mf(this,b)){var d=Nf(b);Pf(this.a,Sf,d,b)}};A.Jg=function(b){if(!Mf(this,b)){var d=this.f[(1).toString()];d&&d.button===b.button&&(d=Nf(b),Pf(this.a,Tf,d,b),delete this.f[(1).toString()])}};A.Ig=function(b){if(!Mf(this,b)){var d=Nf(b);Uf(this.a,d,b)}};
A.Hg=function(b){if(!Mf(this,b)){var d=Nf(b);Vf(this.a,d,b)}};function Wf(b){Kf.call(this,b,{MSPointerDown:this.Og,MSPointerMove:this.Pg,MSPointerUp:this.Sg,MSPointerOut:this.Qg,MSPointerOver:this.Rg,MSPointerCancel:this.Ng,MSGotPointerCapture:this.Lg,MSLostPointerCapture:this.Mg});this.f=b.f;this.b=["","unavailable","touch","pen","mouse"]}R(Wf,Kf);function Xf(b,d){var e=d;ia(d.pointerType)&&(e=Of(d,d),e.pointerType=b.b[d.pointerType]);return e}A=Wf.prototype;A.Og=function(b){this.f[b.pointerId.toString()]=b;var d=Xf(this,b);Pf(this.a,Rf,d,b)};
A.Pg=function(b){var d=Xf(this,b);Pf(this.a,Sf,d,b)};A.Sg=function(b){var d=Xf(this,b);Pf(this.a,Tf,d,b);delete this.f[b.pointerId.toString()]};A.Qg=function(b){var d=Xf(this,b);Vf(this.a,d,b)};A.Rg=function(b){var d=Xf(this,b);Uf(this.a,d,b)};A.Ng=function(b){var d=Xf(this,b);Pf(this.a,Qf,d,b);delete this.f[b.pointerId.toString()]};A.Mg=function(b){U(this.a,new lf("lostpointercapture",b,b))};A.Lg=function(b){U(this.a,new lf("gotpointercapture",b,b))};function Yf(b){Kf.call(this,b,{pointerdown:this.qh,pointermove:this.rh,pointerup:this.uh,pointerout:this.sh,pointerover:this.th,pointercancel:this.ph,gotpointercapture:this.Qf,lostpointercapture:this.Ag})}R(Yf,Kf);A=Yf.prototype;A.qh=function(b){Zf(this.a,b)};A.rh=function(b){Zf(this.a,b)};A.uh=function(b){Zf(this.a,b)};A.sh=function(b){Zf(this.a,b)};A.th=function(b){Zf(this.a,b)};A.ph=function(b){Zf(this.a,b)};A.Ag=function(b){Zf(this.a,b)};A.Qf=function(b){Zf(this.a,b)};function $f(b,d){Kf.call(this,b,{touchstart:this.Xh,touchmove:this.Wh,touchend:this.Vh,touchcancel:this.Uh});this.f=b.f;this.j=d;this.b=void 0;this.i=0;this.g=void 0}R($f,Kf);A=$f.prototype;A.Ue=function(){this.i=0;this.g=void 0};
function ag(b,d,e){d=Of(d,e);d.pointerId=e.identifier+2;d.bubbles=!0;d.cancelable=!0;d.detail=b.i;d.button=0;d.buttons=1;d.width=e.webkitRadiusX||e.radiusX||0;d.height=e.webkitRadiusY||e.radiusY||0;d.pressure=e.webkitForce||e.force||.5;d.isPrimary=b.b===e.identifier;d.pointerType="touch";d.clientX=e.clientX;d.clientY=e.clientY;d.screenX=e.screenX;d.screenY=e.screenY;return d}
function bg(b,d,e){function g(){d.preventDefault()}var k=Array.prototype.slice.call(d.changedTouches),p=k.length,q,u;for(q=0;q<p;++q)u=ag(b,d,k[q]),u.preventDefault=g,e.call(b,d,u)}
A.Xh=function(b){var d=b.touches,e=Object.keys(this.f),g=e.length;if(g>=d.length){var k=[],p,q,u;for(p=0;p<g;++p){q=e[p];u=this.f[q];var v;if(!(v=1==q))a:{v=d.length;for(var w=void 0,z=0;z<v;z++)if(w=d[z],w.identifier===q-2){v=!0;break a}v=!1}v||k.push(u.wb)}for(p=0;p<k.length;++p)this.td(b,k[p])}d=b.changedTouches[0];e=Object.keys(this.f).length;if(0===e||1===e&&(1).toString()in this.f)this.b=d.identifier,void 0!==this.g&&H.clearTimeout(this.g);cg(this,b);this.i++;bg(this,b,this.jh)};
A.jh=function(b,d){this.f[d.pointerId]={target:d.target,wb:d,Qe:d.target};var e=this.a;d.bubbles=!0;Pf(e,dg,d,b);e=this.a;d.bubbles=!1;Pf(e,eg,d,b);Pf(this.a,Rf,d,b)};A.Wh=function(b){b.preventDefault();bg(this,b,this.Kg)};A.Kg=function(b,d){var e=this.f[d.pointerId];if(e){var g=e.wb,k=e.Qe;Pf(this.a,Sf,d,b);g&&k!==d.target&&(g.relatedTarget=d.target,d.relatedTarget=k,g.target=k,d.target?(Vf(this.a,g,b),Uf(this.a,d,b)):(d.target=k,d.relatedTarget=null,this.td(b,d)));e.wb=d;e.Qe=d.target}};
A.Vh=function(b){cg(this,b);bg(this,b,this.Zh)};A.Zh=function(b,d){Pf(this.a,Tf,d,b);this.a.wb(d,b);var e=this.a;d.bubbles=!1;Pf(e,fg,d,b);delete this.f[d.pointerId];d.isPrimary&&(this.b=void 0,this.g=H.setTimeout(this.Ue.bind(this),200))};A.Uh=function(b){bg(this,b,this.td)};A.td=function(b,d){Pf(this.a,Qf,d,b);this.a.wb(d,b);var e=this.a;d.bubbles=!1;Pf(e,fg,d,b);delete this.f[d.pointerId];d.isPrimary&&(this.b=void 0,this.g=H.setTimeout(this.Ue.bind(this),200))};
function cg(b,d){var e=b.j.b,g=d.changedTouches[0];if(b.b===g.identifier){var k=[g.clientX,g.clientY];e.push(k);H.setTimeout(function(){bd(e,k)},2500)}};function gg(b){gb.call(this);this.h=b;this.f={};this.g={};this.a=[];Ff?hg(this,new Yf(this)):Gf?hg(this,new Wf(this)):(b=new Lf(this),hg(this,b),Ef&&hg(this,new $f(this,b)));b=this.a.length;for(var d,e=0;e<b;e++)d=this.a[e],ig(this,Object.keys(d.h))}R(gg,gb);function hg(b,d){var e=Object.keys(d.h);e&&(e.forEach(function(b){var e=d.h[b];e&&(this.g[b]=e.bind(d))},b),b.a.push(d))}gg.prototype.b=function(b){var d=this.g[b.type];d&&d(b)};
function ig(b,d){d.forEach(function(b){T(this.h,b,this.b,this)},b)}function jg(b,d){d.forEach(function(b){Fa(this.h,b,this.b,this)},b)}function Of(b,d){for(var e={},g,k=0,p=kg.length;k<p;k++)g=kg[k][0],e[g]=b[g]||d[g]||kg[k][1];return e}gg.prototype.wb=function(b,d){b.bubbles=!0;Pf(this,lg,b,d)};function Vf(b,d,e){b.wb(d,e);var g=d.relatedTarget;g&&We(d.target,g)||(d.bubbles=!1,Pf(b,fg,d,e))}
function Uf(b,d,e){d.bubbles=!0;Pf(b,dg,d,e);var g=d.relatedTarget;g&&We(d.target,g)||(d.bubbles=!1,Pf(b,eg,d,e))}function Pf(b,d,e,g){U(b,new lf(d,g,e))}function Zf(b,d){U(b,new lf(d.type,d,d))}gg.prototype.aa=function(){for(var b=this.a.length,d,e=0;e<b;e++)d=this.a[e],jg(this,Object.keys(d.h));gg.za.aa.call(this)};
var Sf="pointermove",Rf="pointerdown",Tf="pointerup",dg="pointerover",lg="pointerout",eg="pointerenter",fg="pointerleave",Qf="pointercancel",kg=[["bubbles",!1],["cancelable",!1],["view",null],["detail",null],["screenX",0],["screenY",0],["clientX",0],["clientY",0],["ctrlKey",!1],["altKey",!1],["shiftKey",!1],["metaKey",!1],["button",0],["relatedTarget",null],["buttons",0],["pointerId",0],["width",0],["height",0],["pressure",0],["tiltX",0],["tiltY",0],["pointerType",""],["hwTimestamp",0],["isPrimary",
!1],["type",""],["target",null],["currentTarget",null],["which",0]];function mg(b,d,e,g,k){kf.call(this,b,d,k);this.a=e;b=d.a.getBoundingClientRect();e=e.changedTouches?e.changedTouches[0]:e;this.f=[e.clientX-b.left,e.clientY-b.top];this.b=d.Oa(this.f);this.h=void 0!==g?g:!1}R(mg,kf);mg.prototype.preventDefault=function(){mg.za.preventDefault.call(this);this.a.preventDefault()};mg.prototype.stopPropagation=function(){mg.za.stopPropagation.call(this);this.a.stopPropagation()};function ng(b,d,e,g,k){mg.call(this,b,d,e.a,g,k);this.g=e}R(ng,mg);
function og(b){gb.call(this);this.b=b;this.i=0;this.j=!1;this.g=[];this.f=null;b=this.b.a;this.w=0;this.u={};this.h=new gg(b);this.a=null;this.l=T(this.h,Rf,this.dg,this);this.s=T(this.h,Sf,this.xh,this)}R(og,gb);function pg(b,d){var e;e=new ng(qg,b.b,d);U(b,e);0!==b.i?(H.clearTimeout(b.i),b.i=0,e=new ng(rg,b.b,d),U(b,e)):b.i=H.setTimeout(function(){this.i=0;var b=new ng(sg,this.b,d);U(this,b)}.bind(b),250)}
function tg(b,d){d.type==ug||d.type==vg?delete b.u[d.pointerId]:d.type==wg&&(b.u[d.pointerId]=!0);b.w=Object.keys(b.u).length}A=og.prototype;A.ze=function(b){tg(this,b);var d=new ng(ug,this.b,b);U(this,d);!this.j&&0===b.button&&pg(this,this.f);0===this.w&&(this.g.forEach(Aa),this.g.length=0,this.j=!1,this.f=null,this.a.qa(),this.a=null)};
A.dg=function(b){tg(this,b);var d=new ng(wg,this.b,b);U(this,d);this.f=b;0===this.g.length&&(this.a=new gg(document),this.g.push(T(this.a,xg,this.Vg,this),T(this.a,ug,this.ze,this),T(this.h,vg,this.ze,this)))};A.Vg=function(b){if(b.clientX!=this.f.clientX||b.clientY!=this.f.clientY){this.j=!0;var d=new ng(yg,this.b,b,this.j);U(this,d)}b.preventDefault()};A.xh=function(b){U(this,new ng(b.type,this.b,b,!(!this.f||b.clientX==this.f.clientX&&b.clientY==this.f.clientY)))};
A.aa=function(){this.s&&(Aa(this.s),this.s=null);this.l&&(Aa(this.l),this.l=null);this.g.forEach(Aa);this.g.length=0;this.a&&(this.a.qa(),this.a=null);this.h&&(this.h.qa(),this.h=null);og.za.aa.call(this)};var sg="singleclick",qg="click",rg="dblclick",yg="pointerdrag",xg="pointermove",wg="pointerdown",ug="pointerup",vg="pointercancel",zg={zi:sg,ni:qg,oi:rg,si:yg,vi:xg,ri:wg,yi:ug,xi:"pointerover",wi:"pointerout",ti:"pointerenter",ui:"pointerleave",pi:vg};function Ag(b,d,e,g,k){gb.call(this);this.l=k;this.D=b;this.h=e;this.H=d;this.state=g}R(Ag,gb);A=Ag.prototype;A.A=function(){U(this,"change")};A.jb=function(){return this.l};A.J=function(){return this.D};A.O=function(){return this.H};A.W=function(){return this.state};function Bg(b,d){gb.call(this);this.na=b;this.state=d;this.a=null;this.g=""}R(Bg,gb);Bg.prototype.A=function(){U(this,"change")};Bg.prototype.getKey=function(){return L(this).toString()};Bg.prototype.W=function(){return this.state};function Cg(){this.g=0;this.b={};this.f=this.a=null}A=Cg.prototype;A.clear=function(){this.g=0;this.b={};this.f=this.a=null};function Dg(b,d){return b.b.hasOwnProperty(d)}A.forEach=function(b,d){for(var e=this.a;e;)b.call(d,e.Zb,e.Id,this),e=e.eb};A.get=function(b){b=this.b[b];if(b===this.f)return b.Zb;b===this.a?(this.a=this.a.eb,this.a.jc=null):(b.eb.jc=b.jc,b.jc.eb=b.eb);b.eb=null;b.jc=this.f;this.f=this.f.eb=b;return b.Zb};
A.pop=function(){var b=this.a;delete this.b[b.Id];b.eb&&(b.eb.jc=null);this.a=b.eb;this.a||(this.f=null);--this.g;return b.Zb};A.replace=function(b,d){this.get(b);this.b[b].Zb=d};A.set=function(b,d){var e={Id:b,eb:null,jc:this.f,Zb:d};this.f?this.f.eb=e:this.a=e;this.f=e;this.b[b]=e;++this.g};function Eg(b){Cg.call(this);this.h=void 0!==b?b:2048}R(Eg,Cg);function Fg(b){return b.g>b.h}function Gg(b,d){for(var e,g;Fg(b);){e=b.a.Zb;g=e.na[0].toString();var k;if(k=g in d)e=e.na,k=Jc(d[g],e[1],e[2]);if(k)break;else b.pop().qa()}};function Hg(b){this.vb=void 0!==b.vb?b.vb:0;this.Sb=b.xb;this.ic=this.Sb.length-1;this.f=void 0!==b.origin?b.origin:null;this.g=null;void 0!==b.ih&&(this.g=b.ih);var d=b.D;void 0===d||this.f||this.g||(this.f=ec(d));this.h=null;void 0!==b.Sh&&(this.h=b.Sh);this.Xb=void 0!==b.Vd?b.Vd:this.h?null:256;this.i=void 0!==d?d:null;this.a=null;void 0!==b.sizes?this.a=b.sizes.map(function(b){return new Ic(Math.min(0,b[0]),Math.max(b[0]-1,-1),Math.min(0,b[1]),Math.max(b[1]-1,-1))},this):d&&Ig(this,d);this.b=
[0,0]}var Jg=[0,0,0];function Kg(b,d,e,g,k){k=Lg(b,d,k);for(d=d[0]-1;d>=b.vb;){if(e.call(null,d,Mg(b,k,d,g)))return!0;--d}return!1}Hg.prototype.J=function(){return this.i};Hg.prototype.kb=function(b){return this.f?this.f:this.g[b]};Hg.prototype.O=function(b){return this.Sb[b]};function Ng(b,d,e,g){return d[0]<b.ic?(g=Lg(b,d,g),Mg(b,g,d[0]+1,e)):null}
function Og(b,d,e,g){Pg(b,d[0],d[1],e,!1,Jg);var k=Jg[1],p=Jg[2];Pg(b,d[2],d[3],e,!0,Jg);b=Jg[1];d=Jg[2];void 0!==g?(g.a=k,g.f=b,g.b=p,g.g=d):g=new Ic(k,b,p,d);return g}function Mg(b,d,e,g){e=b.O(e);return Og(b,d,e,g)}function Qg(b,d){var e=b.kb(d[0]),g=b.O(d[0]),k=Qb(Rg(b,d[0]),b.b);return[e[0]+(d[1]+.5)*k[0]*g,e[1]+(d[2]+.5)*k[1]*g]}function Lg(b,d,e){var g=b.kb(d[0]),k=b.O(d[0]);b=Qb(Rg(b,d[0]),b.b);var p=g[0]+d[1]*b[0]*k;d=g[1]+d[2]*b[1]*k;return Zb(p,d,p+b[0]*k,d+b[1]*k,e)}
function Pg(b,d,e,g,k,p){var q=Sg(b,g),u=g/b.O(q),v=b.kb(q);b=Qb(Rg(b,q),b.b);d=u*Math.floor((d-v[0])/g+(k?.5:0))/b[0];e=u*Math.floor((e-v[1])/g+(k?0:.5))/b[1];k?(d=Math.ceil(d)-1,e=Math.ceil(e)-1):(d=Math.floor(d),e=Math.floor(e));k=d;void 0!==p?(p[0]=q,p[1]=k,p[2]=e):p=[q,k,e];return p}function Tg(b,d,e){e=b.O(e);return Pg(b,d[0],d[1],e,!1,void 0)}function Rg(b,d){return b.Xb?b.Xb:b.h[d]}function Sg(b,d){var e=$c(b.Sb,d,0);return Ib(e,b.vb,b.ic)}
function Ig(b,d){for(var e=b.Sb.length,g=Array(e),k=b.vb;k<e;++k)g[k]=Mg(b,d,k);b.a=g}function Ug(b){var d=b.g;if(!d){for(var d=Vg(b),e=Qb(256),e=Math.max(hc(d)/e[0],ic(d)/e[1]),g=Array(43),k=0;43>k;++k)g[k]=e/Math.pow(2,k);d=new Hg({D:d,origin:ec(d),xb:g,Vd:void 0});b.g=d}return d}function Vg(b){b=uc(b);var d=b.J();d||(b=180*qc.degrees/yc(b),d=Zb(-b,-b,b,b));return d};function Wg(b){Nc.call(this,{xa:b.xa,D:b.D,Ea:b.Ea,ba:b.ba,state:b.state,Ma:b.Ma});this.B=void 0!==b.Fc?b.Fc:!1;this.i=void 0!==b.Nc?b.Nc:1;this.Ca=void 0!==b.Ca?b.Ca:null;this.a=new Eg(b.Tc);this.w=[0,0]}R(Wg,Nc);A=Wg.prototype;A.Ne=function(){return Fg(this.a)};A.Oe=function(b,d){var e=this.zc(b);e&&Gg(e,d)};
function Xg(b,d,e,g,k){d=b.zc(d);if(!d)return!1;for(var p=!0,q,u,v=g.a;v<=g.f;++v)for(var w=g.b;w<=g.g;++w)q=b.Yc(e,v,w),u=!1,Dg(d,q)&&(q=d.get(q),(u=2===q.W())&&(u=!1!==k(q))),u||(p=!1);return p}A.Xc=function(){return 0};A.Yc=function(b,d,e){return b+"/"+d+"/"+e};A.Gd=function(){return this.B};A.lb=function(b){return this.Ca?this.Ca:Ug(b)};A.zc=function(b){var d=this.l;return d&&!Fc(d,b)?null:this.a};
function Yg(b,d,e){var g=b.lb(e);e=b.i;d=Qb(Rg(g,d),b.w);1==e?b=d:(b=b.w,void 0===b&&(b=[0,0]),b[0]=d[0]*e+.5|0,b[1]=d[1]*e+.5|0);return b}function Zg(b,d,e){var g=void 0!==e?e:b.l;e=b.lb(g);if(b.nd&&g.b){var k=d;d=k[0];b=Qg(e,k);g=Vg(g);Xb(g,b[0],b[1])?d=k:(k=hc(g),b[0]+=k*Math.ceil((g[0]-b[0])/k),d=Tg(e,b,d))}k=d[0];g=d[1];b=d[2];if(e.vb>k||k>e.ic)e=!1;else{var p=e.J();e=(e=p?Mg(e,p,k):e.a?e.a[k]:null)?Jc(e,g,b):!0}return e?d:null}A.Xe=bb;function $g(b){db.call(this,b)}R($g,db);function ah(b,d,e,g,k,p,q,u){Db(b);0===d&&0===e||Fb(b,d,e);1==g&&1==k||Gb(b,g,k);0!==p&&Hb(b,p);0===q&&0===u||Fb(b,q,u);return b}function bh(b,d){return b[0]==d[0]&&b[1]==d[1]&&b[4]==d[4]&&b[5]==d[5]&&b[12]==d[12]&&b[13]==d[13]}function ch(b,d,e){var g=b[1],k=b[5],p=b[13],q=d[0];d=d[1];e[0]=b[0]*q+b[4]*d+b[12];e[1]=g*q+k*d+p;return e};function dh(b){ib.call(this);this.a=b}R(dh,ib);dh.prototype.Cb=bb;dh.prototype.i=function(b,d,e){return function(g,k){return Xg(b,d,g,k,function(b){e[g]||(e[g]={});e[g][b.na.toString()]=b})}};dh.prototype.oa=function(b){2===b.target.W()&&eh(this)};function fh(b,d){var e=d.W();2!=e&&3!=e&&T(d,"change",b.oa,b);0==e&&(d.load(),e=d.W());return 2==e}function eh(b){var d=b.a;d.get("visible")&&"ready"==d.Hd()&&b.A()}
function gh(b,d){d.Ne()&&b.fb.push(qa(function(b,d,k){d=L(b).toString();b.Oe(k.L.ba,k.Pc[d])},d))}function hh(b,d){if(d){var e,g,k;g=0;for(k=d.length;g<k;++g)e=d[g],b[L(e).toString()]=e}}function ih(b,d){var e=d.oa;void 0!==e&&("string"===typeof e?b.hc[e]="":ka(e)&&(b.hc[e.src]=e.href))}function jh(b,d,e,g){d=L(d).toString();e=e.toString();d in b?e in b[d]?(b=b[d][e],g.a<b.a&&(b.a=g.a),g.f>b.f&&(b.f=g.f),g.b<b.b&&(b.b=g.b),g.g>b.g&&(b.g=g.g)):b[d][e]=g:(b[d]={},b[d][e]=g)}
function kh(b,d,e){return[d*(Math.round(b[0]/d)+e[0]%2/2),d*(Math.round(b[1]/d)+e[1]%2/2)]}function lh(b,d,e,g,k,p,q,u,v,w){var z=L(d).toString();z in b.Qc||(b.Qc[z]={});var B=b.Qc[z];b=b.Qh;var C=e.vb,D,F,I,J,M,E;for(E=q;E>=C;--E)for(F=Mg(e,p,E,F),I=e.O(E),J=F.a;J<=F.f;++J)for(M=F.b;M<=F.g;++M)q-E<=u?(D=mh(d,E,J,M,g,k),0==D.W()&&(B[D.na.toString()]=!0,D.getKey()in b.kc||b.enqueue([D,z,Qg(e,D.na),I])),void 0!==v&&v.call(w,D)):d.Xe(E,J,M,k)};function nh(b){if("string"!==typeof b){var d=b[0];d!=(d|0)&&(d=d+.5|0);var e=b[1];e!=(e|0)&&(e=e+.5|0);var g=b[2];g!=(g|0)&&(g=g+.5|0);b="rgba("+d+","+e+","+g+","+(void 0===b[3]?1:b[3])+")"}return b};function oh(b){this.s=b.opacity;this.u=b.Dh;this.da=b.rotation;this.l=b.scale;this.B=b.Td}oh.prototype.ha=function(){return this.da};oh.prototype.Ub=function(b){this.da=b};oh.prototype.kd=function(b){this.l=b};function ph(){this.a={};this.f=0}da(ph);ph.prototype.clear=function(){this.a={};this.f=0};ph.prototype.get=function(b,d,e){b=d+":"+b+":"+(e?nh(e):"null");return b in this.a?this.a[b]:null};ph.prototype.set=function(b,d,e,g){this.a[d+":"+b+":"+(e?nh(e):"null")]=g;++this.f};function qh(b,d){this.B=d;this.b={};this.s={}}R(qh,cb);function rh(b){var d=b.L,e=b.bc;ah(e,b.size[0]/2,b.size[1]/2,1/d.H,-1/d.H,-d.rotation,-d.T[0],-d.T[1]);Eb(e,b.Se)}A=qh.prototype;A.aa=function(){for(var b in this.b)this.b[b].qa()};function sh(){var b=ph.Mb();if(32<b.f){var d=0,e,g;for(e in b.a)g=b.a[e],0!==(d++&3)||hb(g)||(delete b.a[e],--b.f)}}
A.Ie=function(b,d,e,g,k,p){function q(b,k){var p=L(b).toString(),q=d.Cc[L(k)].Dc;if(!(p in d.Wb)||q)return e.call(g,b,q?k:null)}var u,v=d.L,w=v.H,z=v.ba,v=b;if(z.ac){var z=z.J(),B=hc(z),C=b[0];if(C<z[0]||C>z[2])v=[C+B*Math.ceil((z[0]-C)/B),b[1]]}z=d.Nb;for(B=z.length-1;0<=B;--B){var D=z[B],C=D.Ab;if(Uc(D,w)&&k.call(p,C)&&(D=th(this,C),C.fa()&&(u=D.Cb(C.fa().nd?v:b,d,q,g)),u))return u}};
function th(b,d){var e=L(d).toString();if(e in b.b)return b.b[e];var g=b.zd(d);b.b[e]=g;b.s[e]=T(g,"change",b.Yf,b);return g}A.Aa=function(){return this.B};A.Yf=function(){this.B.S()};A.fd=bb;A.zh=function(b,d){for(var e in this.b)if(!(d&&e in d.Cc)){var g=e,k=this.b[g];delete this.b[g];Aa(this.s[g]);delete this.s[g];k.qa()}};function uh(b,d){for(var e in b.b)if(!(e in d.Cc)){d.fb.push(b.zh.bind(b));break}}function ed(b,d){return b.zIndex-d.zIndex};function vh(b,d){this.j=b;this.h=d;this.a=[];this.f=[];this.kc={}}vh.prototype.clear=function(){this.a.length=0;this.f.length=0;va(this.kc)};function wh(b){var d=b.a,e=b.f,g=d[0];1==d.length?(d.length=0,e.length=0):(d[0]=d.pop(),e[0]=e.pop(),xh(b,0));d=b.h(g);delete b.kc[d];return g}vh.prototype.enqueue=function(b){var d=this.j(b);return Infinity!=d?(this.a.push(b),this.f.push(d),this.kc[this.h(b)]=!0,yh(this,0,this.a.length-1),!0):!1};
function xh(b,d){for(var e=b.a,g=b.f,k=e.length,p=e[d],q=g[d],u=d;d<k>>1;){var v=2*d+1,w=2*d+2,v=w<k&&g[w]<g[v]?w:v;e[d]=e[v];g[d]=g[v];d=v}e[d]=p;g[d]=q;yh(b,u,d)}function yh(b,d,e){var g=b.a;b=b.f;for(var k=g[e],p=b[e];e>d;){var q=e-1>>1;if(b[q]>p)g[e]=g[q],b[e]=b[q],e=q;else break}g[e]=k;b[e]=p}function zh(b){var d=b.j,e=b.a,g=b.f,k=0,p=e.length,q,u,v;for(u=0;u<p;++u)q=e[u],v=d(q),Infinity==v?delete b.kc[b.h(q)]:(g[k]=v,e[k++]=q);e.length=k;g.length=k;for(d=(b.a.length>>1)-1;0<=d;d--)xh(b,d)};function Ah(b,d){vh.call(this,function(d){return b.apply(null,d)},function(b){return b[0].getKey()});this.l=d;this.g=0;this.b={}}R(Ah,vh);Ah.prototype.enqueue=function(b){var d=Ah.za.enqueue.call(this,b);d&&T(b[0],"change",this.i,this);return d};Ah.prototype.i=function(b){b=b.target;var d=b.W();if(2===d||3===d||4===d||5===d)Fa(b,"change",this.i,this),b=b.getKey(),b in this.b&&(delete this.b[b],--this.g),this.l()};function Bh(b){lb.call(this);this.element=b.element?b.element:null;this.s=this.G=null;this.h=[];this.S=b.S?b.S:bb;b.target&&(this.G=Le(b.target))}R(Bh,lb);Bh.prototype.aa=function(){Ue(this.element);Bh.za.aa.call(this)};Bh.prototype.Aa=function(){return this.s};Bh.prototype.ta=function(b){this.s&&Ue(this.element);for(var d=0,e=this.h.length;d<e;++d)Aa(this.h[d]);this.h.length=0;if(this.s=b)(this.G?this.G:b.s).appendChild(this.element),this.S!==bb&&this.h.push(T(b,"postrender",this.S,this)),b.S()};function Ch(b){b=b?b:{};this.u=document.createElement("UL");this.j=document.createElement("LI");this.u.appendChild(this.j);ef(this.j,!1);this.g=void 0!==b.collapsed?b.collapsed:!0;this.i=void 0!==b.tf?b.tf:!0;this.i||(this.g=!1);var d=void 0!==b.className?b.className:"ol-attribution",e=void 0!==b.Oc?b.Oc:"Attributions",g=void 0!==b.sf?b.sf:"\u00bb";this.w="string"===typeof g?Oe("SPAN",{},g):g;g=void 0!==b.label?b.label:"i";this.B="string"===typeof g?Oe("SPAN",{},g):g;e=Oe("BUTTON",{type:"button",
title:e},this.i&&!this.g?this.w:this.B);T(e,"click",this.P,this);d=Oe("DIV",d+" ol-unselectable ol-control"+(this.g&&this.i?" ol-collapsed":"")+(this.i?"":" ol-uncollapsible"),this.u,e);Bh.call(this,{element:d,S:b.S?b.S:Dh,target:b.target});this.l=!0;this.b={};this.a={};this.M={}}R(Ch,Bh);
function Dh(b){if(b=b.Lb){var d,e,g,k,p,q,u,v,w,z,B,C=b.Nb,D=ta({},b.xa),F={},I=b.L.ba;e=0;for(d=C.length;e<d;e++)if(q=C[e].Ab.fa())if(z=L(q).toString(),w=q.jb())for(g=0,k=w.length;g<k;g++)if(u=w[g],v=L(u).toString(),!(v in D)){if(p=b.Pc[z]){var J=q.lb(I);a:{B=u;var M=I;if(B.a){var E=void 0,G=void 0,N=void 0,P=void 0;for(P in p)if(P in B.a)for(var N=p[P],O,E=0,G=B.a[P].length;E<G;++E){O=B.a[P][E];if(Lc(O,N)){B=!0;break a}var Q=Mg(J,Vg(M),parseInt(P,10)),V=Q.f-Q.a+1;if(N.a<Q.a||N.f>Q.f)if(Lc(O,new Ic(Kb(N.a,
V),Kb(N.f,V),N.b,N.g))||N.f-N.a+1>V&&Lc(O,Q)){B=!0;break a}}B=!1}else B=!0}}else B=!1;B?(v in F&&delete F[v],D[v]=u):F[v]=u}d=[D,F];e=d[0];d=d[1];for(var K in this.b)K in e?(this.a[K]||(ef(this.b[K],!0),this.a[K]=!0),delete e[K]):K in d?(this.a[K]&&(ef(this.b[K],!1),delete this.a[K]),delete d[K]):(Ue(this.b[K]),delete this.b[K],delete this.a[K]);for(K in e)g=document.createElement("LI"),g.innerHTML=e[K].f,this.u.appendChild(g),this.b[K]=g,this.a[K]=!0;for(K in d)g=document.createElement("LI"),g.innerHTML=
d[K].f,ef(g,!1),this.u.appendChild(g),this.b[K]=g;K=!xa(this.a)||!xa(b.hc);this.l!=K&&(ef(this.element,K),this.l=K);K&&xa(this.a)?this.element.classList.add("ol-logo-only"):this.element.classList.remove("ol-logo-only");var S;b=b.hc;K=this.M;for(S in K)S in b||(Ue(K[S]),delete K[S]);for(var ba in b)ba in K||(S=new Image,S.src=ba,e=b[ba],""===e?e=S:(e=Oe("A",{href:e}),e.appendChild(S)),this.j.appendChild(e),K[ba]=e);ef(this.j,!xa(b))}else this.l&&(ef(this.element,!1),this.l=!1)}
Ch.prototype.P=function(b){b.preventDefault();this.element.classList.toggle("ol-collapsed");this.g?Ve(this.w,this.B):Ve(this.B,this.w);this.g=!this.g};function Eh(b){return 1-Math.pow(1-b,3)}function Fh(b){return 3*b*b-2*b*b*b}function Gh(b){return b};function Hh(b){var d=b.source,e=b.start?b.start:Date.now(),g=d[0],k=d[1],p=void 0!==b.duration?b.duration:1E3,q=b.La?b.La:Fh;return function(b,d){if(d.time<e)return d.rb=!0,d.la[0]+=1,!0;if(d.time<e+p){var w=1-q((d.time-e)/p),z=g-d.L.T[0],B=k-d.L.T[1];d.rb=!0;d.L.T[0]+=w*z;d.L.T[1]+=w*B;d.la[0]+=1;return!0}return!1}}
function Ih(b){var d=b.rotation?b.rotation:0,e=b.start?b.start:Date.now(),g=void 0!==b.duration?b.duration:1E3,k=b.La?b.La:Fh,p=b.anchor?b.anchor:null;return function(b,u){if(u.time<e)return u.rb=!0,u.la[0]+=1,!0;if(u.time<e+g){var v=1-k((u.time-e)/g),v=(d-u.L.rotation)*v;u.rb=!0;u.L.rotation+=v;if(p){var w=u.L.T;w[0]-=p[0];w[1]-=p[1];Ob(w,v);Lb(w,p)}u.la[0]+=1;return!0}return!1}}
function Jh(b){var d=b.H,e=b.start?b.start:Date.now(),g=void 0!==b.duration?b.duration:1E3,k=b.La?b.La:Fh;return function(b,q){if(q.time<e)return q.rb=!0,q.la[0]+=1,!0;if(q.time<e+g){var u=1-k((q.time-e)/g),v=d-q.L.H;q.rb=!0;q.L.H+=u*v;q.la[0]+=1;return!0}return!1}};function Kh(b){b=b?b:{};var d=void 0!==b.className?b.className:"ol-rotate",e=void 0!==b.label?b.label:"\u21e7";this.a=null;"string"===typeof e?this.a=Oe("SPAN","ol-compass",e):(this.a=e,this.a.classList.add(this.a,"ol-compass"));e=Oe("BUTTON",{"class":d+"-reset",type:"button",title:b.Oc?b.Oc:"Reset rotation"},this.a);T(e,"click",Kh.prototype.l,this);d=Oe("DIV",d+" ol-unselectable ol-control",e);e=b.S?b.S:Lh;this.g=b.Ch?b.Ch:void 0;Bh.call(this,{element:d,S:e,target:b.target});this.i=void 0!==b.duration?
b.duration:250;this.b=void 0!==b.mf?b.mf:!0;this.j=void 0;this.b&&this.element.classList.add("ol-hidden")}R(Kh,Bh);Kh.prototype.l=function(b){b.preventDefault();if(void 0!==this.g)this.g();else{b=this.Aa();var d=W(b);if(d){var e=d.ha();void 0!==e&&(0<this.i&&(e%=2*Math.PI,e<-Math.PI&&(e+=2*Math.PI),e>Math.PI&&(e-=2*Math.PI),b.bb(Ih({rotation:e,duration:this.i,La:Eh}))),d.Ub(0))}}};
function Lh(b){if(b=b.Lb){b=b.L.rotation;if(b!=this.j){var d="rotate("+b+"rad)";if(this.b){var e=this.element.classList.contains("ol-hidden");e||0!==b?e&&0!==b&&this.element.classList.remove("ol-hidden"):this.element.classList.add("ol-hidden")}this.a.style.msTransform=d;this.a.style.webkitTransform=d;this.a.style.transform=d}this.j=b}};function Mh(b){b=b?b:{};var d=void 0!==b.className?b.className:"ol-zoom",e=void 0!==b.Jb?b.Jb:1,g=void 0!==b.li?b.li:"\u2212",k=void 0!==b.mi?b.mi:"Zoom out",p=Oe("BUTTON",{"class":d+"-in",type:"button",title:void 0!==b.ki?b.ki:"Zoom in"},void 0!==b.ji?b.ji:"+");T(p,"click",qa(Mh.prototype.b,e),this);g=Oe("BUTTON",{"class":d+"-out",type:"button",title:k},g);T(g,"click",qa(Mh.prototype.b,-e),this);d=Oe("DIV",d+" ol-unselectable ol-control",p,g);Bh.call(this,{element:d,target:b.target});this.a=void 0!==
b.duration?b.duration:250}R(Mh,Bh);Mh.prototype.b=function(b,d){d.preventDefault();var e=this.Aa(),g=W(e);if(g){var k=g.O();k&&(0<this.a&&e.bb(Jh({H:k,duration:this.a,La:Eh})),e=g.a.H(k,b||0,0),g.set("resolution",e))}};function Nh(){this.a=[];this.f=this.b=0}function Oh(b,d){var e=b.f,g=.05-e,k=Math.log(.05/b.f)/-.005;return Hh({source:d,duration:k,La:function(b){return e*(Math.exp(-.005*b*k)-1)/g}})};function Ph(b){lb.call(this);this.Ib=null;this.set("active",!0);this.handleEvent=b.handleEvent}R(Ph,lb);Ph.prototype.Aa=function(){return this.Ib};Ph.prototype.ta=function(b){this.Ib=b};function Qh(b,d,e,g,k){if(void 0!==e){var p=d.ha(),q=Wd(d);void 0!==p&&q&&k&&0<k&&(b.bb(Ih({rotation:p,duration:k,La:Eh})),g&&b.bb(Hh({source:q,duration:k,La:Eh})));d.rotate(e,g)}}function Rh(b,d,e,g,k){var p=d.O();e=d.a.H(p,e||0,0);Sh(b,d,e,g,k)}
function Sh(b,d,e,g,k){if(e){var p=d.O(),q=Wd(d);void 0!==p&&q&&e!==p&&k&&0<k&&(b.bb(Jh({H:p,duration:k,La:Eh})),g&&b.bb(Hh({source:q,duration:k,La:Eh})));if(g){var u;b=Wd(d);k=d.O();void 0!==b&&void 0!==k&&(u=[g[0]-e*(g[0]-b[0])/k,g[1]-e*(g[1]-b[1])/k]);Xd(d,u)}d.set("resolution",e)}};function Th(b){b=b?b:{};this.a=b.Jb?b.Jb:1;Ph.call(this,{handleEvent:Uh});this.b=void 0!==b.duration?b.duration:250}R(Th,Ph);function Uh(b){var d=!1,e=b.a;if(b.type==rg){var d=b.map,g=b.b,e=e.shiftKey?-this.a:this.a,k=W(d);Rh(d,k,e,g,this.b);b.preventDefault();d=!0}return!d};function Vh(b){b=b.a;return b.altKey&&!(b.metaKey||b.ctrlKey)&&b.shiftKey}function Wh(b){return b.type==qg}function Xh(b){b=b.a;return 0==b.button&&!(ve&&Af&&b.ctrlKey)}function Yh(b){return b.type==sg}function Zh(b){b=b.a;return!b.altKey&&!(b.metaKey||b.ctrlKey)&&!b.shiftKey}function $h(b){b=b.a;return!b.altKey&&(Af?b.metaKey:b.ctrlKey)&&!b.shiftKey}function ai(b){b=b.a;return!b.altKey&&!(b.metaKey||b.ctrlKey)&&b.shiftKey}
function bi(b){b=b.a.target.tagName;return"INPUT"!==b&&"SELECT"!==b&&"TEXTAREA"!==b}function ci(b){return"mouse"==b.g.pointerType};function di(b){b=b?b:{};Ph.call(this,{handleEvent:b.handleEvent?b.handleEvent:ei});this.Ia=b.tb?b.tb:od;this.Ja=b.zb?b.zb:bb;this.ab=b.ye?b.ye:bb;this.oa=b.ub?b.ub:od;this.s=!1;this.P={};this.g=[]}R(di,Ph);function fi(b){for(var d=b.length,e=0,g=0,k=0;k<d;k++)e+=b[k].clientX,g+=b[k].clientY;return[e/d,g/d]}
function ei(b){if(!(b instanceof ng))return!0;var d=!1,e=b.type;if(e===wg||e===yg||e===ug)e=b.g,b.type==ug?delete this.P[e.pointerId]:b.type==wg?this.P[e.pointerId]=e:e.pointerId in this.P&&(this.P[e.pointerId]=e),this.g=wa(this.P);this.s&&(b.type==yg?this.Ja(b):b.type==ug&&(this.s=this.oa(b)));b.type==wg?(this.s=b=this.Ia(b),d=this.B(b)):b.type==xg&&this.ab(b);return!d}di.prototype.B=function(b){return b};function gi(b){di.call(this,{tb:hi,zb:ii,ub:ji});b=b?b:{};this.a=b.vg;this.b=this.h=null;this.Ka=b.Na?b.Na:Zh;this.i=!1}R(gi,di);function ii(b){var d=fi(this.g);this.a&&this.a.a.push(d[0],d[1],Date.now());if(this.b){var e=this.b[0]-d[0],g=d[1]-this.b[1];b=b.map;var k=W(b),p=k.W(),g=e=[e,g],q=p.H;g[0]*=q;g[1]*=q;Ob(e,p.rotation);Lb(e,p.T);e=k.a.T(e);b.S();Xd(k,e)}this.b=d}
function ji(b){b=b.map;var d=W(b);if(0===this.g.length){var e;if(e=!this.i&&this.a)if(e=this.a,6>e.a.length)e=!1;else{var g=Date.now()-100,k=e.a.length-3;if(e.a[k+2]<g)e=!1;else{for(var p=k-3;0<p&&e.a[p+2]>g;)p-=3;var g=e.a[k+2]-e.a[p+2],q=e.a[k]-e.a[p],k=e.a[k+1]-e.a[p+1];e.b=Math.atan2(k,q);e.f=Math.sqrt(q*q+k*k)/g;e=.05<e.f}}e&&(e=(.05-this.a.f)/-.005,k=this.a.b,p=Wd(d),this.h=Oh(this.a,p),b.bb(this.h),p=ki(b,p),e=b.Oa([p[0]-e*Math.cos(k),p[1]-e*Math.sin(k)]),e=d.a.T(e),Xd(d,e));Yd(d,-1);b.S();
return!1}this.b=null;return!0}function hi(b){if(0<this.g.length&&this.Ka(b)){var d=b.map,e=W(d);this.b=null;this.s||Yd(e,1);d.S();this.h&&bd(d.B,this.h)&&(Xd(e,b.Lb.L.T),this.h=null);this.a&&(b=this.a,b.a.length=0,b.b=0,b.f=0);this.i=1<this.g.length;return!0}return!1}gi.prototype.B=od;function li(b){b=b?b:{};di.call(this,{tb:mi,zb:ni,ub:oi});this.Ka=b.Na?b.Na:Vh;this.a=void 0;this.b=void 0!==b.duration?b.duration:250}R(li,di);function ni(b){if(ci(b)){var d=b.map,e=pi(d);b=b.f;e=Math.atan2(e[1]/2-b[1],b[0]-e[0]/2);if(void 0!==this.a){b=e-this.a;var g=W(d),k=g.ha();d.S();Qh(d,g,k-b)}this.a=e}}function oi(b){if(!ci(b))return!0;b=b.map;var d=W(b);Yd(d,-1);var e=d.ha(),g=this.b,e=d.yd(e,0);Qh(b,d,e,void 0,g);return!1}
function mi(b){return ci(b)&&Xh(b)&&this.Ka(b)?(b=b.map,Yd(W(b),1),b.S(),this.a=void 0,!0):!1}li.prototype.B=od;function qi(b){this.g=null;this.f=document.createElement("div");this.f.style.position="absolute";this.f.className="ol-box "+b;this.b=this.h=this.a=null}R(qi,cb);qi.prototype.aa=function(){this.ta(null)};function ri(b){var d=b.h,e=b.b;b=b.f.style;b.left=Math.min(d[0],e[0])+"px";b.top=Math.min(d[1],e[1])+"px";b.width=Math.abs(e[0]-d[0])+"px";b.height=Math.abs(e[1]-d[1])+"px"}
qi.prototype.ta=function(b){if(this.a){this.a.u.removeChild(this.f);var d=this.f.style;d.left=d.top=d.width=d.height="inherit"}(this.a=b)&&this.a.u.appendChild(this.f)};function si(b){var d=b.h,e=b.b,d=[d,[d[0],e[1]],e,[e[0],d[1]]].map(b.a.Oa,b.a);d[4]=d[0].slice();b.g?b.g.wa([d]):b.g=new Rd([d])}qi.prototype.C=function(){return this.g};function ti(b){db.call(this,b)}R(ti,db);function ui(b){di.call(this,{tb:vi,zb:wi,ub:xi});b=b?b:{};this.a=new qi(b.className||"ol-dragbox");this.b=null;this.Ka=b.Na?b.Na:nd;this.u=b.qf?b.qf:yi}R(ui,di);function yi(b,d,e){b=e[0]-d[0];d=e[1]-d[1];return 64<=b*b+d*d}function wi(b){if(ci(b)){var d=this.a;b=b.f;d.h=this.b;d.b=b;si(d);ri(d);U(this,new ti("boxdrag"))}}ui.prototype.C=function(){return this.a.C()};ui.prototype.j=bb;
function xi(b){if(!ci(b))return!0;this.a.ta(null);this.u(b,this.b,b.f)&&(this.j(b),U(this,new ti("boxend")));return!1}function vi(b){if(ci(b)&&Xh(b)&&this.Ka(b)){this.b=b.f;this.a.ta(b.map);b=this.a;var d=this.b;b.h=this.b;b.b=d;si(b);ri(b);U(this,new ti("boxstart"));return!0}return!1};function zi(b){b=b?b:{};var d=b.Na?b.Na:ai;this.h=void 0!==b.duration?b.duration:200;this.i=void 0!==b.wb?b.wb:!1;ui.call(this,{Na:d,className:b.className||"ol-dragzoom"})}R(zi,ui);
zi.prototype.j=function(){var b=this.Aa(),d=W(b),e=pi(b),g=this.C().J();if(this.i){var k;k=Wd(d);var p=d.O(),q=d.ha();k=kc(k,p,q,e);var g=[ki(b,dc(g)),ki(b,[g[2],g[3]])],p=Zb(Infinity,Infinity,-Infinity,-Infinity,void 0),u,q=0;for(u=g.length;q<u;++q)Tb(p,g[q]);p=1/Math.max(hc(p)/e[0],ic(p)/e[1]);g=(k[2]-k[0])/2*(p-1);p=(k[3]-k[1])/2*(p-1);k[0]-=g;k[2]+=g;k[1]-=p;k[3]+=p;g=k}e=d.a.H(Math.max(hc(g)/e[0],ic(g)/e[1]),0,0);k=d.O();p=Wd(d);b.bb(Jh({H:k,duration:this.h,La:Eh}));b.bb(Hh({source:p,duration:this.h,
La:Eh}));Xd(d,jc(g));d.set("resolution",e)};function Ai(b){Ph.call(this,{handleEvent:Bi});b=b||{};this.a=function(b){return Zh.call(this,b)&&bi.call(this,b)};this.Ka=void 0!==b.Na?b.Na:this.a;this.b=void 0!==b.duration?b.duration:100;this.g=void 0!==b.mh?b.mh:128}R(Ai,Ph);
function Bi(b){var d=!1;if("keydown"==b.type){var e=b.a.keyCode;if(this.Ka(b)&&(40==e||37==e||39==e||38==e)){var g=b.map,d=W(g),k=d.O()*this.g,p=0,q=0;40==e?q=-k:37==e?p=-k:39==e?p=k:q=k;e=[p,q];Ob(e,d.ha());k=this.b;if(p=Wd(d))k&&0<k&&g.bb(Hh({source:p,duration:k,La:Gh})),g=d.a.T([p[0]+e[0],p[1]+e[1]]),Xd(d,g);b.preventDefault();d=!0}}return!d};function Ci(b){Ph.call(this,{handleEvent:Di});b=b?b:{};this.Ka=b.Na?b.Na:bi;this.a=b.Jb?b.Jb:1;this.b=void 0!==b.duration?b.duration:100}R(Ci,Ph);function Di(b){var d=!1;if("keydown"==b.type||"keypress"==b.type){var e=b.a.charCode;if(this.Ka(b)&&(43==e||45==e)){d=b.map;e=43==e?this.a:-this.a;d.S();var g=W(d);Rh(d,g,e,void 0,this.b);b.preventDefault();d=!0}}return!d};function Ei(b){Ph.call(this,{handleEvent:Fi});b=b||{};this.a=0;this.j=void 0!==b.duration?b.duration:250;this.l=void 0!==b.ai?b.ai:!0;this.g=null;this.h=this.b=void 0}R(Ei,Ph);
function Fi(b){var d=!1;if("wheel"==b.type||"mousewheel"==b.type){var d=b.map,e=b.a;this.l&&(this.g=b.b);var g;"wheel"==b.type?(g=e.deltaY,yf&&e.deltaMode===H.WheelEvent.DOM_DELTA_PIXEL&&(g/=Bf),e.deltaMode===H.WheelEvent.DOM_DELTA_LINE&&(g*=40)):"mousewheel"==b.type&&(g=-e.wheelDeltaY,zf&&(g/=3));this.a+=g;void 0===this.b&&(this.b=Date.now());g=Math.max(80-(Date.now()-this.b),0);H.clearTimeout(this.h);this.h=H.setTimeout(this.i.bind(this,d),g);b.preventDefault();d=!0}return!d}
Ei.prototype.i=function(b){var d=Ib(this.a,-1,1),e=W(b);b.S();Rh(b,e,-d,this.g,this.j);this.a=0;this.g=null;this.h=this.b=void 0};function Gi(b){di.call(this,{tb:Hi,zb:Ii,ub:Ji});b=b||{};this.b=null;this.h=void 0;this.a=!1;this.i=0;this.l=void 0!==b.threshold?b.threshold:.3;this.j=void 0!==b.duration?b.duration:250}R(Gi,di);
function Ii(b){var d=0,e=this.g[0],g=this.g[1],e=Math.atan2(g.clientY-e.clientY,g.clientX-e.clientX);void 0!==this.h&&(d=e-this.h,this.i+=d,!this.a&&Math.abs(this.i)>this.l&&(this.a=!0));this.h=e;b=b.map;e=b.a.getBoundingClientRect();g=fi(this.g);g[0]-=e.left;g[1]-=e.top;this.b=b.Oa(g);this.a&&(e=W(b),g=e.ha(),b.S(),Qh(b,e,g+d,this.b))}function Ji(b){if(2>this.g.length){b=b.map;var d=W(b);Yd(d,-1);if(this.a){var e=d.ha(),g=this.b,k=this.j,e=d.yd(e,0);Qh(b,d,e,g,k)}return!1}return!0}
function Hi(b){return 2<=this.g.length?(b=b.map,this.b=null,this.h=void 0,this.a=!1,this.i=0,this.s||Yd(W(b),1),b.S(),!0):!1}Gi.prototype.B=od;function Ki(b){di.call(this,{tb:Li,zb:Mi,ub:Ni});b=b?b:{};this.b=null;this.i=void 0!==b.duration?b.duration:400;this.a=void 0;this.h=1}R(Ki,di);function Mi(b){var d=1,e=this.g[0],g=this.g[1],k=e.clientX-g.clientX,e=e.clientY-g.clientY,k=Math.sqrt(k*k+e*e);void 0!==this.a&&(d=this.a/k);this.a=k;1!=d&&(this.h=d);b=b.map;var k=W(b),e=k.O(),g=b.a.getBoundingClientRect(),p=fi(this.g);p[0]-=g.left;p[1]-=g.top;this.b=b.Oa(p);b.S();Sh(b,k,e*d,this.b)}
function Ni(b){if(2>this.g.length){b=b.map;var d=W(b);Yd(d,-1);var e=d.O(),g=this.b,k=this.i,e=d.a.H(e,0,this.h-1||0);Sh(b,d,e,g,k);return!1}return!0}function Li(b){return 2<=this.g.length?(b=b.map,this.b=null,this.a=void 0,this.h=1,this.s||Yd(W(b),1),b.S(),!0):!1}Ki.prototype.B=od;function Oi(b){var d=b||{};b=ta({},d);delete b.gc;d=d.gc;Pc.call(this,b);this.g=[];this.a={};T(this,ob("layers"),this.$f,this);d?Array.isArray(d)&&(d=new qb(d.slice())):d=new qb;this.set("layers",d)}R(Oi,Pc);A=Oi.prototype;A.$c=function(){this.get("visible")&&this.A()};
A.$f=function(){this.g.forEach(Aa);this.g.length=0;var b=this.get("layers");this.g.push(T(b,"add",this.Zf,this),T(b,"remove",this.ag,this));for(var d in this.a)this.a[d].forEach(Aa);va(this.a);var b=b.a,e,g;d=0;for(e=b.length;d<e;d++)g=b[d],this.a[L(g).toString()]=[T(g,"propertychange",this.$c,this),T(g,"change",this.$c,this)];this.A()};A.Zf=function(b){b=b.element;var d=L(b).toString();this.a[d]=[T(b,"propertychange",this.$c,this),T(b,"change",this.$c,this)];this.A()};
A.ag=function(b){b=L(b.element).toString();this.a[b].forEach(Aa);delete this.a[b];this.A()};A.Fd=function(b){var d=void 0!==b?b:[],e=d.length;this.get("layers").forEach(function(b){b.Fd(d)});b=Qc(this);var g,k;for(g=d.length;e<g;e++)k=d[e],k.opacity*=b.opacity,k.visible=k.visible&&b.visible,k.Bb=Math.min(k.Bb,b.Bb),k.Ob=Math.max(k.Ob,b.Ob),void 0!==b.D&&(k.D=void 0!==k.D?lc(k.D,b.D):b.D);return d};A.Hd=function(){return"ready"};function Pi(b){rc.call(this,{code:b,units:"m",D:Qi,global:!0,bi:Ri})}R(Pi,rc);Pi.prototype.cc=function(b,d){return b/Jb(d[1]/6378137)};var Si=6378137*Math.PI,Qi=[-Si,-Si,Si,Si],Ri=[-180,-85,180,85],Ti="EPSG:3857 EPSG:102100 EPSG:102113 EPSG:900913 urn:ogc:def:crs:EPSG:6.18:3:3857 urn:ogc:def:crs:EPSG::3857 http://www.opengis.net/gml/srs/epsg.xml#3857".split(" ").map(function(b){return new Pi(b)});
function Ui(b,d,e){var g=b.length;e=1<e?e:2;void 0===d&&(2<e?d=b.slice():d=Array(g));for(var k=0;k<g;k+=e)d[k]=6378137*Math.PI*b[k]/180,d[k+1]=6378137*Math.log(Math.tan(Math.PI*(b[k+1]+90)/360));return d}function Vi(b,d,e){var g=b.length;e=1<e?e:2;void 0===d&&(2<e?d=b.slice():d=Array(g));for(var k=0;k<g;k+=e)d[k]=180*b[k]/(6378137*Math.PI),d[k+1]=360*Math.atan(Math.exp(b[k+1]/6378137))/Math.PI-90;return d};var Wi=new nc(6378137);function Xi(b,d){rc.call(this,{code:b,units:"degrees",D:Yi,Ci:d,global:!0,Fe:Zi,bi:Yi})}R(Xi,rc);Xi.prototype.cc=function(b){return b};var Yi=[-180,-90,180,90],Zi=Math.PI*Wi.Qb/180,$i=[new Xi("CRS:84"),new Xi("EPSG:4326","neu"),new Xi("urn:ogc:def:crs:EPSG::4326","neu"),new Xi("urn:ogc:def:crs:EPSG:6.6:4326","neu"),new Xi("urn:ogc:def:crs:OGC:1.3:CRS84"),new Xi("urn:ogc:def:crs:OGC:2:84"),new Xi("http://www.opengis.net/gml/srs/epsg.xml#4326","neu"),new Xi("urn:x-ogc:def:crs:EPSG:4326","neu")];function aj(b){Tc.call(this,b?b:{})}R(aj,Tc);function bj(b){return"string"===typeof b||b instanceof CanvasPattern||b instanceof CanvasGradient?b:nh(b)};var cj=[0,0,0,1],dj=[],ej=[0,0,0,1];function fj(b,d,e,g){0!==d&&(b.translate(e,g),b.rotate(d),b.translate(-e,-g))};function gj(b){b=b||{};this.a=void 0!==b.color?b.color:null;this.f=void 0}gj.prototype.Kc=function(b){this.a=b;this.f=void 0};function hj(){this.f=-1};function ij(){this.f=-1;this.f=64;this.a=Array(4);this.h=Array(this.f);this.g=this.b=0;this.a[0]=1732584193;this.a[1]=4023233417;this.a[2]=2562383102;this.a[3]=271733878;this.g=this.b=0}R(ij,hj);
function jj(b,d,e){e||(e=0);var g=Array(16);if(ha(d))for(var k=0;16>k;++k)g[k]=d.charCodeAt(e++)|d.charCodeAt(e++)<<8|d.charCodeAt(e++)<<16|d.charCodeAt(e++)<<24;else for(k=0;16>k;++k)g[k]=d[e++]|d[e++]<<8|d[e++]<<16|d[e++]<<24;d=b.a[0];e=b.a[1];var k=b.a[2],p=b.a[3],q=0,q=d+(p^e&(k^p))+g[0]+3614090360&4294967295;d=e+(q<<7&4294967295|q>>>25);q=p+(k^d&(e^k))+g[1]+3905402710&4294967295;p=d+(q<<12&4294967295|q>>>20);q=k+(e^p&(d^e))+g[2]+606105819&4294967295;k=p+(q<<17&4294967295|q>>>15);q=e+(d^k&(p^
d))+g[3]+3250441966&4294967295;e=k+(q<<22&4294967295|q>>>10);q=d+(p^e&(k^p))+g[4]+4118548399&4294967295;d=e+(q<<7&4294967295|q>>>25);q=p+(k^d&(e^k))+g[5]+1200080426&4294967295;p=d+(q<<12&4294967295|q>>>20);q=k+(e^p&(d^e))+g[6]+2821735955&4294967295;k=p+(q<<17&4294967295|q>>>15);q=e+(d^k&(p^d))+g[7]+4249261313&4294967295;e=k+(q<<22&4294967295|q>>>10);q=d+(p^e&(k^p))+g[8]+1770035416&4294967295;d=e+(q<<7&4294967295|q>>>25);q=p+(k^d&(e^k))+g[9]+2336552879&4294967295;p=d+(q<<12&4294967295|q>>>20);q=k+
(e^p&(d^e))+g[10]+4294925233&4294967295;k=p+(q<<17&4294967295|q>>>15);q=e+(d^k&(p^d))+g[11]+2304563134&4294967295;e=k+(q<<22&4294967295|q>>>10);q=d+(p^e&(k^p))+g[12]+1804603682&4294967295;d=e+(q<<7&4294967295|q>>>25);q=p+(k^d&(e^k))+g[13]+4254626195&4294967295;p=d+(q<<12&4294967295|q>>>20);q=k+(e^p&(d^e))+g[14]+2792965006&4294967295;k=p+(q<<17&4294967295|q>>>15);q=e+(d^k&(p^d))+g[15]+1236535329&4294967295;e=k+(q<<22&4294967295|q>>>10);q=d+(k^p&(e^k))+g[1]+4129170786&4294967295;d=e+(q<<5&4294967295|
q>>>27);q=p+(e^k&(d^e))+g[6]+3225465664&4294967295;p=d+(q<<9&4294967295|q>>>23);q=k+(d^e&(p^d))+g[11]+643717713&4294967295;k=p+(q<<14&4294967295|q>>>18);q=e+(p^d&(k^p))+g[0]+3921069994&4294967295;e=k+(q<<20&4294967295|q>>>12);q=d+(k^p&(e^k))+g[5]+3593408605&4294967295;d=e+(q<<5&4294967295|q>>>27);q=p+(e^k&(d^e))+g[10]+38016083&4294967295;p=d+(q<<9&4294967295|q>>>23);q=k+(d^e&(p^d))+g[15]+3634488961&4294967295;k=p+(q<<14&4294967295|q>>>18);q=e+(p^d&(k^p))+g[4]+3889429448&4294967295;e=k+(q<<20&4294967295|
q>>>12);q=d+(k^p&(e^k))+g[9]+568446438&4294967295;d=e+(q<<5&4294967295|q>>>27);q=p+(e^k&(d^e))+g[14]+3275163606&4294967295;p=d+(q<<9&4294967295|q>>>23);q=k+(d^e&(p^d))+g[3]+4107603335&4294967295;k=p+(q<<14&4294967295|q>>>18);q=e+(p^d&(k^p))+g[8]+1163531501&4294967295;e=k+(q<<20&4294967295|q>>>12);q=d+(k^p&(e^k))+g[13]+2850285829&4294967295;d=e+(q<<5&4294967295|q>>>27);q=p+(e^k&(d^e))+g[2]+4243563512&4294967295;p=d+(q<<9&4294967295|q>>>23);q=k+(d^e&(p^d))+g[7]+1735328473&4294967295;k=p+(q<<14&4294967295|
q>>>18);q=e+(p^d&(k^p))+g[12]+2368359562&4294967295;e=k+(q<<20&4294967295|q>>>12);q=d+(e^k^p)+g[5]+4294588738&4294967295;d=e+(q<<4&4294967295|q>>>28);q=p+(d^e^k)+g[8]+2272392833&4294967295;p=d+(q<<11&4294967295|q>>>21);q=k+(p^d^e)+g[11]+1839030562&4294967295;k=p+(q<<16&4294967295|q>>>16);q=e+(k^p^d)+g[14]+4259657740&4294967295;e=k+(q<<23&4294967295|q>>>9);q=d+(e^k^p)+g[1]+2763975236&4294967295;d=e+(q<<4&4294967295|q>>>28);q=p+(d^e^k)+g[4]+1272893353&4294967295;p=d+(q<<11&4294967295|q>>>21);q=k+(p^
d^e)+g[7]+4139469664&4294967295;k=p+(q<<16&4294967295|q>>>16);q=e+(k^p^d)+g[10]+3200236656&4294967295;e=k+(q<<23&4294967295|q>>>9);q=d+(e^k^p)+g[13]+681279174&4294967295;d=e+(q<<4&4294967295|q>>>28);q=p+(d^e^k)+g[0]+3936430074&4294967295;p=d+(q<<11&4294967295|q>>>21);q=k+(p^d^e)+g[3]+3572445317&4294967295;k=p+(q<<16&4294967295|q>>>16);q=e+(k^p^d)+g[6]+76029189&4294967295;e=k+(q<<23&4294967295|q>>>9);q=d+(e^k^p)+g[9]+3654602809&4294967295;d=e+(q<<4&4294967295|q>>>28);q=p+(d^e^k)+g[12]+3873151461&4294967295;
p=d+(q<<11&4294967295|q>>>21);q=k+(p^d^e)+g[15]+530742520&4294967295;k=p+(q<<16&4294967295|q>>>16);q=e+(k^p^d)+g[2]+3299628645&4294967295;e=k+(q<<23&4294967295|q>>>9);q=d+(k^(e|~p))+g[0]+4096336452&4294967295;d=e+(q<<6&4294967295|q>>>26);q=p+(e^(d|~k))+g[7]+1126891415&4294967295;p=d+(q<<10&4294967295|q>>>22);q=k+(d^(p|~e))+g[14]+2878612391&4294967295;k=p+(q<<15&4294967295|q>>>17);q=e+(p^(k|~d))+g[5]+4237533241&4294967295;e=k+(q<<21&4294967295|q>>>11);q=d+(k^(e|~p))+g[12]+1700485571&4294967295;d=e+
(q<<6&4294967295|q>>>26);q=p+(e^(d|~k))+g[3]+2399980690&4294967295;p=d+(q<<10&4294967295|q>>>22);q=k+(d^(p|~e))+g[10]+4293915773&4294967295;k=p+(q<<15&4294967295|q>>>17);q=e+(p^(k|~d))+g[1]+2240044497&4294967295;e=k+(q<<21&4294967295|q>>>11);q=d+(k^(e|~p))+g[8]+1873313359&4294967295;d=e+(q<<6&4294967295|q>>>26);q=p+(e^(d|~k))+g[15]+4264355552&4294967295;p=d+(q<<10&4294967295|q>>>22);q=k+(d^(p|~e))+g[6]+2734768916&4294967295;k=p+(q<<15&4294967295|q>>>17);q=e+(p^(k|~d))+g[13]+1309151649&4294967295;
e=k+(q<<21&4294967295|q>>>11);q=d+(k^(e|~p))+g[4]+4149444226&4294967295;d=e+(q<<6&4294967295|q>>>26);q=p+(e^(d|~k))+g[11]+3174756917&4294967295;p=d+(q<<10&4294967295|q>>>22);q=k+(d^(p|~e))+g[2]+718787259&4294967295;k=p+(q<<15&4294967295|q>>>17);q=e+(p^(k|~d))+g[9]+3951481745&4294967295;b.a[0]=b.a[0]+d&4294967295;b.a[1]=b.a[1]+(k+(q<<21&4294967295|q>>>11))&4294967295;b.a[2]=b.a[2]+k&4294967295;b.a[3]=b.a[3]+p&4294967295}
function kj(b,d){var e;void 0===e&&(e=d.length);for(var g=e-b.f,k=b.h,p=b.b,q=0;q<e;){if(0==p)for(;q<=g;)jj(b,d,q),q+=b.f;if(ha(d))for(;q<e;){if(k[p++]=d.charCodeAt(q++),p==b.f){jj(b,k);p=0;break}}else for(;q<e;)if(k[p++]=d[q++],p==b.f){jj(b,k);p=0;break}}b.b=p;b.g+=e};function lj(b){b=b||{};this.h=void 0!==b.color?b.color:null;this.a=b.lineCap;this.j=void 0!==b.U?b.U:null;this.f=b.lineJoin;this.b=b.miterLimit;this.i=b.width;this.g=void 0}lj.prototype.Kc=function(b){this.h=b;this.g=void 0};lj.prototype.setLineDash=function(b){this.j=b;this.g=void 0};lj.prototype.Vb=function(b){this.i=b;this.g=void 0};function mj(b){b=b||{};this.b=this.a=this.g=null;this.h=void 0!==b.fill?b.fill:null;this.Ha=void 0!==b.stroke?b.stroke:null;this.f=b.Qb;this.Z=[0,0];this.w=this.j=this.i=null;var d=b.Ai,e,g=null,k,p=0;this.Ha&&(k=nh(this.Ha.h),p=this.Ha.i,void 0===p&&(p=1),g=this.Ha.j,Cf||(g=null));var q=2*(this.f+p)+1;k={strokeStyle:k,Ve:p,size:q,U:g};if(void 0===d)this.a=document.createElement("CANVAS"),this.a.height=q,this.a.width=q,e=q=this.a.width,d=this.a.getContext("2d"),this.hb(k,d,0,0),this.h?this.b=this.a:
(d=this.b=document.createElement("CANVAS"),d.height=k.size,d.width=k.size,d=d.getContext("2d"),this.re(k,d,0,0));else{q=Math.round(q);(g=!this.h)&&(e=this.re.bind(this,k));if(this.Ha){p=this.Ha;if(void 0===p.g){var u="s"+(p.h?nh(p.h):"-")+","+(void 0!==p.a?p.a.toString():"-")+","+(p.j?p.j.toString():"-")+","+(void 0!==p.f?p.f:"-")+","+(void 0!==p.b?p.b.toString():"-")+","+(void 0!==p.i?p.i.toString():"-"),v=new ij;kj(v,u);var w=Array((56>v.b?v.f:2*v.f)-v.b);w[0]=128;for(u=1;u<w.length-8;++u)w[u]=
0;for(var z=8*v.g,u=w.length-8;u<w.length;++u)w[u]=z&255,z/=256;kj(v,w);w=Array(16);for(u=z=0;4>u;++u)for(var B=0;32>B;B+=8)w[z++]=v.a[u]>>>B&255;if(8192>=w.length)v=String.fromCharCode.apply(null,w);else for(v="",u=0;u<w.length;u+=8192)v+=String.fromCharCode.apply(null,de(w,u,u+8192));p.g=v}p=p.g}else p="-";this.h?(v=this.h,void 0===v.f&&(v.f=v.a instanceof CanvasPattern||v.a instanceof CanvasGradient?L(v.a).toString():"f"+(v.a?nh(v.a):"-")),v=v.f):v="-";this.g&&p==this.g[1]&&v==this.g[2]&&this.f==
this.g[3]||(this.g=["c"+p+v+(void 0!==this.f?this.f.toString():"-"),p,v,this.f]);k=d.add(this.g[0],q,q,this.hb.bind(this,k),e);this.a=k.Qa;this.Z=[k.offsetX,k.offsetY];e=k.Qa.width;g?this.b=k.Hi:this.b=this.a}this.i=[q/2,q/2];this.j=[q,q];this.w=[e,e];oh.call(this,{opacity:1,Dh:!1,rotation:0,scale:1,Td:void 0!==b.Td?b.Td:!0})}R(mj,oh);A=mj.prototype;A.kb=function(){return this.Z};A.yc=function(){return this.f};A.R=function(){return this.Ha};A.load=bb;A.Yh=bb;
A.hb=function(b,d,e,g){d.setTransform(1,0,0,1,0,0);d.translate(e,g);d.beginPath();d.arc(b.size/2,b.size/2,this.f,0,2*Math.PI,!0);this.h&&(d.fillStyle=bj(this.h.a),d.fill());this.Ha&&(d.strokeStyle=b.strokeStyle,d.lineWidth=b.Ve,b.U&&d.setLineDash(b.U),d.stroke());d.closePath()};
A.re=function(b,d,e,g){d.setTransform(1,0,0,1,0,0);d.translate(e,g);d.beginPath();d.arc(b.size/2,b.size/2,this.f,0,2*Math.PI,!0);d.fillStyle=nh(cj);d.fill();this.Ha&&(d.strokeStyle=b.strokeStyle,d.lineWidth=b.Ve,b.U&&d.setLineDash(b.U),d.stroke());d.closePath()};function nj(b){b=b||{};this.h=null;this.b=oj;void 0!==b.ra&&pj(this,b.ra);this.f=void 0!==b.fill?b.fill:null;this.g=void 0!==b.Qa?b.Qa:null;this.Ha=void 0!==b.stroke?b.stroke:null;this.i=void 0!==b.text?b.text:null;this.a=b.zIndex}nj.prototype.C=function(){return this.h};nj.prototype.R=function(){return this.Ha};nj.prototype.I=function(){return this.i};function pj(b,d){ja(d)?b.b=d:"string"===typeof d?b.b=function(b){return b.get(d)}:d?void 0!==d&&(b.b=function(){return d}):b.b=oj;b.h=d}
function qj(b){if(!ja(b)){var d;d=Array.isArray(b)?b:[b];b=function(){return d}}return b}var rj=null;function sj(){if(!rj){var b=new gj({color:"rgba(255,255,255,0.4)"}),d=new lj({color:"#3399CC",width:1.25});rj=[new nj({Qa:new mj({fill:b,stroke:d,Qb:5}),fill:b,stroke:d})]}return rj}
function tj(){var b={},d=[255,255,255,1],e=[0,153,255,1];b.Polygon=[new nj({fill:new gj({color:[255,255,255,.5]})})];b.MultiPolygon=b.Polygon;b.LineString=[new nj({stroke:new lj({color:d,width:5})}),new nj({stroke:new lj({color:e,width:3})})];b.MultiLineString=b.LineString;b.Circle=b.Polygon.concat(b.LineString);b.Point=[new nj({Qa:new mj({Qb:6,fill:new gj({color:e}),stroke:new lj({color:d,width:1.5})}),zIndex:Infinity})];b.MultiPoint=b.Point;b.GeometryCollection=b.Polygon.concat(b.LineString,b.Point);
return b}function oj(b){return b.C()};function uj(b){b=b?b:{};var d=ta({},b);delete d.style;delete d.Te;delete d.Yd;delete d.Zd;Tc.call(this,d);this.a=void 0!==b.Te?b.Te:100;this.s=null;this.i=void 0;d=b.style;this.s=void 0!==d?d:sj;this.i=null===d?void 0:qj(this.s);this.A();this.j=void 0!==b.Yd?b.Yd:!1;this.l=void 0!==b.Zd?b.Zd:!1}R(uj,Tc);function vj(b,d,e,g,k){this.g=b;this.da=d;this.j=e;this.G=g;this.$b=k;this.h=this.a=this.f=this.ua=this.ja=this.oa=null;this.Ia=this.$a=this.w=this.P=this.M=this.$=0;this.Ja=!1;this.i=this.ab=0;this.ob=!1;this.V=0;this.b="";this.s=this.B=this.Hb=this.pb=0;this.ca=this.u=this.l=null;this.Z=[];this.Ib=yb()}R(vj,Rc);
function wj(b,d,e){if(b.h){d=qd(d,0,e,2,b.G,b.Z);e=b.g;var g=b.Ib,k=e.globalAlpha;1!=b.w&&(e.globalAlpha=k*b.w);var p=b.ab;b.Ja&&(p+=b.$b);var q,u;q=0;for(u=d.length;q<u;q+=2){var v=d[q]-b.$,w=d[q+1]-b.M;b.ob&&(v=Math.round(v),w=Math.round(w));if(0!==p||1!=b.i){var z=v+b.$,B=w+b.M;ah(g,z,B,b.i,b.i,p,-z,-B);e.setTransform(g[0],g[1],g[4],g[5],g[12],g[13])}e.drawImage(b.h,b.$a,b.Ia,b.V,b.P,v,w,b.V,b.P)}0===p&&1==b.i||e.setTransform(1,0,0,1,0,0);1!=b.w&&(e.globalAlpha=k)}}
function xj(b,d,e,g){var k=0;if(b.ca&&""!==b.b){b.l&&yj(b,b.l);b.u&&zj(b,b.u);var p=b.ca,q=b.g,u=b.ua;u?(u.font!=p.font&&(u.font=q.font=p.font),u.textAlign!=p.textAlign&&(u.textAlign=q.textAlign=p.textAlign),u.textBaseline!=p.textBaseline&&(u.textBaseline=q.textBaseline=p.textBaseline)):(q.font=p.font,q.textAlign=p.textAlign,q.textBaseline=p.textBaseline,b.ua={font:p.font,textAlign:p.textAlign,textBaseline:p.textBaseline});d=qd(d,k,e,g,b.G,b.Z);for(p=b.g;k<e;k+=g){q=d[k]+b.pb;u=d[k+1]+b.Hb;if(0!==
b.B||1!=b.s){var v=ah(b.Ib,q,u,b.s,b.s,b.B,-q,-u);p.setTransform(v[0],v[1],v[4],v[5],v[12],v[13])}b.u&&p.strokeText(b.b,q,u);b.l&&p.fillText(b.b,q,u)}0===b.B&&1==b.s||p.setTransform(1,0,0,1,0,0)}}function Aj(b,d,e,g,k,p){var q=b.g;b=qd(d,e,g,k,b.G,b.Z);q.moveTo(b[0],b[1]);d=b.length;p&&(d-=2);for(e=2;e<d;e+=2)q.lineTo(b[e],b[e+1]);p&&q.closePath();return g}function Bj(b,d,e,g,k){var p,q;p=0;for(q=g.length;p<q;++p)e=Aj(b,d,e,g[p],k,!0);return e}A=vj.prototype;
A.qe=function(b){if(mc(this.j,b.J())){if(this.f||this.a){this.f&&yj(this,this.f);this.a&&zj(this,this.a);var d;d=this.G;var e=this.Z,g=b.a;d=g?qd(g,0,g.length,b.F,d,e):null;e=d[2]-d[0];g=d[3]-d[1];e=Math.sqrt(e*e+g*g);g=this.g;g.beginPath();g.arc(d[0],d[1],e,0,2*Math.PI);this.f&&g.fill();this.a&&g.stroke()}""!==this.b&&xj(this,Cj(b),2,2)}};A.Cd=function(b){var d=b.a;b=b.F;this.h&&wj(this,d,d.length);""!==this.b&&xj(this,d,d.length,b)};
A.Bd=function(b){var d=b.a;b=b.F;this.h&&wj(this,d,d.length);""!==this.b&&xj(this,d,d.length,b)};A.se=function(b){if(mc(this.j,b.J())){if(this.a){zj(this,this.a);var d=this.g,e=b.a;d.beginPath();Aj(this,e,0,e.length,b.F,!1);d.stroke()}""!==this.b&&(b=Dj(b),xj(this,b,2,2))}};
A.te=function(b){var d=b.J();if(mc(this.j,d)){if(this.a){zj(this,this.a);var d=this.g,e=b.a,g=0,k=b.xc(),p=b.F;d.beginPath();var q,u;q=0;for(u=k.length;q<u;++q)g=Aj(this,e,g,k[q],p,!1);d.stroke()}""!==this.b&&(b=Ej(b),xj(this,b,b.length,2))}};A.ve=function(b){if(mc(this.j,b.J())){if(this.a||this.f){this.f&&yj(this,this.f);this.a&&zj(this,this.a);var d=this.g;d.beginPath();Bj(this,Sd(b),0,b.xc(),b.F);this.f&&d.fill();this.a&&d.stroke()}""!==this.b&&(b=Td(b),xj(this,b,2,2))}};
A.ue=function(b){if(mc(this.j,b.J())){if(this.a||this.f){this.f&&yj(this,this.f);this.a&&zj(this,this.a);var d=this.g,e=Fj(b),g=0,k=b.b,p=b.F,q,u;q=0;for(u=k.length;q<u;++q){var v=k[q];d.beginPath();g=Bj(this,e,g,v,p);this.f&&d.fill();this.a&&d.stroke()}}""!==this.b&&(b=Gj(b),xj(this,b,b.length,2))}};function yj(b,d){var e=b.g,g=b.oa;g?g.fillStyle!=d.fillStyle&&(g.fillStyle=e.fillStyle=d.fillStyle):(e.fillStyle=d.fillStyle,b.oa={fillStyle:d.fillStyle})}
function zj(b,d){var e=b.g,g=b.ja;g?(g.lineCap!=d.lineCap&&(g.lineCap=e.lineCap=d.lineCap),Cf&&!cd(g.U,d.U)&&e.setLineDash(g.U=d.U),g.lineJoin!=d.lineJoin&&(g.lineJoin=e.lineJoin=d.lineJoin),g.lineWidth!=d.lineWidth&&(g.lineWidth=e.lineWidth=d.lineWidth),g.miterLimit!=d.miterLimit&&(g.miterLimit=e.miterLimit=d.miterLimit),g.strokeStyle!=d.strokeStyle&&(g.strokeStyle=e.strokeStyle=d.strokeStyle)):(e.lineCap=d.lineCap,Cf&&e.setLineDash(d.U),e.lineJoin=d.lineJoin,e.lineWidth=d.lineWidth,e.miterLimit=
d.miterLimit,e.strokeStyle=d.strokeStyle,b.ja={lineCap:d.lineCap,U:d.U,lineJoin:d.lineJoin,lineWidth:d.lineWidth,miterLimit:d.miterLimit,strokeStyle:d.strokeStyle})}A.Tb=function(b,d){if(b){var e=b.a;this.f={fillStyle:bj(e?e:cj)}}else this.f=null;if(d){var e=d.h,g=d.a,k=d.j,p=d.f,q=d.i,u=d.b;this.a={lineCap:void 0!==g?g:"round",U:k?k:dj,lineJoin:void 0!==p?p:"round",lineWidth:this.da*(void 0!==q?q:1),miterLimit:void 0!==u?u:10,strokeStyle:nh(e?e:ej)}}else this.a=null};
A.jd=function(b){if(b){var d=b.i,e=b.a,g=b.kb(),k=b.j;this.$=d[0];this.M=d[1];this.P=k[1];this.h=e;this.w=b.s;this.$a=g[0];this.Ia=g[1];this.Ja=b.u;this.ab=b.ha();this.i=b.l;this.ob=b.B;this.V=k[0]}else this.h=null};
A.Eb=function(b){if(b){var d=b.a;d?(d=d.a,this.l={fillStyle:bj(d?d:cj)}):this.l=null;var e=b.R();if(e){var d=e.h,g=e.a,k=e.j,p=e.f,q=e.i,e=e.b;this.u={lineCap:void 0!==g?g:"round",U:k?k:dj,lineJoin:void 0!==p?p:"round",lineWidth:void 0!==q?q:1,miterLimit:void 0!==e?e:10,strokeStyle:nh(d?d:ej)}}else this.u=null;var d=b.ib,g=b.f,k=b.b,p=b.ha(),q=b.g,e=b.I(),u=b.h;b=b.i;this.ca={font:void 0!==d?d:"10px sans-serif",textAlign:void 0!==u?u:"center",textBaseline:void 0!==b?b:"middle"};this.b=void 0!==e?
e:"";this.pb=void 0!==g?this.da*g:0;this.Hb=void 0!==k?this.da*k:0;this.B=void 0!==p?p:0;this.s=this.da*(void 0!==q?q:1)}else this.b=""};function Hj(b){dh.call(this,b);this.V=yb()}R(Hj,dh);
Hj.prototype.j=function(b,d,e){Ij(this,"precompose",e,b,void 0);var g=this.b?this.b.f():null;if(g){var k=d.D,p=void 0!==k;if(p){var q=b.ga,u=b.size[0]*q,v=b.size[1]*q,w=b.L.rotation,z=ec(k),B=[k[2],k[3]],C=[k[2],k[1]],k=dc(k);ch(b.bc,z,z);ch(b.bc,B,B);ch(b.bc,C,C);ch(b.bc,k,k);e.save();fj(e,-w,u/2,v/2);e.beginPath();e.moveTo(z[0]*q,z[1]*q);e.lineTo(B[0]*q,B[1]*q);e.lineTo(C[0]*q,C[1]*q);e.lineTo(k[0]*q,k[1]*q);e.clip();fj(e,w,u/2,v/2)}q=this.u;u=e.globalAlpha;e.globalAlpha=d.opacity;e.drawImage(g,
0,0,+g.width,+g.height,Math.round(q[12]),Math.round(q[13]),Math.round(g.width*q[0]),Math.round(g.height*q[5]));e.globalAlpha=u;p&&e.restore()}Ij(this,"postcompose",e,b,void 0)};function Ij(b,d,e,g,k){var p=b.a;if(hb(p,d)){var q=g.size[0]*g.ga,u=g.size[1]*g.ga,v=g.L.rotation;fj(e,-v,q/2,u/2);b=void 0!==k?k:Jj(b,g,0);new vj(e,g.ga,g.D,b,g.L.rotation);U(p,new Sc(d,p,0,g));fj(e,v,q/2,u/2)}}
function Jj(b,d,e){var g=d.L,k=d.ga;return ah(b.V,k*d.size[0]/2,k*d.size[1]/2,k/g.H,-k/g.H,-g.rotation,-g.T[0]+e,-g.T[1])};var Kj=["Polygon","LineString","Image","Text"];function Lj(b,d,e){this.Ja=b;this.oa=d;this.h=null;this.i=0;this.H=e;this.V=this.P=null;this.b=[];this.f=[];this.ua=yb();this.a=[];this.ja=[];this.$a=yb();this.Ia=yb()}R(Lj,Rc);
function Mj(b,d,e,g,k,p){var q=b.f.length,u=b.Dd(),v=[d[e],d[e+1]],w=[NaN,NaN],z=!0,B,C,D;for(B=e+k;B<g;B+=k)w[0]=d[B],w[1]=d[B+1],D=Yb(u,w),D!==C?(z&&(b.f[q++]=v[0],b.f[q++]=v[1]),b.f[q++]=w[0],b.f[q++]=w[1],z=!1):1===D?(b.f[q++]=w[0],b.f[q++]=w[1],z=!1):z=!0,v[0]=w[0],v[1]=w[1],C=D;B===e+k&&(b.f[q++]=v[0],b.f[q++]=v[1]);p&&(b.f[q++]=d[e],b.f[q++]=d[e+1]);return q}function Nj(b,d){b.P=[0,d,0];b.b.push(b.P);b.V=[0,d,0];b.a.push(b.V)}
function Oj(b,d,e,g,k,p,q,u,v){var w;bh(g,b.ua)?w=b.ja:(w=qd(b.f,0,b.f.length,2,g,b.ja),Cb(b.ua,g));g=!xa(p);var z=0,B=q.length,C=0,D,F=b.$a;b=b.Ia;for(var I,J,M,E;z<B;){var G=q[z],N,P,O,Q;switch(G[0]){case 0:C=G[1];g&&p[L(C).toString()]||!C.C()?z=G[2]:void 0===v||mc(v,C.C().J())?++z:z=G[2];break;case 1:d.beginPath();++z;break;case 2:C=G[1];D=w[C];G=w[C+1];M=w[C+2]-D;C=w[C+3]-G;d.arc(D,G,Math.sqrt(M*M+C*C),0,2*Math.PI,!0);++z;break;case 3:d.closePath();++z;break;case 4:C=G[1];D=G[2];N=G[3];O=G[4]*
e;var V=G[5]*e,K=G[6];P=G[7];var S=G[8],ba=G[9];M=G[11];E=G[12];var Y=G[13],ca=G[14];for(G[10]&&(M+=k);C<D;C+=2){G=w[C]-O;Q=w[C+1]-V;Y&&(G=Math.round(G),Q=Math.round(Q));if(1!=E||0!==M){var X=G+O,ua=Q+V;ah(F,X,ua,E,E,M,-X,-ua);d.transform(F[0],F[1],F[4],F[5],F[12],F[13])}X=d.globalAlpha;1!=P&&(d.globalAlpha=X*P);var ua=ca+S>N.width?N.width-S:ca,Qa=K+ba>N.height?N.height-ba:K;d.drawImage(N,S,ba,ua,Qa,G,Q,ua*e,Qa*e);1!=P&&(d.globalAlpha=X);if(1!=E||0!==M)Eb(F,b),d.transform(b[0],b[1],b[4],b[5],b[12],
b[13])}++z;break;case 5:C=G[1];D=G[2];O=G[3];V=G[4]*e;K=G[5]*e;M=G[6];E=G[7]*e;N=G[8];for(P=G[9];C<D;C+=2){G=w[C]+V;Q=w[C+1]+K;if(1!=E||0!==M)ah(F,G,Q,E,E,M,-G,-Q),d.transform(F[0],F[1],F[4],F[5],F[12],F[13]);S=O.split("\n");ba=S.length;1<ba?(Y=Math.round(1.5*d.measureText("M").width),Q-=(ba-1)/2*Y):Y=0;for(ca=0;ca<ba;ca++)X=S[ca],P&&d.strokeText(X,G,Q),N&&d.fillText(X,G,Q),Q+=Y;if(1!=E||0!==M)Eb(F,b),d.transform(b[0],b[1],b[4],b[5],b[12],b[13])}++z;break;case 6:if(void 0!==u&&(C=G[1],C=u(C)))return C;
++z;break;case 7:d.fill();++z;break;case 8:C=G[1];D=G[2];G=w[C];Q=w[C+1];M=G+.5|0;E=Q+.5|0;if(M!==I||E!==J)d.moveTo(G,Q),I=M,J=E;for(C+=2;C<D;C+=2)if(G=w[C],Q=w[C+1],M=G+.5|0,E=Q+.5|0,M!==I||E!==J)d.lineTo(G,Q),I=M,J=E;++z;break;case 9:d.fillStyle=G[1];++z;break;case 10:I=void 0!==G[7]?G[7]:!0;J=G[2];d.strokeStyle=G[1];d.lineWidth=I?J*e:J;d.lineCap=G[3];d.lineJoin=G[4];d.miterLimit=G[5];Cf&&d.setLineDash(G[6]);J=I=NaN;++z;break;case 11:d.font=G[1];d.textAlign=G[2];d.textBaseline=G[3];++z;break;case 12:d.stroke();
++z;break;default:$a("Unknown canvas render instruction"),++z}}}function Pj(b){var d=b.a;d.reverse();var e,g=d.length,k,p,q=-1;for(e=0;e<g;++e)if(k=d[e],p=k[0],6==p)q=e;else if(0==p){k[2]=e;k=b.a;for(p=e;q<p;){var u=k[q];k[q]=k[p];k[p]=u;++q;--p}q=-1}}function Qj(b,d){b.P[2]=b.b.length;b.P=null;b.V[2]=b.a.length;b.V=null;var e=[6,d];b.b.push(e);b.a.push(e)}Lj.prototype.cd=bb;Lj.prototype.Dd=function(){return this.oa};
function Rj(b,d,e){Lj.call(this,b,d,e);this.s=this.ca=null;this.M=this.$=this.G=this.B=this.da=this.Z=this.w=this.u=this.l=this.j=this.g=void 0}R(Rj,Lj);Rj.prototype.Cd=function(b,d){if(this.s){Nj(this,d);var e=b.a,g=this.f.length,e=Mj(this,e,0,e.length,b.F,!1);this.b.push([4,g,e,this.s,this.g,this.j,this.l,this.u,this.w,this.Z,this.da,this.B,this.G,this.$,this.M]);this.a.push([4,g,e,this.ca,this.g,this.j,this.l,this.u,this.w,this.Z,this.da,this.B,this.G,this.$,this.M]);Qj(this,d)}};
Rj.prototype.Bd=function(b,d){if(this.s){Nj(this,d);var e=b.a,g=this.f.length,e=Mj(this,e,0,e.length,b.F,!1);this.b.push([4,g,e,this.s,this.g,this.j,this.l,this.u,this.w,this.Z,this.da,this.B,this.G,this.$,this.M]);this.a.push([4,g,e,this.ca,this.g,this.j,this.l,this.u,this.w,this.Z,this.da,this.B,this.G,this.$,this.M]);Qj(this,d)}};Rj.prototype.cd=function(){Pj(this);this.j=this.g=void 0;this.s=this.ca=null;this.M=this.$=this.B=this.da=this.Z=this.w=this.u=this.G=this.l=void 0};
Rj.prototype.jd=function(b){var d=b.i,e=b.j,g=b.b,k=b.a,p=b.kb();this.g=d[0];this.j=d[1];this.ca=g;this.s=k;this.l=e[1];this.u=b.s;this.w=p[0];this.Z=p[1];this.da=b.u;this.B=b.ha();this.G=b.l;this.$=b.B;this.M=e[0]};function Sj(b,d,e){Lj.call(this,b,d,e);this.g={wc:void 0,rc:void 0,sc:null,tc:void 0,uc:void 0,vc:void 0,Jd:0,strokeStyle:void 0,lineCap:void 0,U:null,lineJoin:void 0,lineWidth:void 0,miterLimit:void 0}}R(Sj,Lj);
function Tj(b,d,e,g,k){var p=b.f.length;d=Mj(b,d,e,g,k,!1);p=[8,p,d];b.b.push(p);b.a.push(p);return g}A=Sj.prototype;A.Dd=function(){this.h||(this.h=Vb(this.oa),0<this.i&&Ub(this.h,this.H*(this.i+1)/2,this.h));return this.h};
function Uj(b){var d=b.g,e=d.strokeStyle,g=d.lineCap,k=d.U,p=d.lineJoin,q=d.lineWidth,u=d.miterLimit;d.wc==e&&d.rc==g&&cd(d.sc,k)&&d.tc==p&&d.uc==q&&d.vc==u||(d.Jd!=b.f.length&&(b.b.push([12]),d.Jd=b.f.length),b.b.push([10,e,q,g,p,u,k],[1]),d.wc=e,d.rc=g,d.sc=k,d.tc=p,d.uc=q,d.vc=u)}
A.se=function(b,d){var e=this.g,g=e.lineWidth;void 0!==e.strokeStyle&&void 0!==g&&(Uj(this),Nj(this,d),this.a.push([10,e.strokeStyle,e.lineWidth,e.lineCap,e.lineJoin,e.miterLimit,e.U],[1]),e=b.a,Tj(this,e,0,e.length,b.F),this.a.push([12]),Qj(this,d))};
A.te=function(b,d){var e=this.g,g=e.lineWidth;if(void 0!==e.strokeStyle&&void 0!==g){Uj(this);Nj(this,d);this.a.push([10,e.strokeStyle,e.lineWidth,e.lineCap,e.lineJoin,e.miterLimit,e.U],[1]);var e=b.xc(),g=b.a,k=b.F,p=0,q,u;q=0;for(u=e.length;q<u;++q)p=Tj(this,g,p,e[q],k);this.a.push([12]);Qj(this,d)}};A.cd=function(){this.g.Jd!=this.f.length&&this.b.push([12]);Pj(this);this.g=null};
A.Tb=function(b,d){var e=d.h;this.g.strokeStyle=nh(e?e:ej);e=d.a;this.g.lineCap=void 0!==e?e:"round";e=d.j;this.g.U=e?e:dj;e=d.f;this.g.lineJoin=void 0!==e?e:"round";e=d.i;this.g.lineWidth=void 0!==e?e:1;e=d.b;this.g.miterLimit=void 0!==e?e:10;this.g.lineWidth>this.i&&(this.i=this.g.lineWidth,this.h=null)};
function Vj(b,d,e){Lj.call(this,b,d,e);this.g={oe:void 0,wc:void 0,rc:void 0,sc:null,tc:void 0,uc:void 0,vc:void 0,fillStyle:void 0,strokeStyle:void 0,lineCap:void 0,U:null,lineJoin:void 0,lineWidth:void 0,miterLimit:void 0}}R(Vj,Lj);
function Wj(b,d,e,g,k){var p=b.g,q=[1];b.b.push(q);b.a.push(q);var u,q=0;for(u=g.length;q<u;++q){var v=g[q],w=b.f.length;e=Mj(b,d,e,v,k,!0);e=[8,w,e];w=[3];b.b.push(e,w);b.a.push(e,w);e=v}d=[7];b.a.push(d);void 0!==p.fillStyle&&b.b.push(d);void 0!==p.strokeStyle&&(p=[12],b.b.push(p),b.a.push(p));return e}A=Vj.prototype;
A.qe=function(b,d){var e=this.g,g=e.strokeStyle;if(void 0!==e.fillStyle||void 0!==g){Xj(this);Nj(this,d);this.a.push([9,nh(cj)]);void 0!==e.strokeStyle&&this.a.push([10,e.strokeStyle,e.lineWidth,e.lineCap,e.lineJoin,e.miterLimit,e.U]);var k=b.a,g=this.f.length;Mj(this,k,0,k.length,b.F,!1);k=[1];g=[2,g];this.b.push(k,g);this.a.push(k,g);g=[7];this.a.push(g);void 0!==e.fillStyle&&this.b.push(g);void 0!==e.strokeStyle&&(e=[12],this.b.push(e),this.a.push(e));Qj(this,d)}};
A.ve=function(b,d){var e=this.g,g=e.strokeStyle;if(void 0!==e.fillStyle||void 0!==g)Xj(this),Nj(this,d),this.a.push([9,nh(cj)]),void 0!==e.strokeStyle&&this.a.push([10,e.strokeStyle,e.lineWidth,e.lineCap,e.lineJoin,e.miterLimit,e.U]),e=b.xc(),g=Sd(b),Wj(this,g,0,e,b.F),Qj(this,d)};
A.ue=function(b,d){var e=this.g,g=e.strokeStyle;if(void 0!==e.fillStyle||void 0!==g){Xj(this);Nj(this,d);this.a.push([9,nh(cj)]);void 0!==e.strokeStyle&&this.a.push([10,e.strokeStyle,e.lineWidth,e.lineCap,e.lineJoin,e.miterLimit,e.U]);var e=b.b,g=Fj(b),k=b.F,p=0,q,u;q=0;for(u=e.length;q<u;++q)p=Wj(this,g,p,e[q],k);Qj(this,d)}};A.cd=function(){Pj(this);this.g=null;var b=this.Ja;if(0!==b){var d=this.f,e,g;e=0;for(g=d.length;e<g;++e)d[e]=b*Math.round(d[e]/b)}};
A.Dd=function(){this.h||(this.h=Vb(this.oa),0<this.i&&Ub(this.h,this.H*(this.i+1)/2,this.h));return this.h};
A.Tb=function(b,d){var e=this.g;if(b){var g=b.a;e.fillStyle=bj(g?g:cj)}else e.fillStyle=void 0;d?(g=d.h,e.strokeStyle=nh(g?g:ej),g=d.a,e.lineCap=void 0!==g?g:"round",g=d.j,e.U=g?g.slice():dj,g=d.f,e.lineJoin=void 0!==g?g:"round",g=d.i,e.lineWidth=void 0!==g?g:1,g=d.b,e.miterLimit=void 0!==g?g:10,e.lineWidth>this.i&&(this.i=e.lineWidth,this.h=null)):(e.strokeStyle=void 0,e.lineCap=void 0,e.U=null,e.lineJoin=void 0,e.lineWidth=void 0,e.miterLimit=void 0)};
function Xj(b){var d=b.g,e=d.fillStyle,g=d.strokeStyle,k=d.lineCap,p=d.U,q=d.lineJoin,u=d.lineWidth,v=d.miterLimit;void 0!==e&&d.oe!=e&&(b.b.push([9,e]),d.oe=d.fillStyle);void 0===g||d.wc==g&&d.rc==k&&d.sc==p&&d.tc==q&&d.uc==u&&d.vc==v||(b.b.push([10,g,u,k,q,v,p]),d.wc=g,d.rc=k,d.sc=p,d.tc=q,d.uc=u,d.vc=v)}function Yj(b,d,e){Lj.call(this,b,d,e);this.$=this.G=this.B=null;this.s="";this.da=this.Z=this.w=this.u=0;this.l=this.j=this.g=null}R(Yj,Lj);
function Zj(b,d,e,g,k){if(""!==b.s&&b.l&&(b.g||b.j)){if(b.g){var p=b.g,q=b.B;if(!q||q.fillStyle!=p.fillStyle){var u=[9,p.fillStyle];b.b.push(u);b.a.push(u);q?q.fillStyle=p.fillStyle:b.B={fillStyle:p.fillStyle}}}b.j&&(p=b.j,q=b.G,q&&q.lineCap==p.lineCap&&q.U==p.U&&q.lineJoin==p.lineJoin&&q.lineWidth==p.lineWidth&&q.miterLimit==p.miterLimit&&q.strokeStyle==p.strokeStyle||(u=[10,p.strokeStyle,p.lineWidth,p.lineCap,p.lineJoin,p.miterLimit,p.U,!1],b.b.push(u),b.a.push(u),q?(q.lineCap=p.lineCap,q.U=p.U,
q.lineJoin=p.lineJoin,q.lineWidth=p.lineWidth,q.miterLimit=p.miterLimit,q.strokeStyle=p.strokeStyle):b.G={lineCap:p.lineCap,U:p.U,lineJoin:p.lineJoin,lineWidth:p.lineWidth,miterLimit:p.miterLimit,strokeStyle:p.strokeStyle}));p=b.l;q=b.$;q&&q.font==p.font&&q.textAlign==p.textAlign&&q.textBaseline==p.textBaseline||(u=[11,p.font,p.textAlign,p.textBaseline],b.b.push(u),b.a.push(u),q?(q.font=p.font,q.textAlign=p.textAlign,q.textBaseline=p.textBaseline):b.$={font:p.font,textAlign:p.textAlign,textBaseline:p.textBaseline});
Nj(b,k);p=b.f.length;d=Mj(b,d,0,e,g,!1);d=[5,p,d,b.s,b.u,b.w,b.Z,b.da,!!b.g,!!b.j];b.b.push(d);b.a.push(d);Qj(b,k)}}
Yj.prototype.Eb=function(b){if(b){var d=b.a;d?(d=d.a,d=bj(d?d:cj),this.g?this.g.fillStyle=d:this.g={fillStyle:d}):this.g=null;var e=b.R();if(e){var d=e.h,g=e.a,k=e.j,p=e.f,q=e.i,e=e.b,g=void 0!==g?g:"round",k=k?k.slice():dj,p=void 0!==p?p:"round",q=void 0!==q?q:1,e=void 0!==e?e:10,d=nh(d?d:ej);if(this.j){var u=this.j;u.lineCap=g;u.U=k;u.lineJoin=p;u.lineWidth=q;u.miterLimit=e;u.strokeStyle=d}else this.j={lineCap:g,U:k,lineJoin:p,lineWidth:q,miterLimit:e,strokeStyle:d}}else this.j=null;var v=b.ib,
d=b.f,g=b.b,k=b.ha(),q=b.g,e=b.I(),p=b.h,u=b.i;b=void 0!==v?v:"10px sans-serif";p=void 0!==p?p:"center";u=void 0!==u?u:"middle";this.l?(v=this.l,v.font=b,v.textAlign=p,v.textBaseline=u):this.l={font:b,textAlign:p,textBaseline:u};this.s=void 0!==e?e:"";this.u=void 0!==d?d:0;this.w=void 0!==g?g:0;this.Z=void 0!==k?k:0;this.da=void 0!==q?q:1}else this.s=""};function ak(b,d,e,g){this.w=b;this.i=d;this.u=e;this.j=g;this.f={};this.l=pf(1,1);this.s=yb()}
function bk(b){for(var d in b.f){var e=b.f[d],g;for(g in e)e[g].cd()}}ak.prototype.h=function(b,d,e,g,k){var p=this.s;ah(p,.5,.5,1/d,-1/d,-e,-b[0],-b[1]);var q=this.l;q.clearRect(0,0,1,1);var u;void 0!==this.j&&(u=Sb(),Tb(u,b),Ub(u,d*this.j,u));return ck(this,q,p,e,g,function(b){if(0<q.getImageData(0,0,1,1).data[3]){if(b=k(b))return b;q.clearRect(0,0,1,1)}},u)};
ak.prototype.a=function(b,d){var e=void 0!==b?b.toString():"0",g=this.f[e];void 0===g&&(g={},this.f[e]=g);e=g[d];void 0===e&&(e=new dk[d](this.w,this.i,this.u),g[d]=e);return e};ak.prototype.g=function(){return xa(this.f)};
ak.prototype.b=function(b,d,e,g,k,p){var q=Object.keys(this.f).map(Number);q.sort(Zc);if(!1!==p){var u=this.i;p=u[0];var v=u[1],w=u[2],u=u[3];p=[p,v,p,u,w,u,w,v];qd(p,0,8,2,e,p);b.save();b.beginPath();b.moveTo(p[0],p[1]);b.lineTo(p[2],p[3]);b.lineTo(p[4],p[5]);b.lineTo(p[6],p[7]);b.closePath();b.clip()}var z,B;p=0;for(v=q.length;p<v;++p)for(z=this.f[q[p].toString()],w=0,u=Kj.length;w<u;++w)B=z[Kj[w]],void 0!==B&&Oj(B,b,d,e,g,k,B.b,void 0);b.restore()};
function ck(b,d,e,g,k,p,q){var u=Object.keys(b.f).map(Number);u.sort(function(b,d){return d-b});var v,w,z,B,C;v=0;for(w=u.length;v<w;++v)for(B=b.f[u[v].toString()],z=Kj.length-1;0<=z;--z)if(C=B[Kj[z]],void 0!==C&&(C=Oj(C,d,1,e,g,k,C.a,p,q)))return C}var dk={Image:Rj,LineString:Sj,Polygon:Vj,Text:Yj};function ek(b,d){return L(b)-L(d)}function fk(b,d){var e=.5*b/d;return e*e}function gk(b,d,e,g,k,p){var q;(q=e.g)&&q.Yh(k,p);if(k=(0,e.b)(d))g=td(k,g),(0,hk[g.ka()])(b,g,e,d);return!1}
var hk={Point:function(b,d,e,g){var k=e.g;if(k){var p=b.a(e.a,"Image");p.jd(k);p.Cd(d,g)}if(k=e.I())b=b.a(e.a,"Text"),b.Eb(k),Zj(b,d.a,2,2,g)},LineString:function(b,d,e,g){var k=e.R();if(k){var p=b.a(e.a,"LineString");p.Tb(null,k);p.se(d,g)}if(k=e.I())b=b.a(e.a,"Text"),b.Eb(k),Zj(b,Dj(d),2,2,g)},Polygon:function(b,d,e,g){var k=e.f,p=e.R();if(k||p){var q=b.a(e.a,"Polygon");q.Tb(k,p);q.ve(d,g)}if(k=e.I())b=b.a(e.a,"Text"),b.Eb(k),Zj(b,Td(d),2,2,g)},MultiPoint:function(b,d,e,g){var k=e.g;if(k){var p=
b.a(e.a,"Image");p.jd(k);p.Bd(d,g)}if(k=e.I())b=b.a(e.a,"Text"),b.Eb(k),e=d.a,Zj(b,e,e.length,d.F,g)},MultiLineString:function(b,d,e,g){var k=e.R();if(k){var p=b.a(e.a,"LineString");p.Tb(null,k);p.te(d,g)}if(k=e.I())b=b.a(e.a,"Text"),b.Eb(k),d=Ej(d),Zj(b,d,d.length,2,g)},MultiPolygon:function(b,d,e,g){var k=e.f,p=e.R();if(p||k){var q=b.a(e.a,"Polygon");q.Tb(k,p);q.ue(d,g)}if(k=e.I())b=b.a(e.a,"Text"),b.Eb(k),d=Gj(d),Zj(b,d,d.length,2,g)},GeometryCollection:function(b,d,e,g){d=d.Mf();var k,p;k=0;for(p=
d.length;k<p;++k)(0,hk[d[k].ka()])(b,d[k],e,g)},Circle:function(b,d,e,g){var k=e.f,p=e.R();if(k||p){var q=b.a(e.a,"Polygon");q.Tb(k,p);q.qe(d,g)}if(k=e.I())b=b.a(e.a,"Text"),b.Eb(k),Zj(b,Cj(d),2,2,g)}};var ik=!me()||ge("iPhone")&&!ge("iPod")&&!ge("iPad")||ge("iPad")||ge("iPod");function jk(b,d,e,g){var k;k=Gc(d,b)(e,void 0,e.length);e=d.cc(g,e);d=yc(d);void 0!==d&&(e*=d);d=yc(b);void 0!==d&&(e/=d);b=b.cc(e,k)/e;isFinite(b)&&0<b&&(e/=b);return e}function kk(b,d,e,g){b=e-b;d=g-d;var k=Math.sqrt(b*b+d*d);return[Math.round(e+b/k),Math.round(g+d/k)]}
function lk(b,d,e,g,k,p,q,u,v,w,z){var B=pf(Math.round(e*b),Math.round(e*d));if(0===v.length)return B.canvas;B.scale(e,e);var C=Sb();v.forEach(function(b){b=b.D;b[0]<C[0]&&(C[0]=b[0]);b[2]>C[2]&&(C[2]=b[2]);b[1]<C[1]&&(C[1]=b[1]);b[3]>C[3]&&(C[3]=b[3])});var D=pf(Math.round(e*hc(C)/g),Math.round(e*ic(C)/g)),F=e/g;v.forEach(function(b){D.drawImage(b.Qa,w,w,b.Qa.width-2*w,b.Qa.height-2*w,(b.D[0]-C[0])*F,-(b.D[3]-C[3])*F,hc(b.D)*F,ic(b.D)*F)});var I=ec(q);u.g.forEach(function(b){var d=b.source,k=b.target,
q=d[1][0],u=d[1][1],v=d[2][0],w=d[2][1];b=(k[0][0]-I[0])/p;var z=-(k[0][1]-I[1])/p,F=(k[1][0]-I[0])/p,K=-(k[1][1]-I[1])/p,S=(k[2][0]-I[0])/p,ba=-(k[2][1]-I[1])/p,k=d[0][0],d=d[0][1],q=q-k,u=u-d,v=v-k,w=w-d;a:{q=[[q,u,0,0,F-b],[v,w,0,0,S-b],[0,0,q,u,K-z],[0,0,v,w,ba-z]];u=q.length;for(v=0;v<u;v++);for(v=0;v<u;v++){for(var w=v,Y=Math.abs(q[v][v]),ca=v+1;ca<u;ca++){var X=Math.abs(q[ca][v]);X>Y&&(Y=X,w=ca)}if(0===Y){q=null;break a}Y=q[w];q[w]=q[v];q[v]=Y;for(w=v+1;w<u;w++)for(Y=-q[w][v]/q[v][v],ca=v;ca<
u+1;ca++)q[w][ca]=v==ca?0:q[w][ca]+Y*q[v][ca]}v=Array(u);for(w=u-1;0<=w;w--)for(v[w]=q[w][u]/q[w][w],Y=w-1;0<=Y;Y--)q[Y][u]-=q[Y][w]*v[w];q=v}q&&(B.save(),B.beginPath(),ik?(v=(b+F+S)/3,w=(z+K+ba)/3,u=kk(v,w,b,z),F=kk(v,w,F,K),S=kk(v,w,S,ba),B.moveTo(u[0],u[1]),B.lineTo(F[0],F[1]),B.lineTo(S[0],S[1])):(B.moveTo(b,z),B.lineTo(F,K),B.lineTo(S,ba)),B.closePath(),B.clip(),B.transform(q[0],q[2],q[1],q[3],b,z),B.translate(C[0]-k,C[3]-d),B.scale(g/e,-g/e),B.drawImage(D.canvas,0,0),B.restore())});z&&(B.save(),
B.strokeStyle="black",B.lineWidth=1,u.g.forEach(function(b){var d=b.target;b=(d[0][0]-I[0])/p;var e=-(d[0][1]-I[1])/p,g=(d[1][0]-I[0])/p,k=-(d[1][1]-I[1])/p,q=(d[2][0]-I[0])/p,d=-(d[2][1]-I[1])/p;B.beginPath();B.moveTo(b,e);B.lineTo(g,k);B.lineTo(q,d);B.closePath();B.stroke()}),B.restore());return B.canvas};function mk(b,d,e,g,k){this.b=b;this.h=d;var p={},q=Gc(this.h,this.b);this.f=function(b){var d=b[0]+"/"+b[1];p[d]||(p[d]=q(b));return p[d]};this.i=g;this.u=k*k;this.g=[];this.l=!1;this.s=this.b.ac&&!!g&&!!this.b.J()&&hc(g)==hc(this.b.J());this.a=this.b.J()?hc(this.b.J()):null;this.j=this.h.J()?hc(this.h.J()):null;b=ec(e);d=[e[2],e[3]];g=[e[2],e[1]];e=dc(e);k=this.f(b);var u=this.f(d),v=this.f(g),w=this.f(e);nk(this,b,d,g,e,k,u,v,w,10);if(this.l){var z=Infinity;this.g.forEach(function(b){z=Math.min(z,
b.source[0][0],b.source[1][0],b.source[2][0])});this.g.forEach(function(b){if(Math.max(b.source[0][0],b.source[1][0],b.source[2][0])-z>this.a/2){var d=[[b.source[0][0],b.source[0][1]],[b.source[1][0],b.source[1][1]],[b.source[2][0],b.source[2][1]]];d[0][0]-z>this.a/2&&(d[0][0]-=this.a);d[1][0]-z>this.a/2&&(d[1][0]-=this.a);d[2][0]-z>this.a/2&&(d[2][0]-=this.a);Math.max(d[0][0],d[1][0],d[2][0])-Math.min(d[0][0],d[1][0],d[2][0])<this.a/2&&(b.source=d)}},this)}p={}}
function nk(b,d,e,g,k,p,q,u,v,w){var z=Rb([p,q,u,v]),B=b.a?hc(z)/b.a:null,C=b.b.ac&&.5<B&&1>B,D=!1;if(0<w){if(b.h.b&&b.j)var F=Rb([d,e,g,k]),D=D|.25<hc(F)/b.j;!C&&b.b.b&&B&&(D|=.25<B)}if(D||!b.i||mc(z,b.i)){if(!(D||isFinite(p[0])&&isFinite(p[1])&&isFinite(q[0])&&isFinite(q[1])&&isFinite(u[0])&&isFinite(u[1])&&isFinite(v[0])&&isFinite(v[1])))if(0<w)D=!0;else return;if(0<w&&(D||(B=b.f([(d[0]+g[0])/2,(d[1]+g[1])/2]),z=C?(Kb(p[0],b.a)+Kb(u[0],b.a))/2-Kb(B[0],b.a):(p[0]+u[0])/2-B[0],B=(p[1]+u[1])/2-B[1],
D=z*z+B*B>b.u),D)){Math.abs(d[0]-g[0])<=Math.abs(d[1]-g[1])?(C=[(e[0]+g[0])/2,(e[1]+g[1])/2],z=b.f(C),B=[(k[0]+d[0])/2,(k[1]+d[1])/2],D=b.f(B),nk(b,d,e,C,B,p,q,z,D,w-1),nk(b,B,C,g,k,D,z,u,v,w-1)):(C=[(d[0]+e[0])/2,(d[1]+e[1])/2],z=b.f(C),B=[(g[0]+k[0])/2,(g[1]+k[1])/2],D=b.f(B),nk(b,d,C,B,k,p,z,D,v,w-1),nk(b,C,e,g,B,z,q,u,D,w-1));return}if(C){if(!b.s)return;b.l=!0}b.g.push({source:[p,u,v],target:[d,g,k]});b.g.push({source:[p,q,u],target:[d,e,g]})}}
function ok(b){var d=Sb();b.g.forEach(function(b){b=b.source;Tb(d,b[0]);Tb(d,b[1]);Tb(d,b[2])});return d};function pk(b,d,e,g,k,p){this.u=d;this.s=b.J();var q=d.J(),u=q?lc(e,q):e,q=jk(b,d,jc(u),g);this.i=new mk(b,d,u,this.s,.5*q);this.b=g;this.a=e;b=ok(this.i);this.j=(this.Xa=p(b,q,k))?this.Xa.h:1;this.Lc=this.g=null;k=2;p=[];this.Xa&&(k=0,p=this.Xa.jb());Ag.call(this,e,g,this.j,k,p)}R(pk,Ag);pk.prototype.aa=function(){1==this.state&&(Aa(this.Lc),this.Lc=null);pk.za.aa.call(this)};pk.prototype.f=function(){return this.g};
pk.prototype.Ic=function(){var b=this.Xa.W();2==b&&(this.g=lk(hc(this.a)/this.b,ic(this.a)/this.b,this.j,this.Xa.O(),0,this.b,this.a,this.i,[{D:this.Xa.J(),Qa:this.Xa.f()}],0));this.state=b;this.A()};pk.prototype.load=function(){if(0==this.state){this.state=1;this.A();var b=this.Xa.W();2==b||3==b?this.Ic():(this.Lc=T(this.Xa,"change",function(){var b=this.Xa.W();if(2==b||3==b)Aa(this.Lc),this.Lc=null,this.Ic()},this),this.Xa.load())}};function qk(b){Nc.call(this,{xa:b.xa,D:b.D,Ea:b.Ea,ba:b.ba,state:b.state});this.Sb=void 0!==b.xb?b.xb:null;this.a=null;this.i=0}R(qk,Nc);function rk(b,d,e,g,k){var p=b.l;if(p&&k&&!Fc(p,k)){if(b.a){if(b.i==b.f&&Fc(b.a.u,k)&&b.a.O()==e&&b.a.h==g&&ac(b.a.J(),d))return b.a;b.a.qa();b.a=null}b.a=new pk(p,k,d,e,g,function(b){return sk(this,b)}.bind(b));b.i=b.f;return b.a}p&&(k=p);return sk(b,d)}
qk.prototype.g=function(b){b=b.target;switch(b.W()){case 1:U(this,new tk(uk,b));break;case 2:U(this,new tk(vk,b));break;case 3:U(this,new tk(wk,b))}};function xk(b,d){b.f().src=d}function tk(b,d){db.call(this,b);this.Qa=d}R(tk,db);var uk="imageloadstart",vk="imageloadend",wk="imageloaderror";function yk(b){lb.call(this);this.va=void 0;this.b="geometry";this.a=null;this.h=void 0;this.g=null;T(this,ob(this.b),this.Zc,this);void 0!==b&&(b instanceof pd||!b?zk(this,b):mb(this,b))}R(yk,lb);A=yk.prototype;A.clone=function(){var b=new yk(ta({},this.$));Ak(b,this.b);var d=this.C();d&&zk(b,d.clone());(d=this.a)&&Bk(b,d);return b};A.C=function(){return this.get(this.b)};A.Da=function(){return this.va};A.Uf=function(){this.A()};
A.Zc=function(){this.g&&(Aa(this.g),this.g=null);var b=this.C();b&&(this.g=T(b,"change",this.Uf,this));this.A()};function zk(b,d){b.set(b.b,d)}function Bk(b,d){b.a=d;b.h=d?Ck(d):void 0;b.A()}function Ak(b,d){Fa(b,ob(b.b),b.Zc,b);b.b=d;T(b,ob(b.b),b.Zc,b);b.Zc()}function Ck(b){if(!ja(b)){var d;d=Array.isArray(b)?b:[b];b=function(){return d}}return b};function Dk(b,d,e){return function(g,k,p){var q=new XMLHttpRequest;q.open("GET",ja(b)?b(g,k,p):b,!0);"arraybuffer"==d.ka()&&(q.responseType="arraybuffer");q.onload=function(){if(200<=q.status&&300>q.status){var b=d.ka(),g;"json"==b||"text"==b?g=q.responseText:"xml"==b?(g=q.responseXML,g||(b=q.responseText,g=(new DOMParser).parseFromString(b,"application/xml"))):"arraybuffer"==b?g=q.response:$a("unexpected format type");g?e.call(this,d.Ki(g,{Fi:p}),d.Li(g)):$a("undefined or null source")}}.bind(this);
q.send()}}function Ek(b,d){return Dk(b,d,function(b){this.yb(b)})};function Fk(){return[[-Infinity,-Infinity,Infinity,Infinity]]};var Gk;
(function(){var b={we:{}};(function(){function d(b,e){if(!(this instanceof d))return new d(b,e);this.qd=Math.max(4,b||9);this.de=Math.max(2,Math.ceil(.4*this.qd));e&&this.ff(e);this.clear()}function e(b,d){b.pa=g(b,0,b.children.length,d)}function g(b,d,e,g){for(var p=[Infinity,Infinity,-Infinity,-Infinity],q;d<e;d++)q=b.children[d],k(p,b.Ba?g(q):q.pa);return p}function k(b,d){b[0]=Math.min(b[0],d[0]);b[1]=Math.min(b[1],d[1]);b[2]=Math.max(b[2],d[2]);b[3]=Math.max(b[3],d[3])}function p(b,d){return b.pa[0]-d.pa[0]}
function q(b,d){return b.pa[1]-d.pa[1]}function u(b){return(b[2]-b[0])*(b[3]-b[1])}function v(b){return b[2]-b[0]+(b[3]-b[1])}function w(b,d){return b[0]<=d[0]&&b[1]<=d[1]&&d[2]<=b[2]&&d[3]<=b[3]}function z(b,d){return d[0]<=b[2]&&d[1]<=b[3]&&d[2]>=b[0]&&d[3]>=b[1]}function B(b,d,e,g,k){for(var p=[d,e],q;p.length;)e=p.pop(),d=p.pop(),e-d<=g||(q=d+Math.ceil((e-d)/g/2)*g,C(b,d,e,q,k),p.push(d,q,q,e))}function C(b,d,e,g,k){for(var p,q,u,v,w;e>d;){600<e-d&&(p=e-d+1,q=g-d+1,u=Math.log(p),v=.5*Math.exp(2*
u/3),w=.5*Math.sqrt(u*v*(p-v)/p)*(0>q-p/2?-1:1),u=Math.max(d,Math.floor(g-q*v/p+w)),q=Math.min(e,Math.floor(g+(p-q)*v/p+w)),C(b,u,q,g,k));p=b[g];q=d;v=e;D(b,d,g);for(0<k(b[e],p)&&D(b,d,e);q<v;){D(b,q,v);q++;for(v--;0>k(b[q],p);)q++;for(;0<k(b[v],p);)v--}0===k(b[d],p)?D(b,d,v):(v++,D(b,v,e));v<=g&&(d=v+1);g<=v&&(e=v-1)}}function D(b,d,e){var g=b[d];b[d]=b[e];b[e]=g}d.prototype={all:function(){return this.$d(this.data,[])},search:function(b){var d=this.data,e=[],g=this.Ua;if(!z(b,d.pa))return e;for(var k=
[],p,q,u,v;d;){p=0;for(q=d.children.length;p<q;p++)u=d.children[p],v=d.Ba?g(u):u.pa,z(b,v)&&(d.Ba?e.push(u):w(b,v)?this.$d(u,e):k.push(u));d=k.pop()}return e},load:function(b){if(!b||!b.length)return this;if(b.length<this.de){for(var d=0,e=b.length;d<e;d++)this.Ga(b[d]);return this}b=this.be(b.slice(),0,b.length-1,0);this.data.children.length?this.data.height===b.height?this.ee(this.data,b):(this.data.height<b.height&&(d=this.data,this.data=b,b=d),this.ce(b,this.data.height-b.height-1,!0)):this.data=
b;return this},Ga:function(b){b&&this.ce(b,this.data.height-1);return this},clear:function(){this.data={children:[],height:1,pa:[Infinity,Infinity,-Infinity,-Infinity],Ba:!0};return this},remove:function(b){if(!b)return this;for(var d=this.data,e=this.Ua(b),g=[],k=[],p,q,u,v;d||g.length;){d||(d=g.pop(),q=g[g.length-1],p=k.pop(),v=!0);if(d.Ba&&(u=d.children.indexOf(b),-1!==u)){d.children.splice(u,1);g.push(d);this.ef(g);break}v||d.Ba||!w(d.pa,e)?q?(p++,d=q.children[p],v=!1):d=null:(g.push(d),k.push(p),
p=0,q=d,d=d.children[0])}return this},Ua:function(b){return b},vd:function(b,d){return b[0]-d[0]},wd:function(b,d){return b[1]-d[1]},toJSON:function(){return this.data},$d:function(b,d){for(var e=[];b;)b.Ba?d.push.apply(d,b.children):e.push.apply(e,b.children),b=e.pop();return d},be:function(b,d,g,k){var p=g-d+1,q=this.qd,u;if(p<=q)return u={children:b.slice(d,g+1),height:1,pa:null,Ba:!0},e(u,this.Ua),u;k||(k=Math.ceil(Math.log(p)/Math.log(q)),q=Math.ceil(p/Math.pow(q,k-1)));u={children:[],height:k,
pa:null,Ba:!1};var p=Math.ceil(p/q),q=p*Math.ceil(Math.sqrt(q)),v,w,z;for(B(b,d,g,q,this.vd);d<=g;d+=q)for(w=Math.min(d+q-1,g),B(b,d,w,p,this.wd),v=d;v<=w;v+=p)z=Math.min(v+p-1,w),u.children.push(this.be(b,v,z,k-1));e(u,this.Ua);return u},df:function(b,d,e,g){for(var k,p,q,v,w,z,B,C;;){g.push(d);if(d.Ba||g.length-1===e)break;B=C=Infinity;k=0;for(p=d.children.length;k<p;k++)q=d.children[k],w=u(q.pa),z=q.pa,z=(Math.max(z[2],b[2])-Math.min(z[0],b[0]))*(Math.max(z[3],b[3])-Math.min(z[1],b[1]))-w,z<C?
(C=z,B=w<B?w:B,v=q):z===C&&w<B&&(B=w,v=q);d=v}return d},ce:function(b,d,e){var g=this.Ua;e=e?b.pa:g(b);var g=[],p=this.df(e,this.data,d,g);p.children.push(b);for(k(p.pa,e);0<=d;)if(g[d].children.length>this.qd)this.gf(g,d),d--;else break;this.af(e,g,d)},gf:function(b,d){var g=b[d],k=g.children.length,p=this.de;this.bf(g,p,k);k=this.cf(g,p,k);k={children:g.children.splice(k,g.children.length-k),height:g.height,pa:null,Ba:!1};g.Ba&&(k.Ba=!0);e(g,this.Ua);e(k,this.Ua);d?b[d-1].children.push(k):this.ee(g,
k)},ee:function(b,d){this.data={children:[b,d],height:b.height+1,pa:null,Ba:!1};e(this.data,this.Ua)},cf:function(b,d,e){var k,p,q,v,w,z,B;w=z=Infinity;for(k=d;k<=e-d;k++)p=g(b,0,k,this.Ua),q=g(b,k,e,this.Ua),v=Math.max(0,Math.min(p[2],q[2])-Math.max(p[0],q[0]))*Math.max(0,Math.min(p[3],q[3])-Math.max(p[1],q[1])),p=u(p)+u(q),v<w?(w=v,B=k,z=p<z?p:z):v===w&&p<z&&(z=p,B=k);return B},bf:function(b,d,e){var g=b.Ba?this.vd:p,k=b.Ba?this.wd:q,u=this.ae(b,d,e,g);d=this.ae(b,d,e,k);u<d&&b.children.sort(g)},
ae:function(b,d,e,p){b.children.sort(p);p=this.Ua;var q=g(b,0,d,p),u=g(b,e-d,e,p),w=v(q)+v(u),z,B;for(z=d;z<e-d;z++)B=b.children[z],k(q,b.Ba?p(B):B.pa),w+=v(q);for(z=e-d-1;z>=d;z--)B=b.children[z],k(u,b.Ba?p(B):B.pa),w+=v(u);return w},af:function(b,d,e){for(;0<=e;e--)k(d[e].pa,b)},ef:function(b){for(var d=b.length-1,g;0<=d;d--)0===b[d].children.length?0<d?(g=b[d-1].children,g.splice(g.indexOf(b[d]),1)):this.clear():e(b[d],this.Ua)},ff:function(b){var d=["return a"," - b",";"];this.vd=new Function("a",
"b",d.join(b[0]));this.wd=new Function("a","b",d.join(b[1]));this.Ua=new Function("a","return [a"+b.join(", a")+"];")}};"undefined"!==typeof b?b.we=d:"undefined"!==typeof self?self.a=d:window.a=d})();Gk=b.we})();function Hk(b){this.Sa=Gk(b);this.f={};this.a=0}A=Hk.prototype;A.Ga=function(b,d){if(this.a)throw Error("Can not insert value while reading");var e=[b[0],b[1],b[2],b[3],d];this.Sa.Ga(e);this.f[L(d)]=e};A.load=function(b,d){if(this.a)throw Error("Can not insert values while reading");for(var e=Array(d.length),g=0,k=d.length;g<k;g++){var p=b[g],q=d[g],p=[p[0],p[1],p[2],p[3],q];e[g]=p;this.f[L(q)]=p}this.Sa.load(e)};
A.remove=function(b){if(this.a)throw Error("Can not remove value while reading");b=L(b);var d=this.f[b];delete this.f[b];return null!==this.Sa.remove(d)};function Ik(b,d,e){var g=L(e);if(!ac(b.f[g].slice(0,4),d)){if(b.a)throw Error("Can not update extent while reading");b.remove(e);b.Ga(d,e)}}A.getAll=function(){return this.Sa.all().map(function(b){return b[4]})};function Jk(b,d){return b.Sa.search(d).map(function(b){return b[4]})}A.forEach=function(b,d){++this.a;try{return Kk(this.getAll(),b,d)}finally{--this.a}};
function Lk(b,d,e,g){++b.a;try{return Kk(Jk(b,d),e,g)}finally{--b.a}}function Kk(b,d,e){for(var g,k=0,p=b.length;k<p&&!(g=d.call(e,b[k]));k++);return g}A.clear=function(){this.Sa.clear();this.f={}};A.J=function(){return this.Sa.data.pa};function Mk(b){b=b||{};Nc.call(this,{xa:b.xa,Ea:b.Ea,ba:void 0,state:"ready",Ma:void 0!==b.Ma?b.Ma:!0});this.V=bb;this.Ia=b.format;this.ca=b.url;void 0!==b.zg?this.V=b.zg:void 0!==this.ca&&(this.V=Ek(this.ca,this.Ia));this.ab=void 0!==b.Ph?b.Ph:Fk;var d=void 0!==b.md?b.md:!0;this.a=d?new Hk:null;this.M=new Hk;this.h={};this.g={};this.u={};this.w={};this.j=null;var e,g;b.Pa instanceof qb?(e=b.Pa,g=e.a):Array.isArray(b.Pa)&&(g=b.Pa);d||void 0!==e||(e=new qb(g));void 0!==g&&Nk(this,g);void 0!==e&&Ok(this,
e)}R(Mk,Nc);A=Mk.prototype;A.pc=function(b){Pk(this,b);this.A()};function Pk(b,d){var e=L(d).toString();if(Qk(b,e,d)){Rk(b,e,d);var g=d.C();g?(e=g.J(),b.a&&b.a.Ga(e,d)):b.h[e]=d;U(b,new Sk("addfeature",d))}}function Rk(b,d,e){b.w[d]=[T(e,"change",b.Pe,b),T(e,"propertychange",b.Pe,b)]}function Qk(b,d,e){var g=!0,k=e.Da();void 0!==k?k.toString()in b.g?g=!1:b.g[k.toString()]=e:b.u[d]=e;return g}A.yb=function(b){Nk(this,b);this.A()};
function Nk(b,d){var e,g,k,p,q=[],u=[],v=[];g=0;for(k=d.length;g<k;g++)p=d[g],e=L(p).toString(),Qk(b,e,p)&&u.push(p);g=0;for(k=u.length;g<k;g++){p=u[g];e=L(p).toString();Rk(b,e,p);var w=p.C();w?(e=w.J(),q.push(e),v.push(p)):b.h[e]=p}b.a&&b.a.load(q,v);g=0;for(k=u.length;g<k;g++)U(b,new Sk("addfeature",u[g]))}
function Ok(b,d){var e=!1;T(b,"addfeature",function(b){e||(e=!0,d.push(b.ea),e=!1)});T(b,"removefeature",function(b){e||(e=!0,d.remove(b.ea),e=!1)});T(d,"add",function(b){e||(b=b.element,e=!0,this.pc(b),e=!1)},b);T(d,"remove",function(b){e||(b=b.element,e=!0,this.Rb(b),e=!1)},b);b.j=d}
A.clear=function(b){if(b){for(var d in this.w)this.w[d].forEach(Aa);this.j||(this.w={},this.g={},this.u={})}else if(this.a){this.a.forEach(this.dd,this);for(var e in this.h)this.dd(this.h[e])}this.j&&this.j.clear();this.a&&this.a.clear();this.M.clear();this.h={};U(this,new Sk("clear"));this.A()};A.Kb=function(b,d,e){if(this.a)return Lk(this.a,b,d,e);if(this.j)return this.j.forEach(d,e)};A.ma=function(){var b;this.j?b=this.j.a:this.a&&(b=this.a.getAll(),xa(this.h)||ad(b,wa(this.h)));return b};
A.J=function(){return this.a.J()};A.Pe=function(b){b=b.target;var d=L(b).toString(),e=b.C();e?(e=e.J(),d in this.h?(delete this.h[d],this.a&&this.a.Ga(e,b)):this.a&&Ik(this.a,e,b)):d in this.h||(this.a&&this.a.remove(b),this.h[d]=b);e=b.Da();void 0!==e?(e=e.toString(),d in this.u?(delete this.u[d],this.g[e]=b):this.g[e]!==b&&(Tk(this,b),this.g[e]=b)):d in this.u||(Tk(this,b),this.u[d]=b);this.A();U(this,new Sk("changefeature",b))};
function Uk(b,d,e,g){var k=b.M;d=b.ab(d,e);var p,q;p=0;for(q=d.length;p<q;++p){var u=d[p];Lk(k,u,function(b){return Wb(b.D,u)})||(b.V.call(b,u,e,g),k.Ga(u,{D:u.slice()}))}}A.Rb=function(b){var d=L(b).toString();d in this.h?delete this.h[d]:this.a&&this.a.remove(b);this.dd(b);this.A()};A.dd=function(b){var d=L(b).toString();this.w[d].forEach(Aa);delete this.w[d];var e=b.Da();void 0!==e?delete this.g[e.toString()]:delete this.u[d];U(this,new Sk("removefeature",b))};
function Tk(b,d){for(var e in b.g)if(b.g[e]===d){delete b.g[e];break}}function Sk(b,d){db.call(this,b);this.ea=d}R(Sk,db);function Vk(b){Hj.call(this,b);this.b=null;this.u=yb()}R(Vk,Hj);Vk.prototype.Cb=function(b,d,e,g){var k=this.a;return k.fa().P(b,d.L.H,d.L.rotation,d.Wb,function(b){return e.call(g,b,k)})};
Vk.prototype.l=function(b,d){var e=b.ga,g=b.L,k=g.T,p=g.H,q=this.a.fa(),u=b.la,v=b.D;void 0!==d.D&&(v=lc(v,d.D));u[0]||u[1]||gc(v)||(g=rk(q,v,p,e,g.ba))&&fh(this,g)&&(this.b=g);if(this.b){var g=this.b,u=g.J(),v=g.O(),w=g.h,p=e*v/(p*w);ah(this.u,e*b.size[0]/2,e*b.size[1]/2,p,p,0,w*(u[0]-k[0])/v,w*(k[1]-u[3])/v);hh(b.xa,g.jb());ih(b,q)}return!!this.b};function Wk(b){Hj.call(this,b);this.h=pf();this.g=null;this.B=Sb();this.s=yb()}R(Wk,Hj);
Wk.prototype.j=function(b,d,e){var g=b.ga,k=b.L,p=k.T,q=k.ba,u=k.rotation,v=b.size,w=Math.round(g*v[0]/2),z=Math.round(g*v[1]/2),B=g/k.H,C=this.a,D=C.fa(),F=D.Xc(q),k=Jj(this,b,0);Ij(this,"precompose",e,b,k);var v=e,C=hb(C,"render"),I,J,M,E;if(u||C)v=this.h,I=v.canvas,M=D.i/g,g=e.canvas.width*M,J=e.canvas.height*M,E=Math.round(Math.sqrt(g*g+J*J)),I.width!=E?I.width=I.height=E:v.clearRect(0,0,E,E),I=(E-g)/2/M,J=(E-J)/2/M,B*=M,w=Math.round(M*(w+I)),z=Math.round(M*(z+J));g=v.globalAlpha;v.globalAlpha=
d.opacity;var G=D.lb(q),N=this.g,P;d=D.Gd(q)&&1==d.opacity;d||(N.reverse(),P=[]);for(var O=0,Q=N.length;O<Q;++O){var V=N[O],K=V.na,S=Lg(G,K,this.B),ba=K[0],Y=dc(Lg(G,Tg(G,p,ba))),K=Math.round(hc(S)*B),ca=Math.round(ic(S)*B),X=Math.round((S[0]-Y[0])*B/K)*K+w+Math.round((Y[0]-p[0])*B),S=Math.round((Y[1]-S[3])*B/ca)*ca+z+Math.round((p[1]-Y[1])*B);if(!d){Y=[X,S,X+K,S+ca];v.save();for(var ua=0,Qa=P.length;ua<Qa;++ua){var Ab=P[ua];mc(Y,Ab)&&(v.beginPath(),v.moveTo(Y[0],Y[1]),v.lineTo(Y[0],Y[3]),v.lineTo(Y[2],
Y[3]),v.lineTo(Y[2],Y[1]),v.moveTo(Ab[0],Ab[1]),v.lineTo(Ab[2],Ab[1]),v.lineTo(Ab[2],Ab[3]),v.lineTo(Ab[0],Ab[3]),v.closePath(),v.clip())}P.push(Y)}ba=Yg(D,ba,q);v.drawImage(V.mb(),F,F,ba[0],ba[1],X,S,K,ca);d||v.restore()}C&&(q=I-w/M+w,w=J-z/M+z,p=ah(this.s,E/2-q,E/2-w,B,-B,-u,-p[0]+q/B,-p[1]-w/B),Ij(this,"render",v,b,p));(u||C)&&e.drawImage(v.canvas,-Math.round(I),-Math.round(J),E/M,E/M);v.globalAlpha=g;Ij(this,"postcompose",e,b,k)};
Wk.prototype.l=function(b,d){function e(b){b=b.W();return 2==b||4==b||3==b&&!D}var g=b.ga,k=b.L,p=k.ba,q=this.a,u=q.fa(),v=u.lb(p),w=Sg(v,k.H),z=v.O(w),B=k.T;z==k.H?(B=kh(B,z,b.size),k=kc(B,z,k.rotation,b.size)):k=b.D;void 0!==d.D&&(k=lc(k,d.D));if(gc(k))return!1;z=Og(v,k,z);B={};B[w]={};var C=this.i(u,p,B),D=Wc(q),F=Sb(),I=new Ic(0,0,0,0),J,M,E,G;for(E=z.a;E<=z.f;++E)for(G=z.b;G<=z.g;++G)J=mh(u,w,E,G,g,p),!e(J)&&J.a&&(J=J.a),e(J)?B[w][J.na.toString()]=J:(M=Kg(v,J.na,C,I,F),M||(J=Ng(v,J.na,I,F))&&
C(w+1,J));C=Object.keys(B).map(Number);C.sort(Zc);var F=[],N,I=0;for(E=C.length;I<E;++I)for(N in J=C[I],G=B[J],G)J=G[N],2==J.W()&&F.push(J);this.g=F;jh(b.Pc,u,w,z);lh(b,u,v,g,p,k,w,q.get("preload"));gh(b,u);ih(b,u);return!0};function Xk(b){Hj.call(this,b);this.g=!1;this.M=-1;this.$=NaN;this.B=Sb();this.h=this.G=null;this.s=pf()}R(Xk,Hj);
Xk.prototype.j=function(b,d,e){var g=b.D,k=b.ga,p=d.Dc?b.Wb:{},q=b.L,u=q.ba,q=q.rotation,v=u.J(),w=this.a.fa(),z=Jj(this,b,0);Ij(this,"precompose",e,b,z);var B=this.h;if(B&&!B.g()){var C;hb(this.a,"render")?(this.s.canvas.width=e.canvas.width,this.s.canvas.height=e.canvas.height,C=this.s):C=e;var D=C.globalAlpha;C.globalAlpha=d.opacity;d=b.size[0]*k;var F=b.size[1]*k;fj(C,-q,d/2,F/2);B.b(C,k,z,q,p);if(w.nd&&u.ac&&!Wb(v,g)){for(var u=g[0],w=hc(v),I=0;u<v[0];)--I,z=w*I,z=Jj(this,b,z),B.b(C,k,z,q,p),
u+=w;I=0;for(u=g[2];u>v[2];)++I,z=w*I,z=Jj(this,b,z),B.b(C,k,z,q,p),u-=w;z=Jj(this,b,0)}fj(C,q,d/2,F/2);C!=e&&(Ij(this,"render",C,b,z),e.drawImage(C.canvas,0,0));C.globalAlpha=D}Ij(this,"postcompose",e,b,z)};Xk.prototype.Cb=function(b,d,e,g){if(this.h){var k=this.a,p={};return this.h.h(b,d.L.H,d.L.rotation,{},function(b){var d=L(b).toString();if(!(d in p))return p[d]=!0,e.call(g,b,k)})}};Xk.prototype.P=function(){eh(this)};
Xk.prototype.l=function(b){function d(b){var d,g=b.h;g?d=g.call(b,w):(g=e.i)&&(d=g(b,w));if(d){if(d){g=!1;if(Array.isArray(d))for(var k=0,p=d.length;k<p;++k)g=gk(C,b,d[k],fk(w,z),this.P,this)||g;else g=gk(C,b,d,fk(w,z),this.P,this)||g;b=g}else b=!1;this.g=this.g||b}}var e=this.a,g=e.fa();hh(b.xa,g.jb());ih(b,g);var k=b.la[0],p=b.la[1],q=e.j,u=e.l;if(!this.g&&!q&&k||!u&&p)return!0;var v=b.D,u=b.L,k=u.ba,w=u.H,z=b.ga,p=e.f,B=e.a,q=e.get("renderOrder");void 0===q&&(q=ek);v=Ub(v,B*w);B=u.ba.J();g.nd&&
u.ba.ac&&!Wb(B,b.D)&&(b=Math.max(hc(v)/2,hc(B)),v[0]=B[0]-b,v[2]=B[2]+b);if(!this.g&&this.$==w&&this.M==p&&this.G==q&&Wb(this.B,v))return!0;this.h=null;this.g=!1;var C=new ak(.5*w/z,v,w,e.a);Uk(g,v,w,k);if(q){var D=[];g.Kb(v,function(b){D.push(b)},this);D.sort(q);D.forEach(d,this)}else g.Kb(v,d,this);bk(C);this.$=w;this.M=p;this.G=q;this.B=v;this.h=C;return!0};function Yk(b,d){var e=/\{z\}/g,g=/\{x\}/g,k=/\{y\}/g,p=/\{-y\}/g;return function(q){if(q)return b.replace(e,q[0].toString()).replace(g,q[1].toString()).replace(k,function(){return(-q[2]-1).toString()}).replace(p,function(){var b=d.a?d.a[q[0]]:null;return(b.g-b.b+1+q[2]).toString()})}}function Zk(b,d){for(var e=b.length,g=Array(e),k=0;k<e;++k)g[k]=Yk(b[k],d);return $k(g)}function $k(b){return 1===b.length?b[0]:function(d,e,g){if(d)return b[Kb((d[1]<<d[0])+d[2],b.length)](d,e,g)}}function al(){};function bl(b){Wg.call(this,{xa:b.xa,Tc:b.Tc,D:b.D,Ea:b.Ea,Fc:b.Fc,ba:b.ba,state:b.state,Ca:b.Ca,Nc:b.Nc,Ma:b.Ma});this.mc=b.mc;this.Fb=this.g?this.g.bind(this):al;this.nc=null;if(b.nc){var d=b.nc;this.nc=d;cl(this,this.g?this.g.bind(this):Zk(d,this.Ca))}else if(b.url){var d=b.url,e=[],g=/\{(\d)-(\d)\}/.exec(d)||/\{([a-z])-([a-z])\}/.exec(d);if(g){var k=g[2].charCodeAt(0),p;for(p=g[1].charCodeAt(0);p<=k;++p)e.push(d.replace(g[0],String.fromCharCode(p)))}else e.push(d);d=this.nc=e;cl(this,this.g?this.g.bind(this):
Zk(d,this.Ca))}b.Fb&&cl(this,b.Fb)}R(bl,Wg);bl.prototype.j=function(b){switch(b.target.W()){case 1:U(this,new $g("tileloadstart"));break;case 2:U(this,new $g("tileloadend"));break;case 3:U(this,new $g("tileloaderror"))}};function cl(b,d){b.a.clear();b.Fb=d;b.A()}bl.prototype.Xe=function(b,d,e){b=this.Yc(b,d,e);Dg(this.a,b)&&this.a.get(b)};function dl(b,d){qh.call(this,0,d);this.g=pf();pf();this.a=this.g.canvas;this.a.style.width="100%";this.a.style.height="100%";this.a.className="ol-unselectable";Te(b,this.a,0);this.f=!0;this.h=yb()}R(dl,qh);dl.prototype.zd=function(b){if(b instanceof aj)return new Vk(b);if(b instanceof Vc)return new Wk(b);if(b instanceof uj)return new Xk(b);$a("unexpected layer configuration");return null};
function el(b,d,e){var g=b.Aa(),k=b.g;if(hb(g,d)){var p=e.D,q=e.ga,u=e.L.rotation,v=e.ga,w=e.L,z=w.H;b=ah(b.h,b.a.width/2,b.a.height/2,v/z,-v/z,-w.rotation,-w.T[0],-w.T[1]);new vj(k,q,p,b,u);U(g,new Sc(d,g,0,e))}}dl.prototype.ka=function(){return"canvas"};
dl.prototype.fd=function(b){if(b){var d=this.g,e=b.ga,g=Math.round(b.size[0]*e),e=Math.round(b.size[1]*e);this.a.width!=g||this.a.height!=e?(this.a.width=g,this.a.height=e):d.clearRect(0,0,g,e);var k=b.L.rotation;rh(b);el(this,"precompose",b);var p=b.Nb;dd(p);fj(d,k,g/2,e/2);var q=b.L.H,u,v,w,z;u=0;for(v=p.length;u<v;++u)z=p[u],w=z.Ab,w=th(this,w),Uc(z,q)&&"ready"==z.Ud&&w.l(b,z)&&w.j(b,z,d);fj(d,-k,g/2,e/2);el(this,"postcompose",b);this.f||(ef(this.a,!0),this.f=!0);uh(this,b);b.fb.push(sh)}else this.f&&
(ef(this.a,!1),this.f=!1)};function fl(b,d){dh.call(this,b);this.target=d}R(fl,dh);fl.prototype.Uc=bb;fl.prototype.Je=bb;function gl(b){var d=document.createElement("DIV");d.style.position="absolute";fl.call(this,b,d);this.b=null;this.g=Bb()}R(gl,fl);gl.prototype.Cb=function(b,d,e,g){var k=this.a;return k.fa().P(b,d.L.H,d.L.rotation,d.Wb,function(b){return e.call(g,b,k)})};gl.prototype.Uc=function(){Se(this.target);this.b=null};
gl.prototype.Kd=function(b,d){var e=b.L,g=e.T,k=e.H,p=e.rotation,q=this.b,u=this.a.fa(),v=b.la,w=b.D;void 0!==d.D&&(w=lc(w,d.D));v[0]||v[1]||gc(w)||(e=rk(u,w,k,b.ga,e.ba))&&fh(this,e)&&(q=e);q&&(v=q.J(),w=q.O(),e=yb(),ah(e,b.size[0]/2,b.size[1]/2,w/k,w/k,p,(v[0]-g[0])/w,(g[1]-v[3])/w),q!=this.b&&(g=q.f(this),g.style.maxWidth="none",g.style.position="absolute",Se(this.target),this.target.appendChild(g),this.b=q),bh(e,this.g)||(tf(this.target,e),Cb(this.g,e)),hh(b.xa,q.jb()),ih(b,u));return!0};function hl(b){var d=document.createElement("DIV");d.style.position="absolute";fl.call(this,b,d);this.g=!0;this.j=1;this.h=0;this.b={}}R(hl,fl);hl.prototype.Uc=function(){Se(this.target);this.h=0};
hl.prototype.Kd=function(b,d){if(!d.visible)return this.g&&(ef(this.target,!1),this.g=!1),!0;var e=b.ga,g=b.L,k=g.ba,p=this.a,q=p.fa(),u=q.lb(k),v=q.Xc(k),w=Sg(u,g.H),z=u.O(w),B=g.T,C;z==g.H?(B=kh(B,z,b.size),C=kc(B,z,g.rotation,b.size)):C=b.D;void 0!==d.D&&(C=lc(C,d.D));var z=Og(u,C,z),D={};D[w]={};var F=this.i(q,k,D),I=Wc(p),J=Sb(),M=new Ic(0,0,0,0),E,G,N,P;for(N=z.a;N<=z.f;++N)for(P=z.b;P<=z.g;++P)E=mh(q,w,N,P,e,k),G=E.W(),G=2==G||4==G||3==G&&!I,!G&&E.a&&(E=E.a),G=E.W(),2==G?D[w][E.na.toString()]=
E:4==G||3==G&&!I||(G=Kg(u,E.na,F,M,J),G||(E=Ng(u,E.na,M,J))&&F(w+1,E));var O;if(this.h!=q.f){for(O in this.b)I=this.b[+O],Ue(I.target);this.b={};this.h=q.f}J=Object.keys(D).map(Number);J.sort(Zc);var F={},Q;N=0;for(P=J.length;N<P;++N){O=J[N];O in this.b?I=this.b[O]:(I=Tg(u,B,O),I=new il(u,I),F[O]=!0,this.b[O]=I);O=D[O];for(Q in O){E=I;G=O[Q];var V=v,K=G.na,S=K[0],ba=K[1],Y=K[2],K=K.toString();if(!(K in E.f)){var S=Qb(Rg(E.h,S),E.l),ca=G.mb(E),X=ca.style;X.maxWidth="none";var ua=void 0,Qa=void 0;0<
V?(ua=document.createElement("DIV"),Qa=ua.style,Qa.overflow="hidden",Qa.width=S[0]+"px",Qa.height=S[1]+"px",X.position="absolute",X.left=-V+"px",X.top=-V+"px",X.width=S[0]+2*V+"px",X.height=S[1]+2*V+"px",ua.appendChild(ca)):(X.width=S[0]+"px",X.height=S[1]+"px",ua=ca,Qa=X);Qa.position="absolute";Qa.left=(ba-E.b[1])*S[0]+"px";Qa.top=(E.b[2]-Y)*S[1]+"px";E.a||(E.a=document.createDocumentFragment());E.a.appendChild(ua);E.f[K]=G}}I.a&&(I.target.appendChild(I.a),I.a=null)}v=Object.keys(this.b).map(Number);
v.sort(Zc);N=yb();Q=0;for(J=v.length;Q<J;++Q)if(O=v[Q],I=this.b[O],O in D)if(E=I.O(),P=I.kb(),ah(N,b.size[0]/2,b.size[1]/2,E/g.H,E/g.H,g.rotation,(P[0]-B[0])/E,(B[1]-P[1])/E),I.setTransform(N),O in F){for(--O;0<=O;--O)if(O in this.b){P=this.b[O].target;P.parentNode&&P.parentNode.insertBefore(I.target,P.nextSibling);break}0>O&&Te(this.target,I.target,0)}else{if(!b.la[0]&&!b.la[1]){G=Mg(I.h,C,I.b[0],M);O=[];E=P=void 0;for(E in I.f)P=I.f[E],V=P.na,Jc(G,V[1],V[2])||O.push(P);V=G=void 0;G=0;for(V=O.length;G<
V;++G)P=O[G],E=P.na.toString(),Ue(P.mb(I)),delete I.f[E]}}else Ue(I.target),delete this.b[O];d.opacity!=this.j&&(this.j=this.target.style.opacity=d.opacity);d.visible&&!this.g&&(ef(this.target,!0),this.g=!0);jh(b.Pc,q,w,z);lh(b,q,u,e,k,C,w,p.get("preload"));gh(b,q);ih(b,q);return!0};
function il(b,d){this.target=document.createElement("DIV");this.target.style.position="absolute";this.target.style.width="100%";this.target.style.height="100%";this.h=b;this.b=d;this.i=ec(Lg(b,d));this.j=b.O(d[0]);this.f={};this.a=null;this.g=Bb();this.l=[0,0]}il.prototype.kb=function(){return this.i};il.prototype.O=function(){return this.j};il.prototype.setTransform=function(b){bh(b,this.g)||(tf(this.target,b),Cb(this.g,b))};function jl(b){this.h=pf();var d=this.h.canvas;d.style.maxWidth="none";d.style.position="absolute";fl.call(this,b,d);this.b=!1;this.j=-1;this.u=NaN;this.l=Sb();this.g=this.s=null;this.G=yb();this.B=yb()}R(jl,fl);A=jl.prototype;A.Uc=function(){var b=this.h.canvas;b.width=b.width;this.j=0};
A.Je=function(b,d){var e=b.L,g=e.T,k=e.rotation,p=e.H,e=b.ga,q=b.size[0],u=b.size[1],v=q*e,w=u*e,g=ah(this.G,e*q/2,e*u/2,e/p,-e/p,-k,-g[0],-g[1]),p=this.h;p.canvas.width=v;p.canvas.height=w;q=ah(this.B,0,0,1/e,1/e,0,-(v-q)/2*e,-(w-u)/2*e);tf(p.canvas,q);kl(this,"precompose",b,g);(q=this.g)&&!q.g()&&(p.globalAlpha=d.opacity,q.b(p,e,g,k,d.Dc?b.Wb:{}),kl(this,"render",b,g));kl(this,"postcompose",b,g)};
function kl(b,d,e,g){var k=b.h;b=b.a;hb(b,d)&&(new vj(k,e.ga,e.D,g,e.L.rotation),U(b,new Sc(d,b,0,e)))}A.Cb=function(b,d,e,g){if(this.g){var k=this.a,p={};return this.g.h(b,d.L.H,d.L.rotation,{},function(b){var d=L(b).toString();if(!(d in p))return p[d]=!0,e.call(g,b,k)})}};A.Ke=function(){eh(this)};
A.Kd=function(b){function d(b){var d,g=b.h;g?d=g.call(b,v):(g=e.i)&&(d=g(b,v));if(d){if(d){g=!1;if(Array.isArray(d))for(var k=0,p=d.length;k<p;++k)g=gk(z,b,d[k],fk(v,w),this.Ke,this)||g;else g=gk(z,b,d,fk(v,w),this.Ke,this)||g;b=g}else b=!1;this.b=this.b||b}}var e=this.a,g=e.fa();hh(b.xa,g.jb());ih(b,g);var k=b.la[0],p=b.la[1],q=e.j,u=e.l;if(!this.b&&!q&&k||!u&&p)return!0;var p=b.D,q=b.L,k=q.ba,v=q.H,w=b.ga;b=e.f;u=e.a;q=e.get("renderOrder");void 0===q&&(q=ek);p=Ub(p,u*v);if(!this.b&&this.u==v&&this.j==
b&&this.s==q&&Wb(this.l,p))return!0;this.g=null;this.b=!1;var z=new ak(.5*v/w,p,v,e.a);Uk(g,p,v,k);if(q){var B=[];g.Kb(p,function(b){B.push(b)},this);B.sort(q);B.forEach(d,this)}else g.Kb(p,d,this);bk(z);this.u=v;this.j=b;this.s=q;this.l=p;this.g=z;return!0};function ll(b,d){qh.call(this,0,d);this.g=pf();var e=this.g.canvas;e.style.position="absolute";e.style.width="100%";e.style.height="100%";e.className="ol-unselectable";Te(b,e,0);this.h=yb();this.a=document.createElement("DIV");this.a.className="ol-unselectable";e=this.a.style;e.position="absolute";e.width="100%";e.height="100%";T(this.a,"touchstart",fb);Te(b,this.a,0);this.f=!0}R(ll,qh);ll.prototype.aa=function(){Ue(this.a);ll.za.aa.call(this)};
ll.prototype.zd=function(b){if(b instanceof aj)b=new gl(b);else if(b instanceof Vc)b=new hl(b);else if(b instanceof uj)b=new jl(b);else return $a("unexpected layer configuration"),null;return b};function ml(b,d,e){var g=b.Aa();if(hb(g,d)){var k=e.D,p=e.ga,q=e.L,u=q.rotation,v=b.g,w=v.canvas;ah(b.h,w.width/2,w.height/2,p/q.H,-p/q.H,-q.rotation,-q.T[0],-q.T[1]);new vj(v,p,k,b.h,u);U(g,new Sc(d,g,0,e))}}ll.prototype.ka=function(){return"dom"};
ll.prototype.fd=function(b){if(b){var d=this.Aa();if(hb(d,"precompose")||hb(d,"postcompose")){var d=this.g.canvas,e=b.ga;d.width=b.size[0]*e;d.height=b.size[1]*e}ml(this,"precompose",b);d=b.Nb;dd(d);var e=b.L.H,g,k,p,q;g=0;for(k=d.length;g<k;++g)q=d[g],p=q.Ab,p=th(this,p),Te(this.a,p.target,g),Uc(q,e)&&"ready"==q.Ud?p.Kd(b,q)&&p.Je(b,q):p.Uc();var d=b.Cc,u;for(u in this.b)u in d||(p=this.b[u],Ue(p.target));this.f||(ef(this.a,!0),this.f=!0);rh(b);uh(this,b);b.fb.push(sh);ml(this,"postcompose",b)}else this.f&&
(ef(this.a,!1),this.f=!1)};function nl(b){this.a=b}nl.prototype.fa=function(){return this.a};function ol(b){this.a=b}R(ol,nl);ol.prototype.ka=function(){return 35632};function pl(b){this.a=b}R(pl,nl);pl.prototype.ka=function(){return 35633};function ql(){this.a="precision mediump float;\nvarying vec2 v_texCoord;\nvarying float v_opacity;\n\nuniform float u_opacity;\nuniform sampler2D u_image;\n\nvoid main(void) {\n  vec4 texColor = texture2D(u_image, v_texCoord);\n  gl_FragColor.rgb = texColor.rgb;\n  float alpha = texColor.a * v_opacity * u_opacity;\n  if (alpha == 0.0) {\n    discard;\n  }\n  gl_FragColor.a = alpha;\n}\n"}R(ql,ol);da(ql);
function rl(){this.a="varying vec2 v_texCoord;\nvarying float v_opacity;\n\nattribute vec2 a_position;\nattribute vec2 a_texCoord;\nattribute vec2 a_offsets;\nattribute float a_opacity;\nattribute float a_rotateWithView;\n\nuniform mat4 u_projectionMatrix;\nuniform mat4 u_offsetScaleMatrix;\nuniform mat4 u_offsetRotateMatrix;\n\nvoid main(void) {\n  mat4 offsetMatrix = u_offsetScaleMatrix;\n  if (a_rotateWithView == 1.0) {\n    offsetMatrix = u_offsetScaleMatrix * u_offsetRotateMatrix;\n  }\n  vec4 offsets = offsetMatrix * vec4(a_offsets, 0., 0.);\n  gl_Position = u_projectionMatrix * vec4(a_position, 0., 1.) + offsets;\n  v_texCoord = a_texCoord;\n  v_opacity = a_opacity;\n}\n\n\n"}
R(rl,pl);da(rl);function sl(b,d){this.l=b.getUniformLocation(d,"u_offsetRotateMatrix");this.s=b.getUniformLocation(d,"u_offsetScaleMatrix");this.i=b.getUniformLocation(d,"u_opacity");this.j=b.getUniformLocation(d,"u_projectionMatrix");this.a=b.getAttribLocation(d,"a_offsets");this.f=b.getAttribLocation(d,"a_opacity");this.g=b.getAttribLocation(d,"a_position");this.b=b.getAttribLocation(d,"a_rotateWithView");this.h=b.getAttribLocation(d,"a_texCoord")};function tl(b){this.a=void 0!==b?b:[]};function ul(b,d){this.j=b;this.a=d;this.f={};this.h={};this.g={};this.s=this.u=this.i=this.l=null;(this.b=0<=sa.indexOf("OES_element_index_uint"))&&d.getExtension("OES_element_index_uint");T(this.j,"webglcontextlost",this.w,this);T(this.j,"webglcontextrestored",this.Z,this)}R(ul,cb);
function vl(b,d,e){var g=b.a,k=e.a,p=String(L(e));if(p in b.f)g.bindBuffer(d,b.f[p].buffer);else{var q=g.createBuffer();g.bindBuffer(d,q);var u;34962==d?u=new Float32Array(k):34963==d?u=b.b?new Uint32Array(k):new Uint16Array(k):$a();g.bufferData(d,u,35044);b.f[p]={Ei:e,buffer:q}}}function wl(b,d){var e=b.a,g=String(L(d)),k=b.f[g];e.isContextLost()||e.deleteBuffer(k.buffer);delete b.f[g]}
ul.prototype.aa=function(){Ga(this.j);var b=this.a;if(!b.isContextLost()){for(var d in this.f)b.deleteBuffer(this.f[d].buffer);for(d in this.g)b.deleteProgram(this.g[d]);for(d in this.h)b.deleteShader(this.h[d]);b.deleteFramebuffer(this.i);b.deleteRenderbuffer(this.s);b.deleteTexture(this.u)}};
function xl(b){if(!b.i){var d=b.a,e=d.createFramebuffer();d.bindFramebuffer(d.FRAMEBUFFER,e);var g=yl(d,1,1),k=d.createRenderbuffer();d.bindRenderbuffer(d.RENDERBUFFER,k);d.renderbufferStorage(d.RENDERBUFFER,d.DEPTH_COMPONENT16,1,1);d.framebufferTexture2D(d.FRAMEBUFFER,d.COLOR_ATTACHMENT0,d.TEXTURE_2D,g,0);d.framebufferRenderbuffer(d.FRAMEBUFFER,d.DEPTH_ATTACHMENT,d.RENDERBUFFER,k);d.bindTexture(d.TEXTURE_2D,null);d.bindRenderbuffer(d.RENDERBUFFER,null);d.bindFramebuffer(d.FRAMEBUFFER,null);b.i=e;
b.u=g;b.s=k}return b.i}function zl(b,d){var e=String(L(d));if(e in b.h)return b.h[e];var g=b.a,k=g.createShader(d.ka());g.shaderSource(k,d.fa());g.compileShader(k);return b.h[e]=k}function Al(b,d,e){var g=L(d)+"/"+L(e);if(g in b.g)return b.g[g];var k=b.a,p=k.createProgram();k.attachShader(p,zl(b,d));k.attachShader(p,zl(b,e));k.linkProgram(p);return b.g[g]=p}ul.prototype.w=function(){va(this.f);va(this.h);va(this.g);this.s=this.u=this.i=this.l=null};ul.prototype.Z=function(){};
function Bl(b,d){if(d==b.l)return!1;b.a.useProgram(d);b.l=d;return!0}function Cl(b,d,e){var g=b.createTexture();b.bindTexture(b.TEXTURE_2D,g);b.texParameteri(b.TEXTURE_2D,b.TEXTURE_MAG_FILTER,b.LINEAR);b.texParameteri(b.TEXTURE_2D,b.TEXTURE_MIN_FILTER,b.LINEAR);void 0!==d&&b.texParameteri(3553,10242,d);void 0!==e&&b.texParameteri(3553,10243,e);return g}function yl(b,d,e){var g=Cl(b,void 0,void 0);b.texImage2D(b.TEXTURE_2D,0,b.RGBA,d,e,0,b.RGBA,b.UNSIGNED_BYTE,null);return g}
function Dl(b,d){var e=Cl(b,33071,33071);b.texImage2D(b.TEXTURE_2D,0,b.RGBA,b.RGBA,b.UNSIGNED_BYTE,d);return e};function El(b,d){this.B=this.da=void 0;this.s=jc(d);this.Z=[];this.i=[];this.$=void 0;this.h=[];this.g=[];this.P=this.M=void 0;this.f=[];this.G=this.l=null;this.V=void 0;this.ab=Bb();this.ob=Bb();this.oa=this.ca=void 0;this.pb=Bb();this.$a=this.ua=this.ja=void 0;this.Ja=[];this.j=[];this.a=[];this.w=null;this.b=[];this.u=[];this.Ia=void 0}R(El,Rc);
function Fl(b,d){var e=b.w,g=b.l,k=b.Ja,p=b.j,q=d.a;return function(){if(!q.isContextLost()){var b,v;b=0;for(v=k.length;b<v;++b)q.deleteTexture(k[b]);b=0;for(v=p.length;b<v;++b)q.deleteTexture(p[b])}wl(d,e);wl(d,g)}}
function Gl(b,d,e,g){var k=b.da,p=b.B,q=b.$,u=b.M,v=b.P,w=b.V,z=b.ca,B=b.oa,C=b.ja?1:0,D=b.ua,F=b.$a,I=b.Ia,J=Math.cos(D),D=Math.sin(D),M=b.f.length,E=b.a.length,G,N,P,O,Q,V;for(G=0;G<e;G+=g)Q=d[G]-b.s[0],V=d[G+1]-b.s[1],N=E/8,P=-F*k,O=-F*(q-p),b.a[E++]=Q,b.a[E++]=V,b.a[E++]=P*J-O*D,b.a[E++]=P*D+O*J,b.a[E++]=z/v,b.a[E++]=(B+q)/u,b.a[E++]=w,b.a[E++]=C,P=F*(I-k),O=-F*(q-p),b.a[E++]=Q,b.a[E++]=V,b.a[E++]=P*J-O*D,b.a[E++]=P*D+O*J,b.a[E++]=(z+I)/v,b.a[E++]=(B+q)/u,b.a[E++]=w,b.a[E++]=C,P=F*(I-k),O=F*p,
b.a[E++]=Q,b.a[E++]=V,b.a[E++]=P*J-O*D,b.a[E++]=P*D+O*J,b.a[E++]=(z+I)/v,b.a[E++]=B/u,b.a[E++]=w,b.a[E++]=C,P=-F*k,O=F*p,b.a[E++]=Q,b.a[E++]=V,b.a[E++]=P*J-O*D,b.a[E++]=P*D+O*J,b.a[E++]=z/v,b.a[E++]=B/u,b.a[E++]=w,b.a[E++]=C,b.f[M++]=N,b.f[M++]=N+1,b.f[M++]=N+2,b.f[M++]=N,b.f[M++]=N+2,b.f[M++]=N+3}El.prototype.Bd=function(b,d){this.b.push(this.f.length);this.u.push(d);var e=b.a;Gl(this,e,e.length,b.F)};
El.prototype.Cd=function(b,d){this.b.push(this.f.length);this.u.push(d);var e=b.a;Gl(this,e,e.length,b.F)};function Hl(b,d,e,g){var k,p,q,u=d.length;for(q=0;q<u;++q)k=d[q],p=L(k).toString(),p in e?k=e[p]:(k=Dl(g,k),e[p]=k),b[q]=k}
function Il(b,d,e,g,k,p,q,u,v,w,z){var B=d.a;vl(d,34962,b.w);vl(d,34963,b.l);var C=ql.Mb(),D=rl.Mb(),D=Al(d,C,D);b.G?C=b.G:(C=new sl(B,D),b.G=C);Bl(d,D);B.enableVertexAttribArray(C.g);B.vertexAttribPointer(C.g,2,5126,!1,32,0);B.enableVertexAttribArray(C.a);B.vertexAttribPointer(C.a,2,5126,!1,32,8);B.enableVertexAttribArray(C.h);B.vertexAttribPointer(C.h,2,5126,!1,32,16);B.enableVertexAttribArray(C.f);B.vertexAttribPointer(C.f,1,5126,!1,32,24);B.enableVertexAttribArray(C.b);B.vertexAttribPointer(C.b,
1,5126,!1,32,28);D=b.pb;ah(D,0,0,2/(g*p[0]),2/(g*p[1]),-k,-(e[0]-b.s[0]),-(e[1]-b.s[1]));e=b.ob;g=2/p[0];p=2/p[1];Db(e);e[0]=g;e[5]=p;e[10]=1;e[15]=1;p=b.ab;Db(p);0!==k&&Hb(p,-k);B.uniformMatrix4fv(C.j,!1,D);B.uniformMatrix4fv(C.s,!1,e);B.uniformMatrix4fv(C.l,!1,p);B.uniform1f(C.i,q);var F;if(void 0===v)Jl(b,B,d,u,b.Ja,b.Z);else{if(w)a:{k=d.b?5125:5123;d=d.b?4:2;p=b.b.length-1;for(q=b.j.length-1;0<=q;--q)for(B.bindTexture(3553,b.j[q]),w=0<q?b.i[q-1]:0,D=b.i[q];0<=p&&b.b[p]>=w;){F=b.b[p];e=b.u[p];
g=L(e).toString();if(void 0===u[g]&&e.C()&&(void 0===z||mc(z,e.C().J()))&&(B.clear(B.COLOR_BUFFER_BIT|B.DEPTH_BUFFER_BIT),B.drawElements(4,D-F,k,F*d),D=v(e))){b=D;break a}D=F;p--}b=void 0}else B.clear(B.COLOR_BUFFER_BIT|B.DEPTH_BUFFER_BIT),Jl(b,B,d,u,b.j,b.i),b=(b=v(null))?b:void 0;F=b}B.disableVertexAttribArray(C.g);B.disableVertexAttribArray(C.a);B.disableVertexAttribArray(C.h);B.disableVertexAttribArray(C.f);B.disableVertexAttribArray(C.b);return F}
function Jl(b,d,e,g,k,p){var q=e.b?5125:5123;e=e.b?4:2;if(xa(g)){var u;b=0;g=k.length;for(u=0;b<g;++b){d.bindTexture(3553,k[b]);var v=p[b];d.drawElements(4,v-u,q,u*e);u=v}}else{u=0;var w,v=0;for(w=k.length;v<w;++v){d.bindTexture(3553,k[v]);for(var z=0<v?p[v-1]:0,B=p[v],C=z;u<b.b.length&&b.b[u]<=B;){var D=L(b.u[u]).toString();void 0!==g[D]?(C!==z&&d.drawElements(4,z-C,q,C*e),z=C=u===b.b.length-1?B:b.b[u+1]):z=u===b.b.length-1?B:b.b[u+1];u++}C!==z&&d.drawElements(4,z-C,q,C*e)}}}
El.prototype.jd=function(b){var d=b.i,e=b.a,g=b.w,k=b.b,p=b.s,q=b.kb(),u=b.u,v=b.ha(),w=b.j;b=b.l;var z;0===this.h.length?this.h.push(e):(z=this.h[this.h.length-1],L(z)!=L(e)&&(this.Z.push(this.f.length),this.h.push(e)));0===this.g.length?this.g.push(k):(z=this.g[this.g.length-1],L(z)!=L(k)&&(this.i.push(this.f.length),this.g.push(k)));this.da=d[0];this.B=d[1];this.$=w[1];this.M=g[1];this.P=g[0];this.V=p;this.ca=q[0];this.oa=q[1];this.ua=v;this.ja=u;this.$a=b;this.Ia=w[0]};
function Kl(b,d,e){this.j=d;this.l=b;this.i=e;this.f={}}function Ll(b,d){var e=[],g;for(g in b.f)e.push(Fl(b.f[g],d));return function(){for(var b=e.length,d,g=0;g<b;g++)d=e[g].apply(this,arguments);return d}}
function Ml(b,d){for(var e in b.f){var g=b.f[e],k=d,p=k.a;g.Z.push(g.f.length);g.i.push(g.f.length);g.w=new tl(g.a);vl(k,34962,g.w);g.l=new tl(g.f);vl(k,34963,g.l);k={};Hl(g.Ja,g.h,k,p);Hl(g.j,g.g,k,p);g.da=void 0;g.B=void 0;g.$=void 0;g.h=null;g.g=null;g.M=void 0;g.P=void 0;g.f=null;g.V=void 0;g.ca=void 0;g.oa=void 0;g.ja=void 0;g.ua=void 0;g.$a=void 0;g.a=null;g.Ia=void 0}}Kl.prototype.a=function(b,d){var e=this.f[d];void 0===e&&(e=new Nl[d](this.l,this.j),this.f[d]=e);return e};
Kl.prototype.g=function(){return xa(this.f)};Kl.prototype.b=function(b,d,e,g,k,p,q,u){var v,w;p=0;for(v=Kj.length;p<v;++p)w=this.f[Kj[p]],void 0!==w&&Il(w,b,d,e,g,k,q,u,void 0,!1)};function Ol(b,d,e,g,k,p,q,u,v){var w=Pl,z,B;for(z=Kj.length-1;0<=z;--z)if(B=b.f[Kj[z]],void 0!==B&&(B=Il(B,d,e,g,k,w,p,q,u,!0,v)))return B}
Kl.prototype.h=function(b,d,e,g,k,p,q,u,v,w){var z=d.a;z.bindFramebuffer(z.FRAMEBUFFER,xl(d));var B;void 0!==this.i&&(B=Ub($b(b),g*this.i));return Ol(this,d,b,g,k,u,v,function(b){var d=new Uint8Array(4);z.readPixels(0,0,1,1,z.RGBA,z.UNSIGNED_BYTE,d);if(0<d[3]&&(b=w(b)))return b},B)};var Nl={Image:El},Pl=[1,1];function Ql(){this.a="precision mediump float;\nvarying vec2 v_texCoord;\n\n\nuniform float u_opacity;\nuniform sampler2D u_texture;\n\nvoid main(void) {\n  vec4 texColor = texture2D(u_texture, v_texCoord);\n  gl_FragColor.rgb = texColor.rgb;\n  gl_FragColor.a = texColor.a * u_opacity;\n}\n"}R(Ql,ol);da(Ql);
function Rl(){this.a="varying vec2 v_texCoord;\n\n\nattribute vec2 a_position;\nattribute vec2 a_texCoord;\n\nuniform mat4 u_texCoordMatrix;\nuniform mat4 u_projectionMatrix;\n\nvoid main(void) {\n  gl_Position = u_projectionMatrix * vec4(a_position, 0., 1.);\n  v_texCoord = (u_texCoordMatrix * vec4(a_texCoord, 0., 1.)).st;\n}\n\n\n"}R(Rl,pl);da(Rl);
function Sl(b,d){this.b=b.getUniformLocation(d,"u_opacity");this.g=b.getUniformLocation(d,"u_projectionMatrix");this.i=b.getUniformLocation(d,"u_texCoordMatrix");this.h=b.getUniformLocation(d,"u_texture");this.a=b.getAttribLocation(d,"a_position");this.f=b.getAttribLocation(d,"a_texCoord")};function Tl(b,d){dh.call(this,d);this.g=b;this.ca=new tl([-1,-1,0,0,1,-1,1,0,-1,1,0,1,1,1,1,1]);this.j=this.Ya=null;this.l=void 0;this.G=yb();this.V=Bb();this.u=null}R(Tl,dh);
function Ul(b,d,e){var g=b.g.g;if(void 0===b.l||b.l!=e){d.fb.push(qa(function(b,d,e){b.isContextLost()||(b.deleteFramebuffer(d),b.deleteTexture(e))},g,b.j,b.Ya));d=yl(g,e,e);var k=g.createFramebuffer();g.bindFramebuffer(36160,k);g.framebufferTexture2D(36160,36064,3553,d,0);b.Ya=d;b.j=k;b.l=e}else g.bindFramebuffer(36160,b.j)}
Tl.prototype.Le=function(b,d,e){Vl(this,"precompose",b);vl(e,34962,this.ca);var g=e.a,k=Ql.Mb(),p=Rl.Mb(),k=Al(e,k,p);this.u?p=this.u:this.u=p=new Sl(g,k);Bl(e,k)&&(g.enableVertexAttribArray(p.a),g.vertexAttribPointer(p.a,2,5126,!1,16,0),g.enableVertexAttribArray(p.f),g.vertexAttribPointer(p.f,2,5126,!1,16,8),g.uniform1i(p.h,0));g.uniformMatrix4fv(p.i,!1,this.G);g.uniformMatrix4fv(p.g,!1,this.V);g.uniform1f(p.b,d.opacity);g.bindTexture(3553,this.Ya);g.drawArrays(5,0,4);Vl(this,"postcompose",b)};
function Vl(b,d,e){b=b.a;hb(b,d)&&U(b,new Sc(d,b,0,e))}Tl.prototype.w=function(){this.j=this.Ya=null;this.l=void 0};function Wl(b,d){Tl.call(this,b,d);this.b=null}R(Wl,Tl);function Xl(b,d){var e=d.f();return Dl(b.g.g,e)}Wl.prototype.Cb=function(b,d,e,g){var k=this.a;return k.fa().P(b,d.L.H,d.L.rotation,d.Wb,function(b){return e.call(g,b,k)})};
Wl.prototype.Ld=function(b,d){var e=this.g.g,g=b.ga,k=b.L,p=k.T,q=k.H,u=k.rotation,v=this.b,w=this.Ya,z=this.a.fa(),B=b.la,C=b.D;void 0!==d.D&&(C=lc(C,d.D));B[0]||B[1]||gc(C)||(k=rk(z,C,q,g,k.ba))&&fh(this,k)&&(v=k,w=Xl(this,k),this.Ya&&b.fb.push(qa(function(b,d){b.isContextLost()||b.deleteTexture(d)},e,this.Ya)));v&&(e=this.g.h.j,Yl(this,e.width,e.height,g,p,q,u,v.J()),g=this.G,Db(g),Gb(g,1,-1),Fb(g,0,-1),this.b=v,this.Ya=w,hh(b.xa,v.jb()),ih(b,z));return!0};
function Yl(b,d,e,g,k,p,q,u){d*=p;e*=p;b=b.V;Db(b);Gb(b,2*g/d,2*g/e);Hb(b,-q);Fb(b,u[0]-k[0],u[1]-k[1]);Gb(b,(u[2]-u[0])/2,(u[3]-u[1])/2);Fb(b,1,1)};function Zl(){this.a="precision mediump float;\nvarying vec2 v_texCoord;\n\n\nuniform sampler2D u_texture;\n\nvoid main(void) {\n  gl_FragColor = texture2D(u_texture, v_texCoord);\n}\n"}R(Zl,ol);da(Zl);function $l(){this.a="varying vec2 v_texCoord;\n\n\nattribute vec2 a_position;\nattribute vec2 a_texCoord;\nuniform vec4 u_tileOffset;\n\nvoid main(void) {\n  gl_Position = vec4(a_position * u_tileOffset.xy + u_tileOffset.zw, 0., 1.);\n  v_texCoord = a_texCoord;\n}\n\n\n"}R($l,pl);da($l);
function am(b,d){this.b=b.getUniformLocation(d,"u_texture");this.g=b.getUniformLocation(d,"u_tileOffset");this.a=b.getAttribLocation(d,"a_position");this.f=b.getAttribLocation(d,"a_texCoord")};function bm(b,d){Tl.call(this,b,d);this.M=Zl.Mb();this.ja=$l.Mb();this.b=null;this.$=new tl([0,0,0,1,1,0,1,1,0,1,0,0,1,1,1,0]);this.B=this.h=null;this.s=-1;this.P=[0,0]}R(bm,Tl);bm.prototype.aa=function(){wl(this.g.h,this.$);bm.za.aa.call(this)};bm.prototype.i=function(b,d,e){var g=this.g;return function(k,p){return Xg(b,d,k,p,function(b){var d=Dg(g.f,b.getKey());d&&(e[k]||(e[k]={}),e[k][b.na.toString()]=b);return d})}};bm.prototype.w=function(){bm.za.w.call(this);this.b=null};
bm.prototype.Ld=function(b,d,e){var g=this.g,k=e.a,p=b.L,q=p.ba,u=this.a,v=u.fa(),w=v.lb(q),z=Sg(w,p.H),B=w.O(z),C=Yg(v,z,q),D=C[0]/Qb(Rg(w,z),this.P)[0],F=B/D,I=v.Xc(q),J=p.T,M;B==p.H?(J=kh(J,B,b.size),M=kc(J,B,p.rotation,b.size)):M=b.D;B=Og(w,M,B);if(this.h&&Kc(this.h,B)&&this.s==v.f)F=this.B;else{var E=[B.f-B.a+1,B.g-B.b+1],G=Math.pow(2,Math.ceil(Math.log(Math.max(E[0]*C[0],E[1]*C[1]))/Math.LN2)),E=F*G,N=w.kb(z),P=N[0]+B.a*C[0]*F,F=N[1]+B.b*C[1]*F,F=[P,F,P+E,F+E];Ul(this,b,G);k.viewport(0,0,G,
G);k.clearColor(0,0,0,0);k.clear(16384);k.disable(3042);G=Al(e,this.M,this.ja);Bl(e,G);this.b||(this.b=new am(k,G));vl(e,34962,this.$);k.enableVertexAttribArray(this.b.a);k.vertexAttribPointer(this.b.a,2,5126,!1,16,0);k.enableVertexAttribArray(this.b.f);k.vertexAttribPointer(this.b.f,2,5126,!1,16,8);k.uniform1i(this.b.b,0);e={};e[z]={};var O=this.i(v,q,e),Q=Wc(u),G=!0,P=Sb(),V=new Ic(0,0,0,0),K,S,ba;for(S=B.a;S<=B.f;++S)for(ba=B.b;ba<=B.g;++ba){N=mh(v,z,S,ba,D,q);if(void 0!==d.D&&(K=Lg(w,N.na,P),
!mc(K,d.D)))continue;K=N.W();K=2==K||4==K||3==K&&!Q;!K&&N.a&&(N=N.a);K=N.W();if(2==K){if(Dg(g.f,N.getKey())){e[z][N.na.toString()]=N;continue}}else if(4==K||3==K&&!Q)continue;G=!1;K=Kg(w,N.na,O,V,P);K||(N=Ng(w,N.na,V,P))&&O(z+1,N)}d=Object.keys(e).map(Number);d.sort(Zc);for(var O=new Float32Array(4),Y,ca,X,Q=0,V=d.length;Q<V;++Q)for(Y in ca=e[d[Q]],ca)N=ca[Y],K=Lg(w,N.na,P),S=2*(K[2]-K[0])/E,ba=2*(K[3]-K[1])/E,X=2*(K[0]-F[0])/E-1,K=2*(K[1]-F[1])/E-1,xb(O,S,ba,X,K),k.uniform4fv(this.b.g,O),cm(g,N,
C,I*D),k.drawArrays(5,0,4);G?(this.h=B,this.B=F,this.s=v.f):(this.B=this.h=null,this.s=-1,b.rb=!0)}jh(b.Pc,v,z,B);var ua=g.j;lh(b,v,w,D,q,M,z,u.get("preload"),function(b){var d;(d=2!=b.W()||Dg(g.f,b.getKey()))||(d=b.getKey()in ua.kc);d||ua.enqueue([b,Qg(w,b.na),w.O(b.na[0]),C,I*D])},this);gh(b,v);ih(b,v);k=this.G;Db(k);Fb(k,(J[0]-F[0])/(F[2]-F[0]),(J[1]-F[1])/(F[3]-F[1]));0!==p.rotation&&Hb(k,p.rotation);Gb(k,b.size[0]*p.H/(F[2]-F[0]),b.size[1]*p.H/(F[3]-F[1]));Fb(k,-.5,-.5);return!0};function dm(b,d){Tl.call(this,b,d);this.h=!1;this.P=-1;this.M=NaN;this.B=Sb();this.s=this.b=this.$=null}R(dm,Tl);A=dm.prototype;A.Le=function(b,d,e){this.s=d;var g=b.L,k=this.b;k&&!k.g()&&k.b(e,g.T,g.H,g.rotation,b.size,b.ga,d.opacity,d.Dc?b.Wb:{})};A.aa=function(){var b=this.b;b&&(Ll(b,this.g.h)(),this.b=null);dm.za.aa.call(this)};
A.Cb=function(b,d,e,g){if(this.b&&this.s){var k=d.L,p=this.a,q={};return this.b.h(b,this.g.h,k.T,k.H,k.rotation,d.size,d.ga,this.s.opacity,{},function(b){var d=L(b).toString();if(!(d in q))return q[d]=!0,e.call(g,b,p)})}};A.Me=function(){eh(this)};
A.Ld=function(b,d,e){function g(b){var d,e=b.h;e?d=e.call(b,w):(e=k.i)&&(d=e(b,w));if(d){if(d){e=!1;if(Array.isArray(d))for(var g=0,p=d.length;g<p;++g)e=gk(C,b,d[g],fk(w,z),this.Me,this)||e;else e=gk(C,b,d,fk(w,z),this.Me,this)||e;b=e}else b=!1;this.h=this.h||b}}var k=this.a;d=k.fa();hh(b.xa,d.jb());ih(b,d);var p=b.la[0],q=b.la[1],u=k.j,v=k.l;if(!this.h&&!u&&p||!v&&q)return!0;var q=b.D,u=b.L,p=u.ba,w=u.H,z=b.ga,u=k.f,B=k.a,v=k.get("renderOrder");void 0===v&&(v=ek);q=Ub(q,B*w);if(!this.h&&this.M==
w&&this.P==u&&this.$==v&&Wb(this.B,q))return!0;this.b&&b.fb.push(Ll(this.b,e));this.h=!1;var C=new Kl(.5*w/z,q,k.a);Uk(d,q,w,p);if(v){var D=[];d.Kb(q,function(b){D.push(b)},this);D.sort(v);D.forEach(g,this)}else d.Kb(q,g,this);Ml(C,e);this.M=w;this.P=u;this.$=v;this.B=q;this.b=C;return!0};function em(b,d){qh.call(this,0,d);this.a=document.createElement("CANVAS");this.a.style.width="100%";this.a.style.height="100%";this.a.className="ol-unselectable";Te(b,this.a,0);this.w=this.Z=0;this.da=pf();this.l=!0;this.g=vf(this.a,{antialias:!0,depth:!1,failIfMajorPerformanceCaveat:!0,preserveDrawingBuffer:!1,stencil:!0});this.h=new ul(this.a,this.g);T(this.a,"webglcontextlost",this.Xg,this);T(this.a,"webglcontextrestored",this.Yg,this);this.f=new Cg;this.u=null;this.j=new vh(function(b){var d=
b[1];b=b[2];var k=d[0]-this.u[0],d=d[1]-this.u[1];return 65536*Math.log(b)+Math.sqrt(k*k+d*d)/b}.bind(this),function(b){return b[0].getKey()});this.G=function(){if(0!==this.j.a.length){zh(this.j);var b=wh(this.j);cm(this,b[0],b[3],b[4])}return!1}.bind(this);this.i=0;fm(this)}R(em,qh);
function cm(b,d,e,g){var k=b.g,p=d.getKey();if(Dg(b.f,p))b=b.f.get(p),k.bindTexture(3553,b.Ya),9729!=b.De&&(k.texParameteri(3553,10240,9729),b.De=9729),9729!=b.Ge&&(k.texParameteri(3553,10240,9729),b.Ge=9729);else{var q=k.createTexture();k.bindTexture(3553,q);if(0<g){var u=b.da.canvas,v=b.da;b.Z!==e[0]||b.w!==e[1]?(u.width=e[0],u.height=e[1],b.Z=e[0],b.w=e[1]):v.clearRect(0,0,e[0],e[1]);v.drawImage(d.mb(),g,g,e[0],e[1],0,0,e[0],e[1]);k.texImage2D(3553,0,6408,6408,5121,u)}else k.texImage2D(3553,0,
6408,6408,5121,d.mb());k.texParameteri(3553,10240,9729);k.texParameteri(3553,10241,9729);k.texParameteri(3553,10242,33071);k.texParameteri(3553,10243,33071);b.f.set(p,{Ya:q,De:9729,Ge:9729})}}A=em.prototype;A.zd=function(b){if(b instanceof aj)return new Wl(this,b);if(b instanceof Vc)return new bm(this,b);if(b instanceof uj)return new dm(this,b);$a("unexpected layer configuration");return null};function gm(b,d,e){b=b.Aa();hb(b,d)&&U(b,new Sc(d,b,0,e))}
A.aa=function(){var b=this.g;b.isContextLost()||this.f.forEach(function(d){d&&b.deleteTexture(d.Ya)});this.h.qa();em.za.aa.call(this)};A.Hf=function(b,d){for(var e=this.g,g;1024<this.f.g-this.i;){if(g=this.f.a.Zb)e.deleteTexture(g.Ya);else if(+this.f.a.Id==d.index)break;else--this.i;this.f.pop()}};A.ka=function(){return"webgl"};A.Xg=function(b){b.preventDefault();this.f.clear();this.i=0;b=this.b;for(var d in b)b[d].w()};A.Yg=function(){fm(this);this.Aa().S()};
function fm(b){b=b.g;b.activeTexture(33984);b.blendFuncSeparate(770,771,1,771);b.disable(2884);b.disable(2929);b.disable(3089);b.disable(2960)}
A.fd=function(b){var d=this.h,e=this.g;if(e.isContextLost())return!1;if(!b)return this.l&&(ef(this.a,!1),this.l=!1),!1;this.u=b.focus;this.f.set((-b.index).toString(),null);++this.i;gm(this,"precompose",b);var g=[],k=b.Nb;dd(k);var p=b.L.H,q,u,v,w;q=0;for(u=k.length;q<u;++q)w=k[q],Uc(w,p)&&"ready"==w.Ud&&(v=th(this,w.Ab),v.Ld(b,w,d)&&g.push(w));k=b.size[0]*b.ga;p=b.size[1]*b.ga;if(this.a.width!=k||this.a.height!=p)this.a.width=k,this.a.height=p;e.bindFramebuffer(36160,null);e.clearColor(0,0,0,0);
e.clear(16384);e.enable(3042);e.viewport(0,0,this.a.width,this.a.height);q=0;for(u=g.length;q<u;++q)w=g[q],v=th(this,w.Ab),v.Le(b,w,d);this.l||(ef(this.a,!0),this.l=!0);rh(b);1024<this.f.g-this.i&&b.fb.push(this.Hf.bind(this));0!==this.j.a.length&&(b.fb.push(this.G),b.rb=!0);gm(this,"postcompose",b);uh(this,b);b.fb.push(sh)};
A.Ie=function(b,d,e,g,k,p){var q;if(this.g.isContextLost())return!1;var u=d.L,v=d.Nb,w;for(w=v.length-1;0<=w;--w){q=v[w];var z=q.Ab;if(Uc(q,u.H)&&k.call(p,z)&&(q=th(this,z).Cb(b,d,e,g)))return q}};var hm=["canvas","webgl","dom"];
function im(b){lb.call(this);var d=jm(b);this.ob=void 0!==b.xg?b.xg:!1;this.pb=void 0!==b.yg?b.yg:!1;this.Ib=void 0!==b.ga?b.ga:Bf;this.Hb=d.hc;this.Ia=function(){this.j=void 0;this.Ah.call(this,Date.now())}.bind(this);this.Ja=yb();this.$b=yb();this.ab=0;this.b=null;this.ja=Sb();this.w=this.G=null;this.a=document.createElement("DIV");this.a.className="ol-viewport"+(Ef?" ol-touch":"");this.a.style.position="relative";this.a.style.overflow="hidden";this.a.style.width="100%";this.a.style.height="100%";
this.a.style.msTouchAction="none";this.a.style.f="none";this.u=document.createElement("DIV");this.u.className="ol-overlaycontainer";this.a.appendChild(this.u);this.s=document.createElement("DIV");this.s.className="ol-overlaycontainer-stopevent";b=["click","dblclick","mousedown","touchstart","mspointerdown",wg,"mousewheel","wheel"];for(var e=0,g=b.length;e<g;++e)T(this.s,b[e],eb);this.a.appendChild(this.s);this.ca=new og(this);for(var k in zg)T(this.ca,zg[k],this.xe,this);this.V=d.Bc;this.l=null;T(this.a,
"wheel",this.ec,this);T(this.a,"mousewheel",this.ec,this);this.h=d.controls;this.Ra=d.fc;this.i=d.Gc;this.Re={};this.P=new d.Bh(this.a,this);this.M=null;this.B=[];this.oa=[];this.ua=new Ah(this.Pf.bind(this),this.kg.bind(this));this.pd={};T(this,ob("layergroup"),this.Vf,this);T(this,ob("view"),this.lg,this);T(this,ob("size"),this.hg,this);T(this,ob("target"),this.jg,this);mb(this,d.values);this.h.forEach(function(b){b.ta(this)},this);T(this.h,"add",function(b){b.element.ta(this)},this);T(this.h,"remove",
function(b){b.element.ta(null)},this);this.Ra.forEach(function(b){b.ta(this)},this);T(this.Ra,"add",function(b){b.element.ta(this)},this);T(this.Ra,"remove",function(b){b.element.ta(null)},this);this.i.forEach(this.fe,this);T(this.i,"add",function(b){this.fe(b.element)},this);T(this.i,"remove",function(b){var d=b.element.Da();void 0!==d&&delete this.Re[d.toString()];b.element.ta(null)},this)}R(im,lb);A=im.prototype;A.qb=function(b){this.Ra.push(b)};function km(b,d){lm(b).get("layers").push(d)}
A.fe=function(b){var d=b.Da();void 0!==d&&(this.Re[d.toString()]=b);b.ta(this)};A.bb=function(b){this.S();Array.prototype.push.apply(this.B,arguments)};A.aa=function(){this.ca.qa();this.P.qa();Fa(this.a,"wheel",this.ec,this);Fa(this.a,"mousewheel",this.ec,this);void 0!==this.g&&(H.removeEventListener("resize",this.g,!1),this.g=void 0);this.j&&(H.cancelAnimationFrame(this.j),this.j=void 0);this.set("target",null);im.za.aa.call(this)};
function mm(b,d,e,g,k){if(b.b)return d=b.Oa(d),b.P.Ie(d,b.b,e,void 0!==g?g:null,void 0!==k?k:nd,null)}function nm(b){b=b.get("target");return void 0!==b?Le(b):null}A.Oa=function(b){var d=this.b;return d?(b=b.slice(),ch(d.Se,b,b)):null};function lm(b){return b.get("layergroup")}function om(b){return lm(b).get("layers")}function ki(b,d){var e=b.b;if(e){var g=d.slice(0,2);return ch(e.bc,g,g)}return null}function pi(b){return b.get("size")}function W(b){return b.get("view")}
A.Pf=function(b,d,e,g){var k=this.b;if(!(k&&d in k.Qc&&k.Qc[d][b.na.toString()]))return Infinity;b=e[0]-k.focus[0];e=e[1]-k.focus[1];return 65536*Math.log(g)+Math.sqrt(b*b+e*e)/g};A.ec=function(b,d){var e=new mg(d||b.type,this,b);this.xe(e)};A.xe=function(b){if(this.b){this.M=b.b;b.Lb=this.b;var d=this.Ra.a,e;if(!1!==U(this,b))for(e=d.length-1;0<=e;e--){var g=d[e];if(g.get("active")&&!g.handleEvent(b))break}}};
A.gg=function(){var b=this.b,d=this.ua;if(0!==d.a.length){var e=16,g=e;if(b){var k=b.la;k[0]&&(e=this.ob?8:0,g=2);k[1]&&(e=this.pb?8:0,g=2)}if(d.g<e){zh(d);for(var k=0,p,q;d.g<e&&k<g&&0<d.a.length;)p=wh(d)[0],q=p.getKey(),0!==p.W()||q in d.b||(d.b[q]=!0,++d.g,++k,p.load())}}d=this.oa;e=0;for(g=d.length;e<g;++e)d[e](this,b);d.length=0};A.hg=function(){this.S()};
A.jg=function(){var b;this.get("target")&&(b=nm(this));if(this.l){for(var d=0,e=this.l.length;d<e;++d)Aa(this.l[d]);this.l=null}b?(b.appendChild(this.a),b=this.V?this.V:b,this.l=[T(b,"keydown",this.ec,this),T(b,"keypress",this.ec,this)],this.g||(this.g=this.Xd.bind(this),H.addEventListener("resize",this.g,!1))):(Ue(this.a),void 0!==this.g&&(H.removeEventListener("resize",this.g,!1),this.g=void 0));this.Xd()};A.kg=function(){this.S()};A.mg=function(){this.S()};
A.lg=function(){this.G&&(Aa(this.G),this.G=null);var b=W(this);b&&(this.G=T(b,"propertychange",this.mg,this));this.S()};A.Wf=function(){this.S()};A.Xf=function(){this.S()};A.Vf=function(){this.w&&(this.w.forEach(Aa),this.w=null);var b=lm(this);b&&(this.w=[T(b,"propertychange",this.Xf,this),T(b,"change",this.Wf,this)]);this.S()};A.S=function(){void 0===this.j&&(this.j=H.requestAnimationFrame(this.Ia))};
A.Ah=function(b){var d,e,g,k=pi(this),p=W(this),q=null;if(d=void 0!==k&&0<k[0]&&0<k[1]&&p)d=!!Wd(p)&&void 0!==p.O();if(d){var q=p.b.slice(),u=lm(this).Fd(),v={};d=0;for(e=u.length;d<e;++d)v[L(u[d].Ab)]=u[d];g=p.W();q={rb:!1,xa:{},bc:this.Ja,D:null,focus:this.M?this.M:g.T,index:this.ab++,Cc:v,Nb:u,hc:ta({},this.Hb),ga:this.Ib,Se:this.$b,fb:[],size:k,Wb:this.pd,Qh:this.ua,time:b,Pc:{},L:g,la:q,Qc:{}}}if(q){b=this.B;d=k=0;for(e=b.length;d<e;++d)p=b[d],p(this,q)&&(b[k++]=p);b.length=k;q.D=kc(g.T,g.H,
g.rotation,q.size)}this.b=q;this.P.fd(q);q&&(q.rb&&this.S(),Array.prototype.push.apply(this.oa,q.fb),0!==this.B.length||q.la[0]||q.la[1]||ac(q.D,this.ja)||(U(this,new kf("moveend",this,q)),Vb(q.D,this.ja)));U(this,new kf("postrender",this,q));d=g=this.gg;this&&(d=pa(g,this));!ja(H.setImmediate)||H.Window&&H.Window.prototype&&!ge("Edge")&&H.Window.prototype.setImmediate==H.setImmediate?(pe||(pe=qe()),pe(d)):H.setImmediate(d)};
A.Xd=function(){var b=nm(this);if(b){var d=Ke(b),e=se&&b.currentStyle;if(e&&"CSS1Compat"==Ie(d).a.compatMode&&"auto"!=e.width&&"auto"!=e.height&&!e.boxSizing)d=ff(b,e.width,"width","pixelWidth"),b=ff(b,e.height,"height","pixelHeight"),b=new He(d,b);else{e=new He(b.offsetWidth,b.offsetHeight);if(se)var d=gf(b,"paddingLeft"),g=gf(b,"paddingRight"),k=gf(b,"paddingTop"),p=gf(b,"paddingBottom"),d=new Xe(k,g,p,d);else d=af(b,"paddingLeft"),g=af(b,"paddingRight"),k=af(b,"paddingTop"),p=af(b,"paddingBottom"),
d=new Xe(parseFloat(k),parseFloat(g),parseFloat(p),parseFloat(d));!se||9<=Number(Ee)?(g=af(b,"borderLeftWidth"),k=af(b,"borderRightWidth"),p=af(b,"borderTopWidth"),b=af(b,"borderBottomWidth"),b=new Xe(parseFloat(p),parseFloat(k),parseFloat(b),parseFloat(g))):(g=jf(b,"borderLeft"),k=jf(b,"borderRight"),p=jf(b,"borderTop"),b=jf(b,"borderBottom"),b=new Xe(p,k,b,g));b=new He(e.width-b.left-d.left-d.right-b.right,e.height-b.top-d.top-d.bottom-b.bottom)}this.set("size",[b.width,b.height])}else this.set("size",
void 0)};
function jm(b){var d=null;void 0!==b.Bc&&(d="string"===typeof b.Bc?document.getElementById(b.Bc):b.Bc);var e={},g={};if(void 0===b.Ea||"boolean"===typeof b.Ea&&b.Ea)g["data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAMAAABEpIrGAAAAA3NCSVQICAjb4U/gAAAACXBIWXMAAAHGAAABxgEXwfpGAAAAGXRFWHRTb2Z0d2FyZQB3d3cuaW5rc2NhcGUub3Jnm+48GgAAAhNQTFRF////AP//AICAgP//AFVVQECA////K1VVSbbbYL/fJ05idsTYJFtbbcjbJllmZszWWMTOIFhoHlNiZszTa9DdUcHNHlNlV8XRIVdiasrUHlZjIVZjaMnVH1RlIFRkH1RkH1ZlasvYasvXVsPQH1VkacnVa8vWIVZjIFRjVMPQa8rXIVVkXsXRsNveIFVkIFZlIVVj3eDeh6GmbMvXH1ZkIFRka8rWbMvXIFVkIFVjIFVkbMvWH1VjbMvWIFVlbcvWIFVla8vVIFVkbMvWbMvVH1VkbMvWIFVlbcvWIFVkbcvVbMvWjNPbIFVkU8LPwMzNIFVkbczWIFVkbsvWbMvXIFVkRnB8bcvW2+TkW8XRIFVkIlZlJVloJlpoKlxrLl9tMmJwOWd0Omh1RXF8TneCT3iDUHiDU8LPVMLPVcLPVcPQVsPPVsPQV8PQWMTQWsTQW8TQXMXSXsXRX4SNX8bSYMfTYcfTYsfTY8jUZcfSZsnUaIqTacrVasrVa8jTa8rWbI2VbMvWbcvWdJObdcvUdszUd8vVeJaee87Yfc3WgJyjhqGnitDYjaarldPZnrK2oNbborW5o9bbo9fbpLa6q9ndrL3ArtndscDDutzfu8fJwN7gwt7gxc/QyuHhy+HizeHi0NfX0+Pj19zb1+Tj2uXk29/e3uLg3+Lh3+bl4uXj4ufl4+fl5Ofl5ufl5ujm5+jmySDnBAAAAFp0Uk5TAAECAgMEBAYHCA0NDg4UGRogIiMmKSssLzU7PkJJT1JTVFliY2hrdHZ3foSFhYeJjY2QkpugqbG1tre5w8zQ09XY3uXn6+zx8vT09vf4+Pj5+fr6/P39/f3+gz7SsAAAAVVJREFUOMtjYKA7EBDnwCPLrObS1BRiLoJLnte6CQy8FLHLCzs2QUG4FjZ5GbcmBDDjxJBXDWxCBrb8aM4zbkIDzpLYnAcE9VXlJSWlZRU13koIeW57mGx5XjoMZEUqwxWYQaQbSzLSkYGfKFSe0QMsX5WbjgY0YS4MBplemI4BdGBW+DQ11eZiymfqQuXZIjqwyadPNoSZ4L+0FVM6e+oGI6g8a9iKNT3o8kVzNkzRg5lgl7p4wyRUL9Yt2jAxVh6mQCogae6GmflI8p0r13VFWTHBQ0rWPW7ahgWVcPm+9cuLoyy4kCJDzCm6d8PSFoh0zvQNC5OjDJhQopPPJqph1doJBUD5tnkbZiUEqaCnB3bTqLTFG1bPn71kw4b+GFdpLElKIzRxxgYgWNYc5SCENVHKeUaltHdXx0dZ8uBI1hJ2UUDgq82CM2MwKeibqAvSO7MCABq0wXEPiqWEAAAAAElFTkSuQmCC"]="http://openlayers.org/";
else{var k=b.Ea;"string"===typeof k?g[k]="":ka(k)&&(g[k.src]=k.href)}k=b.gc instanceof Oi?b.gc:new Oi({gc:b.gc});e.layergroup=k;e.target=b.target;e.view=void 0!==b.view?b.view:new Ud;var k=qh,p;void 0!==b.Hc?Array.isArray(b.Hc)?p=b.Hc:"string"===typeof b.Hc?p=[b.Hc]:$a("Incorrect format for renderer option"):p=hm;var q,u;q=0;for(u=p.length;q<u;++q){var v=p[q];if("canvas"==v){if(Df){k=dl;break}}else if("dom"==v){k=ll;break}else if("webgl"==v&&wf){k=em;break}}void 0!==b.controls?p=Array.isArray(b.controls)?
new qb(b.controls.slice()):b.controls:(p={},q=new qb,(void 0!==p.zoom?p.zoom:1)&&q.push(new Mh(p.Pi)),(void 0!==p.rotate?p.rotate:1)&&q.push(new Kh(p.Ni)),(void 0!==p.lf?p.lf:1)&&q.push(new Ch(p.Bi)),p=q);if(void 0!==b.fc)q=Array.isArray(b.fc)?new qb(b.fc.slice()):b.fc;else{q={};u=new qb;v=new Nh;(void 0!==q.kf?q.kf:1)&&u.push(new li);(void 0!==q.xf?q.xf:1)&&u.push(new Th({Jb:q.hi,duration:q.od}));(void 0!==q.yf?q.yf:1)&&u.push(new gi({vg:v}));(void 0!==q.kh?q.kh:1)&&u.push(new Gi);(void 0!==q.lh?
q.lh:1)&&u.push(new Ki({duration:q.od}));if(void 0!==q.ug?q.ug:1)u.push(new Ai),u.push(new Ci({Jb:q.hi,duration:q.od}));(void 0!==q.Eg?q.Eg:1)&&u.push(new Ei({duration:q.od}));(void 0!==q.Mh?q.Mh:1)&&u.push(new zi({duration:q.od}));q=u}b=void 0!==b.Gc?Array.isArray(b.Gc)?new qb(b.Gc.slice()):b.Gc:new qb;return{controls:p,fc:q,Bc:d,hc:g,Gc:b,Bh:k,values:e}}vc(Ti);vc($i);$i.forEach(function(b){Ti.forEach(function(d){wc(b,d,Ui);wc(d,b,Vi)})});function Z(b,d){lb.call(this);var e=d||{};this.va=b||-1;try{this.va=parseInt(this.va)}catch(g){b=-1}this.Ta=pm.ke(e.server||"");this.a=pm.ad(this.Ta)?!0:!1;this.a||-1===window.location.href.indexOf("haveMadeCrossOriginLogin_")||(this.a=!0);this.Vc="ome_viewer";"string"===typeof e.uf&&(this.Vc=e.uf);this.v=this.Va=null;this.Za=new qm;this.o=null;this.b="object"===typeof e.eventbus&&"function"===typeof e.eventbus.subscribe&&"function"===typeof e.eventbus.unsubscribe&&"function"===typeof e.eventbus.publish?
e.eventbus:null;this.h=function(b,d){0>b.va||pm.Jc({server:b.Ta,uri:"/webgateway/imgData/"+b.va,jsonp:!0,success:function(e){if("string"===typeof e)try{e=JSON.parse(e)}catch(D){console.error("Failed to parse json response!")}if("object"!==typeof e)console.error("Image Request did not receive proper response!");else if(b.Va=e,"undefined"===typeof b.Va.size)console.error("Image Info does not contain size info!");else{var q=null;e=b.Va.size;if(b.Va.zoomLevelScaling){q=[];for(r in b.Va.zoomLevelScaling)q.push(1/
b.Va.zoomLevelScaling[r]);q=q.reverse()}var u=q?q.length:-1,v=[e.width/2,-e.height/2],w=new rc({code:"OMERO",units:"pixels",D:[0,0,e.width,e.height]}),z=[],B;for(B in b.Va.channels){var C=b.Va.channels[B];z.push({active:C.active,color:C.color,min:C.window.min,max:C.window.max,start:C.window.start,end:C.window.end})}B=new rm({Gh:b.Ta,uri:"/webgateway/render_image_region",Qa:b.va,width:e.width,height:e.height,oh:1<e.z?parseInt(e.z/2):0,ud:z,xb:1<u?q:[1],Th:b.Va.tile_size?b.Va.tile_size:null});e=new Ud({ba:w,
T:v,D:[0,-e.height,e.width,0],xb:sm(q),H:1<u?q[0]:1});u=tm();q=new qb;for(inter in u)q.push(u[inter].ref),b.Za.set(inter,u[inter]);u=um();v=new qb;for(contr in u)v.push(u[contr].ref),b.Za.set(contr,u[contr]);b.o=new im({Ea:!1,controls:v,fc:q,Hc:"canvas",gc:[new Vc({source:B,Od:Infinity})],target:b.Vc,view:e});"function"===typeof d&&d.call(b)}},error:function(d){console.error("Error retrieving image info for id: "+b.va+(d&&0<d.length?"\\n"+d:""))}})};pm.ad(this.Ta)||this.a?this.h(this):pm.Ee(this.Ta)}
R(Z,lb);A=Z.prototype;A.bh=function(){var b=Le(this.Vc);b&&Ye(b,"visibility","visible")};A.ng=function(){var b=Le(this.Vc);b&&Ye(b,"visibility","hidden")};A.rf=function(b,d){var e=this.qa("boolean"===typeof d?d:!1);this.va=b;try{this.va=parseInt(this.va)}catch(g){}pm.ad(this.Ta)||this.a?this.h(this,function(){for(c in e){var b=e[c];vm(this,b.key,b.type)}}):pm.Ee(this.Ta)};
A.sd=function(b){this.o instanceof im&&!(this.v instanceof wm)&&(this.v=new wm(this,b),km(this.o,new uj({source:this.v})),xm(this.v,[ym.SELECT]),this.g=T(W(this.o),"change:rotation",function(){var b=zm(this);b&&b.A()},this))};
A.Kh=function(b,d){var e=Am(this);if(e){var g=b||!1;if(fa(d)&&0!==d.length){if(e=zm(this),"boolean"!==typeof g&&(g=!0),fa(d))for(var k in d){var p=d[k],q=p.indexOf(":");if(!(1>q)){var u=p.substring(0,q),p=p.substring(q+1);try{u=parseInt(u),p=parseInt(p)}catch(v){continue}e.g&&e.g[""+u+":"+p]instanceof yk&&(e.g[""+u+":"+p].visible=g);e.A()}}}else e.set("visible",g)}};
A.Qd=function(b){var d=!1;"boolean"===typeof b&&(d=b);!d&&this.v instanceof wm&&(xm(this.v,[ym.DEFAULT]),this.v.qa(),this.v=null);"undefined"!==typeof this.g&&this.g&&Aa(this.g);if(Am(this))for(b=sb(om(this.o)),d&&--b,d=b-1;0<d;d--)b=om(this.o).item(d),b.set("source",null),b.b=null,ub(om(this.o),d)};A.Lh=function(b,d){if(Am(this)){var e=zm(this);"boolean"===typeof b&&(e.hd=b,e.A());e=zm(this);"boolean"===typeof d&&(e.Db=d,e.A())}};
A.qb=function(b,d){if(ka(d)){var e=Bm.get(b,null);null!=e&&d instanceof e.clazz&&this.o instanceof im&&"string"===typeof b&&null==this.Za.get(b,null)&&(this.o.qb(d),this.Za.set(b,{type:"interaction",ref:d,defaults:!1,links:[]}))}else vm(this,b,"interaction")};A.Zg=function(b){vm(this,b,"control")};
function vm(b,d,e,g){if(b.o instanceof im&&"string"===typeof d&&"string"===typeof e&&null==b.Za.get(d,null)){var k=!0;"boolean"===typeof g&&(k=g);g="control"===e?Cm.get(d,null):Bm.get(d,null);if(null!=g&&(newComponent=new g.clazz(g.options),"control"===e?b.o.h.push(newComponent):b.o.qb(newComponent),b.Za.set(d,{type:e,ref:newComponent,defaults:g.defaults,links:g.links}),k))for(link in g.links)vm(b,g.links[link],"control"===e?"interaction":"control",!1)}}
A.ed=function(b,d){if(this.o instanceof im&&"string"===typeof b){var e=this.Za.get(b,null);if(null!=e){var g=!0;"boolean"===typeof d&&(g=d);"control"===e.type?this.o.h.remove(e.ref):this.o.Ra.remove(e.ref);"function"===typeof e.ref.aa&&"function"===typeof e.ref.qa&&e.ref.qa();this.Za.remove(b);if(g)for(link in e.links)this.ed(e.links[link],!1)}}};
A.Ih=function(b,d){if("string"===typeof b&&0!==b.length){var e=b.substr(0,1).toLowerCase(),g=Dm(this),k=Em.get(e,null);if(null!==g&&null!=k&&k.settable){var e=Array.prototype.slice.call(arguments,1),p=0;try{for(c in"x"===b&&(b="width"),"y"===b&&(b="height"),p=this.Va.size[b],e){"string"===typeof e[c]&&(e[c]=parseInt(e[c]));if("number"!==typeof e[c]||0>e[c])return;e[c]=parseInt(e[c]);if(e[c]>p)return}}catch(q){return}k="set"+k.method;try{g[k]("c"!==b?e[0]:e)}catch(q){return}if(Am(this)){e=zm(this);
e.N&&Fm(e.N);e.o.Qd(!0);k=[];p=e.a.getAll();for(f in p)2!==p[f].state||"number"===typeof p[f].theZ&&-1!==p[f].theZ||"number"===typeof p[f].theT&&-1!==p[f].theT||"number"===typeof p[f].theC&&-1!==p[f].theC||k.push(p[f]);e.clear();p=Gm(e);fa(p)||(p=[]);p=p.concat(k);0<p.length&&e.yb(p)}Hm(g)}}};A.Ed=function(b){if("string"===typeof b&&0!==b.length){var d=b.substr(0,1).toLowerCase();b=Dm(this);if(null!=b&&(d=Em.get(d,null),null!=d)){d="get"+d.method;try{return b[d]()}catch(e){return null}}}};
A.jf=function(b){var d=Dm(this);d&&"function"===typeof b&&(d.Nd=b,Hm(d))};A.yh=function(){var b=Dm(this);b&&(b.Nd=null,Hm(b))};function Am(b){return!(b.o instanceof im)||2>sb(om(b.o))?null:om(b.o).item(sb(om(b.o))-1)}function Dm(b){return(b=b.o instanceof im&&0!=sb(om(b.o))?om(b.o).item(0):null)?b.fa():null}function zm(b){return(b=Am(b))?b.fa():null}A.Da=function(){return this.va};A.Of=function(){return this.Ta};A.Sd=function(b){Am(this)&&xm(zm(this),b)};
A.Jf=function(b,d,e,g){fa(g)&&0!==g.length||(g=W(this.o).g.J());b=Im(b,d,g,e);if(null!==b)if(Am(this)){for(s in b)d=b[s],W(this.o).O(),e=W(this.o).ha(),d.C()instanceof Jm&&0!==e&&!zm(this).Db&&d.C().rotate(-e),Km(d,this.v);zm(this).yb(b)}else this.sd({features:b})};function Lm(b){return b.o instanceof im?b.o&&W(b.o)&&W(b.o).W()?(W(b.o).W(),kc(Wd(W(b.o)),W(b.o).O(),W(b.o).ha(),pi(b.o))):W(b.o)&&W(b.o).g?(b=W(b.o).g.J(),[b[0],-b[3],b[2],-b[1]]):null:null}
A.hf=function(b){null===zm(this)&&this.sd();"boolean"!==typeof b&&(b=!1);b!==this.v.i&&(this.v.i=b,this.v.N&&(Fm(this.v.N),b=this.Za.get("boxSelect",null))&&(b=b.ref,Mm(b),b.l()),nm(this.o).style="",this.v.i?Nm(this.v):(this.B=null,this.v.j=null,this.v.b=null,this.v.G=0))};A.Dg=function(b){this.v instanceof wm&&"object"===typeof b&&null!==b&&Om(b,this.v)};
A.dh=function(b,d){if(this.v instanceof wm){d="boolean"===typeof d?d:!0;var e="boolean"===typeof b&&b&&this.v.N?this.v.N.ma():new qb(this.v.ma()),e=Pm(e,d);null!==e&&0!==e.count&&Qm(this.v,e)}};A.Ff=function(b){this.v instanceof wm&&this.v.N instanceof Rm&&this.v.N.b(b)};
A.ah=function(b){if(this.v instanceof wm&&"string"===typeof b&&0!==b.length){var d=this.v.s.slice();this.Sd([Sm]);if(this.v.hb instanceof Tm){if(d=this.v.hb,"string"===typeof b&&0!==b.length){var e=null;switch(b.toLowerCase()){case "point":e=Tm.prototype.Cf;break;case "polygon":e=Tm.prototype.Df;break;case "ellipse":e=Tm.prototype.zf;break;case "line":e=Tm.prototype.Bf;break;case "rectangle":e=Tm.prototype.Ef;break;case "label":e=Tm.prototype.Af;break;default:console.error("shape type not supported"),
xm(d.v,d.Pd)}e&&e.call(d)}}else this.Sd(d),console.error("Could not get instance of Draw")}};A.qa=function(b){this.Qd();"boolean"!==typeof b&&(b=!1);var d=b?[]:null;this.o instanceof im&&(b&&viewer_state?(this.Za.forEach(function(b,g){this.ed(g);"object"===typeof b&&b.defaults&&d.push({key:g,type:b.type})},this),this.Za.clear()):(this.Za.clear(),this.o.h.clear(),this.o.Ra.clear()),(b=Dm(this))&&b.qa(),om(this.o).clear(),this.o.i.clear(),this.o.qa());this.o=this.Va=null;return d};
A.wf=function(){this.qa();this.b&&this.b.unsubscribe(this);this.b=null};A.$g=function(b,d,e){if(null!==Dm(this)){var g=Dm(this);"number"!==typeof b||"number"!==typeof d||"number"!==typeof e||0>b||b>=g.gb.length||d>e||d<g.gb[b].min||e>g.gb[b].max||(g.gb[b].start=d,g.gb[b].end=e,Hm(g))}};aa("ome.ol3.Viewer",Z,OME);Z.prototype.show=Z.prototype.bh;Z.prototype.hide=Z.prototype.ng;Z.prototype.addControl=Z.prototype.Zg;Z.prototype.addInteraction=Z.prototype.qb;Z.prototype.removeInteractionOrControl=Z.prototype.ed;
Z.prototype.changeToImage=Z.prototype.rf;Z.prototype.addPostTileLoadHook=Z.prototype.jf;Z.prototype.removePostTileLoadHook=Z.prototype.yh;Z.prototype.setDimensionIndex=Z.prototype.Ih;Z.prototype.getDimensionIndex=Z.prototype.Ed;Z.prototype.getId=Z.prototype.Da;Z.prototype.getServer=Z.prototype.Of;Z.prototype.addRegions=Z.prototype.sd;Z.prototype.removeRegions=Z.prototype.Qd;Z.prototype.setRegionsVisibility=Z.prototype.Kh;Z.prototype.setTextBehaviorForRegions=Z.prototype.Lh;
Z.prototype.setRegionsModes=Z.prototype.Sd;Z.prototype.generateShapes=Z.prototype.Jf;Z.prototype.activateClustering=Z.prototype.hf;Z.prototype.modifyRegionsStyle=Z.prototype.Dg;Z.prototype.storeRegions=Z.prototype.dh;Z.prototype.enableRegionsContextMenu=Z.prototype.Ff;Z.prototype.drawShape=Z.prototype.ah;Z.prototype.destroyViewer=Z.prototype.wf;Z.prototype.changeChannelRange=Z.prototype.$g;var Um=ve?"webkitfullscreenchange":ue?"mozfullscreenchange":se?"MSFullscreenChange":"fullscreenchange";function Vm(){var b=Ie().a,d=b.body;return!!(d.webkitRequestFullscreen||d.mozRequestFullScreen&&b.mozFullScreenEnabled||d.msRequestFullscreen&&b.msFullscreenEnabled||d.requestFullscreen&&b.fullscreenEnabled)}
function Wm(b){b.webkitRequestFullscreen?b.webkitRequestFullscreen():b.mozRequestFullScreen?b.mozRequestFullScreen():b.msRequestFullscreen?b.msRequestFullscreen():b.requestFullscreen&&b.requestFullscreen()}function Xm(){var b=Ie().a;return!!(b.webkitIsFullScreen||b.mozFullScreen||b.msFullscreenElement||b.fullscreenElement)};function Ym(b){b=b?b:{};this.a=void 0!==b.className?b.className:"ol-full-screen";var d=void 0!==b.label?b.label:"\u2922";this.b="string"===typeof d?document.createTextNode(d):d;d=void 0!==b.wg?b.wg:"\u00d7";this.g="string"===typeof d?document.createTextNode(d):d;d=b.Oc?b.Oc:"Toggle full-screen";d=Oe("BUTTON",{"class":this.a+"-"+Xm(),type:"button",title:d},this.b);T(d,"click",this.u,this);var e=this.a+" ol-unselectable ol-control "+(Vm()?"":"ol-unsupported"),d=Oe("DIV",e,d);Bh.call(this,{element:d,
target:b.target});this.l=void 0!==b.keys?b.keys:!1;this.i=b.source}R(Ym,Bh);Ym.prototype.u=function(b){b.preventDefault();Vm()&&(b=this.Aa())&&(Xm()?(b=Ie().a,b.webkitCancelFullScreen?b.webkitCancelFullScreen():b.mozCancelFullScreen?b.mozCancelFullScreen():b.msExitFullscreen?b.msExitFullscreen():b.exitFullscreen&&b.exitFullscreen()):(b=this.i?Le(this.i):nm(b),this.l?b.mozRequestFullScreenWithKeys?b.mozRequestFullScreenWithKeys():b.webkitRequestFullscreen?b.webkitRequestFullscreen():Wm(b):Wm(b)))};
Ym.prototype.j=function(){var b=this.element.firstElementChild,d=this.Aa();Xm()?(b.className=this.a+"-true",Ve(this.g,this.b)):(b.className=this.a+"-false",Ve(this.b,this.g));d&&d.Xd()};Ym.prototype.ta=function(b){Ym.za.ta.call(this,b);b&&this.h.push(T(H.document,Um,this.j,this))};function qm(b,d){this.sb={};this.Fa=[];this.a=0;var e=arguments.length;if(1<e){if(e%2)throw Error("Uneven number of arguments");for(var g=0;g<e;g+=2)this.set(arguments[g],arguments[g+1])}else if(b){var k;if(b instanceof qm)for(g=Zm(b),$m(b),k=[],e=0;e<b.Fa.length;e++)k.push(b.sb[b.Fa[e]]);else{var e=[],p=0;for(g in b)e[p++]=g;g=e;e=[];p=0;for(k in b)e[p++]=b[k];k=e}for(e=0;e<g.length;e++)this.set(g[e],k[e])}}function Zm(b){$m(b);return b.Fa.concat()}A=qm.prototype;
A.clear=function(){this.sb={};this.a=this.Fa.length=0};A.remove=function(b){return Object.prototype.hasOwnProperty.call(this.sb,b)?(delete this.sb[b],this.a--,this.Fa.length>2*this.a&&$m(this),!0):!1};
function $m(b){if(b.a!=b.Fa.length){for(var d=0,e=0;d<b.Fa.length;){var g=b.Fa[d];Object.prototype.hasOwnProperty.call(b.sb,g)&&(b.Fa[e++]=g);d++}b.Fa.length=e}if(b.a!=b.Fa.length){for(var k={},e=d=0;d<b.Fa.length;)g=b.Fa[d],Object.prototype.hasOwnProperty.call(k,g)||(b.Fa[e++]=g,k[g]=1),d++;b.Fa.length=e}}A.get=function(b,d){return Object.prototype.hasOwnProperty.call(this.sb,b)?this.sb[b]:d};
A.set=function(b,d){Object.prototype.hasOwnProperty.call(this.sb,b)||(this.a++,this.Fa.push(b));this.sb[b]=d};A.forEach=function(b,d){for(var e=Zm(this),g=0;g<e.length;g++){var k=e[g],p=this.get(k);b.call(d,p,k,this)}};A.clone=function(){return new qm(this)};var an=[2.25,2,1.75,1.5,1.25,1,.75,.5,.25],Em=new qm({x:{method:"Width",settable:!1},width:{method:"Width",settable:!1},y:{method:"Height",settable:!1},height:{method:"Width",settable:!1},z:{method:"Plane",settable:!0},t:{method:"Time",settable:!0},c:{method:"Channels",settable:!0}}),Cm=new qm({attribution:{clazz:Ch,options:{},defaults:!0,enabled:!1,links:[]},zoom:{clazz:Mh,options:{},defaults:!0,enabled:!0,links:[]},rotate:{clazz:Kh,options:{},defaults:!0,enabled:!1,links:["shiftRotate"]},fullscreen:{clazz:Ym,
options:{},defaults:!0,enabled:!1,links:[]}}),Bm=new qm({dragPan:{clazz:gi,options:{kinetic:new Nh},defaults:!0,enabled:!0,links:[]},pinchZoom:{clazz:Ki,options:{zoomDuration:null},defaults:!0,enabled:!0,links:[]},mouseWheelZoom:{clazz:Ei,options:{zoomDuration:null},defaults:!0,enabled:!0,links:[]},keyboardPan:{clazz:Ai,options:{},defaults:!0,enabled:!1,links:[]},keyboardZoom:{clazz:Ci,options:{zoomDuration:null,zoomDelta:null},defaults:!0,enabled:!1,links:[]},shiftDragZoom:{clazz:zi,options:{zoomDuration:null},
defaults:!0,enabled:!1,links:[]},doubleClickZoom:{clazz:Th,options:{zoomDuration:null,zoomDelta:null},defaults:!0,enabled:!1,links:[]},pinchRotate:{clazz:Gi,options:{},defaults:!0,enabled:!1,links:["rotate"]},shiftRotate:{clazz:bn,options:{},defaults:!0,enabled:!1,links:["rotate"]},boxSelect:{clazz:cn,options:{},defaults:!1,enabled:!1,links:[]}});
function um(){var b={};Cm.forEach(function(d,e){if(d.defaults&&d.enabled)try{b[e]={type:"control",ref:new d.clazz(d.options),defaults:d.defaults}}catch(g){console.error("Failed to construct control: "+g)}});return b}function tm(){var b={};Bm.forEach(function(d,e){if(d.defaults&&d.enabled)try{b[e]={type:"interaction",ref:new d.clazz(d.options),defaults:d.defaults}}catch(g){console.error("Failed to construct interaction: "+g)}});return b}var Sm=4,ym={DEFAULT:0,SELECT:1,TRANSLATE:2,MODIFY:3,DRAW:Sm};
aa("ome.ol3.REGIONS_MODE",ym,OME);var dn=Ua()&&!ne()?3E3:ke()||ge("Safari")&&!(me()||ge("Coast")||ke()||ge("Edge")||ge("Silk")||ge("Android"))?1500:oe()||le()&&(ge("Trident")||ge("MSIE")||ne())?500:250;function en(b,d,e,g,k){Bg.call(this,b,d);this.j=e;this.b=new Image;null!==g&&(this.b.crossOrigin=g);this.f={};this.i=null;this.l=k}R(en,Bg);A=en.prototype;A.aa=function(){1==this.state&&fn(this);this.a&&this.a.qa();this.state=5;this.A();en.za.aa.call(this)};A.mb=function(b){if(void 0!==b){var d=L(b);if(d in this.f)return this.f[d];b=xa(this.f)?this.b:this.b.cloneNode(!1);return this.f[d]=b}return this.b};A.getKey=function(){return this.j};A.Tg=function(){this.state=3;fn(this);this.A()};
A.Ug=function(){this.state=this.b.naturalWidth&&this.b.naturalHeight?2:4;fn(this);this.A()};A.load=function(){0==this.state&&(this.state=1,this.A(),this.i=[T(this.b,"error",this.Tg,this,!0),T(this.b,"load",this.Ug,this,!0)],this.l(this,this.j))};function fn(b){b.i.forEach(Aa);b.i=null};function gn(b,d,e,g,k){en.call(this,b,d,e,g,k);this.f={}}R(gn,en);gn.prototype.h=function(b,d){if("object"!==typeof b||"number"!==typeof b.width||"number"!==typeof b.height)return null;var e=b.width,g=b.height;fa(d)&&(e=d[0],g=d[1]);e=pf(e,g);e.drawImage(b,0,0);return e};
gn.prototype.mb=function(b){b=gn.za.mb.call(this,b);var d=L(b);if(d in this.f)return this.f[d];if(2==this.state){var e=this.source.Ca.Xb;if(e=b.width!==e[0]||b.height!==e[1]?this.h(b,e):this.h(b))b=e.canvas;try{var g=this.source.Nd;"function"!==typeof g&&(g=null);var k=g?g.call(this,b):b;null===k&&(k=b);return this.f[d]=k}catch(p){return console.error("Error running post tile load hook: "+p),b}}else return b};gn.prototype.getRenderedTileAsContext=gn.prototype.h;function hn(b,d,e){rd.call(this);jn(this,b,d?d:0,e)}R(hn,rd);A=hn.prototype;A.clone=function(){var b=new hn(null);ud(b,this.g,this.a.slice());b.A();return b};A.Ec=function(b,d){var e=this.a,g=b-e[0],e=d-e[1];return g*g+e*e<=kn(this)};function Cj(b){return b.a.slice(0,b.F)}A.xd=function(b){var d=this.a,e=d[this.F]-d[0];return Zb(d[0]-e,d[1]-e,d[0]+e,d[1]+e,b)};A.yc=function(){return Math.sqrt(kn(this))};function kn(b){var d=b.a[b.F]-b.a[0];b=b.a[b.F+1]-b.a[1];return d*d+b*b}A.ka=function(){return"Circle"};
A.cb=function(b){var d=this.J();return mc(b,d)?(d=Cj(this),b[0]<=d[0]&&b[2]>=d[0]||b[1]<=d[1]&&b[3]>=d[1]?!0:cc(b,this.ua,this)):!1};function jn(b,d,e,g){if(d){vd(b,g,d,0);b.a||(b.a=[]);g=b.a;d=xd(g,d);g[d++]=g[0]+e;var k;e=1;for(k=b.F;e<k;++e)g[d++]=g[e];g.length=d}else ud(b,"XY",null);b.A()}A.Rd=function(b){this.a[this.F]=this.a[0]+b;this.A()};function ln(b,d,e,g,k){var p=NaN,q=NaN,u=(e-d)/g;if(0===u)$a("n cannot be 0");else if(1==u)p=b[d],q=b[d+1];else if(2==u)p=.5*b[d]+.5*b[d+g],q=.5*b[d+1]+.5*b[d+g+1];else{var q=b[d],u=b[d+1],v=0,p=[0],w;for(w=d+g;w<e;w+=g){var z=b[w],B=b[w+1],v=v+Math.sqrt((z-q)*(z-q)+(B-u)*(B-u));p.push(v);q=z;u=B}e=.5*v;v=0;w=p.length;for(z=!1;v<w;)q=v+(w-v>>1),u=+Zc(p[q],e),0>u?v=q+1:(w=q,z=!u);q=z?v:~v;0>q?(e=(e-p[-q-2])/(p[-q-1]-p[-q-2]),d+=(-q-2)*g,p=b[d],p=p+e*(b[d+g]-p),q=b[d+1],q=q+e*(b[d+g+1]-q)):(p=b[d+q*
g],q=b[d+q*g+1])}return k?(k[0]=p,k[1]=q,k):[p,q]};function mn(b,d){rd.call(this);this.b=null;this.h=-1;this.wa(b,d)}R(mn,rd);A=mn.prototype;A.clone=function(){var b=new mn(null);ud(b,this.g,this.a.slice());b.A();return b};A.sa=function(){return Ad(this.a,0,this.a.length,this.F)};function Dj(b){if(b.h!=b.f){var d;d=ln(b.a,0,b.a.length,b.F,b.b);b.b=d;b.h=b.f}return b.b}A.dc=function(b){var d=[];d.length=Cd(this.a,0,this.a.length,this.F,b,d,0);b=new mn(null);ud(b,"XY",d);b.A();return b};A.ka=function(){return"LineString"};
A.cb=function(b){return Ld(this.a,0,this.a.length,this.F,b)};A.wa=function(b,d){b?(vd(this,d,b,1),this.a||(this.a=[]),this.a.length=yd(this.a,0,b,this.F)):ud(this,"XY",null);this.A()};function nn(b,d){rd.call(this);this.b=[];this.wa(b,d)}R(nn,rd);A=nn.prototype;A.clone=function(){var b=new nn(null),d=this.b.slice();ud(b,this.g,this.a.slice());b.b=d;b.A();return b};A.sa=function(){return Bd(this.a,0,this.b,this.F)};A.xc=function(){return this.b};function Ej(b){var d=[],e=b.a,g=0,k=b.b;b=b.F;var p,q;p=0;for(q=k.length;p<q;++p){var u=k[p],g=ln(e,g,u,b);ad(d,g);g=u}return d}
A.dc=function(b){var d=[],e=[],g=this.a,k=this.b,p=this.F,q=0,u=0,v,w;v=0;for(w=k.length;v<w;++v){var z=k[v],u=Cd(g,q,z,p,b,d,u);e.push(u);q=z}d.length=u;b=new nn(null);ud(b,"XY",d);b.b=e;b.A();return b};A.ka=function(){return"MultiLineString"};A.cb=function(b){a:{var d=this.a,e=this.b,g=this.F,k=0,p,q;p=0;for(q=e.length;p<q;++p){if(Ld(d,k,e[p],g,b)){b=!0;break a}k=e[p]}b=!1}return b};
A.wa=function(b,d){if(b){vd(this,d,b,2);this.a||(this.a=[]);var e=zd(this.a,0,b,this.F,this.b);this.a.length=0===e.length?0:e[e.length-1]}else e=this.b,ud(this,"XY",null),this.b=e;this.A()};function on(b,d){rd.call(this);this.wa(b,d)}R(on,rd);A=on.prototype;A.clone=function(){var b=new on(null);ud(b,this.g,this.a.slice());b.A();return b};A.sa=function(){return Ad(this.a,0,this.a.length,this.F)};A.ka=function(){return"MultiPoint"};A.cb=function(b){var d=this.a,e=this.F,g,k,p,q;g=0;for(k=d.length;g<k;g+=e)if(p=d[g],q=d[g+1],Xb(b,p,q))return!0;return!1};A.wa=function(b,d){b?(vd(this,d,b,1),this.a||(this.a=[]),this.a.length=yd(this.a,0,b,this.F)):ud(this,"XY",null);this.A()};function pn(b,d){rd.call(this);this.b=[];this.i=-1;this.j=null;this.l=-1;this.h=null;this.wa(b,d)}R(pn,rd);A=pn.prototype;A.clone=function(){for(var b=new pn(null),d=this.b.length,e=Array(d),g=0;g<d;++g)e[g]=this.b[g].slice();ud(b,this.g,this.a.slice());b.b=e;b.A();return b};A.Ec=function(b,d){var e;a:{e=Fj(this);var g=this.b,k=0;if(0!==g.length){var p,q;p=0;for(q=g.length;p<q;++p){var u=g[p];if(Id(e,k,u,this.F,b,d)){e=!0;break a}k=u[u.length-1]}}e=!1}return e};
A.sa=function(b){var d;void 0!==b?(d=Fj(this).slice(),Qd(d,this.b,this.F,b)):d=this.a;b=d;d=this.b;var e=this.F,g=0,k=[],p=0,q,u;q=0;for(u=d.length;q<u;++q){var v=d[q];k[p++]=Bd(b,g,v,e,k[p]);g=v[v.length-1]}k.length=p;return k};
function Gj(b){if(b.i!=b.f){var d=b.a,e=b.b,g=b.F,k=0,p=[],q,u,v=Sb();q=0;for(u=e.length;q<u;++q){var w=e[q],v=bc(Zb(Infinity,Infinity,-Infinity,-Infinity,void 0),d,k,w[0],g);p.push((v[0]+v[2])/2,(v[1]+v[3])/2);k=w[w.length-1]}d=Fj(b);e=b.b;g=b.F;k=0;q=[];u=0;for(v=e.length;u<v;++u)w=e[u],q=Jd(d,k,w,g,p,2*u,q),k=w[w.length-1];b.j=q;b.i=b.f}return b.j}
function Fj(b){if(b.l!=b.f){var d=b.a,e;a:{e=b.b;var g,k;g=0;for(k=e.length;g<k;++g)if(!Od(d,e[g],b.F,void 0)){e=!1;break a}e=!0}e?b.h=d:(b.h=d.slice(),b.h.length=Qd(b.h,b.b,b.F));b.l=b.f}return b.h}A.dc=function(b){var d=[],e=[],g=this.a,k=this.b,p=this.F;b=Math.sqrt(b);var q=0,u=0,v,w;v=0;for(w=k.length;v<w;++v){var z=k[v],B=[],u=Dd(g,q,z,p,b,d,u,B);e.push(B);q=z[z.length-1]}d.length=u;g=new pn(null);ud(g,"XY",d);g.b=e;g.A();return g};A.ka=function(){return"MultiPolygon"};
A.cb=function(b){a:{var d=Fj(this),e=this.b,g=this.F,k=0,p,q;p=0;for(q=e.length;p<q;++p){var u=e[p];if(Md(d,k,u,g,b)){b=!0;break a}k=u[u.length-1]}b=!1}return b};A.wa=function(b,d){if(b){vd(this,d,b,3);this.a||(this.a=[]);var e=this.a,g=this.F,k=this.b,p=0,k=k?k:[],q=0,u,v;u=0;for(v=b.length;u<v;++u)p=zd(e,p,b[u],g,k[q]),k[q++]=p,p=p[p.length-1];k.length=q;0===k.length?this.a.length=0:(e=k[k.length-1],this.a.length=0===e.length?0:e[e.length-1])}else e=this.b,ud(this,"XY",null),this.b=e;this.A()};function qn(b,d){db.call(this,b);this.ea=d}R(qn,db);
function rn(b){di.call(this,{tb:sn,handleEvent:tn,ub:un});this.V=null;this.u=!1;this.Hb=b.source?b.source:null;this.K=b.Pa?b.Pa:null;this.pd=b.Nh?b.Nh:12;this.M=b.type;this.b=vn(this.M);this.ob=b.Cg?b.Cg:this.b===wn?3:2;this.ua=b.Bg?b.Bg:Infinity;var d=b.Kf;if(!d)if("Circle"===this.M)d=function(b,d){var e=d?d:new hn([NaN,NaN]);jn(e,b[0],Math.sqrt(Pb(b[0],b[1])));return e};else{var e,d=this.b;d===xn?e=Fd:d===yn?e=mn:d===wn&&(e=Rd);d=function(b,d){var p=d;p?p.wa(b):p=new e(b);return p}}this.w=d;this.G=
this.j=this.a=this.l=this.h=this.i=null;this.$e=b.ne?b.ne*b.ne:36;this.ca=new uj({source:new Mk({md:!1,Ma:b.Ma?b.Ma:!1}),style:b.style?b.style:zn()});this.pb=b.Gi;this.Ka=b.Na?b.Na:Zh;this.ja=b.If?b.If:ai;T(this,ob("active"),this.$b,this)}R(rn,di);function zn(){var b=tj();return function(d){return b[d.C().ka()]}}rn.prototype.ta=function(b){rn.za.ta.call(this,b);this.$b()};
function tn(b){this.b!==yn&&this.b!==wn||!this.ja(b)||(this.u=!0);var d=!this.u;this.u&&b.type===yg?(An(this,b),d=!1):b.type===xg?d=Bn(this,b):b.type===rg&&(d=!1);return ei.call(this,b)&&d}function sn(b){return this.Ka(b)?(this.V=b.f,!0):this.u?(this.V=b.f,this.i||Cn(this,b),!0):!1}function un(b){this.u=!1;var d=this.V,e=b.f,g=d[0]-e[0],d=d[1]-e[1],e=!0;g*g+d*d<=this.$e&&(Bn(this,b),this.i?this.b===Dn?En(this):Fn(this,b)?En(this):An(this,b):(Cn(this,b),this.b===xn&&En(this)),e=!1);return e}
function Bn(b,d){if(b.i){var e=d.b,g=b.h.C(),k;b.b===xn?k=b.a:b.b===wn?(k=b.a[0],k=k[k.length-1],Fn(b,d)&&(e=b.i.slice())):(k=b.a,k=k[k.length-1]);k[0]=e[0];k[1]=e[1];b.w(b.a,g);b.l&&b.l.C().wa(e);g instanceof Rd&&b.b!==wn?(b.j||(b.j=new yk(new mn(null))),0>=g.b.length?g=null:(e=new Ed(null),ud(e,g.g,g.a.slice(0,g.b[0])),e.A(),g=e),e=b.j.C(),ud(e,g.g,g.a),e.A()):b.G&&(e=b.j.C(),e.wa(b.G));Gn(b)}else g=d.b.slice(),b.l?b.l.C().wa(g):(b.l=new yk(new Fd(g)),Gn(b));return!0}
function Fn(b,d){var e=!1;if(b.h){var g=!1,k=[b.i];b.b===yn?g=b.a.length>b.ob:b.b===wn&&(g=b.a[0].length>b.ob,k=[b.a[0][0],b.a[0][b.a[0].length-2]]);if(g)for(var g=d.map,p=0,q=k.length;p<q;p++){var u=k[p],v=ki(g,u),w=d.f,e=w[0]-v[0],v=w[1]-v[1],w=b.u&&b.ja(d)?1:b.pd;if(e=Math.sqrt(e*e+v*v)<=w){b.i=u;break}}}return e}
function Cn(b,d){var e=d.b;b.i=e;b.b===xn?b.a=e.slice():b.b===wn?(b.a=[[e.slice(),e.slice()]],b.G=b.a[0]):(b.a=[e.slice(),e.slice()],b.b===Dn&&(b.G=b.a));b.G&&(b.j=new yk(new mn(b.G)));e=b.w(b.a);b.h=new yk;b.pb&&Ak(b.h,b.pb);zk(b.h,e);Gn(b);U(b,new qn("drawstart",b.h))}function An(b,d){var e=d.b,g=b.h.C(),k,p;if(b.b===yn)b.i=e.slice(),p=b.a,p.push(e.slice()),k=p.length>b.ua,b.w(p,g);else if(b.b===wn){p=b.a[0];p.push(e.slice());if(k=p.length>b.ua)b.i=p[0];b.w(b.a,g)}Gn(b);k&&En(b)}
function En(b){var d=Hn(b),e=b.a,g=d.C();b.b===yn?(e.pop(),b.w(e,g)):b.b===wn&&(e[0].pop(),e[0].push(e[0][0]),b.w(e,g));"MultiPoint"===b.M?zk(d,new on([e])):"MultiLineString"===b.M?zk(d,new nn([e])):"MultiPolygon"===b.M&&zk(d,new pn([e]));U(b,new qn("drawend",d));b.K&&b.K.push(d);b.Hb&&b.Hb.pc(d)}function Hn(b){b.i=null;var d=b.h;d&&(b.h=null,b.l=null,b.j=null,b.ca.fa().clear(!0));return d}rn.prototype.B=od;
function Gn(b){var d=[];b.h&&d.push(b.h);b.j&&d.push(b.j);b.l&&d.push(b.l);b=b.ca.fa();b.clear(!0);b.yb(d)}rn.prototype.$b=function(){var b=this.Aa(),d=this.get("active");b&&d||Hn(this);this.ca.ta(d?b:null)};function vn(b){var d;"Point"===b||"MultiPoint"===b?d=xn:"LineString"===b||"MultiLineString"===b?d=yn:"Polygon"===b||"MultiPolygon"===b?d=wn:"Circle"===b&&(d=Dn);return d}var xn="Point",yn="LineString",wn="Polygon",Dn="Circle";function Tm(b,d){this.v=d;this.Pd=b;this.nb=null}R(Tm,{});
function In(b,d,e,g){if("string"===typeof d&&"string"===typeof e&&0!==d.length&&0!==e.length){var k="function"===typeof onDrawEnd?onDrawEnd:null;b.nb&&b.v.o.o.Ra.remove(b.nb);b.nb=new rn({source:b.v,type:d,Kf:"function"===typeof g?g:null});"point"===e&&(b.nb.mode=b.mode=xn);b.v.o.o.qb(b.nb);jb(b.nb,function(b){k&&k.call(this,b);if(b.ea instanceof yk){var d=b.ea,g="-1:"+L(b.ea);d.va=g;d.A();b.ea.state=2;b.ea.type=e;d=W(this.v.o.o).ha();b.ea.C()instanceof Jm&&0!==d&&!this.v.Db&&b.ea.C().rotate(-d);
d="label"===e?new Jn({text:"new label",font:"normal 10px sans-serif",stroke:new lj({color:"rgba(51, 153, 204, 0.9)",width:1})}):null;Bk(b.ea,new nj({fill:null===d?new gj({color:"rgba(255,255,255,0.5)"}):null,stroke:null===d?new lj({color:"rgba(51, 153, 204, 0.9)",width:1}):null,text:d}));Km(b.ea,this.v)}this.v.N&&Fm(this.v.N);this.nb&&(this.v.o.o.Ra.remove(this.nb),xm(this.v,this.Pd))},b)}}A=Tm.prototype;A.Df=function(){In(this,"Polygon","polygon")};A.Bf=function(){In(this,"LineString","polyline")};
A.Cf=function(){In(this,"Point","point",function(b){return new hn(b,2)})};A.Ef=function(){In(this,"Circle","rectangle",function(b,d){var e=b[0],g=b[1],k=Math.abs(g[0]-e[0]),p=Math.abs(e[1]-g[1]);0===k&&(k=1);0===p&&(p=1);e=new Kn(g[0]<e[0]?g[0]:e[0],g[1]>e[1]?g[1]:e[1],k,p);d&&(g=Ln(e),fa(g),Mn(d,g[0],g[1]),d.Vb(Nn(e)),g=On(e),Mn(d,null,null,null,g));return e})};A.Af=function(){In(this,"Circle","label",function(b){var d=Pn("new label","normal 10px sans-serif");return new Jm(b[0][0],b[0][1],d)})};
A.zf=function(){In(this,"Circle","ellipse",function(b,d){var e=b[0],g=b[1],e=new Qn(e[0],e[1],Math.abs(e[0]-g[0]),Math.abs(e[1]-g[1]));d&&(d.wa(e.sa()),d.Rd(e.yc()));return e})};A.qa=function(){this.nb&&(this.v.o.o.Ra.remove(this.nb),this.Pd=null);this.v=null};function bn(){li.call(this);this.Ka=ai}R(bn,li);function Rn(b){lb.call(this);this.va=b.id;this.j=void 0!==b.rg?b.rg:!0;this.l=void 0!==b.Oh?b.Oh:!0;this.b=document.createElement("DIV");this.b.className="ol-overlay-container";this.b.style.position="absolute";this.Rc=void 0!==b.Rc?b.Rc:!1;this.h=void 0!==b.nf?b.nf:{};this.i=void 0!==b.pf?b.pf:20;this.a={Sc:"",bd:"",gd:"",ld:"",visible:!0};this.g=null;T(this,ob("element"),this.Rf,this);T(this,ob("map"),this.bg,this);T(this,ob("offset"),this.cg,this);T(this,ob("position"),this.eg,this);T(this,ob("positioning"),
this.fg,this);void 0!==b.element&&this.set("element",b.element);this.set("offset",void 0!==b.offset?b.offset:[0,0]);this.set("positioning",void 0!==b.vh?b.vh:"top-left");void 0!==b.position&&Sn(this,b.position)}R(Rn,lb);A=Rn.prototype;A.Da=function(){return this.va};A.Aa=function(){return this.get("map")};A.Rf=function(){Se(this.b);var b=this.get("element");b&&this.b.appendChild(b)};
A.bg=function(){this.g&&(Ue(this.b),Aa(this.g),this.g=null);var b=this.Aa();b&&(this.g=T(b,"postrender",this.S,this),Tn(this),b=this.l?b.s:b.u,this.j?Te(b,this.b,0):b.appendChild(this.b))};A.S=function(){Tn(this)};A.cg=function(){Tn(this)};
A.eg=function(){Tn(this);if(void 0!==this.get("position")&&this.Rc){var b=this.Aa();if(void 0!==b&&nm(b)){var d=Un(nm(b),pi(b)),e=this.get("element"),g=e.offsetWidth,k=e.currentStyle||H.getComputedStyle(e),g=g+(parseInt(k.marginLeft,10)+parseInt(k.marginRight,10)),k=e.offsetHeight,p=e.currentStyle||H.getComputedStyle(e),k=k+(parseInt(p.marginTop,10)+parseInt(p.marginBottom,10)),q=Un(e,[g,k]),e=this.i;Wb(d,q)||(g=q[0]-d[0],k=d[2]-q[2],p=q[1]-d[1],q=d[3]-q[3],d=[0,0],0>g?d[0]=g-e:0>k&&(d[0]=Math.abs(k)+
e),0>p?d[1]=p-e:0>q&&(d[1]=Math.abs(q)+e),0===d[0]&&0===d[1])||(e=Wd(W(b)),g=ki(b,e),d=[g[0]+d[0],g[1]+d[1]],this.h&&(this.h.source=e,b.bb(Hh(this.h))),Xd(W(b),b.Oa(d)))}}};A.fg=function(){Tn(this)};A.ta=function(b){this.set("map",b)};function Sn(b,d){b.set("position",d)}
function Un(b,d){var e=Ke(b),g=new Ge(0,0),k;k=e?Ke(e):document;k=!se||9<=Number(Ee)||"CSS1Compat"==Ie(k).a.compatMode?k.documentElement:k.body;if(b!=k){k=bf(b);var p=Ie(e).a,e=p.scrollingElement?p.scrollingElement:ve||"CSS1Compat"!=p.compatMode?p.body||p.documentElement:p.documentElement,p=p.parentWindow||p.defaultView,e=se&&Ce("10")&&p.pageYOffset!=e.scrollTop?new Ge(e.scrollLeft,e.scrollTop):new Ge(p.pageXOffset||e.scrollLeft,p.pageYOffset||e.scrollTop);g.x=k.left+e.x;g.y=k.top+e.y}return[g.x,
g.y,g.x+d[0],g.y+d[1]]}function Vn(b,d){b.a.visible!==d&&(ef(b.b,d),b.a.visible=d)}
function Tn(b){var d=b.Aa(),e=b.get("position");if(void 0!==d&&d.b&&void 0!==e){var e=ki(d,e),g=pi(d),d=b.b.style,k=b.get("offset"),p=b.get("positioning"),q=k[0],k=k[1];if("bottom-right"==p||"center-right"==p||"top-right"==p)""!==b.a.bd&&(b.a.bd=d.left=""),q=Math.round(g[0]-e[0]-q)+"px",b.a.gd!=q&&(b.a.gd=d.right=q);else{""!==b.a.gd&&(b.a.gd=d.right="");if("bottom-center"==p||"center-center"==p||"top-center"==p)q-=cf(b.b).width/2;q=Math.round(e[0]+q)+"px";b.a.bd!=q&&(b.a.bd=d.left=q)}if("bottom-left"==
p||"bottom-center"==p||"bottom-right"==p)""!==b.a.ld&&(b.a.ld=d.top=""),e=Math.round(g[1]-e[1]-k)+"px",b.a.Sc!=e&&(b.a.Sc=d.bottom=e);else{""!==b.a.Sc&&(b.a.Sc=d.bottom="");if("center-left"==p||"center-center"==p||"center-right"==p)k-=cf(b.b).height/2;e=Math.round(e[1]+k)+"px";b.a.ld!=e&&(b.a.ld=d.top=e)}Vn(b,!0)}else Vn(b,!1)};function Rm(b){this.v=b;Ph.call(this,{});this.handleEvent=Wn;this.Ka=function(d){return Wh.call(b.N,d)};this.K=new qb;this.g=!1;this.a=null;var d=Am(this.v.o);this.Ce=function(b){return 0<=[d].indexOf(b)};this.Wc=nd;this.g&&Rm.prototype.b.call(this,!0)}R(Rm,Ph);function Fm(b){b.ma().forEach(function(b){b.selected=!1},b);b.ma().clear();b.v.A()}
Rm.prototype.h=function(b){var d=null;b=[b.offsetX,b.offsetY];Xn(b,this.o.o,this.Gb,this.N,function(b,g){if(this.Wc(b,g))return d=b,!0},this.N.Ce);Yn(this.N,b,d)};
function Wn(b){if(!this.Ka(b)||b.h||b instanceof ng&&b.a instanceof MouseEvent&&"number"===typeof b.a.which&&3===b.a.which)return!0;var d=null;Xn(b.f,b.map,this.v.Gb,this,function(b,e){if(this.Wc(b,e))return d=b,!0},this.Ce);var e=d&&d.selected;if(null===d||!ai(b))if(Fm(this),null===d)return;e?(d.selected=!1,this.ma().remove(d)):(d.selected=!0,this.ma().push(d));!(d instanceof Zn)&&d.cluster instanceof Zn&&(d.cluster.selected=!1,d.cluster.group_selected=!1,this.ma().remove(d.cluster));this.v.A();
return"pointermove"==b.type}
function Yn(b,d,e){if(fa(d)&&2===d.length&&e instanceof yk&&b.a instanceof Rn){var g=Oe("DIV",{id:"ome_context_menu"});if(null!==g){d=b.v.o.o.Oa([d[0]-10,d[1]-10]);var k=b.a,p=Oe("SPAN",{"class":"title"},e instanceof Zn?"Cluster: "+e.K.length:"Feature: "+e.Da()),q=Oe("A",{href:"#","class":"close"},"\u2716");q.onclick=function(){Sn(k,void 0);return!1};p=Oe("DIV",{"class":"header"},p,q);g.appendChild(p);e instanceof Zn?$n(b,g,"(Un)Select Cluster Features",function(){if(e instanceof Zn){var b=!0===("boolean"===
typeof e.group_selected?e.group_selected:!1)?!1:!0;e.group_selected=b;e.selected=!1;this.v.N.ma().remove(e);for(f in e.K)(e.K[f].selected=b)?(this.v.N.ma().remove(e.K[f]),this.v.N.ma().push(e.K[f])):this.v.N.ma().remove(e.K[f]),this.v.A()}}):$n(b,g,"(Un)Select Feature",function(){if(e instanceof yk){var b=!0===e.selected?!1:!0;e.selected=b;var d=e instanceof Zn?e.K:[e];for(f in d)(d[f].selected=b)?this.v.N.ma().push(d[f]):(this.v.N.ma().remove(d[f]),d[f].cluster instanceof Zn&&(d[f].cluster.group_selected=
!1)),this.v.A()}});b.a.set("element",g);Sn(b.a,d);Ye(g.parentNode,"margin: 1px");nm(b.v.o.o).onmouseover=function(b){"ome_context_menu"!==b.target.id&&"ome_context_menu"!==b.target.parentNode.id&&"ome_context_menu"!==b.target.parentNode.parentNode.id&&Sn(k,void 0);return!1}}}}
function $n(b,d,e,g){if("object"===typeof d&&"string"===typeof e&&0!==e.length){var k="function"===typeof g?g:null,p=null;if(1>d.childNodes||"DIV"!==d.childNodes[d.childNodes.length-1].tagName.toUpperCase()||!ao(d.childNodes[d.childNodes.length-1]))Re(d,Oe("HR",{})),Re(d,Oe("DIV",{"class":"content"}));p=d.childNodes[d.childNodes.length-1];null!==p&&(d=Oe("SPAN",{},e),d.onmouseover=function(b){bo(b.target,"selected")},d.onmouseout=function(b){bo(b.target,"")},k&&(d.onclick=function(d){g.call(b,d)}),
p.appendChild(d))}}Rm.prototype.ma=function(){return this.K};Rm.prototype.b=function(b){"boolean"!==typeof b&&(b=!1);if(this.g!=b)if(this.g=b){this.a=new Rn({Rc:!0});this.v.o.o.i.push(this.a);var d=this.v;nm(this.v.o.o).oncontextmenu=function(b){if(null!==d.N)return Rm.prototype.h.call(d,b),b.stopPropagation?b.stopPropagation():b.cancelBubble=!0,!1}}else this.a instanceof Rn&&(this.v.o.o.i.remove(this.a),this.a=null),nm(this.v.o.o).oncontextmenu=null,nm(this.v.o.o).onmouseover=null};
Rm.prototype.aa=function(){this.b(!1);this.v=null};function cn(b){ui.call(this);this.Ka=$h;b instanceof wm&&(this.v=b,this.G=function(){this.v.N&&Fm(this.v.N)},this.i=null,this.w=function(){if(null!==this.v.N){var b=this.C().J(),e=function(e){e.C()&&e.C().cb(b)?(e.selected=!0,this.v.N.ma().push(e)):e.selected=!1};this.v.i&&(e=function(e){var k=[e];!this.v.Gb&&e instanceof Zn&&(mc(b,e.qc)?k=e.K:k=[]);for(f in k)e=k[f],e.C()&&e.C().cb(b)&&(e.selected=!0,this.v.N.ma().push(e))});this.v.ma().forEach(e,this);this.v.A()}},this.h=null,this.l=function(){this.i=
T(this,"boxstart",this.G,this);this.h=T(this,"boxend",this.w,this)},this.l())}R(cn,ui);function Mm(b){b.i&&Aa(b.i);b.h&&Aa(b.h)}cn.prototype.aa=function(){Mm(this);this.v=null};function co(b,d){db.call(this,b);this.Pa=d}R(co,db);
function eo(b){di.call(this,{tb:fo,zb:go,handleEvent:ho,ub:io});this.ca=b.vf?b.vf:$d(Zh,Yh);this.ua=this.a=null;this.ja=[0,0];this.l=this.u=!1;this.b=new Hk;this.i=void 0!==b.nh?b.nh:10;this.V=this.G=!1;this.h=null;this.w=new uj({source:new Mk({md:!1,Ma:!!b.Ma}),style:b.style?b.style:jo(),Yd:!0,Zd:!0});this.M={Point:this.gi,LineString:this.Ye,LinearRing:this.Ye,Polygon:this.Ze,MultiPoint:this.ei,MultiLineString:this.di,MultiPolygon:this.fi,GeometryCollection:this.ci};this.K=b.Pa;this.K.forEach(this.rd,
this);T(this.K,"add",this.Sf,this);T(this.K,"remove",this.Tf,this)}R(eo,di);A=eo.prototype;A.rd=function(b){var d=b.C();d.ka()in this.M&&this.M[d.ka()].call(this,b,d);(d=this.Aa())&&this.Ac(this.ja,d);T(b,"change",this.He,this)};function ko(b){b.l||(b.l=!0,U(b,new co("modifystart",b.K)))}function lo(b,d){mo(b,d);b.a&&0===sb(b.K)&&(b.w.fa().Rb(b.a),b.a=null);Fa(d,"change",b.He,b)}
function mo(b,d){var e=b.b,g=[];e.forEach(function(b){d===b.ea&&g.push(b)});for(var k=g.length-1;0<=k;--k)e.remove(g[k])}A.ta=function(b){this.w.ta(b);eo.za.ta.call(this,b)};A.Sf=function(b){this.rd(b.element)};A.He=function(b){this.V||(b=b.target,lo(this,b),this.rd(b))};A.Tf=function(b){lo(this,b.element)};A.gi=function(b,d){var e=d.sa(),e={ea:b,ra:d,ia:[e,e]};this.b.Ga(d.J(),e)};
A.ei=function(b,d){var e=d.sa(),g,k,p;k=0;for(p=e.length;k<p;++k)g=e[k],g={ea:b,ra:d,depth:[k],index:k,ia:[g,g]},this.b.Ga(d.J(),g)};A.Ye=function(b,d){var e=d.sa(),g,k,p,q;g=0;for(k=e.length-1;g<k;++g)p=e.slice(g,g+2),q={ea:b,ra:d,index:g,ia:p},this.b.Ga(Rb(p),q)};A.di=function(b,d){var e=d.sa(),g,k,p,q,u,v,w;q=0;for(u=e.length;q<u;++q)for(g=e[q],k=0,p=g.length-1;k<p;++k)v=g.slice(k,k+2),w={ea:b,ra:d,depth:[q],index:k,ia:v},this.b.Ga(Rb(v),w)};
A.Ze=function(b,d){var e=d.sa(),g,k,p,q,u,v,w;q=0;for(u=e.length;q<u;++q)for(g=e[q],k=0,p=g.length-1;k<p;++k)v=g.slice(k,k+2),w={ea:b,ra:d,depth:[q],index:k,ia:v},this.b.Ga(Rb(v),w)};A.fi=function(b,d){var e=d.sa(),g,k,p,q,u,v,w,z,B,C;v=0;for(w=e.length;v<w;++v)for(z=e[v],q=0,u=z.length;q<u;++q)for(g=z[q],k=0,p=g.length-1;k<p;++k)B=g.slice(k,k+2),C={ea:b,ra:d,depth:[q,v],index:k,ia:B},this.b.Ga(Rb(B),C)};A.ci=function(b,d){var e,g=d.Mf();for(e=0;e<g.length;++e)this.M[g[e].ka()].call(this,b,g[e])};
function no(b,d){var e=b.a;e?e.C().wa(d):(e=new yk(new Fd(d)),b.a=e,b.w.fa().pc(e))}function oo(b,d){return b.index-d.index}
function fo(b){this.Ac(b.f,b.map);this.h=[];this.l=!1;var d=this.a;if(d){b=[];var d=d.C().sa(),e=Rb([d]),e=Jk(this.b,e),g={};e.sort(oo);for(var k=0,p=e.length;k<p;++k){var q=e[k],u=q.ia,v=L(q.ea),w=q.depth;w&&(v+="-"+w.join("-"));g[v]||(g[v]=Array(2));if(Nb(u[0],d)&&!g[v][0])this.h.push([q,0]),g[v][0]=q;else if(Nb(u[1],d)&&!g[v][1]){if("LineString"!==q.ra.ka()&&"MultiLineString"!==q.ra.ka()||!g[v][0]||0!==g[v][0].index)this.h.push([q,1]),g[v][1]=q}else L(u)in this.ua&&!g[v][0]&&!g[v][1]&&b.push([q,
d])}b.length&&ko(this);for(d=b.length-1;0<=d;--d)this.sg.apply(this,b[d])}return!!this.a}
function go(b){this.u=!1;ko(this);b=b.b;for(var d=0,e=this.h.length;d<e;++d){for(var g=this.h[d],k=g[0],p=k.depth,q=k.ra,u=q.sa(),v=k.ia,g=g[1];b.length<q.F;)b.push(0);switch(q.ka()){case "Point":u=b;v[0]=v[1]=b;break;case "MultiPoint":u[k.index]=b;v[0]=v[1]=b;break;case "LineString":u[k.index+g]=b;v[g]=b;break;case "MultiLineString":u[p[0]][k.index+g]=b;v[g]=b;break;case "Polygon":u[p[0]][k.index+g]=b;v[g]=b;break;case "MultiPolygon":u[p[1]][p[0]][k.index+g]=b,v[g]=b}po(this,q,u)}no(this,b)}
function io(){for(var b,d=this.h.length-1;0<=d;--d)b=this.h[d][0],Ik(this.b,Rb(b.ia),b);this.l&&(U(this,new co("modifyend",this.K)),this.l=!1);return!1}function ho(b){if(!(b instanceof ng))return!0;var d;W(b.map).b.slice()[1]||b.type!=xg||this.s||(this.ja=b.f,this.Ac(b.f,b.map));this.a&&this.ca(b)&&(b.type==sg&&this.u?d=!0:(this.a.C(),ko(this),d=qo(this),U(this,new co("modifyend",this.K)),this.l=!1));b.type==sg&&(this.u=!1);return ei.call(this,b)&&!d}
A.Ac=function(b,d){function e(b,d){return Pb(g,Mb(g,b.ia))-Pb(g,Mb(g,d.ia))}var g=d.Oa(b),k=d.Oa([b[0]-this.i,b[1]+this.i]),p=d.Oa([b[0]+this.i,b[1]-this.i]),k=Rb([k,p]),k=Jk(this.b,k);if(0<k.length){k.sort(e);var p=k[0].ia,q=Mb(g,p),u=ki(d,q);if(Math.sqrt(Pb(b,u))<=this.i){var v=ki(d,p[0]),w=ki(d,p[1]),v=Pb(u,v),u=Pb(u,w);(this.G=Math.sqrt(Math.min(v,u))<=this.i)&&(q=v>u?p[1]:p[0]);no(this,q);q={};q[L(p)]=!0;w=1;for(v=k.length;w<v;++w)if(u=k[w].ia,Nb(p[0],u[0])&&Nb(p[1],u[1])||Nb(p[0],u[1])&&Nb(p[1],
u[0]))q[L(u)]=!0;else break;this.ua=q;return}}this.a&&(this.w.fa().Rb(this.a),this.a=null)};
A.sg=function(b,d){for(var e=b.ia,g=b.ea,k=b.ra,p=b.depth,q=b.index,u;d.length<k.F;)d.push(0);switch(k.ka()){case "MultiLineString":u=k.sa();u[p[0]].splice(q+1,0,d);break;case "Polygon":u=k.sa();u[p[0]].splice(q+1,0,d);break;case "MultiPolygon":u=k.sa();u[p[1]][p[0]].splice(q+1,0,d);break;case "LineString":u=k.sa();u.splice(q+1,0,d);break;default:return}po(this,k,u);u=this.b;u.remove(b);ro(this,k,q,p,1);var v={ia:[e[0],d],ea:g,ra:k,depth:p,index:q};u.Ga(Rb(v.ia),v);this.h.push([v,1]);e={ia:[d,e[1]],
ea:g,ra:k,depth:p,index:q+1};u.Ga(Rb(e.ia),e);this.h.push([e,0]);this.u=!0};
function qo(b){var d=b.h,e={},g,k,p,q,u,v,w,z,B;for(u=d.length-1;0<=u;--u)if(p=d[u],z=p[0],q=z.ra,k=q.sa(),B=L(z.ea),z.depth&&(B+="-"+z.depth.join("-")),g=w=v=void 0,0===p[1]?(w=z,v=z.index):1==p[1]&&(g=z,v=z.index+1),B in e||(e[B]=[g,w,v]),p=e[B],void 0!==g&&(p[0]=g),void 0!==w&&(p[1]=w),void 0!==p[0]&&void 0!==p[1]){g=k;B=!1;w=v-1;switch(q.ka()){case "MultiLineString":k[z.depth[0]].splice(v,1);B=!0;break;case "LineString":k.splice(v,1);B=!0;break;case "MultiPolygon":g=g[z.depth[1]];case "Polygon":g=
g[z.depth[0]],4<g.length&&(v==g.length-1&&(v=0),g.splice(v,1),B=!0,0===v&&(g.pop(),g.push(g[0]),w=g.length-1))}B&&(b.b.remove(p[0]),b.b.remove(p[1]),po(b,q,k),k={depth:z.depth,ea:z.ea,ra:z.ra,index:w,ia:[p[0].ia[0],p[1].ia[1]]},b.b.Ga(Rb(k.ia),k),ro(b,q,v,z.depth,-1),b.a&&(b.w.fa().Rb(b.a),b.a=null))}return!0}function po(b,d,e){b.V=!0;d.wa(e);b.V=!1}function ro(b,d,e,g,k){Lk(b.b,d.J(),function(b){b.ra===d&&(void 0===g||void 0===b.depth||cd(b.depth,g))&&b.index>e&&(b.index+=k)})}
function jo(){var b=tj();return function(){return b.Point}};function so(b){eo.call(this,b);this.Ja=to;this.handleEvent=uo;this.oa=vo;this.ca=function(b){return Zh(b)&&Wh(b)}}R(so,eo);
so.prototype.Ac=function(b,d){if(this.K instanceof qb&&0!==sb(this.K)){var e=d.Oa(b),g=function(b,d){return Pb(e,Mb(e,b.ia))-Pb(e,Mb(e,d.ia))},k=d.Oa([b[0]-this.i,b[1]+this.i]),p=d.Oa([b[0]+this.i,b[1]-this.i]),k=Rb([k,p]),k=Jk(this.b,k);if(0<k.length&&(k.sort(g),p=k[0],!(p.ra instanceof Jm))){var g=p.ia,q=Mb(e,g),u=ki(d,q);if(Math.sqrt(Pb(b,u))<=this.i){var v=ki(d,g[0]),w=ki(d,g[1]),v=Pb(u,v),u=Pb(u,w);this.G=Math.sqrt(Math.min(v,u))<=this.i;if((p.ra instanceof Kn||p.ra instanceof Qn)&&!this.G)return;
this.G&&(q=v>u?g[1]:g[0]);no(this,q);p={};p[L(g)]=!0;u=1;for(w=k.length;u<w;++u)if(q=k[u].ia,Nb(g[0],q[0])&&Nb(g[1],q[1])||Nb(g[0],q[1])&&Nb(g[1],q[0]))p[L(q)]=!0;else break;this.ua=p;return}}this.a&&(this.w.fa().Rb(this.a),this.a=null)}};
function to(b){if(!(b instanceof ng&&b.a instanceof MouseEvent&&"number"===typeof b.a.which&&3===b.a.which)){this.u=!1;ko(this);b=b.b;for(var d=0,e=this.h.length;d<e;++d){for(var g=this.h[d],k=g[0],p=k.depth,q=k.ra,u=q.sa(),v=k.ia,g=g[1];b.length<q.F;)b.push(0);if(q instanceof Fd)u=b,v[0]=v[1]=b;else if(q instanceof on)u[k.index]=b,v[0]=v[1]=b;else if(q instanceof mn)u[k.index+g]=b,v[g]=b;else if(q instanceof nn)u[p[0]][k.index+g]=b,v[g]=b;else if(q instanceof Qn)q.l=Math.abs(q.h-b[0]),q.s=Math.abs(q.i-
b[1]),u=(new Qn(q.h,q.i,q.l,q.s)).sa();else if(q instanceof Kn){k=this.a.C().sa();if(null==this.j)for(var w=0;w<u[p[0]].length;w++)if(u[p[0]][w][0]!=k[0]&&u[p[0]][w][1]!=k[1]){this.j=u[p[0]][w];break}var k=b[0]<this.j[0]?b[0]:this.j[0],w=b[0]>this.j[0]?b[0]:this.j[0],z=-b[1]<-this.j[1]?b[1]:this.j[1],B=-b[1]>-this.j[1]?b[1]:this.j[1];u[p[0]][0]=[k,z];u[p[0]][1]=[w,z];u[p[0]][2]=[w,B];u[p[0]][3]=[k,B];u[p[0]][4]=[k,z];v[g]=q.J().slice(2*g,2*(g+1))}else q instanceof Rd?(u[p[0]][k.index+g]=b,v[g]=b):
q instanceof pn&&(u[p[1]][p[0]][k.index+g]=b,v[g]=b);po(this,q,u)}no(this,b)}}function vo(b){if(b instanceof ng&&b.a instanceof MouseEvent&&"number"===typeof b.a.which&&3===b.a.which)return!1;this.j=null;for(var d=this.h.length-1;0<=d;--d)b=this.h[d][0],b.ra instanceof Kn||b.ra instanceof Qn?(mo(this,b.ea),this.Ze(b.ea,b.ra)):(Ik(this.b,Rb(b.ia),b),this.a&&this.K.remove(this.a)),0===b.ea.state&&(b.ea.state=1);this.l&&(U(this,new co("modifyend",this.K)),this.l=!1);return!1}
function uo(b){if(!(b instanceof ng)||b.a instanceof MouseEvent&&"number"===typeof b.a.which&&3===b.a.which)return!0;var d;W(b.map).b.slice()[1]||b.type!=xg||this.s||(this.ja=b.f,this.Ac(b.f,b.map));this.a&&this.ca(b)&&(b.type==sg&&this.u?d=!0:this.K instanceof qb&&0<sb(this.K)&&(this.K.item(0).C()instanceof Kn||this.K.item(0).C()instanceof Qn)?d=!0:(this.a.C(),ko(this),d=qo(this),U(this,new co("modifyend",this.K)),this.l=!1));b.type==sg&&(this.u=!1);return ei.call(this,b)&&!d};function wo(b,d){db.call(this,b);this.Pa=d}R(wo,db);function xo(b){di.call(this,{tb:yo,zb:zo,ye:Ao,ub:Bo});this.b=void 0;this.a=null;this.K=void 0!==b.Pa?b.Pa:null;this.h=null}R(xo,di);function yo(b){this.h=this.i(b.f,b.map);return!this.a&&this.h?(this.a=b.b,Ao.call(this,b),U(this,new wo("translatestart",this.K)),!0):!1}function Bo(b){return this.a?(this.a=null,Ao.call(this,b),U(this,new wo("translateend",this.K)),!0):!1}
function zo(b){if(this.a){b=b.b;var d=b[0]-this.a[0],e=b[1]-this.a[1];if(this.K)this.K.forEach(function(b){var g=b.C();g.Wa(d,e);zk(b,g)});else if(this.h){var g=this.h.C();g.Wa(d,e);zk(this.h,g)}this.a=b;U(this,new wo("translating",this.K))}}
function Ao(b){var d=nm(b.map);if(b=mm(b.map,b.f,function(b){return b})){var e=!1;this.K&&0<=this.K.a.indexOf(b)&&(e=!0);this.b=d.style.cursor;d.style.cursor=this.a?"-webkit-grabbing":e?"-webkit-grab":"pointer";d.style.cursor=this.a?e?"grab":"pointer":"grabbing"}else d.style.cursor=void 0!==this.b?this.b:"",this.b=void 0}xo.prototype.i=function(b,d){var e=null,g=mm(d,b,function(b){return b});this.K&&0<=this.K.a.indexOf(g)&&(e=g);return e};function Co(b){this.v=b;xo.call(this,{});this.Ia=Do;this.ab=Eo;this.oa=Fo;this.b=null;this.K=this.v.N.ma();T(this,"translateend",Co.prototype.j,this)}R(Co,xo);Co.prototype.j=function(b){var d=b.Pa.a;for(f in d)d[f].C()instanceof Jm&&Go(d[f].C(),W(b.target.Aa()).ha(),W(b.target.Aa()).O()),0===d[f].state&&(d[f].state=1);this.v.i&&Nm(this.v)};
function Do(b){if(!(b instanceof ng)||b.a instanceof MouseEvent&&"number"===typeof b.a.which&&3===b.a.which)return!1;this.h=this.i(b.f,b.map);return!this.a&&this.h?(this.a=b.b,Eo.call(this,b),U(this,new wo("translatestart",this.K)),!0):!1}
function Eo(b){if(b instanceof ng&&!(b.a instanceof MouseEvent&&"number"===typeof b.a.which&&3===b.a.which)){var d=nm(b.map),e=null;Xn(b.f,b.map,this.v.Gb,this,function(b){e=b});e?(b=!1,this.K&&0<=this.K.a.indexOf(e)&&(b=!0),this.b="string"===typeof d.style.cursor?d.style.cursor:null,d.style.cursor=Ua()&&!ne()?this.a?"-webkit-grabbing":b?"-webkit-grab":"pointer":this.a?"grabbing":b?"grab":"pointer"):(d.style.cursor=null!==this.b?this.b:"",this.b=null)}}
function Fo(b){return!(b instanceof ng)||b.a instanceof MouseEvent&&"number"===typeof b.a.which&&3===b.a.which?!0:this.a?(this.a=null,Eo.call(this,b),U(this,new wo("translateend",this.K)),!0):!1}Co.prototype.i=function(b,d){var e=null,g=null;Xn(b,d,this.v.Gb,this,function(b){g=b});this.K&&0<=this.K.a.indexOf(g)&&(e=g);return e};Co.prototype.aa=function(){this.v=this.K=null};function Kn(b,d,e,g){Rd.call(this,[[[b,d],[b+e,d],[b+e,d-g],[b,d-g],[b,d]]],"XY")}R(Kn,Rd);function Ln(b){b=b.a;return fa(b)&&10==b.length?[b[0],b[1]]:null}function Nn(b){b=b.a;return fa(b)&&10==b.length?b[2]-b[0]:0}Kn.prototype.Vb=function(b){Mn(this,null,null,b,null)};function On(b){b=b.a;return fa(b)&&10==b.length?Math.abs(b[5]-b[3]):0}
function Mn(b,d,e,g,k){var p=b.a;fa(p)&&10==p.length&&("number"!==typeof d&&(d=p[0]),"number"!==typeof e&&(e=p[1]),"number"!==typeof g&&(g=Nn(b)),"number"!==typeof k&&(k=On(b)),b.wa([[[d,e],[d+g,e],[d+g,e-k],[d,e-k],[d,e]]]))}Kn.prototype.clone=function(){var b=Ln(this);return new Kn(b[0],b[1],Nn(this),On(this))};
function Jm(b,d,e){e=e||null;if(null==e||"number"!==typeof e.width||"number"!==typeof e.height)e={width:10,height:10};Kn.call(this,b,d,e.width,e.height);this.i=function(){this.h=[];var b=this.a;for(c in b)this.h.push(b[c])};this.i()}R(Jm,Kn);
function Go(b,d,e){"number"!==typeof d&&(d=0);"number"!==typeof e&&(e=1);if(0!=d){var g=[];e=b.a;for(c in e)g.push(e[c]);var k=Nn(b),p=On(b);wd(b,function(b,d){d[0]=b[0];d[1]=b[1];d[2]=b[0]+k;d[3]=b[1];d[4]=b[0]+k;d[5]=b[1]-p;d[6]=b[0];d[7]=b[1]-p;d[8]=b[0];d[9]=b[1];return d})}b.i();0!=d&&wd(b,function(b,d){for(i in g)d[i]=g[i];return d})}
function Ho(b,d,e){if("number"===typeof d){var g=b.h;wd(b,function(b,d){for(i in g)d[i]=g[i];return d});var k=b.h[2]-b.h[0],p=Math.abs(b.h[5]-b.h[3]);"object"===typeof e&&null!==e&&"number"===typeof e.width&&"number"===typeof e.height&&(k=0<e.width?e.width:1,p=0<e.height?e.height:1);Io(b,{width:k,height:p});0!==d&&b.rotate(d)}}
Jm.prototype.rotate=function(b){wd(this,function(d,e){for(var g=Math.cos(b),k=Math.sin(b),p=[d[0],d[1]],q=2,u=d.length;q<u;q+=2){var v=d[q],w=d[q+1];e[q]=g*(v-p[0])+k*(w-p[1])+p[0];e[q+1]=g*(w-p[1])-k*(v-p[0])+p[1]}return e})};function Io(b,d){"object"===typeof d&&null!==d&&"number"===typeof d.width&&"number"===typeof d.height&&(0>d.width&&(d.width=1),0>d.height&&(d.height=1),wd(b,function(b,g){g[2]=g[0]+d.width;g[4]=g[0]+d.width;g[5]=g[1]-d.height;g[7]=g[1]-d.height;return g}))}
Jm.prototype.Wa=function(b,d){rd.prototype.Wa.call(this,b,d);this.i()};Jm.prototype.clone=function(){var b=Ln(this);return new Jm(b[0],b[1],{width:Nn(this),height:On(this)})};function Qn(b,d,e,g,k,p){this.h=b;this.i=d;this.l=e;this.s=g;k={theta:k||0,step:p||.1};for(o in k){if("string"===typeof k[o])try{k[o]=parseInt(k[o])}catch(u){}"number"!==typeof k[o]&&("theta"===o&&(k[o]=0),"step"===o&&(k[o]=.1))}this.u=k.theta;this.ja=k.step;k=[];p=0*Math.PI;for(var q=2*Math.PI;p<q;p+=this.ja)x=b-g*Math.sin(p)*Math.sin(this.u*Math.PI)+e*Math.cos(p)*Math.cos(this.u*Math.PI),y=d+e*Math.cos(p)*Math.sin(this.u*Math.PI)+g*Math.sin(p)*Math.cos(this.u*Math.PI),k.push([x,y]);0<k.length&&
k.push(k[0]);Rd.call(this,[k])}R(Qn,Rd);Qn.prototype.yc=function(){return[this.l,this.s]};Qn.prototype.Rd=function(b){fa(b);this.l=b[0];this.s=b[1]};Qn.prototype.Wa=function(b,d){rd.prototype.Wa.call(this,b,d);var e=[this.h+b,this.i+d];fa(e);this.h=e[0];this.i=e[1]};Qn.prototype.clone=function(){return new Qn(this.h,this.i,this.l,this.s,this.u,this.ja)};function Jo(b){mn.call(this,b)}R(Jo,mn);Jo.prototype.clone=function(){return new Jo(this.sa().slice())};function Zn(b,d){yk.call(this);this.K=this.qc=null;"undefined"!==typeof b&&"undefined"!==typeof d&&Ko(this,b,d,!0)}R(Zn,yk);
function Ko(b,d,e,g){b.qc=d;b.K=e;if("boolean"===typeof g&&g)for(f in b.K)b.K[f].cluster=b;d=new hn(jc(b.qc),10);d.Wa=function(b,d){rd.prototype.Wa.call(this,b,d);for(f in e)e[f].C().Wa(b,d);this.A()};zk(b,d);d=new nj({fill:new gj({color:"rgba(255,255,0,0.25)"}),stroke:new lj({color:"rgba(255,255,0, 1)"}),text:new Jn({font:"normal 12px arial",stroke:new lj({color:"rgba(255,255,0, 1)"}),text:""+b.K.length})});Bk(b,d)};function Lo(b,d,e,g,k,p,q,u,v,w,z){Bg.call(this,k,0);this.G=void 0!==z?z:!1;this.B=q;this.w=u;this.h=null;this.b={};this.i=d;this.l=g;this.s=p?p:k;this.f=[];this.lc=null;this.j=0;p=Lg(g,this.s);u=this.l.J();k=this.i.J();p=u?lc(p,u):p;if(0===fc(p))this.state=4;else if((u=b.J())&&(k?k=lc(k,u):k=u),g=g.O(this.s[0]),g=jk(b,e,jc(p),g),!isFinite(g)||0>=g)this.state=4;else if(this.u=new mk(b,e,p,k,g*(void 0!==w?w:.5)),0===this.u.g.length)this.state=4;else if(this.j=Sg(d,g),e=ok(this.u),k&&(b.ac?(e[1]=Ib(e[1],
k[1],k[3]),e[3]=Ib(e[3],k[1],k[3])):e=lc(e,k)),fc(e))if(b=Mg(d,e,this.j),100>(b.f-b.a+1)*(b.g-b.b+1)){for(d=b.a;d<=b.f;d++)for(e=b.b;e<=b.g;e++)(w=v(this.j,d,e,q))&&this.f.push(w);0===this.f.length&&(this.state=4)}else this.state=3;else this.state=4}R(Lo,Bg);Lo.prototype.aa=function(){1==this.state&&(this.lc.forEach(Aa),this.lc=null);Lo.za.aa.call(this)};
Lo.prototype.mb=function(b){if(void 0!==b){var d=L(b);if(d in this.b)return this.b[d];b=xa(this.b)?this.h:this.h.cloneNode(!1);return this.b[d]=b}return this.h};
Lo.prototype.Ic=function(){var b=[];this.f.forEach(function(d){d&&2==d.W()&&b.push({D:Lg(this.i,d.na),Qa:d.mb()})},this);this.f.length=0;if(0===b.length)this.state=3;else{var d=this.s[0],e=Rg(this.l,d),g=ia(e)?e:e[0],e=ia(e)?e:e[1],d=this.l.O(d),k=this.i.O(this.j),p=Lg(this.l,this.s);this.h=lk(g,e,this.B,k,this.i.J(),d,p,this.u,b,this.w,this.G);this.state=2}this.A()};
Lo.prototype.load=function(){if(0==this.state){this.state=1;this.A();var b=0;this.lc=[];this.f.forEach(function(d){var e=d.W();if(0==e||1==e){b++;var g;g=T(d,"change",function(){var e=d.W();if(2==e||3==e||4==e)Aa(g),b--,0===b&&(this.lc.forEach(Aa),this.lc=null,this.Ic())},this);this.lc.push(g)}},this);this.f.forEach(function(b){0==b.W()&&b.load()});0===b&&H.setTimeout(this.Ic.bind(this),0)}};function Mo(b){bl.call(this,{xa:b.xa,Tc:b.Tc,D:b.D,Ea:b.Ea,Fc:b.Fc,ba:b.ba,state:b.state,Ca:b.Ca,mc:b.mc?b.mc:No,Nc:b.Nc,Fb:b.Fb,url:b.url,nc:b.nc,Ma:b.Ma});this.crossOrigin=void 0!==b.crossOrigin?b.crossOrigin:null;this.Mc=void 0!==b.Mc?b.Mc:en;this.b={};this.h={};this.G=b.Mi}R(Mo,bl);A=Mo.prototype;A.Ne=function(){if(Fg(this.a))return!0;for(var b in this.b)if(Fg(this.b[b]))return!0;return!1};
A.Oe=function(b,d){var e=this.zc(b);Gg(this.a,this.a==e?d:{});for(var g in this.b){var k=this.b[g];Gg(k,k==e?d:{})}};A.Xc=function(){return 0};A.Gd=function(b){return this.l&&b&&!Fc(this.l,b)?!1:Mo.za.Gd.call(this,b)};A.lb=function(b){var d=this.l;return!this.Ca||d&&!Fc(d,b)?(d=L(b).toString(),d in this.h||(this.h[d]=Ug(b)),this.h[d]):this.Ca};A.zc=function(b){var d=this.l;if(!d||Fc(d,b))return this.a;b=L(b).toString();b in this.b||(this.b[b]=new Eg);return this.b[b]};
A.Ad=function(b,d,e,g,k,p){b=[b,d,e];g=(d=Zg(this,b,k))?this.Fb(d,g,k):void 0;g=new this.Mc(b,void 0!==g?0:4,void 0!==g?g:"",this.crossOrigin,this.mc);g.g=p;T(g,"change",this.j,this);return g};function mh(b,d,e,g,k,p){if(b.l&&p&&!Fc(b.l,p)){k=b.zc(p);e=[d,e,g];d=b.Yc.apply(b,e);if(Dg(k,d))return k.get(d);var q=b.l;g=b.lb(q);var u=b.lb(p),v=Zg(b,e,p);b=new Lo(q,g,p,u,e,v,b.i,0,function(b,d,e,g){return Oo(this,b,d,e,g,q)}.bind(b),b.G,!1);k.set(d,b);return b}return Oo(b,d,e,g,k,p)}
function Oo(b,d,e,g,k,p){var q=null,u=b.Yc(d,e,g);if(Dg(b.a,u)){if(q=b.a.get(u),""!=q.g){var v=q;q.a&&""==q.a.g?(q=q.a,2==v.W()&&(q.a=v)):(q=b.Ad(d,e,g,k,p,""),2==v.W()?q.a=v:v.a&&2==v.a.W()&&(q.a=v.a,v.a=null));q.a&&(q.a.a=null);b.a.replace(u,q)}}else q=b.Ad(d,e,g,k,p,""),b.a.set(u,q);return q}function No(b,d){b.mb().src=d};function rm(b){b=b||{};this.va=b.Qa||-1;this.u=b.width||-1;this.s=b.height||-1;this.Md=b.oh||0;this.Wd=b.time||0;this.gb=[];this.oc=[];if(fa(b.ud))for(var d in b.ud){var e=b.ud[d];this.gb.push(e);!0===e.active&&this.oc.push(parseInt(d))}this.Ta=b.Gh;this.$h=pm.le(b.uri);this.Nd=null;d=b.Th||{width:256,height:256};e=[0,-this.s,this.u,0];d=new Hg({Vd:[d.width,d.height],D:e,origin:ec(e),xb:b.xb||[1]});Mo.call(this,{crossOrigin:b.crossOrigin,Mc:gn,Ca:d,Fb:function(b){if(b){var d=this.Ca.Sb.length-b[0]-
1,e=this.Ta.full+"/"+this.$h.full+"/"+this.va+"/"+this.Md+"/"+this.Wd+"/?",e=1<this.Ca.Sb.length?e+("tile="+d+","+b[1]+","+(-b[2]-1)):e+("region="+b[1]*this.Ca.Xb[0]+","+(-b[2]-1)*this.Ca.Xb[1]),e=e+(","+this.Ca.Xb[0]+","+this.Ca.Xb[1]);b=this.oc.length;if(0<b)for(var e=e+"&c=",q=d=0;q<b;q++){var u=this.oc[q];if("object"===typeof this.gb[u]){var v=this.gb[u];0!=d&&(e+=",");e+=u+1;e+="|"+v.start+":"+v.end;e+="$"+v.color;d++}}else{b="&c=";for(d=0;d<this.gb.length;d++)0!==d&&(b+=","),b+="-"+(d+1);e+=
b}return e+"&q=0.9"}}})}R(rm,Mo);A=rm.prototype;A.Ad=function(b,d,e,g,k,p){b=[b,d,e];g=(d=Zg(this,b,k))?this.Fb(d,g,k):void 0;g=new this.Mc(b,void 0!==g?0:4,void 0!==g?g:"",this.crossOrigin,this.mc);g.g=p;g.source=this;T(g,"change",this.j,this);return g};A.gh=function(){return this.u};A.eh=function(){return this.s};A.Nf=function(){return this.Md};A.Jh=function(b){this.Md=b};A.fh=function(){return this.Wd};A.hh=function(b){this.Wd=b};A.Lf=function(){return this.oc};
A.Hh=function(b){for(c in b);this.oc=b};function Hm(b){b.a instanceof Cg&&b.a.clear();b.A()}A.aa=function(){this.a instanceof Cg&&this.a.clear();this.gb=[]};rm.prototype.getWidth=rm.prototype.gh;rm.prototype.getHeight=rm.prototype.eh;rm.prototype.getPlane=rm.prototype.Nf;rm.prototype.setPlane=rm.prototype.Jh;rm.prototype.getTime=rm.prototype.fh;rm.prototype.setTime=rm.prototype.hh;rm.prototype.getChannels=rm.prototype.Lf;rm.prototype.setChannels=rm.prototype.Hh;function Po(b,d,e,g,k,p,q){Ag.call(this,b,d,e,0,g);this.j=k;this.a=new Image;null!==p&&(this.a.crossOrigin=p);this.g={};this.b=null;this.state=0;this.i=q}R(Po,Ag);Po.prototype.f=function(b){if(void 0!==b){var d;b=L(b);if(b in this.g)return this.g[b];xa(this.g)?d=this.a:d=this.a.cloneNode(!1);return this.g[b]=d}return this.a};Po.prototype.s=function(){this.state=3;this.b.forEach(Aa);this.b=null;this.A()};
Po.prototype.u=function(){void 0===this.H&&(this.H=ic(this.D)/this.a.height);this.state=2;this.b.forEach(Aa);this.b=null;this.A()};Po.prototype.load=function(){0==this.state&&(this.state=1,this.A(),this.b=[T(this.a,"error",this.s,this,!0),T(this.a,"load",this.u,this,!0)],this.i(this,this.j))};function Qo(b){var d=b.og,e=void 0!==b.crossOrigin?b.crossOrigin:null,g=void 0!==b.pg?b.pg:xk;qk.call(this,{xa:b.xa,Ea:b.Ea,ba:uc(b.ba)});this.b=new Po(d,void 0,1,this.jb(),b.url,e,g);this.h=b.qg?b.qg:null;T(this.b,"change",this.g,this)}R(Qo,qk);function sk(b,d){return mc(d,b.b.J())?b.b:null}
Qo.prototype.g=function(b){if(2==this.b.W()){var d=this.b.J(),e=this.b.f(),g,k;this.h?(g=this.h[0],k=this.h[1]):(g=e.width,k=e.height);d=Math.ceil(hc(d)/(ic(d)/k));if(d!=g){var p=document.createElement("canvas");p.width=d;p.height=k;p.getContext("2d").drawImage(e,0,0,g,k,0,0,p.width,p.height);this.b.a=p}}Qo.za.g.call(this,b)};function wm(b,d){var e=d||{};e.md=!0;var g=null;fa(e.features)&&(g=d.features,e.features=null,e.Pa=null);Mk.call(this,e);this.hd=!0;"boolean"===typeof e.scaleText&&(this.hd=e.scaleText);this.Db=!1;"boolean"===typeof e.rotateText&&(this.Db=e.rotateText);this.i=!0;this.Gb=!1;this.b=this.B=null;this.G=0;this.ya=null;this.o=b;this.hb=this.Pb=this.Yb=this.N=null;this.s=[];this.Ja=function(b){pm.Jc({server:b.o.Ta,uri:"/webgateway/get_rois_json/"+b.o.Da(),jsonp:!0,success:function(d){if("string"===typeof d)try{d=
JSON.parse(d)}catch(e){console.error("Failed to parse json response!")}"object"!==typeof d?console.error("Regions Request did not receive proper response!"):(b.ya=d,d=Gm(b),fa(d)&&0<d.length&&b.yb(d))},error:function(d){console.error("Error retrieving regions info for id: "+b.o.Da()+(d&&0<d.length?"\\n"+d:""))}})};if(g){for(s in g){var e=g[s],k=W(this.o.o).ha();W(this.o.o).O();e.C()instanceof Jm&&0!==k&&!this.Db&&e.C().rotate(-k);Km(e,this)}this.yb(g)}this.Ja(this)}R(wm,Mk);
function xm(b,d){if(fa(d)){var e=!1,g=!1,k=!1,p=!1,q=!1,u=b.s.slice();b.s=[];for(m in d)if(!("number"!==typeof d[m]||0>d[m]||4<d[m])){if(d[m]===ym.DEFAULT){e=!0;g=k=p=q=!1;break}d[m]===ym.SELECT?(g=!0,q=!1):d[m]===ym.TRANSLATE?(k=g=!0,q=!1):d[m]===ym.MODIFY?(p=g=!0,q=!1):d[m]===ym.DRAW&&(p=k=g=!1,q=!0)}var v=function(){this.Pb&&(this.o.o.Ra.remove(this.Pb),this.Pb.qa(),this.Pb=null);this.Yb&&(this.o.o.Ra.remove(this.Yb),this.Yb.qa(),nm(this.o.o).style.cursor="",this.Yb=null);this.N&&(this.o.ed("boxSelect"),
this.N.ma().forEach(function(b){b instanceof yk&&(b.selected=!1)},this),this.N.ma().clear(),this.o.o.Ra.remove(this.N),this.N.qa(),this.A(),this.N=null)},w=function(){this.hb&&(this.hb.qa(),this.hb=null)},z=function(){null===this.N&&(this.N=new Rm(this),this.o.o.qb(this.N),this.o.qb("boxSelect",new cn(this)))};e?(w.call(b),v.call(b),b.s.push(0)):q?(v.call(b),null===b.hb&&(b.hb=new Tm(u,b)),b.s.push(Sm)):(p&&(w.call(b),z.call(b),null===b.Pb&&(b.Pb=new so({Pa:b.N.ma()}),b.o.o.qb(b.Pb)),b.s.push(3)),
k&&(w.call(b),z.call(b),null===b.Yb&&(b.Yb=new Co(b),b.o.o.qb(b.Yb)),b.s.push(2)),g&&(w.call(b),z.call(b),b.s.push(1)))}}function Nm(b){window.setTimeout(function(b){Ro(b)},0,b)}function Ro(b){if(b.i&&(b.b=So(b.a),fa(b.b)&&0!==b.b.length)){for(l in b.b)b.b[l].forEach(function(b){b instanceof Zn&&(Km(b,this),b.group_selected=!1)},b);b.A()}}A=wm.prototype;A.yb=function(b){this.i?(Nk(this,b),Ro(this)):Mk.prototype.yb.call(this,b)};
A.pc=function(b){this.i?(Pk(this,b),Nm(this)):Mk.prototype.pc.call(this,b)};A.Rb=function(b){if(this.i){var d=L(b).toString();d in this.h?delete this.h[d]:this.a&&this.a.remove(b);this.dd(b);Nm(this)}else Mk.prototype.Rb.call(this,b)};A.clear=function(){if(fa(this.b)){for(l in this.b)this.b[l]instanceof Hk&&this.b[l].clear();delete this.b[l]}Mk.prototype.clear.call(this,!0);this.w={};this.g={};this.u={};this.j=null;this.Gb=!1;this.b=this.B=null;this.G=0};
A.Kb=function(b,d,e){if("undefined"===typeof e||null===e)e=this;var g=To(this);if(!g||!fa(this.b)||0===this.b.length)return Lk(this.a,b,function(b){("boolean"!==typeof b.visible||b.visible)&&d.call(e,b)},e);var k=null!==this.B&&this.B!==g&&this.B&&!g;this.B=g;var p=[],q=0;if(g)for(var u=0;u<this.b.length;u++)if(!To(this,null,u)){q=u;break}this.G=q;q=Lk(this.b[q],b,function(q){k&&q instanceof Zn&&(q.selected=!1,p.push(q));if(q instanceof Zn&&(!g||q.selected)&&mc(b,q.qc))for(f in g&&u&&d.call(e,q),
q.K){var u=!0;"boolean"!==typeof q.visible||q.visible||(u=!1);var z=q.K[f].C();u&&z&&z.cb(b)&&d.call(e,q.K[f])}else q.C()&&"boolean"===typeof q.visible&&!q.visible&&q.C().cb(b)&&d.call(e,q)},e);if(this.N){for(u in p)this.N.ma().remove(p[u]);g&&this.N.ma().forEach(function(g){g instanceof Zn||!g.C().cb(b)||d.call(e,g)},e)}return q};A.ma=function(){if(!this.i||!fa(this.b)||0===this.b.length)return this.a.getAll();var b=this.G;if(0>b||b>=this.b.length)b=0;return this.b[b].getAll()};
function To(b,d,e){if(!b.i)return b.Gb=!1;var g=!1;fa(d)&&4===d.length||(d=Lm(b.o));var k=e="number"===typeof e?e:-1;d=fa(b.b)&&0<=k&&k<b.b.length?b.b[k].Sa.search(d):b.a&&b.a.Sa?b.a.Sa.search(d):null;fa(d)&&d.length>dn&&W(b.o.o).O()!==W(b.o.o).i&&(g=!0);-1===e&&(b.Gb=g);return g}
function Qm(b,d){var e=Uo();if(""!==e){var g={nextRoiId:"",nextShapeId:"",storedCount:0},k=b.o.va,p=function(b){var e=0,g={};for(r in d.rois)if(""===b.nextRoiId||r===b.nextRoiId){b.nextRoiId="";if(250<=e){b.nextRoiId=r;b.nextShapeId=s;break}for(s in d.rois[r].shapes)if(""===b.nextShapeId||s===b.nextShapeId){b.nextShapeId="";if(250<=e){b.nextRoiId=r;b.nextShapeId=s;break}"object"!==typeof g[r]&&(g[r]={"@id":parseInt(r),"@type":"http://www.openmicroscopy.org/Schemas/ROI/2015-01#ROI",shapes:[]});g[r].shapes.push(d.rois[r].shapes[s]);
++e}}250>e&&(b.nextRoiId="",b.nextShapeId="");if(0===e)return"";try{return b={imageId:k,count:e},b.rois=g,JSON.stringify(b)}catch(p){return null}},q=p(g),u={server:b.o.Ta,uri:"/ome-ol3-viewer/postrois",method:"POST",content:q,headers:{"X-CSRFToken":e},jsonp:!1,error:function(b){console.error("Failed to store regions: "+(b&&0<b.length?"\\n"+b:""))},success:function(e){"string"!==typeof e&&console.error("Did not receive any data after regions post");try{e=JSON.parse(e)}catch(k){console.error("Failed to parse json response for regions storage!")}if("string"===
typeof e.error)console.error("Failed to store rois: "+e.error);else if("object"===typeof e.ids){for(id in e.ids)try{b.g[id].state=0;var q=b.g[id];q.va=e.ids[id];q.A();g.storedCount++}catch(k){}if(""!==g.nextRoiId&&""!==g.nextShapeId){u.content=p(g);if(null===u.content){console.error("Failed to construct json for rois request!");return}if(""===u.content)return;pm.Jc(u,this)}g.storedCount!==d.count&&console.error("Not all added/modified rois were stored: "+g.storedCount+"/"+d.count)}else console.error("Received unexpected data after regions post")}};
null===q?console.error("Failed to construct json for rois request!"):""!==q&&pm.Jc(u,b)}}A.aa=function(){this.clear();this.o=this.ya=this.h=this.M=this.a=null};function Jn(b){b=b||{};this.ib=b.font;this.j=b.rotation;this.g=b.scale;this.l=b.text;this.h=b.textAlign;this.i=b.textBaseline;this.a=void 0!==b.fill?b.fill:new gj({color:"#333"});this.Ha=void 0!==b.stroke?b.stroke:null;this.f=void 0!==b.offsetX?b.offsetX:0;this.b=void 0!==b.offsetY?b.offsetY:0}A=Jn.prototype;A.ha=function(){return this.j};A.R=function(){return this.Ha};A.I=function(){return this.l};A.Ub=function(b){this.j=b};A.kd=function(b){this.g=b};function Vo(b,d){if("object"!=typeof b)return null;var e="boolean"===typeof d?d:!1,g={count:0},k={count:0};"string"===typeof b.fillColor&&(k.color=Wo(b.fillColor,b.fillAlpha),k.color=Xo(k.color),null!=k.color&&k.count++);"string"===typeof b.strokeColor&&(g.color=Wo(b.strokeColor,b.strokeAlpha),g.color=Xo(g.color),null!=g.color&&g.count++);"number"===typeof b.strokeWidth?(g.width=b.strokeWidth,g.count++):g.width=1;0<g.count&&(g.lineCap="butt",g.lineJoin="miter",g.miterLimit=20);var p=0<g.count?new lj(g):
null,k=0<k.count?new gj(k):null,q={};if("string"===typeof b.textValue){var u={text:b.textValue},v="",v="string"===typeof b.fontStyle?v+(b.fontStyle+" "):v+"normal ",v="number"===typeof b.fontSize?v+(b.fontSize+"px "):v+"10px ";"string"===typeof b.fontFamily?v+=b.fontFamily:v+="sans-serif";u.font=v;p&&(g.lineCap="round",g.lineJoin="round",u.fill=new gj(g),u.stroke=new lj(g),e||u.stroke.Vb(1));q.text=new Jn(u)}p&&(q.stroke=p);k&&(q.fill=k);e&&(q.stroke=new lj({color:"rgba(255,255,255,0)",width:1,lineCap:"butt",
lineJoin:"miter",miterLimit:20}),q.fill=new gj({color:"rgba(255,255,255,0)"}));return new nj(q)}
function Km(b,d){var e=!0,g=b.a;if(null!=g){var k=W(d.o.o);"function"===typeof g&&(g=g.call(b,k.O()));b.regions=d;var p=g.R();"object"!==typeof b.oldStrokeStyle&&(b.oldStrokeStyle=p?{color:p.h,width:p.i,lineDash:p.j,lineCap:p.a,lineJoin:p.f,miterLimit:p.b}:null);b.C()instanceof Jm&&("undefined"===typeof b.oldRotation&&(b.oldRotation=k.ha()),"undefined"===typeof b.oldScale&&(b.oldScale=k.O()),"undefined"===typeof b.oldRotationFlag&&(b.oldRotationFlag=d.Db),"undefined"===typeof b.oldScaleFlag&&(b.oldScaleFlag=
d.hd));b instanceof Zn&&(b.oldRadius=b.C().yc());Bk(b,function(d){if(!(this.regions instanceof wm))return g;var p=this.regions,v=p.hd,p=p.Db,w=k.ha();b instanceof Zn&&b.C().Rd(b.oldRadius*d);var z=g.I();!z||b instanceof Zn||(v?z.kd(1/d):z.kd(1),p?z.Ub(w):z.Ub(0),e=e||!1,b.C()instanceof Jm&&(e||b.oldRotation!==w||b.oldScale!==d||b.oldRotationFlag!==p||b.oldScaleFlag!==v)&&(b.oldRotation!==w&&(b.oldRotation=w),b.oldScale!==d&&(b.oldScale=d),b.oldRotationFlag!==p&&(b.oldRotationFlag=p),b.oldScaleFlag!==
v&&(b.oldScaleFlag=v),e&&(e=!1),d=Pn(z.I(),z.ib,v?null:d),v=p?0:0-w,Ho(b.C(),v,d)));typeof("boolean"===b.selected)&&b.selected?(d=new lj,d.Kc("rgba(255,255,255,1)"),d.Vb(3),d.setLineDash([.1,5]),g.Ha=d):b.oldStrokeStyle?(g.R().Kc(b.oldStrokeStyle.color),g.R().Vb(b.oldStrokeStyle.width),g.R().setLineDash(b.oldStrokeStyle.lineDash),d=g.R(),d.a=b.oldStrokeStyle.lineCap,d.g=void 0,d=g.R(),d.f=b.oldStrokeStyle.lineJoin,d.g=void 0,d=g.R(),d.b=b.oldStrokeStyle.miterLimit,d.g=void 0):g.Ha=null;return g})}}
function Pn(b,d,e){if("string"!==typeof b||"string"!==typeof d)return null;var g=10;e="number"===typeof e&&0<e?e:1;var k=d.split(" ");if(3!=k.length)return null;try{g=parseInt(k[1]),g*=e,g=Math.ceil(g),d=k[0]+" "+g+"px "+k[2]}catch(p){}e=document.createElement("canvas").getContext("2d");e.font=d;b=e.measureText(b);return{width:0<b.width?b.width:5,height:g}}
function Yo(b){if(!(b instanceof nj))return null;var d=null,e=null;b.f&&(e=new gj({color:b.f.a}));var g=Zo(b.R()),k=null;b.I()&&(k=new Jn({font:b.I().ib?b.I().ib:null,text:b.I().I()?b.I().I():null,stroke:Zo(b.I().R()),fill:b.I().a?new gj({color:b.I().a.a}):null}));if(null!==e||null!==g||null!==k)d=new nj({fill:e,stroke:g,text:k});return d}
function Zo(b){return b instanceof lj?new lj({color:b.h?b.h:null,lineCap:b.a?b.a:"butt",lineDash:b.j?b.j:null,lineJoin:b.f?b.f:"miter",miterLimit:b.b?b.b:20,width:b.i?b.i:1}):null}
function Om(b,d){var e;if(d instanceof wm&&"object"===typeof b&&"string"===typeof b.type){if(!(e instanceof qb)){if(null===d.N)return;e=d.N.ma()}var g=b.type.toLowerCase(),k=Vo(b,"label"===g);null!==k&&e.forEach(function(b){if(b instanceof yk&&!(b instanceof Zn)&&b.type===g){var e=b.a;"function"===typeof e&&(e=e(W(d.o.o).O()));if(k){var u=k.f?k.f:e.f,v=null;if("object"===typeof b.oldStrokeStyle&&null!==b.oldStrokeStyle){v=new lj;v.Kc(b.oldStrokeStyle.color);v.Vb(b.oldStrokeStyle.width);v.setLineDash(b.oldStrokeStyle.lineDash);
var w=v;w.a=b.oldStrokeStyle.lineCap;w.g=void 0;w=v;w.f=b.oldStrokeStyle.lineJoin;w.g=void 0;w=v;w.b=b.oldStrokeStyle.miterLimit;w.g=void 0}k.R()&&(null===v&&(v=new lj),k.R().h&&v.Kc(k.R().h),k.R().a&&(w=v,w.a=k.R().a,w.g=void 0),k.R().j&&v.setLineDash(k.R().j),k.R().f&&(w=v,w.f=k.R().f,w.g=void 0),k.R().b&&(w=v,w.b=k.R().b,w.g=void 0),k.R().i&&v.Vb(k.R().i));e=e.I();null===e?e=k.I():k.I()&&(k.I().ib&&(e.ib=k.I().ib),k.I().f&&(e.f=k.I().f),k.I().b&&(e.b=k.I().b),k.I().a&&(e.a=k.I().a),k.I().ha()&&
e.Ub(k.I().ha()),k.I().g&&e.kd(k.I().g),k.I().R()&&(e.Ha=k.I().R()),k.I().I()&&(e.l=k.I().I()),k.I().h&&(e.h=k.I().h),k.I().i&&(e.i=k.I().i));u=new nj({fill:u,stroke:v,text:e});delete b.oldStrokeStyle;Bk(b,u);Km(b,d);0===b.state&&(b.state=1)}}})}}function $o(b){"object"===typeof b&&"string"!==typeof b.fillColor&&"string"!==typeof b.strokeColor&&(b.strokeColor="#FFFFFF","number"!==typeof b.strokeAlpha&&(b.strokeAlpha=1),"number"!==typeof b.strokeWidth&&(b.strokeWidth=1))};var ap={};function bp(b,d){if("string"!==typeof b||0===b.length)return null;"number"!==typeof d&&(d=1);try{var e=b.replace(/\(rgba|\(|rgba|rgb|\)/g,"").split(",");if(3>e.length)return null;var g={red:255,green:255,blue:255,alpha:d};g.red=parseInt(e[0],10);g.green=parseInt(e[1],10);g.blue=parseInt(e[2],10);3<e.length&&(g.alpha=parseFloat(e[3],10))}catch(k){return null}return g}
function Wo(b,d){if("string"!==typeof b||0===b.length)return null;"number"!==typeof d&&(d=1);try{var e=b.replace(/#|\s/g,"");if(6!=e.length)return null;var g={red:255,green:255,blue:255,alpha:d};g.red=parseInt(e.substring(0,2),16);g.green=parseInt(e.substring(2,4),16);g.blue=parseInt(e.substring(4,6),16);return g}catch(k){return null}}
function Xo(b){b=cp(b);if(null==b)return null;var d;d="rgba("+(b.red.toString(10)+",");d+=b.green.toString(10)+",";d+=b.blue.toString(10)+",";d+=b.alpha.toString(10);return d+")"}function cp(b){if("object"!==typeof b)return null;var d=["red","green","blue"];for(n in d){if("undefined"===typeof b[d[n]])return null;var e=b[d[n]];if(0>e||255<e)return null}"undefined"===typeof b.alpha&&(b.alpha=1);return b}
function dp(b){var d;if("number"!==typeof d)try{d=parseInt(d)}catch(k){d=1}"string"==typeof b&&(b=-1!=b.indexOf("rgba")?bp(b,d):Wo(b,d));if("object"!==typeof b||"object"!==typeof(b=cp(b)))return null;d=255*b.alpha;d=("00"+(.5>=d-parseInt(d)?Math.floor(d):Math.ceil(d)).toString(16)).substr(-2);var e=("00"+b.red.toString(16)).substr(-2),g=("00"+b.green.toString(16)).substr(-2);b=("00"+b.blue.toString(16)).substr(-2);return 0|parseInt("0x"+d+e+g+b,16)}
function ep(b,d){if(!(b instanceof mn))throw"shape type line must be of instance ol.geom.LineString!";var e="number"===typeof d?d:-1,g={};0<=e&&(g["@id"]=e);e=b.a;if(4<e.length)return ap.Ji.call(null,b,d);g["@type"]="http://www.openmicroscopy.org/Schemas/ROI/2015-01#Line";g.X1=e[0];g.X2=e[2];g.Y1=-e[1];g.Y2=-e[3];return g}
var fp={point:function(b,d){if(!(b instanceof hn))throw"shape type point must be of instance ol.geom.Circle!";var e="number"===typeof d?d:-1,g={};0<=e&&(g["@id"]=e);g["@type"]="http://www.openmicroscopy.org/Schemas/ROI/2015-01#Point";e=Cj(b);g.X=e[0];g.Y=-e[1];return g},ellipse:function(b,d){if(!(b instanceof Qn))throw"shape type ellipse must be of instance ome.ol3.geom.Ellipse!";var e="number"===typeof d?d:-1,g={};0<=e&&(g["@id"]=e);g["@type"]="http://www.openmicroscopy.org/Schemas/ROI/2015-01#Ellipse";
e=[b.h,b.i];g.X=e[0];g.Y=-e[1];e=b.yc();g.RadiusX=e[0];g.RadiusY=e[1];return g},rectangle:function(b,d){if(!(b instanceof Kn))throw"shape type rectangle must be of instance ome.ol3.geom.Rectangle!";var e="number"===typeof d?d:-1,g={};0<=e&&(g["@id"]=e);g["@type"]="http://www.openmicroscopy.org/Schemas/ROI/2015-01#Rectangle";e=Ln(b);g.X=e[0];g.Y=-e[1];g.Width=Nn(b);g.Height=On(b);return g},line:ep,polyline:function(b,d){if(!(b instanceof mn))throw"shape type polyline must be of instance ol.geom.LineString!";
var e="number"===typeof d?d:-1,g={};0<=e&&(g["@id"]=e);e=b.a;if(5>e.length)return ep.call(null,b,d);g["@type"]="http://www.openmicroscopy.org/Schemas/ROI/2015-01#Polyline";g.Points="";for(var k=0;k<e.length;k+=2)0!==k&&0===k%2&&(g.Points+=" "),g.Points+=e[k]+","+-e[k+1];return g},label:function(b,d){if(!(b instanceof Jm))throw"shape type label must be of instance ome.ol3.geom.Label!";var e="number"===typeof d?d:-1,g={};0<=e&&(g["@id"]=e);g["@type"]="http://www.openmicroscopy.org/Schemas/ROI/2015-01#Label";
e=Ln(b);g.X=e[0];g.Y=-e[1];return g},polygon:function(b,d){if(!(b instanceof Rd))throw"shape type polygon must be of instance ol.geom.Polygon!";var e="number"===typeof d?d:-1,g={};0<=e&&(g["@id"]=e);g["@type"]="http://www.openmicroscopy.org/Schemas/ROI/2015-01#Polygon";e=b.a;g.Points="";for(var k=0;k<e.length;k+=2)0!==k&&0===k%2&&(g.Points+=" "),g.Points+=e[k]+","+-e[k+1];return g}};
function Pm(b,d){if(!(b instanceof qb)||0===sb(b))return null;var e="boolean"===typeof d?d:!1,g=-1,k={count:0,rois:{}};b.forEach(function(b){var d=[];b instanceof Zn?d=d.concat(b.K):d.push(b);for(f in d)if(b=d[f],b instanceof yk&&null!==b.C()&&"number"===typeof b.state&&0!==b.state){var u=-1,v=-1;if(!("string"!==typeof b.Da()||3>b.Da().length)){var w=b.Da().indexOf(":");if(!(1>w)){u=b.Da().substring(0,w);v=b.Da().substring(w+1);try{u=parseInt(u),v=parseInt(v)}catch(M){continue}w=u;2===b.state&&e&&
(w=g--);u=null;"object"!==typeof k.rois[w]&&(k.rois[w]={"@type":"http://www.openmicroscopy.org/Schemas/ROI/2015-01#ROI",shapes:[]});u=k.rois[w];w=b.type;try{var z=fp[w].call(this,b.C(),2===b.state?-1:v),v=b,B=z;if("object"===typeof B&&"string"===typeof B["@type"]&&v instanceof yk&&(v.a instanceof nj||"function"===typeof v.a)){var C=v.a;"function"===typeof C&&(C=C(1));if(C instanceof nj){var D="http://www.openmicroscopy.org/Schemas/ROI/2015-01#Label"===B["@type"];!D&&C.f&&(B.FillColor=dp(C.f.a));var F=
D&&C.I()&&C.I().R()?C.I().R().h:"object"===typeof v.oldStrokeStyle&&"string"===typeof v.oldStrokeStyle.color?v.oldStrokeStyle.color:null;F&&(B.StrokeColor=dp(F));var I="object"===typeof v.oldStrokeStyle&&null!==v.oldStrokeStyle&&"number"===typeof v.oldStrokeStyle.width?v.oldStrokeStyle.width:1;B.StrokeWidth={"@type":"TBD#LengthI",Unit:"PIXEL",Symbol:"px",Value:D&&C.I()&&C.I().R()?C.I().R().i:I};if(C.I()&&(C.I().I()&&(B.Text=C.I().I()),C.I().ib)){var J=C.I().ib.split(" ");if(3==J.length)try{B.FontStyle=
J[0],B.FontSize={"@type":"TBD#LengthI",Unit:"PIXEL",Symbol:"px",Value:parseInt(J[1])},B.FontFamily=J[2]}catch(M){}}}}v=b;B=z;"object"===typeof B&&v instanceof yk&&("number"===typeof v.theT&&-1!==v.theT&&(B.TheT=v.theT),"number"===typeof v.theZ&&-1!==v.theZ&&(B.TheZ=v.theZ),"number"===typeof v.theC&&-1!==v.theC&&(B.TheC=v.theC));z.oldId=b.Da();u.shapes.push(z)}catch(M){console.error("Failed to turn feature "+w+"("+b.Da()+") into json => "+M);continue}k.count++}}}});return 0===k.count?null:k};function sm(b){if(!fa(b)||0===b.length||1===b.length&&1===b[0])return an;var d=an.length;if(b.length>=d)return b;b=[].concat(b);var e=-1;for(i in b)if(1===b[i]){e=i;break}if(0>e){for(i in b)if(1>b[i]){e=i;break}0>e?(b.push(1),e=b.length-1):b.splice(e,0,1)}if(b.length>=d)return b;for(i in an)if(1==an[i])break;var d=d-b.length,g=!0;for(b.length-e<e&&(g=!1);0<d;)g?(g=!1,b.splice(0,0,1.5*b[0])):(g=!0,b.push(b[b.length-1]/1.5)),d--;return b}
function gp(b){if("string"!=typeof b||0==b.length)return null;for(var d=0,e=b.length,g=[],k=-1,p=0<b.indexOf(",");0<e-d;){if(" "==b[d]){if(d+1>=e)break;if(!p||p&&" "===b[d+1])if(d++,p)continue}var q=b[d].toLowerCase();if("m"===q||"l"===q||"z"===q||" "===q)if(0>k){for(;d+1<e&&" "===q&&(" "===b[d+1]||"z"===b[d+1].toLowerCase());)q=b[++d].toLowerCase();if("z"==q){g.push(g[0]);k=-1;break}for(k=d+1;0<e-d&&(" "===b[++d]||"M"===b[d]);)k++}else try{var u=b.substring(k,p?d:d-1).split(p?",":" ");if("object"!=
typeof u||2>u.length)return null;var v=null,w=null;for(t in u)if(""!==u[t])if(null===v)v=u[t];else if(null===w)w=u[t];else break;if(null===v&&null===w)return null;g.push([parseInt(v),-parseInt(w)]);k=-1;d--}catch(z){return null}d++}if(-1!==k)try{u=b.substring(k,e).split(p?",":" ");if("object"!=typeof u||2>u.length)return null;w=v=null;for(t in u)if(""!==u[t])if(null===v)v=u[t];else if(null===w)w=u[t];else break;if(null===v&&null===w)return null;g.push([parseInt(v),-parseInt(w)])}catch(z){return null}return g}
function Xn(b,d,e,g,k,p){fa(b);var q=[];g="undefined"!==typeof g?g:window;e="boolean"===typeof e?e:!1;p="undefined"!==typeof p?p:Zd;var u=null;mm(d,b,function(b,d){if("boolean"!==typeof b.visible||b.visible)"function"===typeof this.Wc&&this.Wc(b,d)?(q.push(b),u=d):q.push(b)},g,p);k="function"===typeof k?k:function(){};if(0!=q.length)if(1===q.length)k.call(g,q[0],u);else{b=[];for(i in q)e&&q[i]instanceof Zn?b.push(q[i]):0<b.length?(d=b[0].C(),Wb(d.J(),q[i].C().J())&&(b[0]=q[i])):b.push(q[i]);if(e&&
1<b.length)for(i in b)Wb(b[0].C().J(),b[i].C().J())&&(b[0]=b[1]);k.call(g,b[0],u)}}function bo(b,d){"object"===typeof b&&"string"===typeof b.className&&"string"===typeof d&&(b.className=d)}function ao(b){b="object"!==typeof b||"string"!==typeof b.className?null:b.className.match(/\S+/g)||null;return null===b?!1:0<=ae(b,"content")}
function Uo(){for(var b=document.cookie.split(";"),d=0,e=b.length;d<e;d++){for(var g=b[d];" "==g.charAt(0);)g=g.substring(1);if(0==g.indexOf("csrftoken="))return g.substring(10,g.length)}return""};var pm={le:function(b){if("string"!==typeof b)return null;try{var d={path:"/",query:"",full:"/",relative:!0};b=b.replace(/\s/g,"");if(0===b.length)return d;for(var e=b.length,g=0;g<e&&"/"===b.charAt(g);g++)d.relative=!1,b=b.substring(g+1),g--;var k=b.indexOf("?");-1!==k&&(d.query=b.substring(k+1),b=b.substring(0,k));e=b.length;if(0<e)for(g=e-1;0<=g&&"/"===b.charAt(g);g--)b=b.substring(0,g);d.path=b;d.full=d.path;0<d.query.length&&(d.full+="/?"+d.query);return d}catch(p){return null}},ke:function(b){if("string"!==
typeof b)return null;try{var d={protocol:"",server:"",full:""};b=b.replace(/\s/g,"");if(0===b.length)return d;var e=b.indexOf("://");if(-1===e)d.protocol="http";else{var g=b.substring(0,e).toLowerCase();if("http"!==g&&"https"!==g&&"file"!==g)return null;d.protocol=g;b=b.substring(e+3)}var k=b.length;if(0<k)for(e=k-1;0<e&&"/"===b.charAt(e);e--)b=b.substring(0,e);d.server=b;d.full=d.protocol+"://"+d.server;return d}catch(p){return null}},ad:function(b){if("object"!==typeof b||"string"!==typeof b.protocol||
"string"!==typeof b.server||"string"!==typeof b.full)return!1;if(""===b.full)return!0;var d="",d="file:"===window.location.protocol?window.location.href:window.location.protocol+"//"+window.location.hostname,d=d.toLowerCase();return d===b.full.toLowerCase()?!0:!1},Ii:function(b,d,e){pm.Jc({server:b,uri:"/webclient/keepalive_ping/",jsonp:!1,success:function(b){d&&e?d.call(e,b):d?d(b):console.info("Received: "+b)},error:function(){console.error("keep alive failed")}},e)},Jc:function(b,d){var e=b||{},
g=e.server||"";"string"===typeof g&&(g=pm.ke(g));var k=e.uri||"",k=pm.le(k),p="string"===typeof e.method?e.method.toUpperCase():"GET",q="object"===typeof e.headers?e.headers:{},u="string"===typeof e.content?e.content:null,v="number"===typeof e.timeout?e.timeout:6E4,w="function"===typeof e.success?e.success:function(b){console.info(b)},e="function"===typeof e.error?e.error:function(b){console.error(b)};pm.ad(g)?pm.Fh(g,k,w,e,p,q,v,u,d):pm.Eh(g,k,w,e,d)},me:function(b){ab(b,"this method needs the is_jsonp_request flag as first argument!")},
Fh:function(b,d,e,g,k,p,q,u,v){pm.me(!1,b,d,e,g,k,p,q,u);var w="undefined"!==typeof window.XMLHttpRequest?new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP");b=""===b.full&&d.relative?d.full:b.full+"/"+d.full;""===d.query&&(b+="/");w.open(k,b,!0);for(h in p)w.setRequestHeader(h,p[h]);w.timeout=q;w.ontimeout=function(){console.info("xhr request timed out!")};w.onerror=function(b){b="undefined"!=typeof b.target?b.target.responseText:null;console.error(null===b?"xhr: an error occured":"xhr error: "+
b)};w.onreadystatechange=function(){if(4==w.readyState&&200<=w.status&&300>w.status){var b=w.responseText;"undefined"===typeof b&&(b=null);if(null!==b){var d="string"===typeof w.responseURL,k=d?w.responseURL.lastIndexOf("webclient/login/?url="):w.responseText.lastIndexOf("webclient/login/?url=");if(-1!==k){var b="webclient/login/?url=",p=window.location.href;d&&(b=w.responseURL.substring(0,k+21));window.location.href=b+p;return!0}v?e.call(v,b):e(b)}else v?g.call(v,w.statusText):g(w.statusText);return!0}return 4==
w.readyState?(v?g.call(v,w.statusText):g(w.statusText),!0):!1};w.send("POST"===k?u:null)},Ee:function(b){if("object"===typeof b&&"string"===typeof b.full){var d=window.location.href,e=!1;-1!==d.indexOf("?")&&(e=!0);b=b.full+"/webclient/login/?url="+d;window.location.href=(e?b+"&":b+"?")+"haveMadeCrossOriginLogin_"}},tg:function(b){pm.jsonpCallback_&&pm.jsonpCallback_(b)},Eh:function(b,d,e,g,k){function p(b){try{var d=document.head,e=document.createElement("script");e.onerror=function(b){console.error("JSONP request failed!");
k?g.call(k,g):g(b);delete pm.jsonpCallback_};e.src=b;d.appendChild(e);d.removeChild(e)}catch(p){console.error("failed to setup jsonp request: "+p)}}pm.me(!0,b,d,e,g);pm.jsonpCallback_=function(b){try{k?e.call(k,b):e(b)}catch(d){k?g.call(k,d):g(d)}delete pm.jsonpCallback_};try{var q=b.full+"/"+d.full,q=""==d.query?q+"/?":q+"&";p(q+"callback=ome.ol3.utils.Net.jsonpCallback")}catch(u){delete pm.jsonpCallback_,console.error("jsonp: failed to issue request: "+u)}}};
aa("ome.ol3.utils.Net.jsonpCallback",pm.tg,OME);var hp={point:function(b){var d=new yk({geometry:new hn(["number"===typeof b.cx?b.cx:"number"===typeof b.x?b.x:-1,-("number"===typeof b.cy?b.cy:"number"===typeof b.y?b.y:-1)],2)});d.type="point";Bk(d,Vo(b));return d},ellipse:function(b){var d=new yk({geometry:new Qn(b.cx,-b.cy,b.rx,b.ry)});d.type="ellipse";Bk(d,Vo(b));return d},rectangle:function(b){var d=new yk({geometry:new Kn(b.x,-b.y,b.width,b.height)});d.type="rectangle";Bk(d,Vo(b));return d},line:function(b){var d=new yk({geometry:new mn([[b.x1,
-b.y1],[b.x2,-b.y2]])});d.type="line";Bk(d,Vo(b));return d},polyline:function(b){if("string"!=typeof b.points)return null;var d=gp(b.points);if(null===d)return null;d=new yk({geometry:new Jo(d)});d.type="polyline";Bk(d,Vo(b));return d},label:function(b){if("string"!==typeof b.textValue||0===b.textValue.length)b.textValue="missing textValue";if("number"!==typeof b.fontSize)try{b.fontSize=parseInt(b.fontSize)}catch(e){b.fontSize=10}"string"!==typeof b.fontFamily&&(b.fontFamily="sans-serif");"string"!==
typeof b.fontStyle&&(b.fontStyle="normal");var d=Pn(b.textValue,b.fontStyle+" "+b.fontSize+"px "+b.fontFamily),d=new yk({geometry:new Jm(b.x,-b.y,d)});d.type="label";Bk(d,Vo(b,!0));return d},polygon:function(b){if("string"!=typeof b.points)return null;var d=gp(b.points);if(null===d)return null;d=new yk({geometry:new Rd([d])});d.type="polygon";Bk(d,Vo(b));return d}};function ip(b){if("string"!==typeof b||0===b.length)return null;b=b.toLowerCase();return"undefined"===typeof hp?null:hp[b]}
function jp(b){var d=ip(b.type);if("function"!==typeof d)return null;$o(b);b=d(b);return b instanceof yk?b:null}
function Im(b,d,e,g){if(null==ip(b.type)||!fa(e)||4!=e.length)return null;if("number"!==typeof d||0>d)d=1;if(5E4<d)return console.info("The generation is limited to 50,000 at once for now!"),null;"boolean"!==typeof g&&(g=!1);$o(b);var k=e;"object"===typeof b&&"string"===typeof b.type&&0!==b.type.length&&fa(k)&&4==k.length&&(k=b.type.toLowerCase(),"point"===k?("number"!==typeof b.cx&&(b.cx=6),"number"!==typeof b.cy&&(b.cy=6)):"line"===k?("number"!==typeof b.x1&&(b.x1=2),"number"!==typeof b.x2&&(b.x2=
17),"number"!==typeof b.y1&&(b.y1=2),"number"!==typeof b.y2&&(b.y2=2)):"polyline"===k?"string"!==typeof b.points&&(b.points="M 2 2 L 7 7 L12 2 L17 7"):"polygon"===k?"string"!==typeof b.points&&(b.points="M 2 2 L 7 7 L12 2 L17 7 Z"):"rectangle"===k?("number"!==typeof b.x&&(b.x=2),"number"!==typeof b.y&&(b.y=2),"number"!==typeof b.width&&(b.width=15),"number"!==typeof b.height&&(b.height=15)):"ellipse"===k?("number"!==typeof b.cx&&(b.cx=20),"number"!==typeof b.cy&&(b.cy=15),"number"!==typeof b.rx&&
(b.rx=8),"number"!==typeof b.ry&&(b.ry=5)):"label"===k&&("string"!==typeof b.fontFamily&&(b.fontFamily="sans-serif"),"number"!==typeof b.fontSize&&(b.fontSize=15),"string"!==typeof b.fontStyle&&(b.fontStyle="normal"),"string"!==typeof b.textValue&&(b.textValue="generated"),"number"!==typeof b.x&&(b.x=10),"number"!==typeof b.y&&(b.y=10)));b=jp(b);if(null==b)return console.error("Failed to create generation prototype!"),null;b.state=2;var p=b.C().J(),q=hc(p),u=ic(p);0===u&&(u=1);0===q&&(q=1);var v=
hc(e),w=ic(e);if(0===v||0===w||q>v||u>w)return console.error("the protoype shape to be generated does not fit into the given extent!"),null;var k=[],z=ec(e),B=[e[2],e[1]],p=ec(p);b.C().Wa(-(p[0]-z[0]),-(p[1]+B[1]));if(g){e=[0,0,v-q,w-u];for(v=0;v<d;v++){w=e;fa(w)&&4==w.length?(g=w[2],u=Math.floor(Math.random()*(g-0+1))+0,g=w[3],w=[u,Math.floor(Math.random()*(g-0+1))+0]):w=null;if(null===w){console.error("couldn't get random coordinate");break}g=new yk({geometry:b.C().clone()});g.type=b.type;Bk(g,
Yo(b.a));g.C().Wa(w[0],-w[1]);w=g;u="-1:"+L(g);w.va=u;w.A();g.state=2;k.push(g)}return k}g=d;z=e;e=q;0>=e&&(e=1);0>=u&&(u=1);e={fitsPerRow:parseInt(hc(z)/e),fitsPerColumn:parseInt(ic(z)/u)};u=g/(e.fitsPerRow*e.fitsPerColumn);if(1<u){for(;1<u;)e.fitsPerRow*=2,e.fitsPerColumn*=2,u=g/(e.fitsPerRow*e.fitsPerColumn);e.stepX=parseInt(hc(z)/e.fitsPerRow)}else e.stepX=e.fitsPerRow>g?parseInt(hc(z)/g):parseInt(hc(z)/e.fitsPerRow);e.stepY=parseInt(ic(z)/e.fitsPerColumn);for(q=u=0;q*e.stepY<w&&!(u>=d);q++)for(z=
0;z*e.stepX<v&&!(u>=d);z++)g=new yk({geometry:b.C().clone()}),g.type=b.type,Bk(g,Yo(b.a)),g.C().Wa(z*e.stepX,-q*e.stepY),B=g,p="-1:"+L(g),B.va=p,B.A(),g.state=2,k.push(g),u++;return k}
function So(b){var d=dn;if(!(b instanceof Hk)||"object"!==typeof b.Sa||"object"!==typeof b.Sa.data)return null;if("number"!==typeof d||100>=d)d=100;var e=[];kp(b.Sa.data,e);b=[];for(l in e){var g=new Hk,k=[],p=[],q=e[l];for(f in q){var u=q[f];k.push(u.qc);p.push(u)}g.load(k,p);b.push(g);if(e[l].length<d)break}return b}
function kp(b,d){if("object"!==typeof b||!fa(d)||"number"!==typeof b.height&&"boolean"!==typeof b.Ba&&!fa(b.children)&&!fa(b.pa))return null;if("boolean"===typeof b.Ba&&b.Ba||"number"===typeof b.height&&1==b.height){var e=[],g=new Zn;for(child in b.children){if(!fa(b.children[child])||5!=b.children[child].length)return null;var k=b.children[child][4];k.cluster=g;e.push(k)}Ko(g,b.pa,e);fa(d[0])||d.push([]);d[0].push(g);return g}k=[];for(child in b.children)k.push(kp(b.children[child],d));g=b.height-
1;fa(d[g])||d.push([]);e=[];for(r in k)e=e.concat(k[r].K);e=new Zn(b.pa,e);d[g].push(e);return e}
function Gm(b){if(!(b instanceof wm&&fa(b.ya)))return null;var d=[];for(roi in b.ya)if("number"===typeof b.ya[roi].id&&fa(b.ya[roi].shapes)){var e=b.ya[roi].id;b.ya[roi].state=0;for(shape in b.ya[roi].shapes)if("number"===typeof b.ya[roi].shapes[shape].id){var g=b.ya[roi].shapes[shape].id,k=b.ya[roi].shapes[shape].type,p="number"===typeof b.ya[roi].shapes[shape].theT?b.ya[roi].shapes[shape].theT:-1,q="number"===typeof b.ya[roi].shapes[shape].theZ?b.ya[roi].shapes[shape].theZ:-1;if(!(null===b.o||"string"!==
typeof k||-1!==p&&b.o.Ed("t")!==p||-1!==q&&b.o.Ed("z")!==q)){b.ya[roi].shapes[shape].state=0;var u=null,v=null;try{var v=jp(b.ya[roi].shapes[shape]),w=null;"string"===typeof b.ya[roi].shapes[shape].type&&(w=b.ya[roi].shapes[shape].type.toLowerCase());if("mask"===w){var u=b,z=b.ya[roi].shapes[shape];if(u instanceof wm&&"object"===typeof z&&"string"===typeof z.type&&"mask"===z.type.toLowerCase()){var B=sb(om(u.o.o))-1;tb(om(u.o.o),B,new aj({source:new Qo({xa:null,url:u.o.Ta.full+"/webgateway/render_shape_mask/"+
z.id,ba:W(u.o.o).g,og:[z.x,-z.y-z.height,z.x+z.width,-z.y]})}))}continue}var C=W(b.o.o).ha();v.C()instanceof Jm&&0!==C&&!b.Db&&v.C().rotate(-C);Km(v,b)}catch(D){u=D}g=""+e+":"+g;v instanceof yk?(k=v,k.va=g,k.A(),-1!=p&&(v.theT=p),-1!=q&&(v.theZ=q),v.state=0,d.push(v)):(console.error("Failed to construct "+k+"("+g+") from shape info!"),null!=u&&console.error(u))}}}return d};    return {ol: OPENLAYERS.ol, ome: OME.ome};   }));
