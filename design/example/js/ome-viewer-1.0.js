   (function (root, factories) {    var modules = factories(root);    for (m in modules)     root[m] = modules[m];             if (root.ome.isIE()) {                 root.requestAnimationFrame =                 root.requestAnimationFrame                 || root.msRequestAnimationFrame                 || function(callback) {                  return setTimeout(callback, 1000 / 60); };             }   }(this, function (ctx) {    var OPENLAYERS = {};    var OME = {};    if (typeof(ctx) === 'object' && typeof(ctx.ome) === 'object') {     OME.ome = ctx.ome;     var ome = ctx.ome;    }    var A,H=this;function aa(b,d,e){b=b.split(".");e=e||H;b[0]in e||!e.execScript||e.execScript("var "+b[0]);for(var g;b.length&&(g=b.shift());)b.length||void 0===d?e[g]?e=e[g]:e=e[g]={}:e[g]=d}function da(b){b.Tb=function(){return b.Ie?b.Ie:b.Ie=new b}}
function ea(b){var d=typeof b;if("object"==d)if(b){if(b instanceof Array)return"array";if(b instanceof Object)return d;var e=Object.prototype.toString.call(b);if("[object Window]"==e)return"object";if("[object Array]"==e||"number"==typeof b.length&&"undefined"!=typeof b.splice&&"undefined"!=typeof b.propertyIsEnumerable&&!b.propertyIsEnumerable("splice"))return"array";if("[object Function]"==e||"undefined"!=typeof b.call&&"undefined"!=typeof b.propertyIsEnumerable&&!b.propertyIsEnumerable("call"))return"function"}else return"null";
else if("function"==d&&"undefined"==typeof b.call)return"object";return d}function fa(b){return"array"==ea(b)}function ga(b){var d=ea(b);return"array"==d||"object"==d&&"number"==typeof b.length}function ha(b){return"string"==typeof b}function ia(b){return"number"==typeof b}function ja(b){return"function"==ea(b)}function ka(b){var d=typeof b;return"object"==d&&null!=b||"function"==d}function L(b){return b[la]||(b[la]=++ma)}var la="closure_uid_"+(1E9*Math.random()>>>0),ma=0;
function na(b,d,e){return b.call.apply(b.bind,arguments)}function oa(b,d,e){if(!b)throw Error();if(2<arguments.length){var g=Array.prototype.slice.call(arguments,2);return function(){var e=Array.prototype.slice.call(arguments);Array.prototype.unshift.apply(e,g);return b.apply(d,e)}}return function(){return b.apply(d,arguments)}}function pa(b,d,e){pa=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?na:oa;return pa.apply(null,arguments)}
function qa(b,d){var e=Array.prototype.slice.call(arguments,1);return function(){var d=e.slice();d.push.apply(d,arguments);return b.apply(this,d)}}function Q(b,d){function e(){}e.prototype=d.prototype;b.xa=d.prototype;b.prototype=new e;b.prototype.constructor=b;b.Ii=function(b,e,p){for(var q=Array(arguments.length-2),u=2;u<arguments.length;u++)q[u-2]=arguments[u];return d.prototype[e].apply(b,q)}};if("object"!==typeof ra)var ra={};aa("ome.isIE",function(){return sa()},OME);var ta,ua="function"===typeof Object.assign?Object.assign:function(b,d){if(void 0===b||null===b)throw new TypeError("Cannot convert undefined or null to object");for(var e=Object(b),g=1,k=arguments.length;g<k;++g){var p=arguments[g];if(void 0!==p&&null!==p)for(var q in p)p.hasOwnProperty(q)&&(e[q]=p[q])}return e};function va(b){for(var d in b)delete b[d]}function xa(b){var d=[],e;for(e in b)d.push(b[e]);return d}function ya(b){for(var d in b)return!1;return!d};var za="olm_"+(1E4*Math.random()|0);function Aa(b){function d(d){var g=b.listener,k=b.oe||b.target;b.qe&&Ba(b);return g.call(k,d)}return b.pe=d}function Ca(b,d,e,g){for(var k,p=0,q=b.length;p<q;++p)if(k=b[p],k.listener===d&&k.oe===e)return g&&(k.deleteIndex=p),k}function Da(b,d){var e=b[za];return e?e[d]:void 0}function Ea(b){var d=b[za];d||(d=b[za]={});return d}
function Fa(b,d){var e=Da(b,d);if(e){for(var g=0,k=e.length;g<k;++g)b.removeEventListener(d,e[g].pe),va(e[g]);e.length=0;if(e=b[za])delete e[d],0===Object.keys(e).length&&delete b[za]}}function S(b,d,e,g,k){var p=Ea(b),q=p[d];q||(q=p[d]=[]);(p=Ca(q,e,g,!1))?k||(p.qe=!1):(p={oe:g,qe:!!k,listener:e,target:b,type:d},b.addEventListener(d,Aa(p)),q.push(p));return p}function Ga(b,d,e,g){return S(b,d,e,g,!0)}function Ha(b,d,e,g){(b=Da(b,d))&&(e=Ca(b,e,g,!0))&&Ba(e)}
function Ba(b){if(b&&b.target){b.target.removeEventListener(b.type,b.pe);var d=Da(b.target,b.type);if(d){var e="deleteIndex"in b?b.deleteIndex:d.indexOf(b);-1!==e&&d.splice(e,1);0===d.length&&Fa(b.target,b.type)}va(b)}}function Ia(b){var d=Ea(b),e;for(e in d)Fa(b,e)};function Ja(b){if(Error.captureStackTrace)Error.captureStackTrace(this,Ja);else{var d=Error().stack;d&&(this.stack=d)}b&&(this.message=String(b))}Q(Ja,Error);Ja.prototype.name="CustomError";var Ka;function La(b,d){for(var e=b.split("%s"),g="",k=Array.prototype.slice.call(arguments,1);k.length&&1<e.length;)g+=e.shift()+k.shift();return g+e.join("%s")}var Ma=String.prototype.trim?function(b){return b.trim()}:function(b){return b.replace(/^[\s\xa0]+|[\s\xa0]+$/g,"")};
function Na(b){if(!Oa.test(b))return b;-1!=b.indexOf("&")&&(b=b.replace(Pa,"&amp;"));-1!=b.indexOf("<")&&(b=b.replace(Qa,"&lt;"));-1!=b.indexOf(">")&&(b=b.replace(Ra,"&gt;"));-1!=b.indexOf('"')&&(b=b.replace(Sa,"&quot;"));-1!=b.indexOf("'")&&(b=b.replace(Ua,"&#39;"));-1!=b.indexOf("\x00")&&(b=b.replace(Va,"&#0;"));return b}var Pa=/&/g,Qa=/</g,Ra=/>/g,Sa=/"/g,Ua=/'/g,Va=/\x00/g,Oa=/[\x00&<>"']/;function Wa(){return-1!=Xa.toLowerCase().indexOf("webkit")}function Ya(b,d){return b<d?-1:b>d?1:0}
function Za(b){return String(b).replace(/\-([a-z])/g,function(b,e){return e.toUpperCase()})}function $a(b){var d=ha(void 0)?"undefined".replace(/([-()\[\]{}+?*.$\^|,:#<!\\])/g,"\\$1").replace(/\x08/g,"\\x08"):"\\s";return b.replace(new RegExp("(^"+(d?"|["+d+"]+":"")+")([a-z])","g"),function(b,d,k){return d+k.toUpperCase()})};function ab(b,d){d.unshift(b);Ja.call(this,La.apply(null,d));d.shift()}Q(ab,Ja);ab.prototype.name="AssertionError";function bb(b,d){throw new ab("Failure"+(b?": "+b:""),Array.prototype.slice.call(arguments,1));}function cb(b,d,e){if("boolean"!=typeof b){var g=[ea(b),b],k="Assertion failed";d?(k+=": "+d,g=Array.prototype.slice.call(arguments,2)):k+=": Expected boolean but got %s: %s.";throw new ab(""+k,g||[]);}};function db(){};function eb(){}eb.prototype.bb=!1;eb.prototype.oa=function(){this.bb||(this.bb=!0,this.W())};eb.prototype.W=db;function fb(b,d){this.type=b;this.target=d||null}fb.prototype.preventDefault=fb.prototype.stopPropagation=function(){this.Bh=!0};function gb(b){b.stopPropagation()}function hb(b){b.preventDefault()};function ib(){this.ea={};this.$={}}Q(ib,eb);ib.prototype.addEventListener=function(b,d){var e=this.$[b];e||(e=this.$[b]=[]);-1===e.indexOf(d)&&e.push(d)};function U(b,d){var e="string"===typeof d?new fb(d):d,g=e.type;e.target=b;var k=b.$[g],p;if(k){g in b.ea||(b.ea[g]=0);for(var q=0,u=k.length;q<u;++q)if(!1===k[q].call(b,e)||e.Bh){p=!1;break}e=b.ea[g];for(delete b.ea[g];e--;)b.removeEventListener(g,db);return p}}ib.prototype.W=function(){Ia(this)};
function jb(b,d){return d?d in b.$:0<Object.keys(b.$).length}ib.prototype.removeEventListener=function(b,d){var e=this.$[b];if(e){var g=e.indexOf(d);b in this.ea?(e[g]=db,++this.ea[b]):(e.splice(g,1),0===e.length&&delete this.$[b])}};function kb(){ib.call(this);this.f=0}Q(kb,ib);kb.prototype.A=function(){++this.f;U(this,"change")};function lb(b,d,e){if(Array.isArray("drawend"))for(var g=Array(7),k=0;7>k;++k)g[k]=S(b,"drawend"[k],d,e);else S(b,"drawend",d,e)};function mb(b,d,e){fb.call(this,b);this.a=d;this.f=e}Q(mb,fb);function nb(b){kb.call(this);L(this);this.aa={};void 0!==b&&ob(this,b)}Q(nb,kb);var pb={};function qb(b){return pb.hasOwnProperty(b)?pb[b]:pb[b]="change:"+b}nb.prototype.get=function(b){var d;this.aa.hasOwnProperty(b)&&(d=this.aa[b]);return d};nb.prototype.set=function(b,d,e){e?this.aa[b]=d:(e=this.aa[b],this.aa[b]=d,e!==d&&(d=qb(b),U(this,new mb(d,b,e)),U(this,new mb("propertychange",b,e))))};
function ob(b,d){for(var e in d)b.set(e,d[e],void 0)};function rb(b,d,e){fb.call(this,b,e);this.element=d}Q(rb,fb);function sb(b){nb.call(this);this.a=b?b:[];tb(this)}Q(sb,nb);A=sb.prototype;A.clear=function(){for(;0<ub(this);)this.pop()};A.forEach=function(b,d){this.a.forEach(b,d)};A.item=function(b){return this.a[b]};function ub(b){return b.get("length")}function vb(b,d,e){b.a.splice(d,0,e);tb(b);U(b,new rb("add",e,b))}A.pop=function(){return wb(this,ub(this)-1)};A.push=function(b){var d=this.a.length;vb(this,d,b);return d};
A.remove=function(b){var d=this.a,e,g;e=0;for(g=d.length;e<g;++e)if(d[e]===b)return wb(this,e)};function wb(b,d){var e=b.a[d];b.a.splice(d,1);tb(b);U(b,new rb("remove",e,b));return e}function tb(b){b.set("length",b.a.length)};function xb(b){this.length=b.length||b;for(var d=0;d<this.length;d++)this[d]=b[d]||0}xb.prototype.BYTES_PER_ELEMENT=4;xb.prototype.set=function(b,d){d=d||0;for(var e=0;e<b.length&&d+e<this.length;e++)this[d+e]=b[e]};xb.prototype.toString=Array.prototype.join;"undefined"==typeof Float32Array&&(xb.BYTES_PER_ELEMENT=4,xb.prototype.BYTES_PER_ELEMENT=xb.prototype.BYTES_PER_ELEMENT,xb.prototype.set=xb.prototype.set,xb.prototype.toString=xb.prototype.toString,aa("Float32Array",xb,void 0));function yb(b){this.length=b.length||b;for(var d=0;d<this.length;d++)this[d]=b[d]||0}yb.prototype.BYTES_PER_ELEMENT=8;yb.prototype.set=function(b,d){d=d||0;for(var e=0;e<b.length&&d+e<this.length;e++)this[d+e]=b[e]};yb.prototype.toString=Array.prototype.join;if("undefined"==typeof Float64Array){try{yb.BYTES_PER_ELEMENT=8}catch(b){}yb.prototype.BYTES_PER_ELEMENT=yb.prototype.BYTES_PER_ELEMENT;yb.prototype.set=yb.prototype.set;yb.prototype.toString=yb.prototype.toString;aa("Float64Array",yb,void 0)};function zb(b,d,e,g,k){b[0]=d;b[1]=e;b[2]=g;b[3]=k};function Ab(){var b=Array(16);Cb(b,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);return b}function Db(){var b=Array(16);Cb(b,1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1);return b}function Cb(b,d,e,g,k,p,q,u,v,w,z,B,C,D,F,I,J){b[0]=d;b[1]=e;b[2]=g;b[3]=k;b[4]=p;b[5]=q;b[6]=u;b[7]=v;b[8]=w;b[9]=z;b[10]=B;b[11]=C;b[12]=D;b[13]=F;b[14]=I;b[15]=J}
function Eb(b,d){b[0]=d[0];b[1]=d[1];b[2]=d[2];b[3]=d[3];b[4]=d[4];b[5]=d[5];b[6]=d[6];b[7]=d[7];b[8]=d[8];b[9]=d[9];b[10]=d[10];b[11]=d[11];b[12]=d[12];b[13]=d[13];b[14]=d[14];b[15]=d[15]}function Fb(b){b[0]=1;b[1]=0;b[2]=0;b[3]=0;b[4]=0;b[5]=1;b[6]=0;b[7]=0;b[8]=0;b[9]=0;b[10]=1;b[11]=0;b[12]=0;b[13]=0;b[14]=0;b[15]=1}
function Gb(b,d){var e=b[0],g=b[1],k=b[2],p=b[3],q=b[4],u=b[5],v=b[6],w=b[7],z=b[8],B=b[9],C=b[10],D=b[11],F=b[12],I=b[13],J=b[14],M=b[15],E=e*u-g*q,G=e*v-k*q,N=e*w-p*q,P=g*v-k*u,O=g*w-p*u,R=k*w-p*v,W=z*I-B*F,K=z*J-C*F,T=z*M-D*F,ba=B*J-C*I,Y=B*M-D*I,ca=C*M-D*J,X=E*ca-G*Y+N*ba+P*T-O*K+R*W;0!=X&&(X=1/X,d[0]=(u*ca-v*Y+w*ba)*X,d[1]=(-g*ca+k*Y-p*ba)*X,d[2]=(I*R-J*O+M*P)*X,d[3]=(-B*R+C*O-D*P)*X,d[4]=(-q*ca+v*T-w*K)*X,d[5]=(e*ca-k*T+p*K)*X,d[6]=(-F*R+J*N-M*G)*X,d[7]=(z*R-C*N+D*G)*X,d[8]=(q*Y-u*T+w*W)*X,
d[9]=(-e*Y+g*T-p*W)*X,d[10]=(F*O-I*N+M*E)*X,d[11]=(-z*O+B*N-D*E)*X,d[12]=(-q*ba+u*K-v*W)*X,d[13]=(e*ba-g*K+k*W)*X,d[14]=(-F*P+I*G-J*E)*X,d[15]=(z*P-B*G+C*E)*X)}function Hb(b,d,e){var g=b[1]*d+b[5]*e+0*b[9]+b[13],k=b[2]*d+b[6]*e+0*b[10]+b[14],p=b[3]*d+b[7]*e+0*b[11]+b[15];b[12]=b[0]*d+b[4]*e+0*b[8]+b[12];b[13]=g;b[14]=k;b[15]=p}function Ib(b,d,e){Cb(b,b[0]*d,b[1]*d,b[2]*d,b[3]*d,b[4]*e,b[5]*e,b[6]*e,b[7]*e,1*b[8],1*b[9],1*b[10],1*b[11],b[12],b[13],b[14],b[15])}
function Jb(b,d){var e=b[0],g=b[1],k=b[2],p=b[3],q=b[4],u=b[5],v=b[6],w=b[7],z=Math.cos(d),B=Math.sin(d);b[0]=e*z+q*B;b[1]=g*z+u*B;b[2]=k*z+v*B;b[3]=p*z+w*B;b[4]=e*-B+q*z;b[5]=g*-B+u*z;b[6]=k*-B+v*z;b[7]=p*-B+w*z}new Float64Array(3);new Float64Array(3);new Float64Array(4);new Float64Array(4);new Float64Array(4);new Float64Array(16);function Kb(b,d,e){return Math.min(Math.max(b,d),e)}var Lb=function(){var b;"cosh"in Math?b=Math.cosh:b=function(b){b=Math.exp(b);return(b+1/b)/2};return b}();function Mb(b,d){var e=b%d;return 0>e*d?e+d:e};function Nb(b,d){b[0]+=d[0];b[1]+=d[1]}function Ob(b,d){var e=b[0],g=b[1],k=d[0],p=d[1],q=k[0],k=k[1],u=p[0],p=p[1],v=u-q,w=p-k,e=0===v&&0===w?0:(v*(e-q)+w*(g-k))/(v*v+w*w||0);0>=e||(1<=e?(q=u,k=p):(q+=e*v,k+=e*w));return[q,k]}function Pb(b,d){for(var e=!0,g=b.length-1;0<=g;--g)if(b[g]!=d[g]){e=!1;break}return e}function Qb(b,d){var e=Math.cos(d),g=Math.sin(d),k=b[1]*e+b[0]*g;b[0]=b[0]*e-b[1]*g;b[1]=k}function Rb(b,d){var e=b[0]-d[0],g=b[1]-d[1];return e*e+g*g};function Sb(b,d){if(Array.isArray(b))return b;void 0===d?d=[b,b]:(d[0]=b,d[1]=b);return d};function Tb(b){for(var d=Ub(),e=0,g=b.length;e<g;++e)Vb(d,b[e]);return d}function Wb(b,d,e){return e?(e[0]=b[0]-d,e[1]=b[1]-d,e[2]=b[2]+d,e[3]=b[3]+d,e):[b[0]-d,b[1]-d,b[2]+d,b[3]+d]}function Xb(b,d){return d?(d[0]=b[0],d[1]=b[1],d[2]=b[2],d[3]=b[3],d):b.slice()}function Yb(b,d){return b[0]<=d[0]&&d[2]<=b[2]&&b[1]<=d[1]&&d[3]<=b[3]}function Zb(b,d,e){return b[0]<=d&&d<=b[2]&&b[1]<=e&&e<=b[3]}
function $b(b,d){var e=b[1],g=b[2],k=b[3],p=d[0],q=d[1],u=0;p<b[0]?u=u|16:p>g&&(u=u|4);q<e?u|=8:q>k&&(u|=2);0===u&&(u=1);return u}function Ub(){return[Infinity,Infinity,-Infinity,-Infinity]}function ac(b,d,e,g,k){return k?(k[0]=b,k[1]=d,k[2]=e,k[3]=g,k):[b,d,e,g]}function bc(b,d){var e=b[0],g=b[1];return ac(e,g,e,g,d)}function cc(b,d){return b[0]==d[0]&&b[2]==d[2]&&b[1]==d[1]&&b[3]==d[3]}function Vb(b,d){d[0]<b[0]&&(b[0]=d[0]);d[0]>b[2]&&(b[2]=d[0]);d[1]<b[1]&&(b[1]=d[1]);d[1]>b[3]&&(b[3]=d[1])}
function dc(b,d,e,g,k){for(;e<g;e+=k){var p=b,q=d[e],u=d[e+1];p[0]=Math.min(p[0],q);p[1]=Math.min(p[1],u);p[2]=Math.max(p[2],q);p[3]=Math.max(p[3],u)}return b}function ec(b,d,e){var g;return(g=d.call(e,fc(b)))||(g=d.call(e,[b[2],b[1]]))||(g=d.call(e,[b[2],b[3]]))?g:(g=d.call(e,gc(b)))?g:!1}function hc(b){var d=0;ic(b)||(d=jc(b)*kc(b));return d}function fc(b){return[b[0],b[1]]}function lc(b){return[(b[0]+b[2])/2,(b[1]+b[3])/2]}
function mc(b,d,e,g){var k=d*g[0]/2;g=d*g[1]/2;d=Math.cos(e);var p=Math.sin(e);e=k*d;k*=p;d*=g;var q=g*p,u=b[0],v=b[1];b=u-e+q;g=u-e-q;p=u+e-q;e=u+e+q;var q=v-k-d,u=v-k+d,w=v+k+d,k=v+k-d;return ac(Math.min(b,g,p,e),Math.min(q,u,w,k),Math.max(b,g,p,e),Math.max(q,u,w,k),void 0)}function kc(b){return b[3]-b[1]}function nc(b,d){var e=Ub();oc(b,d)&&(e[0]=b[0]>d[0]?b[0]:d[0],e[1]=b[1]>d[1]?b[1]:d[1],e[2]=b[2]<d[2]?b[2]:d[2],e[3]=b[3]<d[3]?b[3]:d[3]);return e}function gc(b){return[b[0],b[3]]}
function jc(b){return b[2]-b[0]}function oc(b,d){return b[0]<=d[2]&&b[2]>=d[0]&&b[1]<=d[3]&&b[3]>=d[1]}function ic(b){return b[2]<b[0]||b[3]<b[1]}function pc(b,d){var e=(b[2]-b[0])/2*(d-1),g=(b[3]-b[1])/2*(d-1);b[0]-=e;b[2]+=e;b[1]-=g;b[3]+=g};/*

 Latitude/longitude spherical geodesy formulae taken from
 http://www.movable-type.co.uk/scripts/latlong.html
 Licensed under CC-BY-3.0.
*/
function qc(b){this.Xb=b}function rc(b,d){var e=b[1]*Math.PI/180,g=d[1]*Math.PI/180,k=(g-e)/2,p=(d[0]-b[0])*Math.PI/180/2,e=Math.sin(k)*Math.sin(k)+Math.sin(p)*Math.sin(p)*Math.cos(e)*Math.cos(g);return 2*sc.Xb*Math.atan2(Math.sqrt(e),Math.sqrt(1-e))}
qc.prototype.offset=function(b,d,e){var g=b[1]*Math.PI/180;d/=this.Xb;var k=Math.asin(Math.sin(g)*Math.cos(d)+Math.cos(g)*Math.sin(d)*Math.cos(e));return[180*(b[0]*Math.PI/180+Math.atan2(Math.sin(e)*Math.sin(d)*Math.cos(g),Math.cos(d)-Math.sin(g)*Math.sin(k)))/Math.PI,180*k/Math.PI]};var sc=new qc(6370997);var tc={};tc.degrees=2*Math.PI*sc.Xb/360;tc.ft=.3048;tc.m=1;tc["us-ft"]=1200/3937;
function uc(b){this.a=b.code;this.f=b.units;this.i=void 0!==b.F?b.F:null;this.b=void 0!==b.global?b.global:!1;this.hc=!(!this.b||!this.i);this.j=void 0!==b.jc?b.jc:this.l;this.g=null;this.h=b.Me;var d=vc,e=b.code,g=wc||H.proj4;if("function"==typeof g&&void 0===d[e]){var k=g.xe(e);if(void 0!==k){void 0===b.Me&&(this.h=k.Ti);void 0===b.units&&(this.f=k.units);var p,q;for(p in d)if(b=g.xe(p),void 0!==b)if(d=xc(p),b===k)yc([d,this]);else{q=g(p,e);b=q.forward;q=q.inverse;var d=xc(d),u=xc(this);zc(d,u,
Ac(b));zc(u,d,Ac(q))}}}}uc.prototype.I=function(){return this.i};function Bc(b){return b.h||tc[b.f]}uc.prototype.l=function(b,d){if("degrees"==this.f)return b;var e=Cc(this,xc("EPSG:4326")),g=[d[0]-b/2,d[1],d[0]+b/2,d[1],d[0],d[1]-b/2,d[0],d[1]+b/2],g=e(g,g,2),e=(rc(g.slice(0,2),g.slice(2,4))+rc(g.slice(4,6),g.slice(6,8)))/2,g=Bc(this);void 0!==g&&(e/=g);return e};uc.prototype.jc=function(b,d){return this.j(b,d)};var vc={},Dc={},wc=null;
function yc(b){Ec(b);b.forEach(function(d){b.forEach(function(b){d!==b&&zc(d,b,Fc)})})}function Gc(b){vc[b.a]=b;zc(b,b,Fc)}function Ec(b){var d=[];b.forEach(function(b){d.push(Gc(b))})}function Hc(b){return b?"string"===typeof b?xc(b):b:xc("EPSG:3857")}function zc(b,d,e){b=b.a;d=d.a;b in Dc||(Dc[b]={});Dc[b][d]=e}
function Ac(b){return function(d,e,g){var k=d.length;g=void 0!==g?g:2;e=void 0!==e?e:Array(k);var p,q;for(q=0;q<k;q+=g)for(p=b([d[q],d[q+1]]),e[q]=p[0],e[q+1]=p[1],p=g-1;2<=p;--p)e[q+p]=d[q+p];return e}}function xc(b){var d;if(b instanceof uc)d=b;else if("string"===typeof b){d=vc[b];var e=wc||H.proj4;void 0===d&&"function"==typeof e&&void 0!==e.xe(b)&&(d=new uc({code:b}),Gc(d))}else d=null;return d}function Ic(b,d){if(b===d)return!0;var e=b.f===d.f;return b.a===d.a?e:Cc(b,d)===Fc&&e}
function Jc(b,d){var e=xc(b),g=xc(d);return Cc(e,g)}function Cc(b,d){var e=b.a,g=d.a,k;e in Dc&&g in Dc[e]&&(k=Dc[e][g]);void 0===k&&(k=Kc);return k}function Kc(b,d){if(void 0!==d&&b!==d){bb("This should not be used internally.");for(var e=0,g=b.length;e<g;++e)d[e]=b[e];b=d}return b}function Fc(b,d){var e;if(void 0!==d){e=0;for(var g=b.length;e<g;++e)d[e]=b[e];e=d}else e=b.slice();return e};function Lc(b,d,e,g){this.a=b;this.f=d;this.b=e;this.g=g}function Mc(b,d,e){return b.a<=d&&d<=b.f&&b.b<=e&&e<=b.g}function Nc(b,d){return b.a==d.a&&b.b==d.b&&b.f==d.f&&b.g==d.g}function Oc(b,d){return b.a<=d.f&&b.f>=d.a&&b.b<=d.g&&b.g>=d.b};function Pc(b){this.f=b.He;this.a=b.Wh?b.Wh:null};function Qc(b){nb.call(this);this.l=xc(b.ba);this.la=Rc(b.Aa);this.ra=b.Ga;this.wa=void 0!==b.state?b.state:"ready";this.td=void 0!==b.Pa?b.Pa:!1}Q(Qc,nb);function Rc(b){if("string"===typeof b)return[new Pc({He:b})];if(b instanceof Pc)return[b];if(Array.isArray(b)){for(var d=b.length,e=Array(d),g=0;g<d;g++){var k=b[g];e[g]="string"===typeof k?new Pc({He:k}):k}return e}return null}Qc.prototype.R=db;Qc.prototype.nb=function(){return this.la};Qc.prototype.Z=function(){return this.wa};function Sc(b){nb.call(this);var d=ua({},b);d.opacity=void 0!==b.opacity?b.opacity:1;d.visible=void 0!==b.visible?b.visible:!0;d.zIndex=void 0!==b.zIndex?b.zIndex:0;d.maxResolution=void 0!==b.Gb?b.Gb:Infinity;d.minResolution=void 0!==b.yb?b.yb:0;ob(this,d)}Q(Sc,nb);function Tc(b){var d=b.get("opacity"),e=b.Od(),g=b.get("visible"),k=b.I(),p=b.get("zIndex"),q=b.get("maxResolution"),u=b.get("minResolution");return{Eb:b,opacity:Kb(d,0,1),be:e,visible:g,Jc:!0,F:k,zIndex:p,Gb:q,yb:Math.max(u,0)}}
Sc.prototype.I=function(){return this.get("extent")};function Uc(){};function Vc(b,d,e,g){fb.call(this,b,d);this.Sb=g}Q(Vc,fb);function Wc(b){var d=ua({},b);delete d.source;Sc.call(this,d);this.b=this.h=this.g=null;b.map&&this.ja(b.map);S(this,qb("source"),this.ng,this);this.set("source",b.source?b.source:null)}Q(Wc,Sc);function Xc(b,d){return b.visible&&d>=b.yb&&d<b.Gb}A=Wc.prototype;A.Md=function(b){b=b?b:[];b.push(Tc(this));return b};A.ha=function(){return this.get("source")||null};A.Od=function(){var b=this.ha();return b?b.Z():"undefined"};A.bh=function(){this.A()};
A.ng=function(){this.b&&(Ba(this.b),this.b=null);var b=this.ha();b&&(this.b=S(b,"change",this.bh,this));this.A()};A.ja=function(b){this.g&&(Ba(this.g),this.g=null);b||this.A();this.h&&(Ba(this.h),this.h=null);b&&(this.g=S(b,"precompose",function(b){var e=Tc(this);e.Jc=!1;e.zIndex=Infinity;b.Sb.Vb.push(e);b.Sb.Ic[L(this)]=e},this),this.h=S(this,"change",b.P,b),this.A())};function Yc(b){b=b?b:{};var d=ua({},b);delete d.Wd;delete d.df;Wc.call(this,d);this.set("preload",void 0!==b.Wd?b.Wd:0);this.set("useInterimTilesOnError",void 0!==b.df?b.df:!0)}Q(Yc,Wc);function Zc(b){return b.get("useInterimTilesOnError")};function $c(b){return function(d){if(d)return[Kb(d[0],b[0],b[2]),Kb(d[1],b[1],b[3])]}}function ad(b){return b};function bd(b,d){return b>d?1:b<d?-1:0}function cd(b,d,e){var g=b.length;if(b[0]<=d)return 0;if(!(d<=b[g-1])){if(0<e)for(e=1;e<g;++e){if(b[e]<d)return e-1}else if(0>e)for(e=1;e<g;++e){if(b[e]<=d)return e}else for(e=1;e<g;++e){if(b[e]==d)return e;if(b[e]<d)return b[e-1]-d<d-b[e]?e-1:e}bb()}return g-1}function dd(b,d){var e,g=ga(d)?d:[d],k=g.length;for(e=0;e<k;e++)b[b.length]=g[e]}function ed(b,d){var e=b.indexOf(d),g=-1<e;g&&b.splice(e,1);return g}
function fd(b,d){var e=b.length;if(e!==d.length)return!1;for(var g=0;g<e;g++)if(b[g]!==d[g])return!1;return!0}function gd(b){var d=hd,e=b.length,g=Array(b.length),k;for(k=0;k<e;k++)g[k]={index:k,value:b[k]};g.sort(function(b,e){return d(b.value,e.value)||b.index-e.index});for(k=0;k<b.length;k++)b[k]=g[k].value};function jd(b){return function(d,e,g){if(void 0!==d)return d=cd(b,d,g),d=Kb(d+e,0,b.length-1),b[d]}}function kd(b,d,e){return function(g,k,p){if(void 0!==g)return g=Math.max(Math.floor(Math.log(d/g)/Math.log(b)+(0<p?0:0>p?1:.5))+k,0),void 0!==e&&(g=Math.min(g,e)),d/Math.pow(b,g)}};function ld(b){if(void 0!==b)return 0}function md(b,d){if(void 0!==b)return b+d}function nd(b){var d=2*Math.PI/b;return function(b,g){if(void 0!==b)return b=Math.floor((b+g)/d+.5)*d}}function od(){var b=5*Math.PI/180;return function(d,e){if(void 0!==d)return Math.abs(d+e)<=b?0:d+e}};function pd(b,d,e){this.T=b;this.J=d;this.rotation=e};function qd(){return!0}function rd(){return!1};function sd(){nb.call(this);this.G=Ub();this.M=-1;this.w={};this.ra=this.B=0}Q(sd,nb);sd.prototype.wa=function(b){return this.Kc(b[0],b[1])};sd.prototype.Kc=rd;sd.prototype.I=function(b){this.M!=this.f&&(this.G=this.Ed(this.G),this.M=this.f);var d=this.G;b?(b[0]=d[0],b[1]=d[1],b[2]=d[2],b[3]=d[3]):b=d;return b};function td(b,d,e,g,k,p){var q=k[0],u=k[1],v=k[4],w=k[5],z=k[12];k=k[13];for(var B=p?p:[],C=0;d<e;d+=g){var D=b[d],F=b[d+1];B[C++]=q*D+v*F+z;B[C++]=u*D+w*F+k}p&&B.length!=C&&(B.length=C);return B};function ud(){sd.call(this);this.g="XY";this.D=2;this.a=null}Q(ud,sd);function vd(b){if("XY"==b)return 2;if("XYZ"==b||"XYM"==b)return 3;if("XYZM"==b)return 4;bb("unsupported layout: "+b)}A=ud.prototype;A.Kc=rd;A.Ed=function(b){var d=this.a,e=this.a.length,g=this.D;b=ac(Infinity,Infinity,-Infinity,-Infinity,b);return dc(b,d,0,e,g)};
function wd(b,d){b.ra!=b.f&&(va(b.w),b.B=0,b.ra=b.f);if(0>d||0!==b.B&&d<=b.B)return b;var e=d.toString();if(b.w.hasOwnProperty(e))return b.w[e];var g=b.kc(d);if(g.a.length<b.a.length)return b.w[e]=g;b.B=d;return b}A.kc=function(){return this};function xd(b,d,e){b.D=vd(d);b.g=d;b.a=e}function yd(b,d,e,g){if(d)e=vd(d);else{for(d=0;d<g;++d){if(0===e.length){b.g="XY";b.D=2;return}e=e[0]}e=e.length;2==e?d="XY":3==e?d="XYZ":4==e?d="XYZM":(bb("unsupported stride: "+e),d=void 0)}b.g=d;b.D=e}
function zd(b,d){b.a&&(d(b.a,b.a,b.D),b.A())}A.rotate=function(b,d){var e=this.a;if(e){for(var g=e.length,k=this.D,p=e?e:[],q=Math.cos(b),u=Math.sin(b),v=d[0],w=d[1],z=0,B=0;B<g;B+=k){var C=e[B]-v,D=e[B+1]-w;p[z++]=v+C*q-D*u;p[z++]=w+C*u+D*q;for(C=B+2;C<B+k;++C)p[z++]=e[C]}e&&p.length!=z&&(p.length=z);this.A()}};
A.Ya=function(b,d){var e=this.a;if(e){var g=e.length,k=this.D,p=e?e:[],q=0,u,v;for(u=0;u<g;u+=k)for(p[q++]=e[u]+b,p[q++]=e[u+1]+d,v=u+2;v<u+k;++v)p[q++]=e[v];e&&p.length!=q&&(p.length=q);this.A()}};function Ad(b,d){var e=0,g,k;g=0;for(k=d.length;g<k;++g)b[e++]=d[g];return e}function Bd(b,d,e,g){var k,p;k=0;for(p=e.length;k<p;++k){var q=e[k],u;for(u=0;u<g;++u)b[d++]=q[u]}return d}function Cd(b,d,e,g,k){k=k?k:[];var p=0,q,u;q=0;for(u=e.length;q<u;++q)d=Bd(b,d,e[q],g),k[p++]=d;k.length=p;return k};function Dd(b,d,e,g,k){k=void 0!==k?k:[];for(var p=0;d<e;d+=g)k[p++]=b.slice(d,d+g);k.length=p;return k}function Ed(b,d,e,g,k){k=void 0!==k?k:[];var p=0,q,u;q=0;for(u=e.length;q<u;++q){var v=e[q];k[p++]=Dd(b,d,v,g,k[p]);d=v}k.length=p;return k};function Fd(b,d,e,g,k,p,q){var u=(e-d)/g;if(3>u){for(;d<e;d+=g)p[q++]=b[d],p[q++]=b[d+1];return q}var v=Array(u);v[0]=1;v[u-1]=1;e=[d,e-g];for(var w=0,z;0<e.length;){var B=e.pop(),C=e.pop(),D=0,F=b[C],I=b[C+1],J=b[B],M=b[B+1];for(z=C+g;z<B;z+=g){var E,G=b[z];E=b[z+1];var N=F,P=I,O=J-N,R=M-P;if(0!==O||0!==R){var W=((G-N)*O+(E-P)*R)/(O*O+R*R);1<W?(N=J,P=M):0<W&&(N+=O*W,P+=R*W)}G=N-G;E=P-E;E=G*G+E*E;E>D&&(w=z,D=E)}D>k&&(v[(w-d)/g]=1,C+g<w&&e.push(C,w),w+g<B&&e.push(w,B))}for(z=0;z<u;++z)v[z]&&(p[q++]=
b[d+z*g],p[q++]=b[d+z*g+1]);return q}
function Gd(b,d,e,g,k,p,q,u){var v,w;v=0;for(w=e.length;v<w;++v){var z=e[v];a:{var B=b,C=z,D=g,F=k,I=p;if(d!=C){var J=F*Math.round(B[d]/F),M=F*Math.round(B[d+1]/F);d+=D;I[q++]=J;I[q++]=M;var E=void 0,G=void 0;do if(E=F*Math.round(B[d]/F),G=F*Math.round(B[d+1]/F),d+=D,d==C){I[q++]=E;I[q++]=G;break a}while(E==J&&G==M);for(;d<C;){var N,P;N=F*Math.round(B[d]/F);P=F*Math.round(B[d+1]/F);d+=D;if(N!=E||P!=G){var O=E-J,R=G-M,W=N-J,K=P-M;O*K==R*W&&(0>O&&W<O||O==W||0<O&&W>O)&&(0>R&&K<R||R==K||0<R&&K>R)||(I[q++]=
E,I[q++]=G,J=E,M=G);E=N;G=P}}I[q++]=E;I[q++]=G}}u.push(q);d=z}return q};function Hd(b,d){ud.call(this);this.za(b,d)}Q(Hd,ud);A=Hd.prototype;A.clone=function(){var b=new Hd(null);xd(b,this.g,this.a.slice());b.A();return b};A.ua=function(){return Dd(this.a,0,this.a.length,this.D)};A.kc=function(b){var d=[];d.length=Fd(this.a,0,this.a.length,this.D,b,d,0);b=new Hd(null);xd(b,"XY",d);b.A();return b};A.ma=function(){return"LinearRing"};A.za=function(b,d){b?(yd(this,d,b,1),this.a||(this.a=[]),this.a.length=Bd(this.a,0,b,this.D)):xd(this,"XY",null);this.A()};function Id(b,d){ud.call(this);this.za(b,d)}Q(Id,ud);A=Id.prototype;A.clone=function(){var b=new Id(null);xd(b,this.g,this.a.slice());b.A();return b};A.ua=function(){return this.a?this.a.slice():[]};A.Ed=function(b){return bc(this.a,b)};A.ma=function(){return"Point"};A.fb=function(b){return Zb(b,this.a[0],this.a[1])};A.za=function(b,d){b?(yd(this,d,b,0),this.a||(this.a=[]),this.a.length=Ad(this.a,b)):xd(this,"XY",null);this.A()};function Jd(b,d,e,g,k){return!ec(k,function(k){return!Kd(b,d,e,g,k[0],k[1])})}function Kd(b,d,e,g,k,p){for(var q=!1,u=b[e-g],v=b[e-g+1];d<e;d+=g){var w=b[d],z=b[d+1];v>p!=z>p&&k<(w-u)*(p-v)/(z-v)+u&&(q=!q);u=w;v=z}return q}function Ld(b,d,e,g,k,p){if(0===e.length||!Kd(b,d,e[0],g,k,p))return!1;var q;d=1;for(q=e.length;d<q;++d)if(Kd(b,e[d-1],e[d],g,k,p))return!1;return!0};function Md(b,d,e,g,k,p,q){var u,v,w,z,B,C=k[p+1],D=[],F=e[0];w=b[F-g];B=b[F-g+1];for(u=d;u<F;u+=g){z=b[u];v=b[u+1];if(C<=B&&v<=C||B<=C&&C<=v)w=(C-B)/(v-B)*(z-w)+w,D.push(w);w=z;B=v}F=NaN;B=-Infinity;D.sort(bd);w=D[0];u=1;for(v=D.length;u<v;++u){z=D[u];var I=Math.abs(z-w);I>B&&(w=(w+z)/2,Ld(b,d,e,g,w,C)&&(F=w,B=I));w=z}isNaN(F)&&(F=k[p]);return q?(q.push(F,C),q):[F,C]};function Nd(b,d,e,g,k){for(var p=[b[d],b[d+1]],q=[],u;d+g<e;d+=g){q[0]=b[d+g];q[1]=b[d+g+1];if(u=k.call(void 0,p,q))return u;p[0]=q[0];p[1]=q[1]}return!1};function Od(b,d,e,g,k){var p=dc(Ub(),b,d,e,g);return oc(k,p)?Yb(k,p)||p[0]>=k[0]&&p[2]<=k[2]||p[1]>=k[1]&&p[3]<=k[3]?!0:Nd(b,d,e,g,function(b,d){var e=!1,g=$b(k,b),p=$b(k,d);if(1===g||1===p)e=!0;else{var B=k[0],C=k[1],D=k[2],F=k[3],I=d[0],J=d[1],M=(J-b[1])/(I-b[0]);p&2&&!(g&2)&&(e=I-(J-F)/M,e=e>=B&&e<=D);e||!(p&4)||g&4||(e=J-(I-D)*M,e=e>=C&&e<=F);e||!(p&8)||g&8||(e=I-(J-C)/M,e=e>=B&&e<=D);e||!(p&16)||g&16||(e=J-(I-B)*M,e=e>=C&&e<=F)}return e}):!1}
function Pd(b,d,e,g,k){var p=e[0];if(!(Od(b,d,p,g,k)||Kd(b,d,p,g,k[0],k[1])||Kd(b,d,p,g,k[0],k[3])||Kd(b,d,p,g,k[2],k[1])||Kd(b,d,p,g,k[2],k[3])))return!1;if(1===e.length)return!0;d=1;for(p=e.length;d<p;++d)if(Jd(b,e[d-1],e[d],g,k))return!1;return!0};function Qd(b,d,e,g){for(var k=0,p=b[e-g],q=b[e-g+1];d<e;d+=g)var u=b[d],v=b[d+1],k=k+(u-p)*(v+q),p=u,q=v;return 0<k}function Rd(b,d,e,g){var k=0;g=void 0!==g?g:!1;var p,q;p=0;for(q=d.length;p<q;++p){var u=d[p],k=Qd(b,k,u,e);if(0===p){if(g&&k||!g&&!k)return!1}else if(g&&!k||!g&&k)return!1;k=u}return!0}
function Sd(b,d,e,g,k){k=void 0!==k?k:!1;var p,q;p=0;for(q=e.length;p<q;++p){var u=e[p],v=Qd(b,d,u,g);if(0===p?k&&v||!k&&!v:k&&!v||!k&&v)for(var v=b,w=u,z=g;d<w-z;){var B;for(B=0;B<z;++B){var C=v[d+B];v[d+B]=v[w-z+B];v[w-z+B]=C}d+=z;w-=z}d=u}return d}function Td(b,d,e,g){var k=0,p,q;p=0;for(q=d.length;p<q;++p)k=Sd(b,k,d[p],e,g);return k};function Ud(b,d){ud.call(this);this.b=[];this.R=-1;this.V=null;this.ca=-1;this.j=null;this.za(b,d)}Q(Ud,ud);A=Ud.prototype;A.clone=function(){var b=new Ud(null);Vd(b,this.g,this.a.slice(),this.b.slice());return b};A.Kc=function(b,d){return Ld(Wd(this),0,this.b,this.D,b,d)};A.ua=function(b){var d;void 0!==b?(d=Wd(this).slice(),Sd(d,0,this.b,this.D,b)):d=this.a;return Ed(d,0,this.b,this.D)};A.Dc=function(){return this.b};
function Xd(b){if(b.R!=b.f){var d=lc(b.I());b.V=Md(Wd(b),0,b.b,b.D,d,0);b.R=b.f}return b.V}function Wd(b){if(b.ca!=b.f){var d=b.a;Rd(d,b.b,b.D)?b.j=d:(b.j=d.slice(),b.j.length=Sd(b.j,0,b.b,b.D));b.ca=b.f}return b.j}A.kc=function(b){var d=[],e=[];d.length=Gd(this.a,0,this.b,this.D,Math.sqrt(b),d,0,e);b=new Ud(null);Vd(b,"XY",d,e);return b};A.ma=function(){return"Polygon"};A.fb=function(b){return Pd(Wd(this),0,this.b,this.D,b)};
A.za=function(b,d){if(b){yd(this,d,b,2);this.a||(this.a=[]);var e=Cd(this.a,0,b,this.D,this.b);this.a.length=0===e.length?0:e[e.length-1];this.A()}else Vd(this,"XY",null,this.b)};function Vd(b,d,e,g){xd(b,d,e);b.b=g;b.A()};function Yd(b){var d;nb.call(this);b=b||{};this.g=[0,0];var e={};e.center=void 0!==b.T?b.T:null;this.a=Hc(b.ba);var g,k,p=void 0!==b.zb?b.zb:0;d=void 0!==b.Hb?b.Hb:28;var q=void 0!==b.ni?b.ni:2;if(void 0!==b.Bb)d=b.Bb,g=d[0],k=d[d.length-1],d=jd(d);else{g=Hc(b.ba);k=g.I();var u=(k?Math.max(jc(k),kc(k)):360*tc.degrees/Bc(g))/256/Math.pow(2,0),v=u/Math.pow(2,28);g=b.Gb;void 0!==g?p=0:g=u/Math.pow(q,p);k=b.yb;void 0===k&&(k=void 0!==b.Hb?void 0!==b.Gb?g/Math.pow(q,d):u/Math.pow(q,d):v);d=p+Math.floor(Math.log(g/
k)/Math.log(q));k=g/Math.pow(q,d-p);d=kd(q,g,d-p)}this.h=g;this.j=k;this.i=p;p=void 0!==b.F?$c(b.F):ad;g=Zd(b);this.b=new pd(p,d,g);void 0!==b.J?e.resolution=b.J:void 0!==b.zoom&&(e.resolution=this.kb(this.h,b.zoom-this.i));e.rotation=void 0!==b.rotation?b.rotation:0;ob(this,e)}Q(Yd,nb);A=Yd.prototype;A.kb=function(b,d,e){return this.b.J(b,d||0,e||0)};A.Fd=function(b,d){return this.b.rotation(b,d||0)};function $d(b){return b.get("center")}
function ae(b,d){var e=$d(b),g=b.N(),k=b.ga();return mc(e,g,k,d)}A.N=function(){return this.get("resolution")};function be(b,d){return Math.max(jc(b)/d[0],kc(b)/d[1])}A.ga=function(){return this.get("rotation")};A.Z=function(){var b=$d(this),d=this.a,e=this.N(),g=this.ga();return{T:[Math.round(b[0]/e)*e,Math.round(b[1]/e)*e],ba:void 0!==d?d:null,J:e,rotation:g}};function ce(b){return!!$d(b)&&void 0!==b.N()}
A.rotate=function(b,d){if(void 0!==d){var e,g=$d(this);void 0!==g&&(e=[g[0]-d[0],g[1]-d[1]],Qb(e,b-this.ga()),Nb(e,d));this.Oa(e)}this.Kb(b)};A.Oa=function(b){this.set("center",b)};function de(b,d){b.g[1]+=d}function ee(b,d){b.set("resolution",d)}A.Kb=function(b){this.set("rotation",b)};function Zd(b){if(void 0!==b.Lf?b.Lf:1){b=b.Fd;if(void 0===b||!0===b)return od();if(!1===b)return md;if(ia(b))return nd(b);bb("illegal option for constrainRotation (%s)",b);return md}return ld};function fe(){return!0}function ge(b){var d=arguments,e=d.length;return function(){for(var b=0;b<e;b++)if(!d[b].apply(this,arguments))return!1;return!0}};var he=Array.prototype.indexOf?function(b,d,e){return Array.prototype.indexOf.call(b,d,e)}:function(b,d,e){e=null==e?0:0>e?Math.max(0,b.length+e):e;if(ha(b))return ha(d)&&1==d.length?b.indexOf(d,e):-1;for(;e<b.length;e++)if(e in b&&b[e]===d)return e;return-1},ie=Array.prototype.forEach?function(b,d,e){Array.prototype.forEach.call(b,d,e)}:function(b,d,e){for(var g=b.length,k=ha(b)?b.split(""):b,p=0;p<g;p++)p in k&&d.call(e,k[p],p,b)};
function je(b){var d=b.length;if(0<d){for(var e=Array(d),g=0;g<d;g++)e[g]=b[g];return e}return[]}function ke(b,d,e){return 2>=arguments.length?Array.prototype.slice.call(b,d):Array.prototype.slice.call(b,d,e)};var Xa;a:{var le=H.navigator;if(le){var me=le.userAgent;if(me){Xa=me;break a}}Xa=""}function ne(b){return-1!=Xa.indexOf(b)};function oe(b,d){for(var e in b)d.call(void 0,b[e],e,b)}var pe="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function qe(b,d){for(var e,g,k=1;k<arguments.length;k++){g=arguments[k];for(e in g)b[e]=g[e];for(var p=0;p<pe.length;p++)e=pe[p],Object.prototype.hasOwnProperty.call(g,e)&&(b[e]=g[e])}};function re(){return ne("Opera")||ne("OPR")}function sa(){return ne("Trident")||ne("MSIE")}function se(){return(ne("Chrome")||ne("CriOS"))&&!re()&&!ne("Edge")};function te(){return ne("Edge")}function ue(){return ne("Gecko")&&!(Wa()&&!te())&&!(ne("Trident")||ne("MSIE"))&&!te()};var ve;
function we(){var b=H.MessageChannel;"undefined"===typeof b&&"undefined"!==typeof window&&window.postMessage&&window.addEventListener&&!ne("Presto")&&(b=function(){var b=document.createElement("IFRAME");b.style.display="none";b.src="";document.documentElement.appendChild(b);var d=b.contentWindow,b=d.document;b.open();b.write("");b.close();var e="callImmediate"+Math.random(),g="file:"==d.location.protocol?"*":d.location.protocol+"//"+d.location.host,b=pa(function(b){if(("*"==g||b.origin==g)&&b.data==
e)this.port1.onmessage()},this);d.addEventListener("message",b,!1);this.port1={};this.port2={postMessage:function(){d.postMessage(e,g)}}});if("undefined"!==typeof b&&!sa()){var d=new b,e={},g=e;d.port1.onmessage=function(){if(void 0!==e.next){e=e.next;var b=e.re;e.re=null;b()}};return function(b){g.next={re:b};g=g.next;d.port2.postMessage(0)}}return"undefined"!==typeof document&&"onreadystatechange"in document.createElement("SCRIPT")?function(b){var d=document.createElement("SCRIPT");d.onreadystatechange=
function(){d.onreadystatechange=null;d.parentNode.removeChild(d);d=null;b();b=null};document.documentElement.appendChild(d)}:function(b){H.setTimeout(b,0)}};var xe=re(),ye=sa(),ze=te(),Ae=ue(),Be=Wa()&&!te();function Ce(){var b=H.document;return b?b.documentMode:void 0}var De;a:{var Ee="",Fe=function(){var b=Xa;if(Ae)return/rv\:([^\);]+)(\)|;)/.exec(b);if(ze)return/Edge\/([\d\.]+)/.exec(b);if(ye)return/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(b);if(Be)return/WebKit\/(\S+)/.exec(b);if(xe)return/(?:Version)[ \/]?(\S+)/.exec(b)}();Fe&&(Ee=Fe?Fe[1]:"");if(ye){var Ge=Ce();if(null!=Ge&&Ge>parseFloat(Ee)){De=String(Ge);break a}}De=Ee}var He={};
function Ie(b){var d;if(!(d=He[b])){d=0;for(var e=Ma(String(De)).split("."),g=Ma(String(b)).split("."),k=Math.max(e.length,g.length),p=0;0==d&&p<k;p++){var q=e[p]||"",u=g[p]||"",v=RegExp("(\\d*)(\\D*)","g"),w=RegExp("(\\d*)(\\D*)","g");do{var z=v.exec(q)||["","",""],B=w.exec(u)||["","",""];if(0==z[0].length&&0==B[0].length)break;d=Ya(0==z[1].length?0:parseInt(z[1],10),0==B[1].length?0:parseInt(B[1],10))||Ya(0==z[2].length,0==B[2].length)||Ya(z[2],B[2])}while(0==d)}d=He[b]=0<=d}return d}
var Je=H.document,Ke=Je&&ye?Ce()||("CSS1Compat"==Je.compatMode?parseInt(De,10):5):void 0;var Le=!ye||9<=Number(Ke);!Ae&&!ye||ye&&9<=Number(Ke)||Ae&&Ie("1.9.1");ye&&Ie("9");function Me(b,d){this.x=void 0!==b?b:0;this.y=void 0!==d?d:0}A=Me.prototype;A.clone=function(){return new Me(this.x,this.y)};A.toString=function(){return"("+this.x+", "+this.y+")"};A.ceil=function(){this.x=Math.ceil(this.x);this.y=Math.ceil(this.y);return this};A.floor=function(){this.x=Math.floor(this.x);this.y=Math.floor(this.y);return this};A.round=function(){this.x=Math.round(this.x);this.y=Math.round(this.y);return this};A.scale=function(b,d){var e=ia(d)?d:b;this.x*=b;this.y*=e;return this};function Ne(b,d){this.width=b;this.height=d}A=Ne.prototype;A.clone=function(){return new Ne(this.width,this.height)};A.toString=function(){return"("+this.width+" x "+this.height+")"};A.ceil=function(){this.width=Math.ceil(this.width);this.height=Math.ceil(this.height);return this};A.floor=function(){this.width=Math.floor(this.width);this.height=Math.floor(this.height);return this};A.round=function(){this.width=Math.round(this.width);this.height=Math.round(this.height);return this};
A.scale=function(b,d){var e=ia(d)?d:b;this.width*=b;this.height*=e;return this};function Oe(b){return b?new Pe(Qe(b)):Ka||(Ka=new Pe)}function Re(b){var d=document;return ha(b)?d.getElementById(b):b}function Se(b,d){oe(d,function(d,g){"style"==g?b.style.cssText=d:"class"==g?b.className=d:"for"==g?b.htmlFor=d:Te.hasOwnProperty(g)?b.setAttribute(Te[g],d):0==g.lastIndexOf("aria-",0)||0==g.lastIndexOf("data-",0)?b.setAttribute(g,d):b[g]=d})}
var Te={cellpadding:"cellPadding",cellspacing:"cellSpacing",colspan:"colSpan",frameborder:"frameBorder",height:"height",maxlength:"maxLength",nonce:"nonce",role:"role",rowspan:"rowSpan",type:"type",usemap:"useMap",valign:"vAlign",width:"width"};
function Ue(b,d,e){var g=arguments,k=document,p=g[0],q=g[1];if(!Le&&q&&(q.name||q.type)){p=["<",p];q.name&&p.push(' name="',Na(q.name),'"');if(q.type){p.push(' type="',Na(q.type),'"');var u={};qe(u,q);delete u.type;q=u}p.push(">");p=p.join("")}p=k.createElement(p);q&&(ha(q)?p.className=q:fa(q)?p.className=q.join(" "):Se(p,q));2<g.length&&Ve(k,p,g);return p}
function Ve(b,d,e){function g(e){e&&d.appendChild(ha(e)?b.createTextNode(e):e)}for(var k=2;k<e.length;k++){var p=e[k];!ga(p)||ka(p)&&0<p.nodeType?g(p):ie(We(p)?je(p):p,g)}}function Xe(b,d){b.appendChild(d)}function Ye(b){for(var d;d=b.firstChild;)b.removeChild(d)}function Ze(b,d,e){b.insertBefore(d,b.childNodes[e]||null)}function $e(b){b&&b.parentNode&&b.parentNode.removeChild(b)}function af(b,d){var e=d.parentNode;e&&e.replaceChild(b,d)}
function bf(b,d){if(!b||!d)return!1;if(b.contains&&1==d.nodeType)return b==d||b.contains(d);if("undefined"!=typeof b.compareDocumentPosition)return b==d||!!(b.compareDocumentPosition(d)&16);for(;d&&b!=d;)d=d.parentNode;return d==b}function Qe(b){return 9==b.nodeType?b:b.ownerDocument||b.document}function We(b){if(b&&"number"==typeof b.length){if(ka(b))return"function"==typeof b.item||"string"==typeof b.item;if(ja(b))return"function"==typeof b.item}return!1}
function Pe(b){this.a=b||H.document||document}Pe.prototype.appendChild=Xe;function cf(b,d,e,g){this.top=b;this.right=d;this.bottom=e;this.left=g}A=cf.prototype;A.clone=function(){return new cf(this.top,this.right,this.bottom,this.left)};A.toString=function(){return"("+this.top+"t, "+this.right+"r, "+this.bottom+"b, "+this.left+"l)"};A.ceil=function(){this.top=Math.ceil(this.top);this.right=Math.ceil(this.right);this.bottom=Math.ceil(this.bottom);this.left=Math.ceil(this.left);return this};
A.floor=function(){this.top=Math.floor(this.top);this.right=Math.floor(this.right);this.bottom=Math.floor(this.bottom);this.left=Math.floor(this.left);return this};A.round=function(){this.top=Math.round(this.top);this.right=Math.round(this.right);this.bottom=Math.round(this.bottom);this.left=Math.round(this.left);return this};A.scale=function(b,d){var e=ia(d)?d:b;this.left*=b;this.right*=b;this.top*=e;this.bottom*=e;return this};function df(b,d,e){if(ha(d))(d=ef(b,d))&&(b.style[d]=e);else for(var g in d){e=b;var k=d[g],p=ef(e,g);p&&(e.style[p]=k)}}var ff={};function ef(b,d){var e=ff[d];if(!e){var g=Za(d),e=g;void 0===b.style[g]&&(g=(Be?"Webkit":Ae?"Moz":ye?"ms":xe?"O":null)+$a(g),void 0!==b.style[g]&&(e=g));ff[d]=e}return e}function gf(b,d){var e=Qe(b);return e.defaultView&&e.defaultView.getComputedStyle&&(e=e.defaultView.getComputedStyle(b,null))?e[d]||e.getPropertyValue(d)||"":""}
function hf(b){var d;try{d=b.getBoundingClientRect()}catch(e){return{left:0,top:0,right:0,bottom:0}}ye&&b.ownerDocument.body&&(b=b.ownerDocument,d.left-=b.documentElement.clientLeft+b.body.clientLeft,d.top-=b.documentElement.clientTop+b.body.clientTop);return d}
function jf(b){var d=kf;if("none"!=(gf(b,"display")||(b.currentStyle?b.currentStyle.display:null)||b.style&&b.style.display))return d(b);var e=b.style,g=e.display,k=e.visibility,p=e.position;e.visibility="hidden";e.position="absolute";e.display="inline";b=d(b);e.display=g;e.position=p;e.visibility=k;return b}function kf(b){var d=b.offsetWidth,e=b.offsetHeight,g=Be&&!d&&!e;return(void 0===d||g)&&b.getBoundingClientRect?(b=hf(b),new Ne(b.right-b.left,b.bottom-b.top)):new Ne(d,e)}
function lf(b,d){b.style.display=d?"":"none"}function mf(b,d,e,g){if(/^\d+px?$/.test(d))return parseInt(d,10);var k=b.style[e],p=b.runtimeStyle[e];b.runtimeStyle[e]=b.currentStyle[e];b.style[e]=d;d=b.style[g];b.style[e]=k;b.runtimeStyle[e]=p;return d}function nf(b,d){var e=b.currentStyle?b.currentStyle[d]:null;return e?mf(b,e,"left","pixelLeft"):0}var of={thin:2,medium:4,thick:6};
function pf(b,d){if("none"==(b.currentStyle?b.currentStyle[d+"Style"]:null))return 0;var e=b.currentStyle?b.currentStyle[d+"Width"]:null;return e in of?of[e]:mf(b,e,"left","pixelLeft")};function qf(b,d,e){fb.call(this,b);this.map=d;this.Sb=void 0!==e?e:null}Q(qf,fb);function rf(b,d,e){fb.call(this,b);this.a=d;b=e?e:{};this.buttons=sf(b);this.pressure=tf(b,this.buttons);this.bubbles="bubbles"in b?b.bubbles:!1;this.cancelable="cancelable"in b?b.cancelable:!1;this.view="view"in b?b.view:null;this.detail="detail"in b?b.detail:null;this.screenX="screenX"in b?b.screenX:0;this.screenY="screenY"in b?b.screenY:0;this.clientX="clientX"in b?b.clientX:0;this.clientY="clientY"in b?b.clientY:0;this.button="button"in b?b.button:0;this.relatedTarget="relatedTarget"in b?b.relatedTarget:
null;this.pointerId="pointerId"in b?b.pointerId:0;this.width="width"in b?b.width:0;this.height="height"in b?b.height:0;this.pointerType="pointerType"in b?b.pointerType:"";this.isPrimary="isPrimary"in b?b.isPrimary:!1;d.preventDefault&&(this.preventDefault=function(){d.preventDefault()})}Q(rf,fb);function sf(b){if(b.buttons||uf)b=b.buttons;else switch(b.which){case 1:b=1;break;case 2:b=4;break;case 3:b=2;break;default:b=0}return b}
function tf(b,d){var e=0;b.pressure?e=b.pressure:e=d?.5:0;return e}var uf=!1;try{uf=1===(new MouseEvent("click",{buttons:1})).buttons}catch(b){};function vf(b,d){var e=document.createElement("CANVAS");b&&(e.width=b);d&&(e.height=d);return e.getContext("2d")}
var wf=function(){var b;return function(){if(void 0===b){var d=document.createElement("P"),e,g={webkitTransform:"-webkit-transform",OTransform:"-o-transform",msTransform:"-ms-transform",MozTransform:"-moz-transform",transform:"transform"};document.body.appendChild(d);for(var k in g)k in d.style&&(d.style[k]="translate(1px,1px)",e=H.getComputedStyle(d).getPropertyValue(g[k]));document.body.removeChild(d);b=e&&"none"!==e}return b}}(),xf=function(){var b;return function(){if(void 0===b){var d=document.createElement("P"),
e,g={webkitTransform:"-webkit-transform",OTransform:"-o-transform",msTransform:"-ms-transform",MozTransform:"-moz-transform",transform:"transform"};document.body.appendChild(d);for(var k in g)k in d.style&&(d.style[k]="translate3d(1px,1px,1px)",e=H.getComputedStyle(d).getPropertyValue(g[k]));document.body.removeChild(d);b=e&&"none"!==e}return b}}();
function yf(b,d){var e=b.style;e.WebkitTransform=d;e.MozTransform=d;e.a=d;e.msTransform=d;e.transform=d;ye&&Ie("9.0")&&(b.style.transformOrigin="0 0")}function zf(b,d){var e;if(xf()){var g=Array(16);for(e=0;16>e;++e)g[e]=d[e].toFixed(6);yf(b,"matrix3d("+g.join(",")+")")}else if(wf()){var g=[d[0],d[1],d[4],d[5],d[12],d[13]],k=Array(6);for(e=0;6>e;++e)k[e]=g[e].toFixed(6);yf(b,"matrix("+k.join(",")+")")}else b.style.left=Math.round(d[12])+"px",b.style.top=Math.round(d[13])+"px"}
function Af(b){var d=b.offsetWidth;b=b.currentStyle||H.getComputedStyle(b);return d+=parseInt(b.marginLeft,10)+parseInt(b.marginRight,10)}function Bf(b){var d=b.offsetHeight;b=b.currentStyle||H.getComputedStyle(b);return d+=parseInt(b.marginTop,10)+parseInt(b.marginBottom,10)};var Cf=["experimental-webgl","webgl","webkit-3d","moz-webgl"];function Df(b,d){var e,g,k=Cf.length;for(g=0;g<k;++g)try{if(e=b.getContext(Cf[g],d))return e}catch(p){}return null};var Ef,Ff="undefined"!==typeof navigator?navigator.userAgent.toLowerCase():"",Gf=-1!==Ff.indexOf("firefox"),Hf=-1!==Ff.indexOf("safari")&&-1===Ff.indexOf("chrom"),If=-1!==Ff.indexOf("macintosh"),Jf=H.devicePixelRatio||1,Kf=!1,Lf=function(){if(!("HTMLCanvasElement"in H))return!1;try{var b=vf();return b?(void 0!==b.setLineDash&&(Kf=!0),!0):!1}catch(d){return!1}}(),Mf="ontouchstart"in H,Nf="PointerEvent"in H,Of=!!H.navigator.msPointerEnabled,Pf=!1,Qf=[];
if("WebGLRenderingContext"in H)try{var Rf=Df(document.createElement("CANVAS"),{failIfMajorPerformanceCaveat:!0});Rf&&(Pf=!0,Qf=Rf.getSupportedExtensions())}catch(b){}Ef=Pf;ta=Qf;function Sf(b,d){this.a=b;this.h=d};function Tf(b){Sf.call(this,b,{mousedown:this.Kg,mousemove:this.Lg,mouseup:this.Og,mouseover:this.Ng,mouseout:this.Mg});this.f=b.f;this.b=[]}Q(Tf,Sf);function Uf(b,d){for(var e=b.b,g=d.clientX,k=d.clientY,p=0,q=e.length,u;p<q&&(u=e[p]);p++){var v=Math.abs(k-u[1]);if(25>=Math.abs(g-u[0])&&25>=v)return!0}return!1}function Vf(b){var d=Wf(b,b),e=d.preventDefault;d.preventDefault=function(){b.preventDefault();e()};d.pointerId=1;d.isPrimary=!0;d.pointerType="mouse";return d}A=Tf.prototype;
A.Kg=function(b){if(!Uf(this,b)){if((1).toString()in this.f){var d=Vf(b);Xf(this.a,Yf,d,b);delete this.f[(1).toString()]}d=Vf(b);this.f[(1).toString()]=b;Xf(this.a,Zf,d,b)}};A.Lg=function(b){if(!Uf(this,b)){var d=Vf(b);Xf(this.a,$f,d,b)}};A.Og=function(b){if(!Uf(this,b)){var d=this.f[(1).toString()];d&&d.button===b.button&&(d=Vf(b),Xf(this.a,ag,d,b),delete this.f[(1).toString()])}};A.Ng=function(b){if(!Uf(this,b)){var d=Vf(b);bg(this.a,d,b)}};
A.Mg=function(b){if(!Uf(this,b)){var d=Vf(b);cg(this.a,d,b)}};function dg(b){Sf.call(this,b,{MSPointerDown:this.Tg,MSPointerMove:this.Ug,MSPointerUp:this.Xg,MSPointerOut:this.Vg,MSPointerOver:this.Wg,MSPointerCancel:this.Sg,MSGotPointerCapture:this.Qg,MSLostPointerCapture:this.Rg});this.f=b.f;this.b=["","unavailable","touch","pen","mouse"]}Q(dg,Sf);function eg(b,d){var e=d;ia(d.pointerType)&&(e=Wf(d,d),e.pointerType=b.b[d.pointerType]);return e}A=dg.prototype;A.Tg=function(b){this.f[b.pointerId.toString()]=b;var d=eg(this,b);Xf(this.a,Zf,d,b)};
A.Ug=function(b){var d=eg(this,b);Xf(this.a,$f,d,b)};A.Xg=function(b){var d=eg(this,b);Xf(this.a,ag,d,b);delete this.f[b.pointerId.toString()]};A.Vg=function(b){var d=eg(this,b);cg(this.a,d,b)};A.Wg=function(b){var d=eg(this,b);bg(this.a,d,b)};A.Sg=function(b){var d=eg(this,b);Xf(this.a,Yf,d,b);delete this.f[b.pointerId.toString()]};A.Rg=function(b){U(this.a,new rf("lostpointercapture",b,b))};A.Qg=function(b){U(this.a,new rf("gotpointercapture",b,b))};function fg(b){Sf.call(this,b,{pointerdown:this.wh,pointermove:this.xh,pointerup:this.Ah,pointerout:this.yh,pointerover:this.zh,pointercancel:this.vh,gotpointercapture:this.Vf,lostpointercapture:this.Fg})}Q(fg,Sf);A=fg.prototype;A.wh=function(b){gg(this.a,b)};A.xh=function(b){gg(this.a,b)};A.Ah=function(b){gg(this.a,b)};A.yh=function(b){gg(this.a,b)};A.zh=function(b){gg(this.a,b)};A.vh=function(b){gg(this.a,b)};A.Fg=function(b){gg(this.a,b)};A.Vf=function(b){gg(this.a,b)};function hg(b,d){Sf.call(this,b,{touchstart:this.bi,touchmove:this.ai,touchend:this.$h,touchcancel:this.Zh});this.f=b.f;this.j=d;this.b=void 0;this.i=0;this.g=void 0}Q(hg,Sf);A=hg.prototype;A.bf=function(){this.i=0;this.g=void 0};
function ig(b,d,e){d=Wf(d,e);d.pointerId=e.identifier+2;d.bubbles=!0;d.cancelable=!0;d.detail=b.i;d.button=0;d.buttons=1;d.width=e.webkitRadiusX||e.radiusX||0;d.height=e.webkitRadiusY||e.radiusY||0;d.pressure=e.webkitForce||e.force||.5;d.isPrimary=b.b===e.identifier;d.pointerType="touch";d.clientX=e.clientX;d.clientY=e.clientY;d.screenX=e.screenX;d.screenY=e.screenY;return d}
function jg(b,d,e){function g(){d.preventDefault()}var k=Array.prototype.slice.call(d.changedTouches),p=k.length,q,u;for(q=0;q<p;++q)u=ig(b,d,k[q]),u.preventDefault=g,e.call(b,d,u)}
A.bi=function(b){var d=b.touches,e=Object.keys(this.f),g=e.length;if(g>=d.length){var k=[],p,q,u;for(p=0;p<g;++p){q=e[p];u=this.f[q];var v;if(!(v=1==q))a:{v=d.length;for(var w=void 0,z=0;z<v;z++)if(w=d[z],w.identifier===q-2){v=!0;break a}v=!1}v||k.push(u.Ab)}for(p=0;p<k.length;++p)this.zd(b,k[p])}d=b.changedTouches[0];e=Object.keys(this.f).length;if(0===e||1===e&&(1).toString()in this.f)this.b=d.identifier,void 0!==this.g&&H.clearTimeout(this.g);kg(this,b);this.i++;jg(this,b,this.ph)};
A.ph=function(b,d){this.f[d.pointerId]={target:d.target,Ab:d,Xe:d.target};var e=this.a;d.bubbles=!0;Xf(e,lg,d,b);e=this.a;d.bubbles=!1;Xf(e,mg,d,b);Xf(this.a,Zf,d,b)};A.ai=function(b){b.preventDefault();jg(this,b,this.Pg)};A.Pg=function(b,d){var e=this.f[d.pointerId];if(e){var g=e.Ab,k=e.Xe;Xf(this.a,$f,d,b);g&&k!==d.target&&(g.relatedTarget=d.target,d.relatedTarget=k,g.target=k,d.target?(cg(this.a,g,b),bg(this.a,d,b)):(d.target=k,d.relatedTarget=null,this.zd(b,d)));e.Ab=d;e.Xe=d.target}};
A.$h=function(b){kg(this,b);jg(this,b,this.di)};A.di=function(b,d){Xf(this.a,ag,d,b);this.a.Ab(d,b);var e=this.a;d.bubbles=!1;Xf(e,ng,d,b);delete this.f[d.pointerId];d.isPrimary&&(this.b=void 0,this.g=H.setTimeout(this.bf.bind(this),200))};A.Zh=function(b){jg(this,b,this.zd)};A.zd=function(b,d){Xf(this.a,Yf,d,b);this.a.Ab(d,b);var e=this.a;d.bubbles=!1;Xf(e,ng,d,b);delete this.f[d.pointerId];d.isPrimary&&(this.b=void 0,this.g=H.setTimeout(this.bf.bind(this),200))};
function kg(b,d){var e=b.j.b,g=d.changedTouches[0];if(b.b===g.identifier){var k=[g.clientX,g.clientY];e.push(k);H.setTimeout(function(){ed(e,k)},2500)}};function og(b){ib.call(this);this.h=b;this.f={};this.g={};this.a=[];Nf?pg(this,new fg(this)):Of?pg(this,new dg(this)):(b=new Tf(this),pg(this,b),Mf&&pg(this,new hg(this,b)));b=this.a.length;for(var d,e=0;e<b;e++)d=this.a[e],qg(this,Object.keys(d.h))}Q(og,ib);function pg(b,d){var e=Object.keys(d.h);e&&(e.forEach(function(b){var e=d.h[b];e&&(this.g[b]=e.bind(d))},b),b.a.push(d))}og.prototype.b=function(b){var d=this.g[b.type];d&&d(b)};
function qg(b,d){d.forEach(function(b){S(this.h,b,this.b,this)},b)}function rg(b,d){d.forEach(function(b){Ha(this.h,b,this.b,this)},b)}function Wf(b,d){for(var e={},g,k=0,p=sg.length;k<p;k++)g=sg[k][0],e[g]=b[g]||d[g]||sg[k][1];return e}og.prototype.Ab=function(b,d){b.bubbles=!0;Xf(this,tg,b,d)};function cg(b,d,e){b.Ab(d,e);var g=d.relatedTarget;g&&bf(d.target,g)||(d.bubbles=!1,Xf(b,ng,d,e))}
function bg(b,d,e){d.bubbles=!0;Xf(b,lg,d,e);var g=d.relatedTarget;g&&bf(d.target,g)||(d.bubbles=!1,Xf(b,mg,d,e))}function Xf(b,d,e,g){U(b,new rf(d,g,e))}function gg(b,d){U(b,new rf(d.type,d,d))}og.prototype.W=function(){for(var b=this.a.length,d,e=0;e<b;e++)d=this.a[e],rg(this,Object.keys(d.h));og.xa.W.call(this)};
var $f="pointermove",Zf="pointerdown",ag="pointerup",lg="pointerover",tg="pointerout",mg="pointerenter",ng="pointerleave",Yf="pointercancel",sg=[["bubbles",!1],["cancelable",!1],["view",null],["detail",null],["screenX",0],["screenY",0],["clientX",0],["clientY",0],["ctrlKey",!1],["altKey",!1],["shiftKey",!1],["metaKey",!1],["button",0],["relatedTarget",null],["buttons",0],["pointerId",0],["width",0],["height",0],["pressure",0],["tiltX",0],["tiltY",0],["pointerType",""],["hwTimestamp",0],["isPrimary",
!1],["type",""],["target",null],["currentTarget",null],["which",0]];function ug(b,d,e,g,k){qf.call(this,b,d,k);this.a=e;b=d.a.getBoundingClientRect();e=e.changedTouches?e.changedTouches[0]:e;this.f=[e.clientX-b.left,e.clientY-b.top];this.b=d.Ea(this.f);this.h=void 0!==g?g:!1}Q(ug,qf);ug.prototype.preventDefault=function(){ug.xa.preventDefault.call(this);this.a.preventDefault()};ug.prototype.stopPropagation=function(){ug.xa.stopPropagation.call(this);this.a.stopPropagation()};function vg(b,d,e,g,k){ug.call(this,b,d,e.a,g,k);this.g=e}Q(vg,ug);
function wg(b){ib.call(this);this.b=b;this.i=0;this.j=!1;this.g=[];this.f=null;b=this.b.a;this.w=0;this.u={};this.h=new og(b);this.a=null;this.l=S(this.h,Zf,this.ig,this);this.s=S(this.h,$f,this.Ch,this)}Q(wg,ib);function xg(b,d){var e;e=new vg(yg,b.b,d);U(b,e);0!==b.i?(H.clearTimeout(b.i),b.i=0,e=new vg(zg,b.b,d),U(b,e)):b.i=H.setTimeout(function(){this.i=0;var b=new vg(Ag,this.b,d);U(this,b)}.bind(b),250)}
function Bg(b,d){d.type==Cg||d.type==Dg?delete b.u[d.pointerId]:d.type==Eg&&(b.u[d.pointerId]=!0);b.w=Object.keys(b.u).length}A=wg.prototype;A.Ge=function(b){Bg(this,b);var d=new vg(Cg,this.b,b);U(this,d);!this.j&&0===b.button&&xg(this,this.f);0===this.w&&(this.g.forEach(Ba),this.g.length=0,this.j=!1,this.f=null,this.a.oa(),this.a=null)};
A.ig=function(b){Bg(this,b);var d=new vg(Eg,this.b,b);U(this,d);this.f=b;0===this.g.length&&(this.a=new og(document),this.g.push(S(this.a,Fg,this.ah,this),S(this.a,Cg,this.Ge,this),S(this.h,Dg,this.Ge,this)))};A.ah=function(b){if(b.clientX!=this.f.clientX||b.clientY!=this.f.clientY){this.j=!0;var d=new vg(Gg,this.b,b,this.j);U(this,d)}b.preventDefault()};A.Ch=function(b){U(this,new vg(b.type,this.b,b,!(!this.f||b.clientX==this.f.clientX&&b.clientY==this.f.clientY)))};
A.W=function(){this.s&&(Ba(this.s),this.s=null);this.l&&(Ba(this.l),this.l=null);this.g.forEach(Ba);this.g.length=0;this.a&&(this.a.oa(),this.a=null);this.h&&(this.h.oa(),this.h=null);wg.xa.W.call(this)};var Ag="singleclick",yg="click",zg="dblclick",Gg="pointerdrag",Fg="pointermove",Eg="pointerdown",Cg="pointerup",Dg="pointercancel",Hg={Ei:Ag,ti:yg,ui:zg,xi:Gg,Ai:Fg,wi:Eg,Di:Cg,Ci:"pointerover",Bi:"pointerout",yi:"pointerenter",zi:"pointerleave",vi:Dg};function Ig(b,d,e,g,k){ib.call(this);this.l=k;this.F=b;this.h=e;this.J=d;this.state=g}Q(Ig,ib);A=Ig.prototype;A.A=function(){U(this,"change")};A.nb=function(){return this.l};A.I=function(){return this.F};A.N=function(){return this.J};A.Z=function(){return this.state};function Jg(b,d){ib.call(this);this.qa=b;this.state=d;this.a=null;this.g=""}Q(Jg,ib);Jg.prototype.A=function(){U(this,"change")};Jg.prototype.getKey=function(){return L(this).toString()};Jg.prototype.Z=function(){return this.state};function Kg(){this.g=0;this.b={};this.f=this.a=null}A=Kg.prototype;A.clear=function(){this.g=0;this.b={};this.f=this.a=null};function Lg(b,d){return b.b.hasOwnProperty(d)}A.forEach=function(b,d){for(var e=this.a;e;)b.call(d,e.fc,e.Qd,this),e=e.gb};A.get=function(b){b=this.b[b];if(b===this.f)return b.fc;b===this.a?(this.a=this.a.gb,this.a.oc=null):(b.gb.oc=b.oc,b.oc.gb=b.gb);b.gb=null;b.oc=this.f;this.f=this.f.gb=b;return b.fc};
A.pop=function(){var b=this.a;delete this.b[b.Qd];b.gb&&(b.gb.oc=null);this.a=b.gb;this.a||(this.f=null);--this.g;return b.fc};A.replace=function(b,d){this.get(b);this.b[b].fc=d};A.set=function(b,d){var e={Qd:b,gb:null,oc:this.f,fc:d};this.f?this.f.gb=e:this.a=e;this.f=e;this.b[b]=e;++this.g};function Mg(b){Kg.call(this);this.h=void 0!==b?b:2048}Q(Mg,Kg);function Ng(b){return b.g>b.h}function Og(b,d){for(var e,g;Ng(b);){e=b.a.fc;g=e.qa[0].toString();var k;if(k=g in d)e=e.qa,k=Mc(d[g],e[1],e[2]);if(k)break;else b.pop().oa()}};function Pg(b){this.zb=void 0!==b.zb?b.zb:0;this.Zb=b.Bb;this.Hb=this.Zb.length-1;this.f=void 0!==b.origin?b.origin:null;this.g=null;void 0!==b.oh&&(this.g=b.oh);var d=b.F;void 0===d||this.f||this.g||(this.f=gc(d));this.h=null;void 0!==b.Xh&&(this.h=b.Xh);this.cc=void 0!==b.ce?b.ce:this.h?null:256;this.i=void 0!==d?d:null;this.a=null;void 0!==b.sizes?this.a=b.sizes.map(function(b){return new Lc(Math.min(0,b[0]),Math.max(b[0]-1,-1),Math.min(0,b[1]),Math.max(b[1]-1,-1))},this):d&&Qg(this,d);this.b=
[0,0]}var Rg=[0,0,0];function Sg(b,d,e,g,k){k=Tg(b,d,k);for(d=d[0]-1;d>=b.zb;){if(e.call(null,d,Ug(b,k,d,g)))return!0;--d}return!1}Pg.prototype.I=function(){return this.i};Pg.prototype.ob=function(b){return this.f?this.f:this.g[b]};Pg.prototype.N=function(b){return this.Zb[b]};function Vg(b,d,e,g){return d[0]<b.Hb?(g=Tg(b,d,g),Ug(b,g,d[0]+1,e)):null}
function Wg(b,d,e,g){Xg(b,d[0],d[1],e,!1,Rg);var k=Rg[1],p=Rg[2];Xg(b,d[2],d[3],e,!0,Rg);b=Rg[1];d=Rg[2];void 0!==g?(g.a=k,g.f=b,g.b=p,g.g=d):g=new Lc(k,b,p,d);return g}function Ug(b,d,e,g){e=b.N(e);return Wg(b,d,e,g)}function Yg(b,d){var e=b.ob(d[0]),g=b.N(d[0]),k=Sb(Zg(b,d[0]),b.b);return[e[0]+(d[1]+.5)*k[0]*g,e[1]+(d[2]+.5)*k[1]*g]}function Tg(b,d,e){var g=b.ob(d[0]),k=b.N(d[0]);b=Sb(Zg(b,d[0]),b.b);var p=g[0]+d[1]*b[0]*k;d=g[1]+d[2]*b[1]*k;return ac(p,d,p+b[0]*k,d+b[1]*k,e)}
function Xg(b,d,e,g,k,p){var q=$g(b,g),u=g/b.N(q),v=b.ob(q);b=Sb(Zg(b,q),b.b);d=u*Math.floor((d-v[0])/g+(k?.5:0))/b[0];e=u*Math.floor((e-v[1])/g+(k?0:.5))/b[1];k?(d=Math.ceil(d)-1,e=Math.ceil(e)-1):(d=Math.floor(d),e=Math.floor(e));k=d;void 0!==p?(p[0]=q,p[1]=k,p[2]=e):p=[q,k,e];return p}function ah(b,d,e){e=b.N(e);return Xg(b,d[0],d[1],e,!1,void 0)}function Zg(b,d){return b.cc?b.cc:b.h[d]}function $g(b,d){var e=cd(b.Zb,d,0);return Kb(e,b.zb,b.Hb)}
function Qg(b,d){for(var e=b.Zb.length,g=Array(e),k=b.zb;k<e;++k)g[k]=Ug(b,d,k);b.a=g}function bh(b){var d=b.g;if(!d){for(var d=ch(b),e=Sb(256),e=Math.max(jc(d)/e[0],kc(d)/e[1]),g=Array(43),k=0;43>k;++k)g[k]=e/Math.pow(2,k);d=new Pg({F:d,origin:gc(d),Bb:g,ce:void 0});b.g=d}return d}function ch(b){b=xc(b);var d=b.I();d||(b=180*tc.degrees/Bc(b),d=ac(-b,-b,b,b));return d};function dh(b){Qc.call(this,{Aa:b.Aa,F:b.F,Ga:b.Ga,ba:b.ba,state:b.state,Pa:b.Pa});this.B=void 0!==b.Lc?b.Lc:!1;this.i=void 0!==b.Tc?b.Tc:1;this.Da=void 0!==b.Da?b.Da:null;this.a=new Mg(b.Yc);this.w=[0,0]}Q(dh,Qc);A=dh.prototype;A.Ue=function(){return Ng(this.a)};A.Ve=function(b,d){var e=this.Fc(b);e&&Og(e,d)};
function eh(b,d,e,g,k){d=b.Fc(d);if(!d)return!1;for(var p=!0,q,u,v=g.a;v<=g.f;++v)for(var w=g.b;w<=g.g;++w)q=b.dd(e,v,w),u=!1,Lg(d,q)&&(q=d.get(q),(u=2===q.Z())&&(u=!1!==k(q))),u||(p=!1);return p}A.cd=function(){return 0};A.dd=function(b,d,e){return b+"/"+d+"/"+e};A.Nd=function(){return this.B};A.pb=function(b){return this.Da?this.Da:bh(b)};A.Fc=function(b){var d=this.l;return d&&!Ic(d,b)?null:this.a};
function fh(b,d,e){var g=b.pb(e);e=b.i;d=Sb(Zg(g,d),b.w);1==e?b=d:(b=b.w,void 0===b&&(b=[0,0]),b[0]=d[0]*e+.5|0,b[1]=d[1]*e+.5|0);return b}function gh(b,d,e){var g=void 0!==e?e:b.l;e=b.pb(g);if(b.td&&g.b){var k=d;d=k[0];b=Yg(e,k);g=ch(g);Zb(g,b[0],b[1])?d=k:(k=jc(g),b[0]+=k*Math.ceil((g[0]-b[0])/k),d=ah(e,b,d))}k=d[0];g=d[1];b=d[2];if(e.zb>k||k>e.Hb)e=!1;else{var p=e.I();e=(e=p?Ug(e,p,k):e.a?e.a[k]:null)?Mc(e,g,b):!0}return e?d:null}A.ef=db;function hh(b){fb.call(this,b)}Q(hh,fb);function ih(b,d,e,g,k,p,q,u){Fb(b);0===d&&0===e||Hb(b,d,e);1==g&&1==k||Ib(b,g,k);0!==p&&Jb(b,p);0===q&&0===u||Hb(b,q,u);return b}function jh(b,d){return b[0]==d[0]&&b[1]==d[1]&&b[4]==d[4]&&b[5]==d[5]&&b[12]==d[12]&&b[13]==d[13]}function kh(b,d,e){var g=b[1],k=b[5],p=b[13],q=d[0];d=d[1];e[0]=b[0]*q+b[4]*d+b[12];e[1]=g*q+k*d+p;return e};function lh(b){kb.call(this);this.a=b}Q(lh,kb);lh.prototype.Ib=db;lh.prototype.i=function(b,d,e){return function(g,k){return eh(b,d,g,k,function(b){e[g]||(e[g]={});e[g][b.qa.toString()]=b})}};lh.prototype.ra=function(b){2===b.target.Z()&&mh(this)};function nh(b,d){var e=d.Z();2!=e&&3!=e&&S(d,"change",b.ra,b);0==e&&(d.load(),e=d.Z());return 2==e}function mh(b){var d=b.a;d.get("visible")&&"ready"==d.Od()&&b.A()}
function oh(b,d){d.Ue()&&b.hb.push(qa(function(b,d,k){d=L(b).toString();b.Ve(k.L.ba,k.Uc[d])},d))}function ph(b,d){if(d){var e,g,k;g=0;for(k=d.length;g<k;++g)e=d[g],b[L(e).toString()]=e}}function qh(b,d){var e=d.ra;void 0!==e&&("string"===typeof e?b.nc[e]="":ka(e)&&(b.nc[e.src]=e.href))}function rh(b,d,e,g){d=L(d).toString();e=e.toString();d in b?e in b[d]?(b=b[d][e],g.a<b.a&&(b.a=g.a),g.f>b.f&&(b.f=g.f),g.b<b.b&&(b.b=g.b),g.g>b.g&&(b.g=g.g)):b[d][e]=g:(b[d]={},b[d][e]=g)}
function sh(b,d,e){return[d*(Math.round(b[0]/d)+e[0]%2/2),d*(Math.round(b[1]/d)+e[1]%2/2)]}function th(b,d,e,g,k,p,q,u,v,w){var z=L(d).toString();z in b.Vc||(b.Vc[z]={});var B=b.Vc[z];b=b.Vh;var C=e.zb,D,F,I,J,M,E;for(E=q;E>=C;--E)for(F=Ug(e,p,E,F),I=e.N(E),J=F.a;J<=F.f;++J)for(M=F.b;M<=F.g;++M)q-E<=u?(D=uh(d,E,J,M,g,k),0==D.Z()&&(B[D.qa.toString()]=!0,D.getKey()in b.pc||b.enqueue([D,z,Yg(e,D.qa),I])),void 0!==v&&v.call(w,D)):d.ef(E,J,M,k)};function vh(b){if("string"!==typeof b){var d=b[0];d!=(d|0)&&(d=d+.5|0);var e=b[1];e!=(e|0)&&(e=e+.5|0);var g=b[2];g!=(g|0)&&(g=g+.5|0);b="rgba("+d+","+e+","+g+","+(void 0===b[3]?1:b[3])+")"}return b};function wh(b){this.s=b.opacity;this.u=b.Ih;this.ea=b.rotation;this.l=b.scale;this.B=b.ae}wh.prototype.ga=function(){return this.ea};wh.prototype.Kb=function(b){this.ea=b};wh.prototype.qd=function(b){this.l=b};function xh(){this.a={};this.f=0}da(xh);xh.prototype.clear=function(){this.a={};this.f=0};xh.prototype.get=function(b,d,e){b=d+":"+b+":"+(e?vh(e):"null");return b in this.a?this.a[b]:null};xh.prototype.set=function(b,d,e,g){this.a[d+":"+b+":"+(e?vh(e):"null")]=g;++this.f};function yh(b,d){this.B=d;this.b={};this.s={}}Q(yh,eb);function zh(b){var d=b.L,e=b.ic;ih(e,b.size[0]/2,b.size[1]/2,1/d.J,-1/d.J,-d.rotation,-d.T[0],-d.T[1]);Gb(e,b.Ze)}A=yh.prototype;A.W=function(){for(var b in this.b)this.b[b].oa()};function Ah(){var b=xh.Tb();if(32<b.f){var d=0,e,g;for(e in b.a)g=b.a[e],0!==(d++&3)||jb(g)||(delete b.a[e],--b.f)}}
A.Pe=function(b,d,e,g,k,p){function q(b,k){var p=L(b).toString(),q=d.Ic[L(k)].Jc;if(!(p in d.bc)||q)return e.call(g,b,q?k:null)}var u,v=d.L,w=v.J,z=v.ba,v=b;if(z.hc){var z=z.I(),B=jc(z),C=b[0];if(C<z[0]||C>z[2])v=[C+B*Math.ceil((z[0]-C)/B),b[1]]}z=d.Vb;for(B=z.length-1;0<=B;--B){var D=z[B],C=D.Eb;if(Xc(D,w)&&k.call(p,C)&&(D=Bh(this,C),C.ha()&&(u=D.Ib(C.ha().td?v:b,d,q,g)),u))return u}};
function Bh(b,d){var e=L(d).toString();if(e in b.b)return b.b[e];var g=b.Gd(d);b.b[e]=g;b.s[e]=S(g,"change",b.cg,b);return g}A.da=function(){return this.B};A.cg=function(){this.B.P()};A.md=db;A.Eh=function(b,d){for(var e in this.b)if(!(d&&e in d.Ic)){var g=e,k=this.b[g];delete this.b[g];Ba(this.s[g]);delete this.s[g];k.oa()}};function Ch(b,d){for(var e in b.b)if(!(e in d.Ic)){d.hb.push(b.Eh.bind(b));break}}function hd(b,d){return b.zIndex-d.zIndex};function Dh(b,d){this.j=b;this.h=d;this.a=[];this.f=[];this.pc={}}Dh.prototype.clear=function(){this.a.length=0;this.f.length=0;va(this.pc)};function Eh(b){var d=b.a,e=b.f,g=d[0];1==d.length?(d.length=0,e.length=0):(d[0]=d.pop(),e[0]=e.pop(),Fh(b,0));d=b.h(g);delete b.pc[d];return g}Dh.prototype.enqueue=function(b){var d=this.j(b);return Infinity!=d?(this.a.push(b),this.f.push(d),this.pc[this.h(b)]=!0,Gh(this,0,this.a.length-1),!0):!1};
function Fh(b,d){for(var e=b.a,g=b.f,k=e.length,p=e[d],q=g[d],u=d;d<k>>1;){var v=2*d+1,w=2*d+2,v=w<k&&g[w]<g[v]?w:v;e[d]=e[v];g[d]=g[v];d=v}e[d]=p;g[d]=q;Gh(b,u,d)}function Gh(b,d,e){var g=b.a;b=b.f;for(var k=g[e],p=b[e];e>d;){var q=e-1>>1;if(b[q]>p)g[e]=g[q],b[e]=b[q],e=q;else break}g[e]=k;b[e]=p}function Hh(b){var d=b.j,e=b.a,g=b.f,k=0,p=e.length,q,u,v;for(u=0;u<p;++u)q=e[u],v=d(q),Infinity==v?delete b.pc[b.h(q)]:(g[k]=v,e[k++]=q);e.length=k;g.length=k;for(d=(b.a.length>>1)-1;0<=d;d--)Fh(b,d)};function Ih(b,d){Dh.call(this,function(d){return b.apply(null,d)},function(b){return b[0].getKey()});this.l=d;this.g=0;this.b={}}Q(Ih,Dh);Ih.prototype.enqueue=function(b){var d=Ih.xa.enqueue.call(this,b);d&&S(b[0],"change",this.i,this);return d};Ih.prototype.i=function(b){b=b.target;var d=b.Z();if(2===d||3===d||4===d||5===d)Ha(b,"change",this.i,this),b=b.getKey(),b in this.b&&(delete this.b[b],--this.g),this.l()};function Jh(b){nb.call(this);this.element=b.element?b.element:null;this.s=this.G=null;this.g=[];this.P=b.P?b.P:db;b.target&&(this.G=Re(b.target))}Q(Jh,nb);Jh.prototype.W=function(){$e(this.element);Jh.xa.W.call(this)};Jh.prototype.da=function(){return this.s};Jh.prototype.ja=function(b){this.s&&$e(this.element);for(var d=0,e=this.g.length;d<e;++d)Ba(this.g[d]);this.g.length=0;if(this.s=b)(this.G?this.G:b.s).appendChild(this.element),this.P!==db&&this.g.push(S(b,"postrender",this.P,this)),b.P()};function Kh(b){b=b?b:{};this.u=document.createElement("UL");this.i=document.createElement("LI");this.u.appendChild(this.i);lf(this.i,!1);this.h=void 0!==b.collapsed?b.collapsed:!0;this.j=void 0!==b.Bd?b.Bd:!0;this.j||(this.h=!1);var d=void 0!==b.className?b.className:"ol-attribution",e=void 0!==b.dc?b.dc:"Attributions",g=void 0!==b.$c?b.$c:"\u00bb";this.w="string"===typeof g?Ue("SPAN",{},g):g;g=void 0!==b.label?b.label:"i";this.B="string"===typeof g?Ue("SPAN",{},g):g;e=Ue("BUTTON",{type:"button",
title:e},this.j&&!this.h?this.w:this.B);S(e,"click",this.R,this);d=Ue("DIV",d+" ol-unselectable ol-control"+(this.h&&this.j?" ol-collapsed":"")+(this.j?"":" ol-uncollapsible"),this.u,e);Jh.call(this,{element:d,P:b.P?b.P:Lh,target:b.target});this.l=!0;this.b={};this.a={};this.M={}}Q(Kh,Jh);
function Lh(b){if(b=b.Sb){var d,e,g,k,p,q,u,v,w,z,B,C=b.Vb,D=ua({},b.Aa),F={},I=b.L.ba;e=0;for(d=C.length;e<d;e++)if(q=C[e].Eb.ha())if(z=L(q).toString(),w=q.nb())for(g=0,k=w.length;g<k;g++)if(u=w[g],v=L(u).toString(),!(v in D)){if(p=b.Uc[z]){var J=q.pb(I);a:{B=u;var M=I;if(B.a){var E=void 0,G=void 0,N=void 0,P=void 0;for(P in p)if(P in B.a)for(var N=p[P],O,E=0,G=B.a[P].length;E<G;++E){O=B.a[P][E];if(Oc(O,N)){B=!0;break a}var R=Ug(J,ch(M),parseInt(P,10)),W=R.f-R.a+1;if(N.a<R.a||N.f>R.f)if(Oc(O,new Lc(Mb(N.a,
W),Mb(N.f,W),N.b,N.g))||N.f-N.a+1>W&&Oc(O,R)){B=!0;break a}}B=!1}else B=!0}}else B=!1;B?(v in F&&delete F[v],D[v]=u):F[v]=u}d=[D,F];e=d[0];d=d[1];for(var K in this.b)K in e?(this.a[K]||(lf(this.b[K],!0),this.a[K]=!0),delete e[K]):K in d?(this.a[K]&&(lf(this.b[K],!1),delete this.a[K]),delete d[K]):($e(this.b[K]),delete this.b[K],delete this.a[K]);for(K in e)g=document.createElement("LI"),g.innerHTML=e[K].f,this.u.appendChild(g),this.b[K]=g,this.a[K]=!0;for(K in d)g=document.createElement("LI"),g.innerHTML=
d[K].f,lf(g,!1),this.u.appendChild(g),this.b[K]=g;K=!ya(this.a)||!ya(b.nc);this.l!=K&&(lf(this.element,K),this.l=K);K&&ya(this.a)?this.element.classList.add("ol-logo-only"):this.element.classList.remove("ol-logo-only");var T;b=b.nc;K=this.M;for(T in K)T in b||($e(K[T]),delete K[T]);for(var ba in b)ba in K||(T=new Image,T.src=ba,e=b[ba],""===e?e=T:(e=Ue("A",{href:e}),e.appendChild(T)),this.i.appendChild(e),K[ba]=e);lf(this.i,!ya(b))}else this.l&&(lf(this.element,!1),this.l=!1)}
Kh.prototype.R=function(b){b.preventDefault();this.element.classList.toggle("ol-collapsed");this.h?af(this.w,this.B):af(this.B,this.w);this.h=!this.h};function Mh(b){return 1-Math.pow(1-b,3)}function Nh(b){return 3*b*b-2*b*b*b}function Oh(b){return b};function Ph(b){var d=b.source,e=b.start?b.start:Date.now(),g=d[0],k=d[1],p=void 0!==b.duration?b.duration:1E3,q=b.Na?b.Na:Nh;return function(b,d){if(d.time<e)return d.vb=!0,d.na[0]+=1,!0;if(d.time<e+p){var w=1-q((d.time-e)/p),z=g-d.L.T[0],B=k-d.L.T[1];d.vb=!0;d.L.T[0]+=w*z;d.L.T[1]+=w*B;d.na[0]+=1;return!0}return!1}}
function Qh(b){var d=b.rotation?b.rotation:0,e=b.start?b.start:Date.now(),g=void 0!==b.duration?b.duration:1E3,k=b.Na?b.Na:Nh,p=b.anchor?b.anchor:null;return function(b,u){if(u.time<e)return u.vb=!0,u.na[0]+=1,!0;if(u.time<e+g){var v=1-k((u.time-e)/g),v=(d-u.L.rotation)*v;u.vb=!0;u.L.rotation+=v;if(p){var w=u.L.T;w[0]-=p[0];w[1]-=p[1];Qb(w,v);Nb(w,p)}u.na[0]+=1;return!0}return!1}}
function Rh(b){var d=b.J,e=b.start?b.start:Date.now(),g=void 0!==b.duration?b.duration:1E3,k=b.Na?b.Na:Nh;return function(b,q){if(q.time<e)return q.vb=!0,q.na[0]+=1,!0;if(q.time<e+g){var u=1-k((q.time-e)/g),v=d-q.L.J;q.vb=!0;q.L.J+=u*v;q.na[0]+=1;return!0}return!1}};function Sh(b){b=b?b:{};var d=void 0!==b.className?b.className:"ol-rotate",e=void 0!==b.label?b.label:"\u21e7";this.a=null;"string"===typeof e?this.a=Ue("SPAN","ol-compass",e):(this.a=e,this.a.classList.add(this.a,"ol-compass"));e=Ue("BUTTON",{"class":d+"-reset",type:"button",title:b.dc?b.dc:"Reset rotation"},this.a);S(e,"click",Sh.prototype.l,this);d=Ue("DIV",d+" ol-unselectable ol-control",e);e=b.P?b.P:Th;this.h=b.Hh?b.Hh:void 0;Jh.call(this,{element:d,P:e,target:b.target});this.i=void 0!==b.duration?
b.duration:250;this.b=void 0!==b.ne?b.ne:!0;this.j=void 0;this.b&&this.element.classList.add("ol-hidden")}Q(Sh,Jh);Sh.prototype.l=function(b){b.preventDefault();if(void 0!==this.h)this.h();else{b=this.da();var d=V(b);if(d){var e=d.ga();void 0!==e&&(0<this.i&&(e%=2*Math.PI,e<-Math.PI&&(e+=2*Math.PI),e>Math.PI&&(e-=2*Math.PI),b.eb(Qh({rotation:e,duration:this.i,Na:Mh}))),d.Kb(0))}}};
function Th(b){if(b=b.Sb){b=b.L.rotation;if(b!=this.j){var d="rotate("+b+"rad)";if(this.b){var e=this.element.classList.contains("ol-hidden");e||0!==b?e&&0!==b&&this.element.classList.remove("ol-hidden"):this.element.classList.add("ol-hidden")}this.a.style.msTransform=d;this.a.style.webkitTransform=d;this.a.style.transform=d}this.j=b}};function Uh(b){b=b?b:{};var d=void 0!==b.className?b.className:"ol-zoom",e=void 0!==b.Qb?b.Qb:1,g=void 0!==b.ri?b.ri:"\u2212",k=void 0!==b.si?b.si:"Zoom out",p=Ue("BUTTON",{"class":d+"-in",type:"button",title:void 0!==b.pi?b.pi:"Zoom in"},void 0!==b.oi?b.oi:"+");S(p,"click",qa(Uh.prototype.b,e),this);g=Ue("BUTTON",{"class":d+"-out",type:"button",title:k},g);S(g,"click",qa(Uh.prototype.b,-e),this);d=Ue("DIV",d+" ol-unselectable ol-control",p,g);Jh.call(this,{element:d,target:b.target});this.a=void 0!==
b.duration?b.duration:250}Q(Uh,Jh);Uh.prototype.b=function(b,d){d.preventDefault();var e=this.da(),g=V(e);if(g){var k=g.N();k&&(0<this.a&&e.eb(Rh({J:k,duration:this.a,Na:Mh})),e=g.kb(k,b),ee(g,e))}};function Vh(){this.a=[];this.f=this.b=0}function Wh(b,d){var e=b.f,g=.05-e,k=Math.log(.05/b.f)/-.005;return Ph({source:d,duration:k,Na:function(b){return e*(Math.exp(-.005*b*k)-1)/g}})};function Xh(b){nb.call(this);this.Pb=null;this.set("active",!0);this.handleEvent=b.handleEvent}Q(Xh,nb);Xh.prototype.da=function(){return this.Pb};Xh.prototype.ja=function(b){this.Pb=b};function Yh(b,d,e,g,k){if(void 0!==e){var p=d.ga(),q=$d(d);void 0!==p&&q&&k&&0<k&&(b.eb(Qh({rotation:p,duration:k,Na:Mh})),g&&b.eb(Ph({source:q,duration:k,Na:Mh})));d.rotate(e,g)}}function Zh(b,d,e,g,k){var p=d.N();e=d.kb(p,e,0);$h(b,d,e,g,k)}
function $h(b,d,e,g,k){if(e){var p=d.N(),q=$d(d);void 0!==p&&q&&e!==p&&k&&0<k&&(b.eb(Rh({J:p,duration:k,Na:Mh})),g&&b.eb(Ph({source:q,duration:k,Na:Mh})));if(g){var u;b=$d(d);k=d.N();void 0!==b&&void 0!==k&&(u=[g[0]-e*(g[0]-b[0])/k,g[1]-e*(g[1]-b[1])/k]);d.Oa(u)}ee(d,e)}};function ai(b){b=b?b:{};this.a=b.Qb?b.Qb:1;Xh.call(this,{handleEvent:bi});this.b=void 0!==b.duration?b.duration:250}Q(ai,Xh);function bi(b){var d=!1,e=b.a;if(b.type==zg){var d=b.map,g=b.b,e=e.shiftKey?-this.a:this.a,k=V(d);Zh(d,k,e,g,this.b);b.preventDefault();d=!0}return!d};function ci(b){b=b.a;return b.altKey&&!(b.metaKey||b.ctrlKey)&&b.shiftKey}function di(b){return b.type==yg}function ei(b){b=b.a;return 0==b.button&&!(Be&&If&&b.ctrlKey)}function fi(b){return b.type==Ag}function gi(b){b=b.a;return!b.altKey&&!(b.metaKey||b.ctrlKey)&&!b.shiftKey}function hi(b){b=b.a;return!b.altKey&&(If?b.metaKey:b.ctrlKey)&&!b.shiftKey}function ii(b){b=b.a;return!b.altKey&&!(b.metaKey||b.ctrlKey)&&b.shiftKey}
function ji(b){b=b.a.target.tagName;return"INPUT"!==b&&"SELECT"!==b&&"TEXTAREA"!==b}function ki(b){return"mouse"==b.g.pointerType};function li(b){b=b?b:{};Xh.call(this,{handleEvent:b.handleEvent?b.handleEvent:mi});this.Ka=b.qb?b.qb:rd;this.La=b.Db?b.Db:db;this.cb=b.Pd?b.Pd:db;this.ra=b.xb?b.xb:rd;this.s=!1;this.R={};this.g=[]}Q(li,Xh);function ni(b){for(var d=b.length,e=0,g=0,k=0;k<d;k++)e+=b[k].clientX,g+=b[k].clientY;return[e/d,g/d]}
function mi(b){if(!(b instanceof vg))return!0;var d=!1,e=b.type;if(e===Eg||e===Gg||e===Cg)e=b.g,b.type==Cg?delete this.R[e.pointerId]:b.type==Eg?this.R[e.pointerId]=e:e.pointerId in this.R&&(this.R[e.pointerId]=e),this.g=xa(this.R);this.s&&(b.type==Gg?this.La(b):b.type==Cg&&(this.s=this.ra(b)));b.type==Eg?(this.s=b=this.Ka(b),d=this.B(b)):b.type==Fg&&this.cb(b);return!d}li.prototype.B=function(b){return b};function oi(b){li.call(this,{qb:pi,Db:qi,xb:ri});b=b?b:{};this.a=b.Ag;this.b=this.h=null;this.Ma=b.Qa?b.Qa:gi;this.i=!1}Q(oi,li);function qi(b){var d=ni(this.g);this.a&&this.a.a.push(d[0],d[1],Date.now());if(this.b){var e=this.b[0]-d[0],g=d[1]-this.b[1];b=b.map;var k=V(b),p=k.Z(),g=e=[e,g],q=p.J;g[0]*=q;g[1]*=q;Qb(e,p.rotation);Nb(e,p.T);e=k.b.T(e);b.P();k.Oa(e)}this.b=d}
function ri(b){b=b.map;var d=V(b);if(0===this.g.length){var e;if(e=!this.i&&this.a)if(e=this.a,6>e.a.length)e=!1;else{var g=Date.now()-100,k=e.a.length-3;if(e.a[k+2]<g)e=!1;else{for(var p=k-3;0<p&&e.a[p+2]>g;)p-=3;var g=e.a[k+2]-e.a[p+2],q=e.a[k]-e.a[p],k=e.a[k+1]-e.a[p+1];e.b=Math.atan2(k,q);e.f=Math.sqrt(q*q+k*k)/g;e=.05<e.f}}e&&(e=(.05-this.a.f)/-.005,k=this.a.b,p=$d(d),this.h=Wh(this.a,p),b.eb(this.h),p=si(b,p),e=b.Ea([p[0]-e*Math.cos(k),p[1]-e*Math.sin(k)]),e=d.b.T(e),d.Oa(e));de(d,-1);b.P();
return!1}this.b=null;return!0}function pi(b){if(0<this.g.length&&this.Ma(b)){var d=b.map,e=V(d);this.b=null;this.s||de(e,1);d.P();this.h&&ed(d.B,this.h)&&(e.Oa(b.Sb.L.T),this.h=null);this.a&&(b=this.a,b.a.length=0,b.b=0,b.f=0);this.i=1<this.g.length;return!0}return!1}oi.prototype.B=rd;function ti(b){b=b?b:{};li.call(this,{qb:ui,Db:vi,xb:wi});this.Ma=b.Qa?b.Qa:ci;this.a=void 0;this.b=void 0!==b.duration?b.duration:250}Q(ti,li);function vi(b){if(ki(b)){var d=b.map,e=xi(d);b=b.f;e=Math.atan2(e[1]/2-b[1],b[0]-e[0]/2);if(void 0!==this.a){b=e-this.a;var g=V(d),k=g.ga();d.P();Yh(d,g,k-b)}this.a=e}}function wi(b){if(!ki(b))return!0;b=b.map;var d=V(b);de(d,-1);var e=d.ga(),g=this.b,e=d.Fd(e,0);Yh(b,d,e,void 0,g);return!1}
function ui(b){return ki(b)&&ei(b)&&this.Ma(b)?(b=b.map,de(V(b),1),b.P(),this.a=void 0,!0):!1}ti.prototype.B=rd;function yi(b){this.g=null;this.f=document.createElement("div");this.f.style.position="absolute";this.f.className="ol-box "+b;this.b=this.h=this.a=null}Q(yi,eb);yi.prototype.W=function(){this.ja(null)};function zi(b){var d=b.h,e=b.b;b=b.f.style;b.left=Math.min(d[0],e[0])+"px";b.top=Math.min(d[1],e[1])+"px";b.width=Math.abs(e[0]-d[0])+"px";b.height=Math.abs(e[1]-d[1])+"px"}
yi.prototype.ja=function(b){if(this.a){this.a.u.removeChild(this.f);var d=this.f.style;d.left=d.top=d.width=d.height="inherit"}(this.a=b)&&this.a.u.appendChild(this.f)};function Ai(b){var d=b.h,e=b.b,d=[d,[d[0],e[1]],e,[e[0],d[1]]].map(b.a.Ea,b.a);d[4]=d[0].slice();b.g?b.g.za([d]):b.g=new Ud([d])}yi.prototype.C=function(){return this.g};function Bi(b){fb.call(this,b)}Q(Bi,fb);function Ci(b){li.call(this,{qb:Di,Db:Ei,xb:Fi});b=b?b:{};this.a=new yi(b.className||"ol-dragbox");this.b=null;this.Ma=b.Qa?b.Qa:qd;this.u=b.xf?b.xf:Gi}Q(Ci,li);function Gi(b,d,e){b=e[0]-d[0];d=e[1]-d[1];return 64<=b*b+d*d}function Ei(b){if(ki(b)){var d=this.a;b=b.f;d.h=this.b;d.b=b;Ai(d);zi(d);U(this,new Bi("boxdrag"))}}Ci.prototype.C=function(){return this.a.C()};Ci.prototype.j=db;
function Fi(b){if(!ki(b))return!0;this.a.ja(null);this.u(b,this.b,b.f)&&(this.j(b),U(this,new Bi("boxend")));return!1}function Di(b){if(ki(b)&&ei(b)&&this.Ma(b)){this.b=b.f;this.a.ja(b.map);b=this.a;var d=this.b;b.h=this.b;b.b=d;Ai(b);zi(b);U(this,new Bi("boxstart"));return!0}return!1};function Hi(b){b=b?b:{};var d=b.Qa?b.Qa:ii;this.h=void 0!==b.duration?b.duration:200;this.i=void 0!==b.Ab?b.Ab:!1;Ci.call(this,{Qa:d,className:b.className||"ol-dragzoom"})}Q(Hi,Ci);
Hi.prototype.j=function(){var b=this.da(),d=V(b),e=xi(b),g=this.C().I();if(this.i){var k=ae(d,e),g=[si(b,fc(g)),si(b,[g[2],g[3]])],p=ac(Infinity,Infinity,-Infinity,-Infinity,void 0),q,u;q=0;for(u=g.length;q<u;++q)Vb(p,g[q]);pc(k,1/be(p,e));g=k}e=d.kb(be(g,e));k=d.N();p=$d(d);b.eb(Rh({J:k,duration:this.h,Na:Mh}));b.eb(Ph({source:p,duration:this.h,Na:Mh}));d.Oa(lc(g));ee(d,e)};function Ii(b){Xh.call(this,{handleEvent:Ji});b=b||{};this.a=function(b){return gi.call(this,b)&&ji.call(this,b)};this.Ma=void 0!==b.Qa?b.Qa:this.a;this.b=void 0!==b.duration?b.duration:100;this.g=void 0!==b.sh?b.sh:128}Q(Ii,Xh);
function Ji(b){var d=!1;if("keydown"==b.type){var e=b.a.keyCode;if(this.Ma(b)&&(40==e||37==e||39==e||38==e)){var g=b.map,d=V(g),k=d.N()*this.g,p=0,q=0;40==e?q=-k:37==e?p=-k:39==e?p=k:q=k;e=[p,q];Qb(e,d.ga());k=this.b;if(p=$d(d))k&&0<k&&g.eb(Ph({source:p,duration:k,Na:Oh})),g=d.b.T([p[0]+e[0],p[1]+e[1]]),d.Oa(g);b.preventDefault();d=!0}}return!d};function Ki(b){Xh.call(this,{handleEvent:Li});b=b?b:{};this.Ma=b.Qa?b.Qa:ji;this.a=b.Qb?b.Qb:1;this.b=void 0!==b.duration?b.duration:100}Q(Ki,Xh);function Li(b){var d=!1;if("keydown"==b.type||"keypress"==b.type){var e=b.a.charCode;if(this.Ma(b)&&(43==e||45==e)){d=b.map;e=43==e?this.a:-this.a;d.P();var g=V(d);Zh(d,g,e,void 0,this.b);b.preventDefault();d=!0}}return!d};function Mi(b){Xh.call(this,{handleEvent:Ni});b=b||{};this.a=0;this.j=void 0!==b.duration?b.duration:250;this.l=void 0!==b.fi?b.fi:!0;this.g=null;this.h=this.b=void 0}Q(Mi,Xh);
function Ni(b){var d=!1;if("wheel"==b.type||"mousewheel"==b.type){var d=b.map,e=b.a;this.l&&(this.g=b.b);var g;"wheel"==b.type?(g=e.deltaY,Gf&&e.deltaMode===H.WheelEvent.DOM_DELTA_PIXEL&&(g/=Jf),e.deltaMode===H.WheelEvent.DOM_DELTA_LINE&&(g*=40)):"mousewheel"==b.type&&(g=-e.wheelDeltaY,Hf&&(g/=3));this.a+=g;void 0===this.b&&(this.b=Date.now());g=Math.max(80-(Date.now()-this.b),0);H.clearTimeout(this.h);this.h=H.setTimeout(this.i.bind(this,d),g);b.preventDefault();d=!0}return!d}
Mi.prototype.i=function(b){var d=Kb(this.a,-1,1),e=V(b);b.P();Zh(b,e,-d,this.g,this.j);this.a=0;this.g=null;this.h=this.b=void 0};function Oi(b){li.call(this,{qb:Pi,Db:Qi,xb:Ri});b=b||{};this.b=null;this.h=void 0;this.a=!1;this.i=0;this.l=void 0!==b.threshold?b.threshold:.3;this.j=void 0!==b.duration?b.duration:250}Q(Oi,li);
function Qi(b){var d=0,e=this.g[0],g=this.g[1],e=Math.atan2(g.clientY-e.clientY,g.clientX-e.clientX);void 0!==this.h&&(d=e-this.h,this.i+=d,!this.a&&Math.abs(this.i)>this.l&&(this.a=!0));this.h=e;b=b.map;e=b.a.getBoundingClientRect();g=ni(this.g);g[0]-=e.left;g[1]-=e.top;this.b=b.Ea(g);this.a&&(e=V(b),g=e.ga(),b.P(),Yh(b,e,g+d,this.b))}function Ri(b){if(2>this.g.length){b=b.map;var d=V(b);de(d,-1);if(this.a){var e=d.ga(),g=this.b,k=this.j,e=d.Fd(e,0);Yh(b,d,e,g,k)}return!1}return!0}
function Pi(b){return 2<=this.g.length?(b=b.map,this.b=null,this.h=void 0,this.a=!1,this.i=0,this.s||de(V(b),1),b.P(),!0):!1}Oi.prototype.B=rd;function Si(b){li.call(this,{qb:Ti,Db:Ui,xb:Vi});b=b?b:{};this.b=null;this.i=void 0!==b.duration?b.duration:400;this.a=void 0;this.h=1}Q(Si,li);function Ui(b){var d=1,e=this.g[0],g=this.g[1],k=e.clientX-g.clientX,e=e.clientY-g.clientY,k=Math.sqrt(k*k+e*e);void 0!==this.a&&(d=this.a/k);this.a=k;1!=d&&(this.h=d);b=b.map;var k=V(b),e=k.N(),g=b.a.getBoundingClientRect(),p=ni(this.g);p[0]-=g.left;p[1]-=g.top;this.b=b.Ea(p);b.P();$h(b,k,e*d,this.b)}
function Vi(b){if(2>this.g.length){b=b.map;var d=V(b);de(d,-1);var e=d.N(),g=this.b,k=this.i,e=d.kb(e,0,this.h-1);$h(b,d,e,g,k);return!1}return!0}function Ti(b){return 2<=this.g.length?(b=b.map,this.b=null,this.a=void 0,this.h=1,this.s||de(V(b),1),b.P(),!0):!1}Si.prototype.B=rd;function Wi(b){var d=b||{};b=ua({},d);delete b.Fb;d=d.Fb;Sc.call(this,b);this.g=[];this.a={};S(this,qb("layers"),this.eg,this);d?Array.isArray(d)&&(d=new sb(d.slice())):d=new sb;this.set("layers",d)}Q(Wi,Sc);A=Wi.prototype;A.fd=function(){this.get("visible")&&this.A()};
A.eg=function(){this.g.forEach(Ba);this.g.length=0;var b=this.get("layers");this.g.push(S(b,"add",this.dg,this),S(b,"remove",this.fg,this));for(var d in this.a)this.a[d].forEach(Ba);va(this.a);var b=b.a,e,g;d=0;for(e=b.length;d<e;d++)g=b[d],this.a[L(g).toString()]=[S(g,"propertychange",this.fd,this),S(g,"change",this.fd,this)];this.A()};A.dg=function(b){b=b.element;var d=L(b).toString();this.a[d]=[S(b,"propertychange",this.fd,this),S(b,"change",this.fd,this)];this.A()};
A.fg=function(b){b=L(b.element).toString();this.a[b].forEach(Ba);delete this.a[b];this.A()};A.Md=function(b){var d=void 0!==b?b:[],e=d.length;this.get("layers").forEach(function(b){b.Md(d)});b=Tc(this);var g,k;for(g=d.length;e<g;e++)k=d[e],k.opacity*=b.opacity,k.visible=k.visible&&b.visible,k.Gb=Math.min(k.Gb,b.Gb),k.yb=Math.max(k.yb,b.yb),void 0!==b.F&&(k.F=void 0!==k.F?nc(k.F,b.F):b.F);return d};A.Od=function(){return"ready"};function Xi(b){uc.call(this,{code:b,units:"m",F:Yi,global:!0,gi:Zi})}Q(Xi,uc);Xi.prototype.jc=function(b,d){return b/Lb(d[1]/6378137)};var $i=6378137*Math.PI,Yi=[-$i,-$i,$i,$i],Zi=[-180,-85,180,85],aj="EPSG:3857 EPSG:102100 EPSG:102113 EPSG:900913 urn:ogc:def:crs:EPSG:6.18:3:3857 urn:ogc:def:crs:EPSG::3857 http://www.opengis.net/gml/srs/epsg.xml#3857".split(" ").map(function(b){return new Xi(b)});
function bj(b,d,e){var g=b.length;e=1<e?e:2;void 0===d&&(2<e?d=b.slice():d=Array(g));for(var k=0;k<g;k+=e)d[k]=6378137*Math.PI*b[k]/180,d[k+1]=6378137*Math.log(Math.tan(Math.PI*(b[k+1]+90)/360));return d}function cj(b,d,e){var g=b.length;e=1<e?e:2;void 0===d&&(2<e?d=b.slice():d=Array(g));for(var k=0;k<g;k+=e)d[k]=180*b[k]/(6378137*Math.PI),d[k+1]=360*Math.atan(Math.exp(b[k+1]/6378137))/Math.PI-90;return d};var dj=new qc(6378137);function ej(b,d){uc.call(this,{code:b,units:"degrees",F:fj,Hi:d,global:!0,Me:gj,gi:fj})}Q(ej,uc);ej.prototype.jc=function(b){return b};var fj=[-180,-90,180,90],gj=Math.PI*dj.Xb/180,hj=[new ej("CRS:84"),new ej("EPSG:4326","neu"),new ej("urn:ogc:def:crs:EPSG::4326","neu"),new ej("urn:ogc:def:crs:EPSG:6.6:4326","neu"),new ej("urn:ogc:def:crs:OGC:1.3:CRS84"),new ej("urn:ogc:def:crs:OGC:2:84"),new ej("http://www.opengis.net/gml/srs/epsg.xml#4326","neu"),new ej("urn:x-ogc:def:crs:EPSG:4326","neu")];function ij(b){Wc.call(this,b?b:{})}Q(ij,Wc);function jj(b){return"string"===typeof b||b instanceof CanvasPattern||b instanceof CanvasGradient?b:vh(b)};var kj=[0,0,0,1],lj=[],mj=[0,0,0,1];function nj(b,d,e,g){0!==d&&(b.translate(e,g),b.rotate(d),b.translate(-e,-g))};function oj(b){b=b||{};this.a=void 0!==b.color?b.color:null;this.f=void 0}oj.prototype.Qc=function(b){this.a=b;this.f=void 0};function pj(){this.f=-1};function qj(){this.f=-1;this.f=64;this.a=Array(4);this.h=Array(this.f);this.g=this.b=0;this.a[0]=1732584193;this.a[1]=4023233417;this.a[2]=2562383102;this.a[3]=271733878;this.g=this.b=0}Q(qj,pj);
function rj(b,d,e){e||(e=0);var g=Array(16);if(ha(d))for(var k=0;16>k;++k)g[k]=d.charCodeAt(e++)|d.charCodeAt(e++)<<8|d.charCodeAt(e++)<<16|d.charCodeAt(e++)<<24;else for(k=0;16>k;++k)g[k]=d[e++]|d[e++]<<8|d[e++]<<16|d[e++]<<24;d=b.a[0];e=b.a[1];var k=b.a[2],p=b.a[3],q=0,q=d+(p^e&(k^p))+g[0]+3614090360&4294967295;d=e+(q<<7&4294967295|q>>>25);q=p+(k^d&(e^k))+g[1]+3905402710&4294967295;p=d+(q<<12&4294967295|q>>>20);q=k+(e^p&(d^e))+g[2]+606105819&4294967295;k=p+(q<<17&4294967295|q>>>15);q=e+(d^k&(p^
d))+g[3]+3250441966&4294967295;e=k+(q<<22&4294967295|q>>>10);q=d+(p^e&(k^p))+g[4]+4118548399&4294967295;d=e+(q<<7&4294967295|q>>>25);q=p+(k^d&(e^k))+g[5]+1200080426&4294967295;p=d+(q<<12&4294967295|q>>>20);q=k+(e^p&(d^e))+g[6]+2821735955&4294967295;k=p+(q<<17&4294967295|q>>>15);q=e+(d^k&(p^d))+g[7]+4249261313&4294967295;e=k+(q<<22&4294967295|q>>>10);q=d+(p^e&(k^p))+g[8]+1770035416&4294967295;d=e+(q<<7&4294967295|q>>>25);q=p+(k^d&(e^k))+g[9]+2336552879&4294967295;p=d+(q<<12&4294967295|q>>>20);q=k+
(e^p&(d^e))+g[10]+4294925233&4294967295;k=p+(q<<17&4294967295|q>>>15);q=e+(d^k&(p^d))+g[11]+2304563134&4294967295;e=k+(q<<22&4294967295|q>>>10);q=d+(p^e&(k^p))+g[12]+1804603682&4294967295;d=e+(q<<7&4294967295|q>>>25);q=p+(k^d&(e^k))+g[13]+4254626195&4294967295;p=d+(q<<12&4294967295|q>>>20);q=k+(e^p&(d^e))+g[14]+2792965006&4294967295;k=p+(q<<17&4294967295|q>>>15);q=e+(d^k&(p^d))+g[15]+1236535329&4294967295;e=k+(q<<22&4294967295|q>>>10);q=d+(k^p&(e^k))+g[1]+4129170786&4294967295;d=e+(q<<5&4294967295|
q>>>27);q=p+(e^k&(d^e))+g[6]+3225465664&4294967295;p=d+(q<<9&4294967295|q>>>23);q=k+(d^e&(p^d))+g[11]+643717713&4294967295;k=p+(q<<14&4294967295|q>>>18);q=e+(p^d&(k^p))+g[0]+3921069994&4294967295;e=k+(q<<20&4294967295|q>>>12);q=d+(k^p&(e^k))+g[5]+3593408605&4294967295;d=e+(q<<5&4294967295|q>>>27);q=p+(e^k&(d^e))+g[10]+38016083&4294967295;p=d+(q<<9&4294967295|q>>>23);q=k+(d^e&(p^d))+g[15]+3634488961&4294967295;k=p+(q<<14&4294967295|q>>>18);q=e+(p^d&(k^p))+g[4]+3889429448&4294967295;e=k+(q<<20&4294967295|
q>>>12);q=d+(k^p&(e^k))+g[9]+568446438&4294967295;d=e+(q<<5&4294967295|q>>>27);q=p+(e^k&(d^e))+g[14]+3275163606&4294967295;p=d+(q<<9&4294967295|q>>>23);q=k+(d^e&(p^d))+g[3]+4107603335&4294967295;k=p+(q<<14&4294967295|q>>>18);q=e+(p^d&(k^p))+g[8]+1163531501&4294967295;e=k+(q<<20&4294967295|q>>>12);q=d+(k^p&(e^k))+g[13]+2850285829&4294967295;d=e+(q<<5&4294967295|q>>>27);q=p+(e^k&(d^e))+g[2]+4243563512&4294967295;p=d+(q<<9&4294967295|q>>>23);q=k+(d^e&(p^d))+g[7]+1735328473&4294967295;k=p+(q<<14&4294967295|
q>>>18);q=e+(p^d&(k^p))+g[12]+2368359562&4294967295;e=k+(q<<20&4294967295|q>>>12);q=d+(e^k^p)+g[5]+4294588738&4294967295;d=e+(q<<4&4294967295|q>>>28);q=p+(d^e^k)+g[8]+2272392833&4294967295;p=d+(q<<11&4294967295|q>>>21);q=k+(p^d^e)+g[11]+1839030562&4294967295;k=p+(q<<16&4294967295|q>>>16);q=e+(k^p^d)+g[14]+4259657740&4294967295;e=k+(q<<23&4294967295|q>>>9);q=d+(e^k^p)+g[1]+2763975236&4294967295;d=e+(q<<4&4294967295|q>>>28);q=p+(d^e^k)+g[4]+1272893353&4294967295;p=d+(q<<11&4294967295|q>>>21);q=k+(p^
d^e)+g[7]+4139469664&4294967295;k=p+(q<<16&4294967295|q>>>16);q=e+(k^p^d)+g[10]+3200236656&4294967295;e=k+(q<<23&4294967295|q>>>9);q=d+(e^k^p)+g[13]+681279174&4294967295;d=e+(q<<4&4294967295|q>>>28);q=p+(d^e^k)+g[0]+3936430074&4294967295;p=d+(q<<11&4294967295|q>>>21);q=k+(p^d^e)+g[3]+3572445317&4294967295;k=p+(q<<16&4294967295|q>>>16);q=e+(k^p^d)+g[6]+76029189&4294967295;e=k+(q<<23&4294967295|q>>>9);q=d+(e^k^p)+g[9]+3654602809&4294967295;d=e+(q<<4&4294967295|q>>>28);q=p+(d^e^k)+g[12]+3873151461&4294967295;
p=d+(q<<11&4294967295|q>>>21);q=k+(p^d^e)+g[15]+530742520&4294967295;k=p+(q<<16&4294967295|q>>>16);q=e+(k^p^d)+g[2]+3299628645&4294967295;e=k+(q<<23&4294967295|q>>>9);q=d+(k^(e|~p))+g[0]+4096336452&4294967295;d=e+(q<<6&4294967295|q>>>26);q=p+(e^(d|~k))+g[7]+1126891415&4294967295;p=d+(q<<10&4294967295|q>>>22);q=k+(d^(p|~e))+g[14]+2878612391&4294967295;k=p+(q<<15&4294967295|q>>>17);q=e+(p^(k|~d))+g[5]+4237533241&4294967295;e=k+(q<<21&4294967295|q>>>11);q=d+(k^(e|~p))+g[12]+1700485571&4294967295;d=e+
(q<<6&4294967295|q>>>26);q=p+(e^(d|~k))+g[3]+2399980690&4294967295;p=d+(q<<10&4294967295|q>>>22);q=k+(d^(p|~e))+g[10]+4293915773&4294967295;k=p+(q<<15&4294967295|q>>>17);q=e+(p^(k|~d))+g[1]+2240044497&4294967295;e=k+(q<<21&4294967295|q>>>11);q=d+(k^(e|~p))+g[8]+1873313359&4294967295;d=e+(q<<6&4294967295|q>>>26);q=p+(e^(d|~k))+g[15]+4264355552&4294967295;p=d+(q<<10&4294967295|q>>>22);q=k+(d^(p|~e))+g[6]+2734768916&4294967295;k=p+(q<<15&4294967295|q>>>17);q=e+(p^(k|~d))+g[13]+1309151649&4294967295;
e=k+(q<<21&4294967295|q>>>11);q=d+(k^(e|~p))+g[4]+4149444226&4294967295;d=e+(q<<6&4294967295|q>>>26);q=p+(e^(d|~k))+g[11]+3174756917&4294967295;p=d+(q<<10&4294967295|q>>>22);q=k+(d^(p|~e))+g[2]+718787259&4294967295;k=p+(q<<15&4294967295|q>>>17);q=e+(p^(k|~d))+g[9]+3951481745&4294967295;b.a[0]=b.a[0]+d&4294967295;b.a[1]=b.a[1]+(k+(q<<21&4294967295|q>>>11))&4294967295;b.a[2]=b.a[2]+k&4294967295;b.a[3]=b.a[3]+p&4294967295}
function sj(b,d){var e;void 0===e&&(e=d.length);for(var g=e-b.f,k=b.h,p=b.b,q=0;q<e;){if(0==p)for(;q<=g;)rj(b,d,q),q+=b.f;if(ha(d))for(;q<e;){if(k[p++]=d.charCodeAt(q++),p==b.f){rj(b,k);p=0;break}}else for(;q<e;)if(k[p++]=d[q++],p==b.f){rj(b,k);p=0;break}}b.b=p;b.g+=e};function tj(b){b=b||{};this.h=void 0!==b.color?b.color:null;this.a=b.lineCap;this.j=void 0!==b.U?b.U:null;this.f=b.lineJoin;this.b=b.miterLimit;this.i=b.width;this.g=void 0}tj.prototype.Qc=function(b){this.h=b;this.g=void 0};tj.prototype.setLineDash=function(b){this.j=b;this.g=void 0};tj.prototype.ac=function(b){this.i=b;this.g=void 0};function uj(b){b=b||{};this.b=this.a=this.g=null;this.h=void 0!==b.fill?b.fill:null;this.Ja=void 0!==b.stroke?b.stroke:null;this.f=b.Xb;this.$=[0,0];this.w=this.j=this.i=null;var d=b.Fi,e,g=null,k,p=0;this.Ja&&(k=vh(this.Ja.h),p=this.Ja.i,void 0===p&&(p=1),g=this.Ja.j,Kf||(g=null));var q=2*(this.f+p)+1;k={strokeStyle:k,cf:p,size:q,U:g};if(void 0===d)this.a=document.createElement("CANVAS"),this.a.height=q,this.a.width=q,e=q=this.a.width,d=this.a.getContext("2d"),this.lb(k,d,0,0),this.h?this.b=this.a:
(d=this.b=document.createElement("CANVAS"),d.height=k.size,d.width=k.size,d=d.getContext("2d"),this.ze(k,d,0,0));else{q=Math.round(q);(g=!this.h)&&(e=this.ze.bind(this,k));if(this.Ja){p=this.Ja;if(void 0===p.g){var u="s"+(p.h?vh(p.h):"-")+","+(void 0!==p.a?p.a.toString():"-")+","+(p.j?p.j.toString():"-")+","+(void 0!==p.f?p.f:"-")+","+(void 0!==p.b?p.b.toString():"-")+","+(void 0!==p.i?p.i.toString():"-"),v=new qj;sj(v,u);var w=Array((56>v.b?v.f:2*v.f)-v.b);w[0]=128;for(u=1;u<w.length-8;++u)w[u]=
0;for(var z=8*v.g,u=w.length-8;u<w.length;++u)w[u]=z&255,z/=256;sj(v,w);w=Array(16);for(u=z=0;4>u;++u)for(var B=0;32>B;B+=8)w[z++]=v.a[u]>>>B&255;if(8192>=w.length)v=String.fromCharCode.apply(null,w);else for(v="",u=0;u<w.length;u+=8192)v+=String.fromCharCode.apply(null,ke(w,u,u+8192));p.g=v}p=p.g}else p="-";this.h?(v=this.h,void 0===v.f&&(v.f=v.a instanceof CanvasPattern||v.a instanceof CanvasGradient?L(v.a).toString():"f"+(v.a?vh(v.a):"-")),v=v.f):v="-";this.g&&p==this.g[1]&&v==this.g[2]&&this.f==
this.g[3]||(this.g=["c"+p+v+(void 0!==this.f?this.f.toString():"-"),p,v,this.f]);k=d.add(this.g[0],q,q,this.lb.bind(this,k),e);this.a=k.Sa;this.$=[k.offsetX,k.offsetY];e=k.Sa.width;g?this.b=k.Mi:this.b=this.a}this.i=[q/2,q/2];this.j=[q,q];this.w=[e,e];wh.call(this,{opacity:1,Ih:!1,rotation:0,scale:1,ae:void 0!==b.ae?b.ae:!0})}Q(uj,wh);A=uj.prototype;A.ob=function(){return this.$};A.Ec=function(){return this.f};A.S=function(){return this.Ja};A.load=db;A.ci=db;
A.lb=function(b,d,e,g){d.setTransform(1,0,0,1,0,0);d.translate(e,g);d.beginPath();d.arc(b.size/2,b.size/2,this.f,0,2*Math.PI,!0);this.h&&(d.fillStyle=jj(this.h.a),d.fill());this.Ja&&(d.strokeStyle=b.strokeStyle,d.lineWidth=b.cf,b.U&&d.setLineDash(b.U),d.stroke());d.closePath()};
A.ze=function(b,d,e,g){d.setTransform(1,0,0,1,0,0);d.translate(e,g);d.beginPath();d.arc(b.size/2,b.size/2,this.f,0,2*Math.PI,!0);d.fillStyle=vh(kj);d.fill();this.Ja&&(d.strokeStyle=b.strokeStyle,d.lineWidth=b.cf,b.U&&d.setLineDash(b.U),d.stroke());d.closePath()};function vj(b){b=b||{};this.h=null;this.b=wj;void 0!==b.ta&&xj(this,b.ta);this.f=void 0!==b.fill?b.fill:null;this.g=void 0!==b.Sa?b.Sa:null;this.Ja=void 0!==b.stroke?b.stroke:null;this.i=void 0!==b.text?b.text:null;this.a=b.zIndex}vj.prototype.C=function(){return this.h};vj.prototype.S=function(){return this.Ja};vj.prototype.H=function(){return this.i};function xj(b,d){ja(d)?b.b=d:"string"===typeof d?b.b=function(b){return b.get(d)}:d?void 0!==d&&(b.b=function(){return d}):b.b=wj;b.h=d}
function yj(b){if(!ja(b)){var d;d=Array.isArray(b)?b:[b];b=function(){return d}}return b}var zj=null;function Aj(){if(!zj){var b=new oj({color:"rgba(255,255,255,0.4)"}),d=new tj({color:"#3399CC",width:1.25});zj=[new vj({Sa:new uj({fill:b,stroke:d,Xb:5}),fill:b,stroke:d})]}return zj}
function Bj(){var b={},d=[255,255,255,1],e=[0,153,255,1];b.Polygon=[new vj({fill:new oj({color:[255,255,255,.5]})})];b.MultiPolygon=b.Polygon;b.LineString=[new vj({stroke:new tj({color:d,width:5})}),new vj({stroke:new tj({color:e,width:3})})];b.MultiLineString=b.LineString;b.Circle=b.Polygon.concat(b.LineString);b.Point=[new vj({Sa:new uj({Xb:6,fill:new oj({color:e}),stroke:new tj({color:d,width:1.5})}),zIndex:Infinity})];b.MultiPoint=b.Point;b.GeometryCollection=b.Polygon.concat(b.LineString,b.Point);
return b}function wj(b){return b.C()};function Cj(b){b=b?b:{};var d=ua({},b);delete d.style;delete d.af;delete d.ee;delete d.fe;Wc.call(this,d);this.a=void 0!==b.af?b.af:100;this.s=null;this.i=void 0;d=b.style;this.s=void 0!==d?d:Aj;this.i=null===d?void 0:yj(this.s);this.A();this.j=void 0!==b.ee?b.ee:!1;this.l=void 0!==b.fe?b.fe:!1}Q(Cj,Wc);function Dj(b,d,e,g,k){this.g=b;this.ea=d;this.j=e;this.G=g;this.gc=k;this.h=this.a=this.f=this.wa=this.la=this.ra=null;this.Ka=this.bb=this.w=this.R=this.M=this.aa=0;this.La=!1;this.i=this.cb=0;this.tb=!1;this.V=0;this.b="";this.s=this.B=this.Ob=this.ub=0;this.ca=this.u=this.l=null;this.$=[];this.Pb=Ab()}Q(Dj,Uc);
function Ej(b,d,e){if(b.h){d=td(d,0,e,2,b.G,b.$);e=b.g;var g=b.Pb,k=e.globalAlpha;1!=b.w&&(e.globalAlpha=k*b.w);var p=b.cb;b.La&&(p+=b.gc);var q,u;q=0;for(u=d.length;q<u;q+=2){var v=d[q]-b.aa,w=d[q+1]-b.M;b.tb&&(v=Math.round(v),w=Math.round(w));if(0!==p||1!=b.i){var z=v+b.aa,B=w+b.M;ih(g,z,B,b.i,b.i,p,-z,-B);e.setTransform(g[0],g[1],g[4],g[5],g[12],g[13])}e.drawImage(b.h,b.bb,b.Ka,b.V,b.R,v,w,b.V,b.R)}0===p&&1==b.i||e.setTransform(1,0,0,1,0,0);1!=b.w&&(e.globalAlpha=k)}}
function Fj(b,d,e,g){var k=0;if(b.ca&&""!==b.b){b.l&&Gj(b,b.l);b.u&&Hj(b,b.u);var p=b.ca,q=b.g,u=b.wa;u?(u.font!=p.font&&(u.font=q.font=p.font),u.textAlign!=p.textAlign&&(u.textAlign=q.textAlign=p.textAlign),u.textBaseline!=p.textBaseline&&(u.textBaseline=q.textBaseline=p.textBaseline)):(q.font=p.font,q.textAlign=p.textAlign,q.textBaseline=p.textBaseline,b.wa={font:p.font,textAlign:p.textAlign,textBaseline:p.textBaseline});d=td(d,k,e,g,b.G,b.$);for(p=b.g;k<e;k+=g){q=d[k]+b.ub;u=d[k+1]+b.Ob;if(0!==
b.B||1!=b.s){var v=ih(b.Pb,q,u,b.s,b.s,b.B,-q,-u);p.setTransform(v[0],v[1],v[4],v[5],v[12],v[13])}b.u&&p.strokeText(b.b,q,u);b.l&&p.fillText(b.b,q,u)}0===b.B&&1==b.s||p.setTransform(1,0,0,1,0,0)}}function Ij(b,d,e,g,k,p){var q=b.g;b=td(d,e,g,k,b.G,b.$);q.moveTo(b[0],b[1]);d=b.length;p&&(d-=2);for(e=2;e<d;e+=2)q.lineTo(b[e],b[e+1]);p&&q.closePath();return g}function Jj(b,d,e,g,k){var p,q;p=0;for(q=g.length;p<q;++p)e=Ij(b,d,e,g[p],k,!0);return e}A=Dj.prototype;
A.ye=function(b){if(oc(this.j,b.I())){if(this.f||this.a){this.f&&Gj(this,this.f);this.a&&Hj(this,this.a);var d;d=this.G;var e=this.$,g=b.a;d=g?td(g,0,g.length,b.D,d,e):null;e=d[2]-d[0];g=d[3]-d[1];e=Math.sqrt(e*e+g*g);g=this.g;g.beginPath();g.arc(d[0],d[1],e,0,2*Math.PI);this.f&&g.fill();this.a&&g.stroke()}""!==this.b&&Fj(this,Kj(b),2,2)}};A.Jd=function(b){var d=b.a;b=b.D;this.h&&Ej(this,d,d.length);""!==this.b&&Fj(this,d,d.length,b)};
A.Id=function(b){var d=b.a;b=b.D;this.h&&Ej(this,d,d.length);""!==this.b&&Fj(this,d,d.length,b)};A.Ae=function(b){if(oc(this.j,b.I())){if(this.a){Hj(this,this.a);var d=this.g,e=b.a;d.beginPath();Ij(this,e,0,e.length,b.D,!1);d.stroke()}""!==this.b&&(b=Lj(b),Fj(this,b,2,2))}};
A.Be=function(b){var d=b.I();if(oc(this.j,d)){if(this.a){Hj(this,this.a);var d=this.g,e=b.a,g=0,k=b.Dc(),p=b.D;d.beginPath();var q,u;q=0;for(u=k.length;q<u;++q)g=Ij(this,e,g,k[q],p,!1);d.stroke()}""!==this.b&&(b=Mj(b),Fj(this,b,b.length,2))}};A.De=function(b){if(oc(this.j,b.I())){if(this.a||this.f){this.f&&Gj(this,this.f);this.a&&Hj(this,this.a);var d=this.g;d.beginPath();Jj(this,Wd(b),0,b.Dc(),b.D);this.f&&d.fill();this.a&&d.stroke()}""!==this.b&&(b=Xd(b),Fj(this,b,2,2))}};
A.Ce=function(b){if(oc(this.j,b.I())){if(this.a||this.f){this.f&&Gj(this,this.f);this.a&&Hj(this,this.a);var d=this.g,e=Nj(b),g=0,k=b.b,p=b.D,q,u;q=0;for(u=k.length;q<u;++q){var v=k[q];d.beginPath();g=Jj(this,e,g,v,p);this.f&&d.fill();this.a&&d.stroke()}}""!==this.b&&(b=Oj(b),Fj(this,b,b.length,2))}};function Gj(b,d){var e=b.g,g=b.ra;g?g.fillStyle!=d.fillStyle&&(g.fillStyle=e.fillStyle=d.fillStyle):(e.fillStyle=d.fillStyle,b.ra={fillStyle:d.fillStyle})}
function Hj(b,d){var e=b.g,g=b.la;g?(g.lineCap!=d.lineCap&&(g.lineCap=e.lineCap=d.lineCap),Kf&&!fd(g.U,d.U)&&e.setLineDash(g.U=d.U),g.lineJoin!=d.lineJoin&&(g.lineJoin=e.lineJoin=d.lineJoin),g.lineWidth!=d.lineWidth&&(g.lineWidth=e.lineWidth=d.lineWidth),g.miterLimit!=d.miterLimit&&(g.miterLimit=e.miterLimit=d.miterLimit),g.strokeStyle!=d.strokeStyle&&(g.strokeStyle=e.strokeStyle=d.strokeStyle)):(e.lineCap=d.lineCap,Kf&&e.setLineDash(d.U),e.lineJoin=d.lineJoin,e.lineWidth=d.lineWidth,e.miterLimit=
d.miterLimit,e.strokeStyle=d.strokeStyle,b.la={lineCap:d.lineCap,U:d.U,lineJoin:d.lineJoin,lineWidth:d.lineWidth,miterLimit:d.miterLimit,strokeStyle:d.strokeStyle})}A.$b=function(b,d){if(b){var e=b.a;this.f={fillStyle:jj(e?e:kj)}}else this.f=null;if(d){var e=d.h,g=d.a,k=d.j,p=d.f,q=d.i,u=d.b;this.a={lineCap:void 0!==g?g:"round",U:k?k:lj,lineJoin:void 0!==p?p:"round",lineWidth:this.ea*(void 0!==q?q:1),miterLimit:void 0!==u?u:10,strokeStyle:vh(e?e:mj)}}else this.a=null};
A.pd=function(b){if(b){var d=b.i,e=b.a,g=b.ob(),k=b.j;this.aa=d[0];this.M=d[1];this.R=k[1];this.h=e;this.w=b.s;this.bb=g[0];this.Ka=g[1];this.La=b.u;this.cb=b.ga();this.i=b.l;this.tb=b.B;this.V=k[0]}else this.h=null};
A.Lb=function(b){if(b){var d=b.a;d?(d=d.a,this.l={fillStyle:jj(d?d:kj)}):this.l=null;var e=b.S();if(e){var d=e.h,g=e.a,k=e.j,p=e.f,q=e.i,e=e.b;this.u={lineCap:void 0!==g?g:"round",U:k?k:lj,lineJoin:void 0!==p?p:"round",lineWidth:void 0!==q?q:1,miterLimit:void 0!==e?e:10,strokeStyle:vh(d?d:mj)}}else this.u=null;var d=b.mb,g=b.f,k=b.b,p=b.ga(),q=b.g,e=b.H(),u=b.h;b=b.i;this.ca={font:void 0!==d?d:"10px sans-serif",textAlign:void 0!==u?u:"center",textBaseline:void 0!==b?b:"middle"};this.b=void 0!==e?
e:"";this.ub=void 0!==g?this.ea*g:0;this.Ob=void 0!==k?this.ea*k:0;this.B=void 0!==p?p:0;this.s=this.ea*(void 0!==q?q:1)}else this.b=""};function Pj(b){lh.call(this,b);this.V=Ab()}Q(Pj,lh);
Pj.prototype.j=function(b,d,e){Qj(this,"precompose",e,b,void 0);var g=this.b?this.b.f():null;if(g){var k=d.F,p=void 0!==k;if(p){var q=b.ia,u=b.size[0]*q,v=b.size[1]*q,w=b.L.rotation,z=gc(k),B=[k[2],k[3]],C=[k[2],k[1]],k=fc(k);kh(b.ic,z,z);kh(b.ic,B,B);kh(b.ic,C,C);kh(b.ic,k,k);e.save();nj(e,-w,u/2,v/2);e.beginPath();e.moveTo(z[0]*q,z[1]*q);e.lineTo(B[0]*q,B[1]*q);e.lineTo(C[0]*q,C[1]*q);e.lineTo(k[0]*q,k[1]*q);e.clip();nj(e,w,u/2,v/2)}q=this.u;u=e.globalAlpha;e.globalAlpha=d.opacity;e.drawImage(g,
0,0,+g.width,+g.height,Math.round(q[12]),Math.round(q[13]),Math.round(g.width*q[0]),Math.round(g.height*q[5]));e.globalAlpha=u;p&&e.restore()}Qj(this,"postcompose",e,b,void 0)};function Qj(b,d,e,g,k){var p=b.a;if(jb(p,d)){var q=g.size[0]*g.ia,u=g.size[1]*g.ia,v=g.L.rotation;nj(e,-v,q/2,u/2);b=void 0!==k?k:Rj(b,g,0);new Dj(e,g.ia,g.F,b,g.L.rotation);U(p,new Vc(d,p,0,g));nj(e,v,q/2,u/2)}}
function Rj(b,d,e){var g=d.L,k=d.ia;return ih(b.V,k*d.size[0]/2,k*d.size[1]/2,k/g.J,-k/g.J,-g.rotation,-g.T[0]+e,-g.T[1])};var Sj=["Polygon","LineString","Image","Text"];function Tj(b,d,e){this.La=b;this.ra=d;this.h=null;this.i=0;this.J=e;this.V=this.R=null;this.b=[];this.f=[];this.wa=Ab();this.a=[];this.la=[];this.bb=Ab();this.Ka=Ab()}Q(Tj,Uc);
function Uj(b,d,e,g,k,p){var q=b.f.length,u=b.Kd(),v=[d[e],d[e+1]],w=[NaN,NaN],z=!0,B,C,D;for(B=e+k;B<g;B+=k)w[0]=d[B],w[1]=d[B+1],D=$b(u,w),D!==C?(z&&(b.f[q++]=v[0],b.f[q++]=v[1]),b.f[q++]=w[0],b.f[q++]=w[1],z=!1):1===D?(b.f[q++]=w[0],b.f[q++]=w[1],z=!1):z=!0,v[0]=w[0],v[1]=w[1],C=D;B===e+k&&(b.f[q++]=v[0],b.f[q++]=v[1]);p&&(b.f[q++]=d[e],b.f[q++]=d[e+1]);return q}function Vj(b,d){b.R=[0,d,0];b.b.push(b.R);b.V=[0,d,0];b.a.push(b.V)}
function Wj(b,d,e,g,k,p,q,u,v){var w;jh(g,b.wa)?w=b.la:(w=td(b.f,0,b.f.length,2,g,b.la),Eb(b.wa,g));g=!ya(p);var z=0,B=q.length,C=0,D,F=b.bb;b=b.Ka;for(var I,J,M,E;z<B;){var G=q[z],N,P,O,R;switch(G[0]){case 0:C=G[1];g&&p[L(C).toString()]||!C.C()?z=G[2]:void 0===v||oc(v,C.C().I())?++z:z=G[2];break;case 1:d.beginPath();++z;break;case 2:C=G[1];D=w[C];G=w[C+1];M=w[C+2]-D;C=w[C+3]-G;d.arc(D,G,Math.sqrt(M*M+C*C),0,2*Math.PI,!0);++z;break;case 3:d.closePath();++z;break;case 4:C=G[1];D=G[2];N=G[3];O=G[4]*
e;var W=G[5]*e,K=G[6];P=G[7];var T=G[8],ba=G[9];M=G[11];E=G[12];var Y=G[13],ca=G[14];for(G[10]&&(M+=k);C<D;C+=2){G=w[C]-O;R=w[C+1]-W;Y&&(G=Math.round(G),R=Math.round(R));if(1!=E||0!==M){var X=G+O,wa=R+W;ih(F,X,wa,E,E,M,-X,-wa);d.transform(F[0],F[1],F[4],F[5],F[12],F[13])}X=d.globalAlpha;1!=P&&(d.globalAlpha=X*P);var wa=ca+T>N.width?N.width-T:ca,Ta=K+ba>N.height?N.height-ba:K;d.drawImage(N,T,ba,wa,Ta,G,R,wa*e,Ta*e);1!=P&&(d.globalAlpha=X);if(1!=E||0!==M)Gb(F,b),d.transform(b[0],b[1],b[4],b[5],b[12],
b[13])}++z;break;case 5:C=G[1];D=G[2];O=G[3];W=G[4]*e;K=G[5]*e;M=G[6];E=G[7]*e;N=G[8];for(P=G[9];C<D;C+=2){G=w[C]+W;R=w[C+1]+K;if(1!=E||0!==M)ih(F,G,R,E,E,M,-G,-R),d.transform(F[0],F[1],F[4],F[5],F[12],F[13]);T=O.split("\n");ba=T.length;1<ba?(Y=Math.round(1.5*d.measureText("M").width),R-=(ba-1)/2*Y):Y=0;for(ca=0;ca<ba;ca++)X=T[ca],P&&d.strokeText(X,G,R),N&&d.fillText(X,G,R),R+=Y;if(1!=E||0!==M)Gb(F,b),d.transform(b[0],b[1],b[4],b[5],b[12],b[13])}++z;break;case 6:if(void 0!==u&&(C=G[1],C=u(C)))return C;
++z;break;case 7:d.fill();++z;break;case 8:C=G[1];D=G[2];G=w[C];R=w[C+1];M=G+.5|0;E=R+.5|0;if(M!==I||E!==J)d.moveTo(G,R),I=M,J=E;for(C+=2;C<D;C+=2)if(G=w[C],R=w[C+1],M=G+.5|0,E=R+.5|0,M!==I||E!==J)d.lineTo(G,R),I=M,J=E;++z;break;case 9:d.fillStyle=G[1];++z;break;case 10:I=void 0!==G[7]?G[7]:!0;J=G[2];d.strokeStyle=G[1];d.lineWidth=I?J*e:J;d.lineCap=G[3];d.lineJoin=G[4];d.miterLimit=G[5];Kf&&d.setLineDash(G[6]);J=I=NaN;++z;break;case 11:d.font=G[1];d.textAlign=G[2];d.textBaseline=G[3];++z;break;case 12:d.stroke();
++z;break;default:bb("Unknown canvas render instruction"),++z}}}function Xj(b){var d=b.a;d.reverse();var e,g=d.length,k,p,q=-1;for(e=0;e<g;++e)if(k=d[e],p=k[0],6==p)q=e;else if(0==p){k[2]=e;k=b.a;for(p=e;q<p;){var u=k[q];k[q]=k[p];k[p]=u;++q;--p}q=-1}}function Yj(b,d){b.R[2]=b.b.length;b.R=null;b.V[2]=b.a.length;b.V=null;var e=[6,d];b.b.push(e);b.a.push(e)}Tj.prototype.jd=db;Tj.prototype.Kd=function(){return this.ra};
function Zj(b,d,e){Tj.call(this,b,d,e);this.s=this.ca=null;this.M=this.aa=this.G=this.B=this.ea=this.$=this.w=this.u=this.l=this.j=this.g=void 0}Q(Zj,Tj);Zj.prototype.Jd=function(b,d){if(this.s){Vj(this,d);var e=b.a,g=this.f.length,e=Uj(this,e,0,e.length,b.D,!1);this.b.push([4,g,e,this.s,this.g,this.j,this.l,this.u,this.w,this.$,this.ea,this.B,this.G,this.aa,this.M]);this.a.push([4,g,e,this.ca,this.g,this.j,this.l,this.u,this.w,this.$,this.ea,this.B,this.G,this.aa,this.M]);Yj(this,d)}};
Zj.prototype.Id=function(b,d){if(this.s){Vj(this,d);var e=b.a,g=this.f.length,e=Uj(this,e,0,e.length,b.D,!1);this.b.push([4,g,e,this.s,this.g,this.j,this.l,this.u,this.w,this.$,this.ea,this.B,this.G,this.aa,this.M]);this.a.push([4,g,e,this.ca,this.g,this.j,this.l,this.u,this.w,this.$,this.ea,this.B,this.G,this.aa,this.M]);Yj(this,d)}};Zj.prototype.jd=function(){Xj(this);this.j=this.g=void 0;this.s=this.ca=null;this.M=this.aa=this.B=this.ea=this.$=this.w=this.u=this.G=this.l=void 0};
Zj.prototype.pd=function(b){var d=b.i,e=b.j,g=b.b,k=b.a,p=b.ob();this.g=d[0];this.j=d[1];this.ca=g;this.s=k;this.l=e[1];this.u=b.s;this.w=p[0];this.$=p[1];this.ea=b.u;this.B=b.ga();this.G=b.l;this.aa=b.B;this.M=e[0]};function ak(b,d,e){Tj.call(this,b,d,e);this.g={Cc:void 0,xc:void 0,yc:null,zc:void 0,Ac:void 0,Bc:void 0,Rd:0,strokeStyle:void 0,lineCap:void 0,U:null,lineJoin:void 0,lineWidth:void 0,miterLimit:void 0}}Q(ak,Tj);
function bk(b,d,e,g,k){var p=b.f.length;d=Uj(b,d,e,g,k,!1);p=[8,p,d];b.b.push(p);b.a.push(p);return g}A=ak.prototype;A.Kd=function(){this.h||(this.h=Xb(this.ra),0<this.i&&Wb(this.h,this.J*(this.i+1)/2,this.h));return this.h};
function ck(b){var d=b.g,e=d.strokeStyle,g=d.lineCap,k=d.U,p=d.lineJoin,q=d.lineWidth,u=d.miterLimit;d.Cc==e&&d.xc==g&&fd(d.yc,k)&&d.zc==p&&d.Ac==q&&d.Bc==u||(d.Rd!=b.f.length&&(b.b.push([12]),d.Rd=b.f.length),b.b.push([10,e,q,g,p,u,k],[1]),d.Cc=e,d.xc=g,d.yc=k,d.zc=p,d.Ac=q,d.Bc=u)}
A.Ae=function(b,d){var e=this.g,g=e.lineWidth;void 0!==e.strokeStyle&&void 0!==g&&(ck(this),Vj(this,d),this.a.push([10,e.strokeStyle,e.lineWidth,e.lineCap,e.lineJoin,e.miterLimit,e.U],[1]),e=b.a,bk(this,e,0,e.length,b.D),this.a.push([12]),Yj(this,d))};
A.Be=function(b,d){var e=this.g,g=e.lineWidth;if(void 0!==e.strokeStyle&&void 0!==g){ck(this);Vj(this,d);this.a.push([10,e.strokeStyle,e.lineWidth,e.lineCap,e.lineJoin,e.miterLimit,e.U],[1]);var e=b.Dc(),g=b.a,k=b.D,p=0,q,u;q=0;for(u=e.length;q<u;++q)p=bk(this,g,p,e[q],k);this.a.push([12]);Yj(this,d)}};A.jd=function(){this.g.Rd!=this.f.length&&this.b.push([12]);Xj(this);this.g=null};
A.$b=function(b,d){var e=d.h;this.g.strokeStyle=vh(e?e:mj);e=d.a;this.g.lineCap=void 0!==e?e:"round";e=d.j;this.g.U=e?e:lj;e=d.f;this.g.lineJoin=void 0!==e?e:"round";e=d.i;this.g.lineWidth=void 0!==e?e:1;e=d.b;this.g.miterLimit=void 0!==e?e:10;this.g.lineWidth>this.i&&(this.i=this.g.lineWidth,this.h=null)};
function dk(b,d,e){Tj.call(this,b,d,e);this.g={we:void 0,Cc:void 0,xc:void 0,yc:null,zc:void 0,Ac:void 0,Bc:void 0,fillStyle:void 0,strokeStyle:void 0,lineCap:void 0,U:null,lineJoin:void 0,lineWidth:void 0,miterLimit:void 0}}Q(dk,Tj);
function ek(b,d,e,g,k){var p=b.g,q=[1];b.b.push(q);b.a.push(q);var u,q=0;for(u=g.length;q<u;++q){var v=g[q],w=b.f.length;e=Uj(b,d,e,v,k,!0);e=[8,w,e];w=[3];b.b.push(e,w);b.a.push(e,w);e=v}d=[7];b.a.push(d);void 0!==p.fillStyle&&b.b.push(d);void 0!==p.strokeStyle&&(p=[12],b.b.push(p),b.a.push(p));return e}A=dk.prototype;
A.ye=function(b,d){var e=this.g,g=e.strokeStyle;if(void 0!==e.fillStyle||void 0!==g){fk(this);Vj(this,d);this.a.push([9,vh(kj)]);void 0!==e.strokeStyle&&this.a.push([10,e.strokeStyle,e.lineWidth,e.lineCap,e.lineJoin,e.miterLimit,e.U]);var k=b.a,g=this.f.length;Uj(this,k,0,k.length,b.D,!1);k=[1];g=[2,g];this.b.push(k,g);this.a.push(k,g);g=[7];this.a.push(g);void 0!==e.fillStyle&&this.b.push(g);void 0!==e.strokeStyle&&(e=[12],this.b.push(e),this.a.push(e));Yj(this,d)}};
A.De=function(b,d){var e=this.g,g=e.strokeStyle;if(void 0!==e.fillStyle||void 0!==g)fk(this),Vj(this,d),this.a.push([9,vh(kj)]),void 0!==e.strokeStyle&&this.a.push([10,e.strokeStyle,e.lineWidth,e.lineCap,e.lineJoin,e.miterLimit,e.U]),e=b.Dc(),g=Wd(b),ek(this,g,0,e,b.D),Yj(this,d)};
A.Ce=function(b,d){var e=this.g,g=e.strokeStyle;if(void 0!==e.fillStyle||void 0!==g){fk(this);Vj(this,d);this.a.push([9,vh(kj)]);void 0!==e.strokeStyle&&this.a.push([10,e.strokeStyle,e.lineWidth,e.lineCap,e.lineJoin,e.miterLimit,e.U]);var e=b.b,g=Nj(b),k=b.D,p=0,q,u;q=0;for(u=e.length;q<u;++q)p=ek(this,g,p,e[q],k);Yj(this,d)}};A.jd=function(){Xj(this);this.g=null;var b=this.La;if(0!==b){var d=this.f,e,g;e=0;for(g=d.length;e<g;++e)d[e]=b*Math.round(d[e]/b)}};
A.Kd=function(){this.h||(this.h=Xb(this.ra),0<this.i&&Wb(this.h,this.J*(this.i+1)/2,this.h));return this.h};
A.$b=function(b,d){var e=this.g;if(b){var g=b.a;e.fillStyle=jj(g?g:kj)}else e.fillStyle=void 0;d?(g=d.h,e.strokeStyle=vh(g?g:mj),g=d.a,e.lineCap=void 0!==g?g:"round",g=d.j,e.U=g?g.slice():lj,g=d.f,e.lineJoin=void 0!==g?g:"round",g=d.i,e.lineWidth=void 0!==g?g:1,g=d.b,e.miterLimit=void 0!==g?g:10,e.lineWidth>this.i&&(this.i=e.lineWidth,this.h=null)):(e.strokeStyle=void 0,e.lineCap=void 0,e.U=null,e.lineJoin=void 0,e.lineWidth=void 0,e.miterLimit=void 0)};
function fk(b){var d=b.g,e=d.fillStyle,g=d.strokeStyle,k=d.lineCap,p=d.U,q=d.lineJoin,u=d.lineWidth,v=d.miterLimit;void 0!==e&&d.we!=e&&(b.b.push([9,e]),d.we=d.fillStyle);void 0===g||d.Cc==g&&d.xc==k&&d.yc==p&&d.zc==q&&d.Ac==u&&d.Bc==v||(b.b.push([10,g,u,k,q,v,p]),d.Cc=g,d.xc=k,d.yc=p,d.zc=q,d.Ac=u,d.Bc=v)}function gk(b,d,e){Tj.call(this,b,d,e);this.aa=this.G=this.B=null;this.s="";this.ea=this.$=this.w=this.u=0;this.l=this.j=this.g=null}Q(gk,Tj);
function hk(b,d,e,g,k){if(""!==b.s&&b.l&&(b.g||b.j)){if(b.g){var p=b.g,q=b.B;if(!q||q.fillStyle!=p.fillStyle){var u=[9,p.fillStyle];b.b.push(u);b.a.push(u);q?q.fillStyle=p.fillStyle:b.B={fillStyle:p.fillStyle}}}b.j&&(p=b.j,q=b.G,q&&q.lineCap==p.lineCap&&q.U==p.U&&q.lineJoin==p.lineJoin&&q.lineWidth==p.lineWidth&&q.miterLimit==p.miterLimit&&q.strokeStyle==p.strokeStyle||(u=[10,p.strokeStyle,p.lineWidth,p.lineCap,p.lineJoin,p.miterLimit,p.U,!1],b.b.push(u),b.a.push(u),q?(q.lineCap=p.lineCap,q.U=p.U,
q.lineJoin=p.lineJoin,q.lineWidth=p.lineWidth,q.miterLimit=p.miterLimit,q.strokeStyle=p.strokeStyle):b.G={lineCap:p.lineCap,U:p.U,lineJoin:p.lineJoin,lineWidth:p.lineWidth,miterLimit:p.miterLimit,strokeStyle:p.strokeStyle}));p=b.l;q=b.aa;q&&q.font==p.font&&q.textAlign==p.textAlign&&q.textBaseline==p.textBaseline||(u=[11,p.font,p.textAlign,p.textBaseline],b.b.push(u),b.a.push(u),q?(q.font=p.font,q.textAlign=p.textAlign,q.textBaseline=p.textBaseline):b.aa={font:p.font,textAlign:p.textAlign,textBaseline:p.textBaseline});
Vj(b,k);p=b.f.length;d=Uj(b,d,0,e,g,!1);d=[5,p,d,b.s,b.u,b.w,b.$,b.ea,!!b.g,!!b.j];b.b.push(d);b.a.push(d);Yj(b,k)}}
gk.prototype.Lb=function(b){if(b){var d=b.a;d?(d=d.a,d=jj(d?d:kj),this.g?this.g.fillStyle=d:this.g={fillStyle:d}):this.g=null;var e=b.S();if(e){var d=e.h,g=e.a,k=e.j,p=e.f,q=e.i,e=e.b,g=void 0!==g?g:"round",k=k?k.slice():lj,p=void 0!==p?p:"round",q=void 0!==q?q:1,e=void 0!==e?e:10,d=vh(d?d:mj);if(this.j){var u=this.j;u.lineCap=g;u.U=k;u.lineJoin=p;u.lineWidth=q;u.miterLimit=e;u.strokeStyle=d}else this.j={lineCap:g,U:k,lineJoin:p,lineWidth:q,miterLimit:e,strokeStyle:d}}else this.j=null;var v=b.mb,
d=b.f,g=b.b,k=b.ga(),q=b.g,e=b.H(),p=b.h,u=b.i;b=void 0!==v?v:"10px sans-serif";p=void 0!==p?p:"center";u=void 0!==u?u:"middle";this.l?(v=this.l,v.font=b,v.textAlign=p,v.textBaseline=u):this.l={font:b,textAlign:p,textBaseline:u};this.s=void 0!==e?e:"";this.u=void 0!==d?d:0;this.w=void 0!==g?g:0;this.$=void 0!==k?k:0;this.ea=void 0!==q?q:1}else this.s=""};function ik(b,d,e,g){this.w=b;this.i=d;this.u=e;this.j=g;this.f={};this.l=vf(1,1);this.s=Ab()}
function jk(b){for(var d in b.f){var e=b.f[d],g;for(g in e)e[g].jd()}}ik.prototype.h=function(b,d,e,g,k){var p=this.s;ih(p,.5,.5,1/d,-1/d,-e,-b[0],-b[1]);var q=this.l;q.clearRect(0,0,1,1);var u;void 0!==this.j&&(u=Ub(),Vb(u,b),Wb(u,d*this.j,u));return kk(this,q,p,e,g,function(b){if(0<q.getImageData(0,0,1,1).data[3]){if(b=k(b))return b;q.clearRect(0,0,1,1)}},u)};
ik.prototype.a=function(b,d){var e=void 0!==b?b.toString():"0",g=this.f[e];void 0===g&&(g={},this.f[e]=g);e=g[d];void 0===e&&(e=new lk[d](this.w,this.i,this.u),g[d]=e);return e};ik.prototype.g=function(){return ya(this.f)};
ik.prototype.b=function(b,d,e,g,k,p){var q=Object.keys(this.f).map(Number);q.sort(bd);if(!1!==p){var u=this.i;p=u[0];var v=u[1],w=u[2],u=u[3];p=[p,v,p,u,w,u,w,v];td(p,0,8,2,e,p);b.save();b.beginPath();b.moveTo(p[0],p[1]);b.lineTo(p[2],p[3]);b.lineTo(p[4],p[5]);b.lineTo(p[6],p[7]);b.closePath();b.clip()}var z,B;p=0;for(v=q.length;p<v;++p)for(z=this.f[q[p].toString()],w=0,u=Sj.length;w<u;++w)B=z[Sj[w]],void 0!==B&&Wj(B,b,d,e,g,k,B.b,void 0);b.restore()};
function kk(b,d,e,g,k,p,q){var u=Object.keys(b.f).map(Number);u.sort(function(b,d){return d-b});var v,w,z,B,C;v=0;for(w=u.length;v<w;++v)for(B=b.f[u[v].toString()],z=Sj.length-1;0<=z;--z)if(C=B[Sj[z]],void 0!==C&&(C=Wj(C,d,1,e,g,k,C.a,p,q)))return C}var lk={Image:Zj,LineString:ak,Polygon:dk,Text:gk};function mk(b,d){return L(b)-L(d)}function nk(b,d){var e=.5*b/d;return e*e}function ok(b,d,e,g,k,p){var q;(q=e.g)&&q.ci(k,p);if(k=(0,e.b)(d))g=wd(k,g),(0,pk[g.ma()])(b,g,e,d);return!1}
var pk={Point:function(b,d,e,g){var k=e.g;if(k){var p=b.a(e.a,"Image");p.pd(k);p.Jd(d,g)}if(k=e.H())b=b.a(e.a,"Text"),b.Lb(k),hk(b,d.a,2,2,g)},LineString:function(b,d,e,g){var k=e.S();if(k){var p=b.a(e.a,"LineString");p.$b(null,k);p.Ae(d,g)}if(k=e.H())b=b.a(e.a,"Text"),b.Lb(k),hk(b,Lj(d),2,2,g)},Polygon:function(b,d,e,g){var k=e.f,p=e.S();if(k||p){var q=b.a(e.a,"Polygon");q.$b(k,p);q.De(d,g)}if(k=e.H())b=b.a(e.a,"Text"),b.Lb(k),hk(b,Xd(d),2,2,g)},MultiPoint:function(b,d,e,g){var k=e.g;if(k){var p=
b.a(e.a,"Image");p.pd(k);p.Id(d,g)}if(k=e.H())b=b.a(e.a,"Text"),b.Lb(k),e=d.a,hk(b,e,e.length,d.D,g)},MultiLineString:function(b,d,e,g){var k=e.S();if(k){var p=b.a(e.a,"LineString");p.$b(null,k);p.Be(d,g)}if(k=e.H())b=b.a(e.a,"Text"),b.Lb(k),d=Mj(d),hk(b,d,d.length,2,g)},MultiPolygon:function(b,d,e,g){var k=e.f,p=e.S();if(p||k){var q=b.a(e.a,"Polygon");q.$b(k,p);q.Ce(d,g)}if(k=e.H())b=b.a(e.a,"Text"),b.Lb(k),d=Oj(d),hk(b,d,d.length,2,g)},GeometryCollection:function(b,d,e,g){d=d.Rf();var k,p;k=0;for(p=
d.length;k<p;++k)(0,pk[d[k].ma()])(b,d[k],e,g)},Circle:function(b,d,e,g){var k=e.f,p=e.S();if(k||p){var q=b.a(e.a,"Polygon");q.$b(k,p);q.ye(d,g)}if(k=e.H())b=b.a(e.a,"Text"),b.Lb(k),hk(b,Kj(d),2,2,g)}};var qk=!se()||ne("iPhone")&&!ne("iPod")&&!ne("iPad")||ne("iPad")||ne("iPod");function rk(b,d,e,g){var k;k=Jc(d,b)(e,void 0,e.length);e=d.jc(g,e);d=Bc(d);void 0!==d&&(e*=d);d=Bc(b);void 0!==d&&(e/=d);b=b.jc(e,k)/e;isFinite(b)&&0<b&&(e/=b);return e}function sk(b,d,e,g){b=e-b;d=g-d;var k=Math.sqrt(b*b+d*d);return[Math.round(e+b/k),Math.round(g+d/k)]}
function tk(b,d,e,g,k,p,q,u,v,w,z){var B=vf(Math.round(e*b),Math.round(e*d));if(0===v.length)return B.canvas;B.scale(e,e);var C=Ub();v.forEach(function(b){b=b.F;b[0]<C[0]&&(C[0]=b[0]);b[2]>C[2]&&(C[2]=b[2]);b[1]<C[1]&&(C[1]=b[1]);b[3]>C[3]&&(C[3]=b[3])});var D=vf(Math.round(e*jc(C)/g),Math.round(e*kc(C)/g)),F=e/g;v.forEach(function(b){D.drawImage(b.Sa,w,w,b.Sa.width-2*w,b.Sa.height-2*w,(b.F[0]-C[0])*F,-(b.F[3]-C[3])*F,jc(b.F)*F,kc(b.F)*F)});var I=gc(q);u.g.forEach(function(b){var d=b.source,k=b.target,
q=d[1][0],u=d[1][1],v=d[2][0],w=d[2][1];b=(k[0][0]-I[0])/p;var z=-(k[0][1]-I[1])/p,F=(k[1][0]-I[0])/p,K=-(k[1][1]-I[1])/p,T=(k[2][0]-I[0])/p,ba=-(k[2][1]-I[1])/p,k=d[0][0],d=d[0][1],q=q-k,u=u-d,v=v-k,w=w-d;a:{q=[[q,u,0,0,F-b],[v,w,0,0,T-b],[0,0,q,u,K-z],[0,0,v,w,ba-z]];u=q.length;for(v=0;v<u;v++);for(v=0;v<u;v++){for(var w=v,Y=Math.abs(q[v][v]),ca=v+1;ca<u;ca++){var X=Math.abs(q[ca][v]);X>Y&&(Y=X,w=ca)}if(0===Y){q=null;break a}Y=q[w];q[w]=q[v];q[v]=Y;for(w=v+1;w<u;w++)for(Y=-q[w][v]/q[v][v],ca=v;ca<
u+1;ca++)q[w][ca]=v==ca?0:q[w][ca]+Y*q[v][ca]}v=Array(u);for(w=u-1;0<=w;w--)for(v[w]=q[w][u]/q[w][w],Y=w-1;0<=Y;Y--)q[Y][u]-=q[Y][w]*v[w];q=v}q&&(B.save(),B.beginPath(),qk?(v=(b+F+T)/3,w=(z+K+ba)/3,u=sk(v,w,b,z),F=sk(v,w,F,K),T=sk(v,w,T,ba),B.moveTo(u[0],u[1]),B.lineTo(F[0],F[1]),B.lineTo(T[0],T[1])):(B.moveTo(b,z),B.lineTo(F,K),B.lineTo(T,ba)),B.closePath(),B.clip(),B.transform(q[0],q[2],q[1],q[3],b,z),B.translate(C[0]-k,C[3]-d),B.scale(g/e,-g/e),B.drawImage(D.canvas,0,0),B.restore())});z&&(B.save(),
B.strokeStyle="black",B.lineWidth=1,u.g.forEach(function(b){var d=b.target;b=(d[0][0]-I[0])/p;var e=-(d[0][1]-I[1])/p,g=(d[1][0]-I[0])/p,k=-(d[1][1]-I[1])/p,q=(d[2][0]-I[0])/p,d=-(d[2][1]-I[1])/p;B.beginPath();B.moveTo(b,e);B.lineTo(g,k);B.lineTo(q,d);B.closePath();B.stroke()}),B.restore());return B.canvas};function uk(b,d,e,g,k){this.b=b;this.h=d;var p={},q=Jc(this.h,this.b);this.f=function(b){var d=b[0]+"/"+b[1];p[d]||(p[d]=q(b));return p[d]};this.i=g;this.u=k*k;this.g=[];this.l=!1;this.s=this.b.hc&&!!g&&!!this.b.I()&&jc(g)==jc(this.b.I());this.a=this.b.I()?jc(this.b.I()):null;this.j=this.h.I()?jc(this.h.I()):null;b=gc(e);d=[e[2],e[3]];g=[e[2],e[1]];e=fc(e);k=this.f(b);var u=this.f(d),v=this.f(g),w=this.f(e);vk(this,b,d,g,e,k,u,v,w,10);if(this.l){var z=Infinity;this.g.forEach(function(b){z=Math.min(z,
b.source[0][0],b.source[1][0],b.source[2][0])});this.g.forEach(function(b){if(Math.max(b.source[0][0],b.source[1][0],b.source[2][0])-z>this.a/2){var d=[[b.source[0][0],b.source[0][1]],[b.source[1][0],b.source[1][1]],[b.source[2][0],b.source[2][1]]];d[0][0]-z>this.a/2&&(d[0][0]-=this.a);d[1][0]-z>this.a/2&&(d[1][0]-=this.a);d[2][0]-z>this.a/2&&(d[2][0]-=this.a);Math.max(d[0][0],d[1][0],d[2][0])-Math.min(d[0][0],d[1][0],d[2][0])<this.a/2&&(b.source=d)}},this)}p={}}
function vk(b,d,e,g,k,p,q,u,v,w){var z=Tb([p,q,u,v]),B=b.a?jc(z)/b.a:null,C=b.b.hc&&.5<B&&1>B,D=!1;if(0<w){if(b.h.b&&b.j)var F=Tb([d,e,g,k]),D=D|.25<jc(F)/b.j;!C&&b.b.b&&B&&(D|=.25<B)}if(D||!b.i||oc(z,b.i)){if(!(D||isFinite(p[0])&&isFinite(p[1])&&isFinite(q[0])&&isFinite(q[1])&&isFinite(u[0])&&isFinite(u[1])&&isFinite(v[0])&&isFinite(v[1])))if(0<w)D=!0;else return;if(0<w&&(D||(B=b.f([(d[0]+g[0])/2,(d[1]+g[1])/2]),z=C?(Mb(p[0],b.a)+Mb(u[0],b.a))/2-Mb(B[0],b.a):(p[0]+u[0])/2-B[0],B=(p[1]+u[1])/2-B[1],
D=z*z+B*B>b.u),D)){Math.abs(d[0]-g[0])<=Math.abs(d[1]-g[1])?(C=[(e[0]+g[0])/2,(e[1]+g[1])/2],z=b.f(C),B=[(k[0]+d[0])/2,(k[1]+d[1])/2],D=b.f(B),vk(b,d,e,C,B,p,q,z,D,w-1),vk(b,B,C,g,k,D,z,u,v,w-1)):(C=[(d[0]+e[0])/2,(d[1]+e[1])/2],z=b.f(C),B=[(g[0]+k[0])/2,(g[1]+k[1])/2],D=b.f(B),vk(b,d,C,B,k,p,z,D,v,w-1),vk(b,C,e,g,B,z,q,u,D,w-1));return}if(C){if(!b.s)return;b.l=!0}b.g.push({source:[p,u,v],target:[d,g,k]});b.g.push({source:[p,q,u],target:[d,e,g]})}}
function wk(b){var d=Ub();b.g.forEach(function(b){b=b.source;Vb(d,b[0]);Vb(d,b[1]);Vb(d,b[2])});return d};function xk(b,d,e,g,k,p){this.u=d;this.s=b.I();var q=d.I(),u=q?nc(e,q):e,q=rk(b,d,lc(u),g);this.i=new uk(b,d,u,this.s,.5*q);this.b=g;this.a=e;b=wk(this.i);this.j=(this.Za=p(b,q,k))?this.Za.h:1;this.Rc=this.g=null;k=2;p=[];this.Za&&(k=0,p=this.Za.nb());Ig.call(this,e,g,this.j,k,p)}Q(xk,Ig);xk.prototype.W=function(){1==this.state&&(Ba(this.Rc),this.Rc=null);xk.xa.W.call(this)};xk.prototype.f=function(){return this.g};
xk.prototype.Oc=function(){var b=this.Za.Z();2==b&&(this.g=tk(jc(this.a)/this.b,kc(this.a)/this.b,this.j,this.Za.N(),0,this.b,this.a,this.i,[{F:this.Za.I(),Sa:this.Za.f()}],0));this.state=b;this.A()};xk.prototype.load=function(){if(0==this.state){this.state=1;this.A();var b=this.Za.Z();2==b||3==b?this.Oc():(this.Rc=S(this.Za,"change",function(){var b=this.Za.Z();if(2==b||3==b)Ba(this.Rc),this.Rc=null,this.Oc()},this),this.Za.load())}};function yk(b){Qc.call(this,{Aa:b.Aa,F:b.F,Ga:b.Ga,ba:b.ba,state:b.state});this.Zb=void 0!==b.Bb?b.Bb:null;this.a=null;this.i=0}Q(yk,Qc);function zk(b,d,e,g,k){var p=b.l;if(p&&k&&!Ic(p,k)){if(b.a){if(b.i==b.f&&Ic(b.a.u,k)&&b.a.N()==e&&b.a.h==g&&cc(b.a.I(),d))return b.a;b.a.oa();b.a=null}b.a=new xk(p,k,d,e,g,function(b){return Ak(this,b)}.bind(b));b.i=b.f;return b.a}p&&(k=p);return Ak(b,d)}
yk.prototype.g=function(b){b=b.target;switch(b.Z()){case 1:U(this,new Bk(Ck,b));break;case 2:U(this,new Bk(Dk,b));break;case 3:U(this,new Bk(Ek,b))}};function Fk(b,d){b.f().src=d}function Bk(b,d){fb.call(this,b);this.Sa=d}Q(Bk,fb);var Ck="imageloadstart",Dk="imageloadend",Ek="imageloaderror";function Gk(b){nb.call(this);this.ya=void 0;this.b="geometry";this.a=null;this.h=void 0;this.g=null;S(this,qb(this.b),this.ed,this);void 0!==b&&(b instanceof sd||!b?Hk(this,b):ob(this,b))}Q(Gk,nb);A=Gk.prototype;A.clone=function(){var b=new Gk(ua({},this.aa));Ik(b,this.b);var d=this.C();d&&Hk(b,d.clone());(d=this.a)&&Jk(b,d);return b};A.C=function(){return this.get(this.b)};A.Fa=function(){return this.ya};A.Zf=function(){this.A()};
A.ed=function(){this.g&&(Ba(this.g),this.g=null);var b=this.C();b&&(this.g=S(b,"change",this.Zf,this));this.A()};function Hk(b,d){b.set(b.b,d)}function Jk(b,d){b.a=d;b.h=d?Kk(d):void 0;b.A()}function Ik(b,d){Ha(b,qb(b.b),b.ed,b);b.b=d;S(b,qb(b.b),b.ed,b);b.ed()}function Kk(b){if(!ja(b)){var d;d=Array.isArray(b)?b:[b];b=function(){return d}}return b};function Lk(b,d,e){return function(g,k,p){var q=new XMLHttpRequest;q.open("GET",ja(b)?b(g,k,p):b,!0);"arraybuffer"==d.ma()&&(q.responseType="arraybuffer");q.onload=function(){if(200<=q.status&&300>q.status){var b=d.ma(),g;"json"==b||"text"==b?g=q.responseText:"xml"==b?(g=q.responseXML,g||(b=q.responseText,g=(new DOMParser).parseFromString(b,"application/xml"))):"arraybuffer"==b?g=q.response:bb("unexpected format type");g?e.call(this,d.Pi(g,{Ki:p}),d.Qi(g)):bb("undefined or null source")}}.bind(this);
q.send()}}function Mk(b,d){return Lk(b,d,function(b){this.Cb(b)})};function Nk(){return[[-Infinity,-Infinity,Infinity,Infinity]]};var Ok;
(function(){var b={Ee:{}};(function(){function d(b,e){if(!(this instanceof d))return new d(b,e);this.wd=Math.max(4,b||9);this.ke=Math.max(2,Math.ceil(.4*this.wd));e&&this.pf(e);this.clear()}function e(b,d){b.sa=g(b,0,b.children.length,d)}function g(b,d,e,g){for(var p=[Infinity,Infinity,-Infinity,-Infinity],q;d<e;d++)q=b.children[d],k(p,b.Ca?g(q):q.sa);return p}function k(b,d){b[0]=Math.min(b[0],d[0]);b[1]=Math.min(b[1],d[1]);b[2]=Math.max(b[2],d[2]);b[3]=Math.max(b[3],d[3])}function p(b,d){return b.sa[0]-d.sa[0]}
function q(b,d){return b.sa[1]-d.sa[1]}function u(b){return(b[2]-b[0])*(b[3]-b[1])}function v(b){return b[2]-b[0]+(b[3]-b[1])}function w(b,d){return b[0]<=d[0]&&b[1]<=d[1]&&d[2]<=b[2]&&d[3]<=b[3]}function z(b,d){return d[0]<=b[2]&&d[1]<=b[3]&&d[2]>=b[0]&&d[3]>=b[1]}function B(b,d,e,g,k){for(var p=[d,e],q;p.length;)e=p.pop(),d=p.pop(),e-d<=g||(q=d+Math.ceil((e-d)/g/2)*g,C(b,d,e,q,k),p.push(d,q,q,e))}function C(b,d,e,g,k){for(var p,q,u,v,w;e>d;){600<e-d&&(p=e-d+1,q=g-d+1,u=Math.log(p),v=.5*Math.exp(2*
u/3),w=.5*Math.sqrt(u*v*(p-v)/p)*(0>q-p/2?-1:1),u=Math.max(d,Math.floor(g-q*v/p+w)),q=Math.min(e,Math.floor(g+(p-q)*v/p+w)),C(b,u,q,g,k));p=b[g];q=d;v=e;D(b,d,g);for(0<k(b[e],p)&&D(b,d,e);q<v;){D(b,q,v);q++;for(v--;0>k(b[q],p);)q++;for(;0<k(b[v],p);)v--}0===k(b[d],p)?D(b,d,v):(v++,D(b,v,e));v<=g&&(d=v+1);g<=v&&(e=v-1)}}function D(b,d,e){var g=b[d];b[d]=b[e];b[e]=g}d.prototype={all:function(){return this.ge(this.data,[])},search:function(b){var d=this.data,e=[],g=this.Wa;if(!z(b,d.sa))return e;for(var k=
[],p,q,u,v;d;){p=0;for(q=d.children.length;p<q;p++)u=d.children[p],v=d.Ca?g(u):u.sa,z(b,v)&&(d.Ca?e.push(u):w(b,v)?this.ge(u,e):k.push(u));d=k.pop()}return e},load:function(b){if(!b||!b.length)return this;if(b.length<this.ke){for(var d=0,e=b.length;d<e;d++)this.Ia(b[d]);return this}b=this.ie(b.slice(),0,b.length-1,0);this.data.children.length?this.data.height===b.height?this.le(this.data,b):(this.data.height<b.height&&(d=this.data,this.data=b,b=d),this.je(b,this.data.height-b.height-1,!0)):this.data=
b;return this},Ia:function(b){b&&this.je(b,this.data.height-1);return this},clear:function(){this.data={children:[],height:1,sa:[Infinity,Infinity,-Infinity,-Infinity],Ca:!0};return this},remove:function(b){if(!b)return this;for(var d=this.data,e=this.Wa(b),g=[],k=[],p,q,u,v;d||g.length;){d||(d=g.pop(),q=g[g.length-1],p=k.pop(),v=!0);if(d.Ca&&(u=d.children.indexOf(b),-1!==u)){d.children.splice(u,1);g.push(d);this.nf(g);break}v||d.Ca||!w(d.sa,e)?q?(p++,d=q.children[p],v=!1):d=null:(g.push(d),k.push(p),
p=0,q=d,d=d.children[0])}return this},Wa:function(b){return b},Cd:function(b,d){return b[0]-d[0]},Dd:function(b,d){return b[1]-d[1]},toJSON:function(){return this.data},ge:function(b,d){for(var e=[];b;)b.Ca?d.push.apply(d,b.children):e.push.apply(e,b.children),b=e.pop();return d},ie:function(b,d,g,k){var p=g-d+1,q=this.wd,u;if(p<=q)return u={children:b.slice(d,g+1),height:1,sa:null,Ca:!0},e(u,this.Wa),u;k||(k=Math.ceil(Math.log(p)/Math.log(q)),q=Math.ceil(p/Math.pow(q,k-1)));u={children:[],height:k,
sa:null,Ca:!1};var p=Math.ceil(p/q),q=p*Math.ceil(Math.sqrt(q)),v,w,z;for(B(b,d,g,q,this.Cd);d<=g;d+=q)for(w=Math.min(d+q-1,g),B(b,d,w,p,this.Dd),v=d;v<=w;v+=p)z=Math.min(v+p-1,w),u.children.push(this.ie(b,v,z,k-1));e(u,this.Wa);return u},mf:function(b,d,e,g){for(var k,p,q,v,w,z,B,C;;){g.push(d);if(d.Ca||g.length-1===e)break;B=C=Infinity;k=0;for(p=d.children.length;k<p;k++)q=d.children[k],w=u(q.sa),z=q.sa,z=(Math.max(z[2],b[2])-Math.min(z[0],b[0]))*(Math.max(z[3],b[3])-Math.min(z[1],b[1]))-w,z<C?
(C=z,B=w<B?w:B,v=q):z===C&&w<B&&(B=w,v=q);d=v}return d},je:function(b,d,e){var g=this.Wa;e=e?b.sa:g(b);var g=[],p=this.mf(e,this.data,d,g);p.children.push(b);for(k(p.sa,e);0<=d;)if(g[d].children.length>this.wd)this.qf(g,d),d--;else break;this.jf(e,g,d)},qf:function(b,d){var g=b[d],k=g.children.length,p=this.ke;this.kf(g,p,k);k=this.lf(g,p,k);k={children:g.children.splice(k,g.children.length-k),height:g.height,sa:null,Ca:!1};g.Ca&&(k.Ca=!0);e(g,this.Wa);e(k,this.Wa);d?b[d-1].children.push(k):this.le(g,
k)},le:function(b,d){this.data={children:[b,d],height:b.height+1,sa:null,Ca:!1};e(this.data,this.Wa)},lf:function(b,d,e){var k,p,q,v,w,z,B;w=z=Infinity;for(k=d;k<=e-d;k++)p=g(b,0,k,this.Wa),q=g(b,k,e,this.Wa),v=Math.max(0,Math.min(p[2],q[2])-Math.max(p[0],q[0]))*Math.max(0,Math.min(p[3],q[3])-Math.max(p[1],q[1])),p=u(p)+u(q),v<w?(w=v,B=k,z=p<z?p:z):v===w&&p<z&&(z=p,B=k);return B},kf:function(b,d,e){var g=b.Ca?this.Cd:p,k=b.Ca?this.Dd:q,u=this.he(b,d,e,g);d=this.he(b,d,e,k);u<d&&b.children.sort(g)},
he:function(b,d,e,p){b.children.sort(p);p=this.Wa;var q=g(b,0,d,p),u=g(b,e-d,e,p),w=v(q)+v(u),z,B;for(z=d;z<e-d;z++)B=b.children[z],k(q,b.Ca?p(B):B.sa),w+=v(q);for(z=e-d-1;z>=d;z--)B=b.children[z],k(u,b.Ca?p(B):B.sa),w+=v(u);return w},jf:function(b,d,e){for(;0<=e;e--)k(d[e].sa,b)},nf:function(b){for(var d=b.length-1,g;0<=d;d--)0===b[d].children.length?0<d?(g=b[d-1].children,g.splice(g.indexOf(b[d]),1)):this.clear():e(b[d],this.Wa)},pf:function(b){var d=["return a"," - b",";"];this.Cd=new Function("a",
"b",d.join(b[0]));this.Dd=new Function("a","b",d.join(b[1]));this.Wa=new Function("a","return [a"+b.join(", a")+"];")}};"undefined"!==typeof b?b.Ee=d:"undefined"!==typeof self?self.a=d:window.a=d})();Ok=b.Ee})();function Pk(b){this.Ua=Ok(b);this.f={};this.a=0}A=Pk.prototype;A.Ia=function(b,d){if(this.a)throw Error("Can not insert value while reading");var e=[b[0],b[1],b[2],b[3],d];this.Ua.Ia(e);this.f[L(d)]=e};A.load=function(b,d){if(this.a)throw Error("Can not insert values while reading");for(var e=Array(d.length),g=0,k=d.length;g<k;g++){var p=b[g],q=d[g],p=[p[0],p[1],p[2],p[3],q];e[g]=p;this.f[L(q)]=p}this.Ua.load(e)};
A.remove=function(b){if(this.a)throw Error("Can not remove value while reading");b=L(b);var d=this.f[b];delete this.f[b];return null!==this.Ua.remove(d)};function Qk(b,d,e){var g=L(e);if(!cc(b.f[g].slice(0,4),d)){if(b.a)throw Error("Can not update extent while reading");b.remove(e);b.Ia(d,e)}}A.getAll=function(){return this.Ua.all().map(function(b){return b[4]})};function Rk(b,d){return b.Ua.search(d).map(function(b){return b[4]})}A.forEach=function(b,d){++this.a;try{return Sk(this.getAll(),b,d)}finally{--this.a}};
function Tk(b,d,e,g){++b.a;try{return Sk(Rk(b,d),e,g)}finally{--b.a}}function Sk(b,d,e){for(var g,k=0,p=b.length;k<p&&!(g=d.call(e,b[k]));k++);return g}A.clear=function(){this.Ua.clear();this.f={}};A.I=function(){return this.Ua.data.sa};function Uk(b){b=b||{};Qc.call(this,{Aa:b.Aa,Ga:b.Ga,ba:void 0,state:"ready",Pa:void 0!==b.Pa?b.Pa:!0});this.V=db;this.Ka=b.format;this.ca=b.url;void 0!==b.Eg?this.V=b.Eg:void 0!==this.ca&&(this.V=Mk(this.ca,this.Ka));this.cb=void 0!==b.Uh?b.Uh:Nk;var d=void 0!==b.sd?b.sd:!0;this.a=d?new Pk:null;this.M=new Pk;this.h={};this.g={};this.u={};this.w={};this.j=null;var e,g;b.Ra instanceof sb?(e=b.Ra,g=e.a):Array.isArray(b.Ra)&&(g=b.Ra);d||void 0!==e||(e=new sb(g));void 0!==g&&Vk(this,g);void 0!==e&&Wk(this,
e)}Q(Uk,Qc);A=Uk.prototype;A.vc=function(b){Xk(this,b);this.A()};function Xk(b,d){var e=L(d).toString();if(Yk(b,e,d)){Zk(b,e,d);var g=d.C();g?(e=g.I(),b.a&&b.a.Ia(e,d)):b.h[e]=d;U(b,new $k("addfeature",d))}}function Zk(b,d,e){b.w[d]=[S(e,"change",b.We,b),S(e,"propertychange",b.We,b)]}function Yk(b,d,e){var g=!0,k=e.Fa();void 0!==k?k.toString()in b.g?g=!1:b.g[k.toString()]=e:b.u[d]=e;return g}A.Cb=function(b){Vk(this,b);this.A()};
function Vk(b,d){var e,g,k,p,q=[],u=[],v=[];g=0;for(k=d.length;g<k;g++)p=d[g],e=L(p).toString(),Yk(b,e,p)&&u.push(p);g=0;for(k=u.length;g<k;g++){p=u[g];e=L(p).toString();Zk(b,e,p);var w=p.C();w?(e=w.I(),q.push(e),v.push(p)):b.h[e]=p}b.a&&b.a.load(q,v);g=0;for(k=u.length;g<k;g++)U(b,new $k("addfeature",u[g]))}
function Wk(b,d){var e=!1;S(b,"addfeature",function(b){e||(e=!0,d.push(b.fa),e=!1)});S(b,"removefeature",function(b){e||(e=!0,d.remove(b.fa),e=!1)});S(d,"add",function(b){e||(b=b.element,e=!0,this.vc(b),e=!1)},b);S(d,"remove",function(b){e||(b=b.element,e=!0,this.Yb(b),e=!1)},b);b.j=d}
A.clear=function(b){if(b){for(var d in this.w)this.w[d].forEach(Ba);this.j||(this.w={},this.g={},this.u={})}else if(this.a){this.a.forEach(this.kd,this);for(var e in this.h)this.kd(this.h[e])}this.j&&this.j.clear();this.a&&this.a.clear();this.M.clear();this.h={};U(this,new $k("clear"));this.A()};A.Rb=function(b,d,e){if(this.a)return Tk(this.a,b,d,e);if(this.j)return this.j.forEach(d,e)};A.pa=function(){var b;this.j?b=this.j.a:this.a&&(b=this.a.getAll(),ya(this.h)||dd(b,xa(this.h)));return b};
A.I=function(){return this.a.I()};A.We=function(b){b=b.target;var d=L(b).toString(),e=b.C();e?(e=e.I(),d in this.h?(delete this.h[d],this.a&&this.a.Ia(e,b)):this.a&&Qk(this.a,e,b)):d in this.h||(this.a&&this.a.remove(b),this.h[d]=b);e=b.Fa();void 0!==e?(e=e.toString(),d in this.u?(delete this.u[d],this.g[e]=b):this.g[e]!==b&&(al(this,b),this.g[e]=b)):d in this.u||(al(this,b),this.u[d]=b);this.A();U(this,new $k("changefeature",b))};
function bl(b,d,e,g){var k=b.M;d=b.cb(d,e);var p,q;p=0;for(q=d.length;p<q;++p){var u=d[p];Tk(k,u,function(b){return Yb(b.F,u)})||(b.V.call(b,u,e,g),k.Ia(u,{F:u.slice()}))}}A.Yb=function(b){var d=L(b).toString();d in this.h?delete this.h[d]:this.a&&this.a.remove(b);this.kd(b);this.A()};A.kd=function(b){var d=L(b).toString();this.w[d].forEach(Ba);delete this.w[d];var e=b.Fa();void 0!==e?delete this.g[e.toString()]:delete this.u[d];U(this,new $k("removefeature",b))};
function al(b,d){for(var e in b.g)if(b.g[e]===d){delete b.g[e];break}}function $k(b,d){fb.call(this,b);this.fa=d}Q($k,fb);function cl(b){Pj.call(this,b);this.b=null;this.u=Ab()}Q(cl,Pj);cl.prototype.Ib=function(b,d,e,g){var k=this.a;return k.ha().R(b,d.L.J,d.L.rotation,d.bc,function(b){return e.call(g,b,k)})};
cl.prototype.l=function(b,d){var e=b.ia,g=b.L,k=g.T,p=g.J,q=this.a.ha(),u=b.na,v=b.F;void 0!==d.F&&(v=nc(v,d.F));u[0]||u[1]||ic(v)||(g=zk(q,v,p,e,g.ba))&&nh(this,g)&&(this.b=g);if(this.b){var g=this.b,u=g.I(),v=g.N(),w=g.h,p=e*v/(p*w);ih(this.u,e*b.size[0]/2,e*b.size[1]/2,p,p,0,w*(u[0]-k[0])/v,w*(k[1]-u[3])/v);ph(b.Aa,g.nb());qh(b,q)}return!!this.b};function dl(b){Pj.call(this,b);this.h=vf();this.g=null;this.B=Ub();this.s=Ab()}Q(dl,Pj);
dl.prototype.j=function(b,d,e){var g=b.ia,k=b.L,p=k.T,q=k.ba,u=k.rotation,v=b.size,w=Math.round(g*v[0]/2),z=Math.round(g*v[1]/2),B=g/k.J,C=this.a,D=C.ha(),F=D.cd(q),k=Rj(this,b,0);Qj(this,"precompose",e,b,k);var v=e,C=jb(C,"render"),I,J,M,E;if(u||C)v=this.h,I=v.canvas,M=D.i/g,g=e.canvas.width*M,J=e.canvas.height*M,E=Math.round(Math.sqrt(g*g+J*J)),I.width!=E?I.width=I.height=E:v.clearRect(0,0,E,E),I=(E-g)/2/M,J=(E-J)/2/M,B*=M,w=Math.round(M*(w+I)),z=Math.round(M*(z+J));g=v.globalAlpha;v.globalAlpha=
d.opacity;var G=D.pb(q),N=this.g,P;d=D.Nd(q)&&1==d.opacity;d||(N.reverse(),P=[]);for(var O=0,R=N.length;O<R;++O){var W=N[O],K=W.qa,T=Tg(G,K,this.B),ba=K[0],Y=fc(Tg(G,ah(G,p,ba))),K=Math.round(jc(T)*B),ca=Math.round(kc(T)*B),X=Math.round((T[0]-Y[0])*B/K)*K+w+Math.round((Y[0]-p[0])*B),T=Math.round((Y[1]-T[3])*B/ca)*ca+z+Math.round((p[1]-Y[1])*B);if(!d){Y=[X,T,X+K,T+ca];v.save();for(var wa=0,Ta=P.length;wa<Ta;++wa){var Bb=P[wa];oc(Y,Bb)&&(v.beginPath(),v.moveTo(Y[0],Y[1]),v.lineTo(Y[0],Y[3]),v.lineTo(Y[2],
Y[3]),v.lineTo(Y[2],Y[1]),v.moveTo(Bb[0],Bb[1]),v.lineTo(Bb[2],Bb[1]),v.lineTo(Bb[2],Bb[3]),v.lineTo(Bb[0],Bb[3]),v.closePath(),v.clip())}P.push(Y)}ba=fh(D,ba,q);v.drawImage(W.rb(),F,F,ba[0],ba[1],X,T,K,ca);d||v.restore()}C&&(q=I-w/M+w,w=J-z/M+z,p=ih(this.s,E/2-q,E/2-w,B,-B,-u,-p[0]+q/B,-p[1]-w/B),Qj(this,"render",v,b,p));(u||C)&&e.drawImage(v.canvas,-Math.round(I),-Math.round(J),E/M,E/M);v.globalAlpha=g;Qj(this,"postcompose",e,b,k)};
dl.prototype.l=function(b,d){function e(b){b=b.Z();return 2==b||4==b||3==b&&!D}var g=b.ia,k=b.L,p=k.ba,q=this.a,u=q.ha(),v=u.pb(p),w=$g(v,k.J),z=v.N(w),B=k.T;z==k.J?(B=sh(B,z,b.size),k=mc(B,z,k.rotation,b.size)):k=b.F;void 0!==d.F&&(k=nc(k,d.F));if(ic(k))return!1;z=Wg(v,k,z);B={};B[w]={};var C=this.i(u,p,B),D=Zc(q),F=Ub(),I=new Lc(0,0,0,0),J,M,E,G;for(E=z.a;E<=z.f;++E)for(G=z.b;G<=z.g;++G)J=uh(u,w,E,G,g,p),!e(J)&&J.a&&(J=J.a),e(J)?B[w][J.qa.toString()]=J:(M=Sg(v,J.qa,C,I,F),M||(J=Vg(v,J.qa,I,F))&&
C(w+1,J));C=Object.keys(B).map(Number);C.sort(bd);var F=[],N,I=0;for(E=C.length;I<E;++I)for(N in J=C[I],G=B[J],G)J=G[N],2==J.Z()&&F.push(J);this.g=F;rh(b.Uc,u,w,z);th(b,u,v,g,p,k,w,q.get("preload"));oh(b,u);qh(b,u);return!0};function el(b){Pj.call(this,b);this.g=!1;this.M=-1;this.aa=NaN;this.B=Ub();this.h=this.G=null;this.s=vf()}Q(el,Pj);
el.prototype.j=function(b,d,e){var g=b.F,k=b.ia,p=d.Jc?b.bc:{},q=b.L,u=q.ba,q=q.rotation,v=u.I(),w=this.a.ha(),z=Rj(this,b,0);Qj(this,"precompose",e,b,z);var B=this.h;if(B&&!B.g()){var C;jb(this.a,"render")?(this.s.canvas.width=e.canvas.width,this.s.canvas.height=e.canvas.height,C=this.s):C=e;var D=C.globalAlpha;C.globalAlpha=d.opacity;d=b.size[0]*k;var F=b.size[1]*k;nj(C,-q,d/2,F/2);B.b(C,k,z,q,p);if(w.td&&u.hc&&!Yb(v,g)){for(var u=g[0],w=jc(v),I=0;u<v[0];)--I,z=w*I,z=Rj(this,b,z),B.b(C,k,z,q,p),
u+=w;I=0;for(u=g[2];u>v[2];)++I,z=w*I,z=Rj(this,b,z),B.b(C,k,z,q,p),u-=w;z=Rj(this,b,0)}nj(C,q,d/2,F/2);C!=e&&(Qj(this,"render",C,b,z),e.drawImage(C.canvas,0,0));C.globalAlpha=D}Qj(this,"postcompose",e,b,z)};el.prototype.Ib=function(b,d,e,g){if(this.h){var k=this.a,p={};return this.h.h(b,d.L.J,d.L.rotation,{},function(b){var d=L(b).toString();if(!(d in p))return p[d]=!0,e.call(g,b,k)})}};el.prototype.R=function(){mh(this)};
el.prototype.l=function(b){function d(b){var d,g=b.h;g?d=g.call(b,w):(g=e.i)&&(d=g(b,w));if(d){if(d){g=!1;if(Array.isArray(d))for(var k=0,p=d.length;k<p;++k)g=ok(C,b,d[k],nk(w,z),this.R,this)||g;else g=ok(C,b,d,nk(w,z),this.R,this)||g;b=g}else b=!1;this.g=this.g||b}}var e=this.a,g=e.ha();ph(b.Aa,g.nb());qh(b,g);var k=b.na[0],p=b.na[1],q=e.j,u=e.l;if(!this.g&&!q&&k||!u&&p)return!0;var v=b.F,u=b.L,k=u.ba,w=u.J,z=b.ia,p=e.f,B=e.a,q=e.get("renderOrder");void 0===q&&(q=mk);v=Wb(v,B*w);B=u.ba.I();g.td&&
u.ba.hc&&!Yb(B,b.F)&&(b=Math.max(jc(v)/2,jc(B)),v[0]=B[0]-b,v[2]=B[2]+b);if(!this.g&&this.aa==w&&this.M==p&&this.G==q&&Yb(this.B,v))return!0;this.h=null;this.g=!1;var C=new ik(.5*w/z,v,w,e.a);bl(g,v,w,k);if(q){var D=[];g.Rb(v,function(b){D.push(b)},this);D.sort(q);D.forEach(d,this)}else g.Rb(v,d,this);jk(C);this.aa=w;this.M=p;this.G=q;this.B=v;this.h=C;return!0};function fl(b,d){var e=/\{z\}/g,g=/\{x\}/g,k=/\{y\}/g,p=/\{-y\}/g;return function(q){if(q)return b.replace(e,q[0].toString()).replace(g,q[1].toString()).replace(k,function(){return(-q[2]-1).toString()}).replace(p,function(){var b=d.a?d.a[q[0]]:null;return(b.g-b.b+1+q[2]).toString()})}}function gl(b,d){for(var e=b.length,g=Array(e),k=0;k<e;++k)g[k]=fl(b[k],d);return hl(g)}function hl(b){return 1===b.length?b[0]:function(d,e,g){if(d)return b[Mb((d[1]<<d[0])+d[2],b.length)](d,e,g)}}function il(){};function jl(b){dh.call(this,{Aa:b.Aa,Yc:b.Yc,F:b.F,Ga:b.Ga,Lc:b.Lc,ba:b.ba,state:b.state,Da:b.Da,Tc:b.Tc,Pa:b.Pa});this.rc=b.rc;this.Mb=this.g?this.g.bind(this):il;this.tc=null;if(b.tc){var d=b.tc;this.tc=d;kl(this,this.g?this.g.bind(this):gl(d,this.Da))}else if(b.url){var d=b.url,e=[],g=/\{(\d)-(\d)\}/.exec(d)||/\{([a-z])-([a-z])\}/.exec(d);if(g){var k=g[2].charCodeAt(0),p;for(p=g[1].charCodeAt(0);p<=k;++p)e.push(d.replace(g[0],String.fromCharCode(p)))}else e.push(d);d=this.tc=e;kl(this,this.g?this.g.bind(this):
gl(d,this.Da))}b.Mb&&kl(this,b.Mb)}Q(jl,dh);jl.prototype.j=function(b){switch(b.target.Z()){case 1:U(this,new hh("tileloadstart"));break;case 2:U(this,new hh("tileloadend"));break;case 3:U(this,new hh("tileloaderror"))}};function kl(b,d){b.a.clear();b.Mb=d;b.A()}jl.prototype.ef=function(b,d,e){b=this.dd(b,d,e);Lg(this.a,b)&&this.a.get(b)};function ll(b,d){yh.call(this,0,d);this.g=vf();vf();this.a=this.g.canvas;this.a.style.width="100%";this.a.style.height="100%";this.a.className="ol-unselectable";Ze(b,this.a,0);this.f=!0;this.h=Ab()}Q(ll,yh);ll.prototype.Gd=function(b){if(b instanceof ij)return new cl(b);if(b instanceof Yc)return new dl(b);if(b instanceof Cj)return new el(b);bb("unexpected layer configuration");return null};
function ml(b,d,e){var g=b.da(),k=b.g;if(jb(g,d)){var p=e.F,q=e.ia,u=e.L.rotation,v=e.ia,w=e.L,z=w.J;b=ih(b.h,b.a.width/2,b.a.height/2,v/z,-v/z,-w.rotation,-w.T[0],-w.T[1]);new Dj(k,q,p,b,u);U(g,new Vc(d,g,0,e))}}ll.prototype.ma=function(){return"canvas"};
ll.prototype.md=function(b){if(b){var d=this.g,e=b.ia,g=Math.round(b.size[0]*e),e=Math.round(b.size[1]*e);this.a.width!=g||this.a.height!=e?(this.a.width=g,this.a.height=e):d.clearRect(0,0,g,e);var k=b.L.rotation;zh(b);ml(this,"precompose",b);var p=b.Vb;gd(p);nj(d,k,g/2,e/2);var q=b.L.J,u,v,w,z;u=0;for(v=p.length;u<v;++u)z=p[u],w=z.Eb,w=Bh(this,w),Xc(z,q)&&"ready"==z.be&&w.l(b,z)&&w.j(b,z,d);nj(d,-k,g/2,e/2);ml(this,"postcompose",b);this.f||(lf(this.a,!0),this.f=!0);Ch(this,b);b.hb.push(Ah)}else this.f&&
(lf(this.a,!1),this.f=!1)};function nl(b,d){lh.call(this,b);this.target=d}Q(nl,lh);nl.prototype.Zc=db;nl.prototype.Qe=db;function ol(b){var d=document.createElement("DIV");d.style.position="absolute";nl.call(this,b,d);this.b=null;this.g=Db()}Q(ol,nl);ol.prototype.Ib=function(b,d,e,g){var k=this.a;return k.ha().R(b,d.L.J,d.L.rotation,d.bc,function(b){return e.call(g,b,k)})};ol.prototype.Zc=function(){Ye(this.target);this.b=null};
ol.prototype.Sd=function(b,d){var e=b.L,g=e.T,k=e.J,p=e.rotation,q=this.b,u=this.a.ha(),v=b.na,w=b.F;void 0!==d.F&&(w=nc(w,d.F));v[0]||v[1]||ic(w)||(e=zk(u,w,k,b.ia,e.ba))&&nh(this,e)&&(q=e);q&&(v=q.I(),w=q.N(),e=Ab(),ih(e,b.size[0]/2,b.size[1]/2,w/k,w/k,p,(v[0]-g[0])/w,(g[1]-v[3])/w),q!=this.b&&(g=q.f(this),g.style.maxWidth="none",g.style.position="absolute",Ye(this.target),this.target.appendChild(g),this.b=q),jh(e,this.g)||(zf(this.target,e),Eb(this.g,e)),ph(b.Aa,q.nb()),qh(b,u));return!0};function pl(b){var d=document.createElement("DIV");d.style.position="absolute";nl.call(this,b,d);this.g=!0;this.j=1;this.h=0;this.b={}}Q(pl,nl);pl.prototype.Zc=function(){Ye(this.target);this.h=0};
pl.prototype.Sd=function(b,d){if(!d.visible)return this.g&&(lf(this.target,!1),this.g=!1),!0;var e=b.ia,g=b.L,k=g.ba,p=this.a,q=p.ha(),u=q.pb(k),v=q.cd(k),w=$g(u,g.J),z=u.N(w),B=g.T,C;z==g.J?(B=sh(B,z,b.size),C=mc(B,z,g.rotation,b.size)):C=b.F;void 0!==d.F&&(C=nc(C,d.F));var z=Wg(u,C,z),D={};D[w]={};var F=this.i(q,k,D),I=Zc(p),J=Ub(),M=new Lc(0,0,0,0),E,G,N,P;for(N=z.a;N<=z.f;++N)for(P=z.b;P<=z.g;++P)E=uh(q,w,N,P,e,k),G=E.Z(),G=2==G||4==G||3==G&&!I,!G&&E.a&&(E=E.a),G=E.Z(),2==G?D[w][E.qa.toString()]=
E:4==G||3==G&&!I||(G=Sg(u,E.qa,F,M,J),G||(E=Vg(u,E.qa,M,J))&&F(w+1,E));var O;if(this.h!=q.f){for(O in this.b)I=this.b[+O],$e(I.target);this.b={};this.h=q.f}J=Object.keys(D).map(Number);J.sort(bd);var F={},R;N=0;for(P=J.length;N<P;++N){O=J[N];O in this.b?I=this.b[O]:(I=ah(u,B,O),I=new ql(u,I),F[O]=!0,this.b[O]=I);O=D[O];for(R in O){E=I;G=O[R];var W=v,K=G.qa,T=K[0],ba=K[1],Y=K[2],K=K.toString();if(!(K in E.f)){var T=Sb(Zg(E.h,T),E.l),ca=G.rb(E),X=ca.style;X.maxWidth="none";var wa=void 0,Ta=void 0;0<
W?(wa=document.createElement("DIV"),Ta=wa.style,Ta.overflow="hidden",Ta.width=T[0]+"px",Ta.height=T[1]+"px",X.position="absolute",X.left=-W+"px",X.top=-W+"px",X.width=T[0]+2*W+"px",X.height=T[1]+2*W+"px",wa.appendChild(ca)):(X.width=T[0]+"px",X.height=T[1]+"px",wa=ca,Ta=X);Ta.position="absolute";Ta.left=(ba-E.b[1])*T[0]+"px";Ta.top=(E.b[2]-Y)*T[1]+"px";E.a||(E.a=document.createDocumentFragment());E.a.appendChild(wa);E.f[K]=G}}I.a&&(I.target.appendChild(I.a),I.a=null)}v=Object.keys(this.b).map(Number);
v.sort(bd);N=Ab();R=0;for(J=v.length;R<J;++R)if(O=v[R],I=this.b[O],O in D)if(E=I.N(),P=I.ob(),ih(N,b.size[0]/2,b.size[1]/2,E/g.J,E/g.J,g.rotation,(P[0]-B[0])/E,(B[1]-P[1])/E),I.setTransform(N),O in F){for(--O;0<=O;--O)if(O in this.b){P=this.b[O].target;P.parentNode&&P.parentNode.insertBefore(I.target,P.nextSibling);break}0>O&&Ze(this.target,I.target,0)}else{if(!b.na[0]&&!b.na[1]){G=Ug(I.h,C,I.b[0],M);O=[];E=P=void 0;for(E in I.f)P=I.f[E],W=P.qa,Mc(G,W[1],W[2])||O.push(P);W=G=void 0;G=0;for(W=O.length;G<
W;++G)P=O[G],E=P.qa.toString(),$e(P.rb(I)),delete I.f[E]}}else $e(I.target),delete this.b[O];d.opacity!=this.j&&(this.j=this.target.style.opacity=d.opacity);d.visible&&!this.g&&(lf(this.target,!0),this.g=!0);rh(b.Uc,q,w,z);th(b,q,u,e,k,C,w,p.get("preload"));oh(b,q);qh(b,q);return!0};
function ql(b,d){this.target=document.createElement("DIV");this.target.style.position="absolute";this.target.style.width="100%";this.target.style.height="100%";this.h=b;this.b=d;this.i=gc(Tg(b,d));this.j=b.N(d[0]);this.f={};this.a=null;this.g=Db();this.l=[0,0]}ql.prototype.ob=function(){return this.i};ql.prototype.N=function(){return this.j};ql.prototype.setTransform=function(b){jh(b,this.g)||(zf(this.target,b),Eb(this.g,b))};function rl(b){this.h=vf();var d=this.h.canvas;d.style.maxWidth="none";d.style.position="absolute";nl.call(this,b,d);this.b=!1;this.j=-1;this.u=NaN;this.l=Ub();this.g=this.s=null;this.G=Ab();this.B=Ab()}Q(rl,nl);A=rl.prototype;A.Zc=function(){var b=this.h.canvas;b.width=b.width;this.j=0};
A.Qe=function(b,d){var e=b.L,g=e.T,k=e.rotation,p=e.J,e=b.ia,q=b.size[0],u=b.size[1],v=q*e,w=u*e,g=ih(this.G,e*q/2,e*u/2,e/p,-e/p,-k,-g[0],-g[1]),p=this.h;p.canvas.width=v;p.canvas.height=w;q=ih(this.B,0,0,1/e,1/e,0,-(v-q)/2*e,-(w-u)/2*e);zf(p.canvas,q);sl(this,"precompose",b,g);(q=this.g)&&!q.g()&&(p.globalAlpha=d.opacity,q.b(p,e,g,k,d.Jc?b.bc:{}),sl(this,"render",b,g));sl(this,"postcompose",b,g)};
function sl(b,d,e,g){var k=b.h;b=b.a;jb(b,d)&&(new Dj(k,e.ia,e.F,g,e.L.rotation),U(b,new Vc(d,b,0,e)))}A.Ib=function(b,d,e,g){if(this.g){var k=this.a,p={};return this.g.h(b,d.L.J,d.L.rotation,{},function(b){var d=L(b).toString();if(!(d in p))return p[d]=!0,e.call(g,b,k)})}};A.Re=function(){mh(this)};
A.Sd=function(b){function d(b){var d,g=b.h;g?d=g.call(b,v):(g=e.i)&&(d=g(b,v));if(d){if(d){g=!1;if(Array.isArray(d))for(var k=0,p=d.length;k<p;++k)g=ok(z,b,d[k],nk(v,w),this.Re,this)||g;else g=ok(z,b,d,nk(v,w),this.Re,this)||g;b=g}else b=!1;this.b=this.b||b}}var e=this.a,g=e.ha();ph(b.Aa,g.nb());qh(b,g);var k=b.na[0],p=b.na[1],q=e.j,u=e.l;if(!this.b&&!q&&k||!u&&p)return!0;var p=b.F,q=b.L,k=q.ba,v=q.J,w=b.ia;b=e.f;u=e.a;q=e.get("renderOrder");void 0===q&&(q=mk);p=Wb(p,u*v);if(!this.b&&this.u==v&&this.j==
b&&this.s==q&&Yb(this.l,p))return!0;this.g=null;this.b=!1;var z=new ik(.5*v/w,p,v,e.a);bl(g,p,v,k);if(q){var B=[];g.Rb(p,function(b){B.push(b)},this);B.sort(q);B.forEach(d,this)}else g.Rb(p,d,this);jk(z);this.u=v;this.j=b;this.s=q;this.l=p;this.g=z;return!0};function tl(b,d){yh.call(this,0,d);this.g=vf();var e=this.g.canvas;e.style.position="absolute";e.style.width="100%";e.style.height="100%";e.className="ol-unselectable";Ze(b,e,0);this.h=Ab();this.a=document.createElement("DIV");this.a.className="ol-unselectable";e=this.a.style;e.position="absolute";e.width="100%";e.height="100%";S(this.a,"touchstart",hb);Ze(b,this.a,0);this.f=!0}Q(tl,yh);tl.prototype.W=function(){$e(this.a);tl.xa.W.call(this)};
tl.prototype.Gd=function(b){if(b instanceof ij)b=new ol(b);else if(b instanceof Yc)b=new pl(b);else if(b instanceof Cj)b=new rl(b);else return bb("unexpected layer configuration"),null;return b};function ul(b,d,e){var g=b.da();if(jb(g,d)){var k=e.F,p=e.ia,q=e.L,u=q.rotation,v=b.g,w=v.canvas;ih(b.h,w.width/2,w.height/2,p/q.J,-p/q.J,-q.rotation,-q.T[0],-q.T[1]);new Dj(v,p,k,b.h,u);U(g,new Vc(d,g,0,e))}}tl.prototype.ma=function(){return"dom"};
tl.prototype.md=function(b){if(b){var d=this.da();if(jb(d,"precompose")||jb(d,"postcompose")){var d=this.g.canvas,e=b.ia;d.width=b.size[0]*e;d.height=b.size[1]*e}ul(this,"precompose",b);d=b.Vb;gd(d);var e=b.L.J,g,k,p,q;g=0;for(k=d.length;g<k;++g)q=d[g],p=q.Eb,p=Bh(this,p),Ze(this.a,p.target,g),Xc(q,e)&&"ready"==q.be?p.Sd(b,q)&&p.Qe(b,q):p.Zc();var d=b.Ic,u;for(u in this.b)u in d||(p=this.b[u],$e(p.target));this.f||(lf(this.a,!0),this.f=!0);zh(b);Ch(this,b);b.hb.push(Ah);ul(this,"postcompose",b)}else this.f&&
(lf(this.a,!1),this.f=!1)};function vl(b){this.a=b}vl.prototype.ha=function(){return this.a};function wl(b){this.a=b}Q(wl,vl);wl.prototype.ma=function(){return 35632};function xl(b){this.a=b}Q(xl,vl);xl.prototype.ma=function(){return 35633};function yl(){this.a="precision mediump float;\nvarying vec2 v_texCoord;\nvarying float v_opacity;\n\nuniform float u_opacity;\nuniform sampler2D u_image;\n\nvoid main(void) {\n  vec4 texColor = texture2D(u_image, v_texCoord);\n  gl_FragColor.rgb = texColor.rgb;\n  float alpha = texColor.a * v_opacity * u_opacity;\n  if (alpha == 0.0) {\n    discard;\n  }\n  gl_FragColor.a = alpha;\n}\n"}Q(yl,wl);da(yl);
function zl(){this.a="varying vec2 v_texCoord;\nvarying float v_opacity;\n\nattribute vec2 a_position;\nattribute vec2 a_texCoord;\nattribute vec2 a_offsets;\nattribute float a_opacity;\nattribute float a_rotateWithView;\n\nuniform mat4 u_projectionMatrix;\nuniform mat4 u_offsetScaleMatrix;\nuniform mat4 u_offsetRotateMatrix;\n\nvoid main(void) {\n  mat4 offsetMatrix = u_offsetScaleMatrix;\n  if (a_rotateWithView == 1.0) {\n    offsetMatrix = u_offsetScaleMatrix * u_offsetRotateMatrix;\n  }\n  vec4 offsets = offsetMatrix * vec4(a_offsets, 0., 0.);\n  gl_Position = u_projectionMatrix * vec4(a_position, 0., 1.) + offsets;\n  v_texCoord = a_texCoord;\n  v_opacity = a_opacity;\n}\n\n\n"}
Q(zl,xl);da(zl);function Al(b,d){this.l=b.getUniformLocation(d,"u_offsetRotateMatrix");this.s=b.getUniformLocation(d,"u_offsetScaleMatrix");this.i=b.getUniformLocation(d,"u_opacity");this.j=b.getUniformLocation(d,"u_projectionMatrix");this.a=b.getAttribLocation(d,"a_offsets");this.f=b.getAttribLocation(d,"a_opacity");this.g=b.getAttribLocation(d,"a_position");this.b=b.getAttribLocation(d,"a_rotateWithView");this.h=b.getAttribLocation(d,"a_texCoord")};function Bl(b){this.a=void 0!==b?b:[]};function Cl(b,d){this.j=b;this.a=d;this.f={};this.h={};this.g={};this.s=this.u=this.i=this.l=null;(this.b=0<=ta.indexOf("OES_element_index_uint"))&&d.getExtension("OES_element_index_uint");S(this.j,"webglcontextlost",this.w,this);S(this.j,"webglcontextrestored",this.$,this)}Q(Cl,eb);
function Dl(b,d,e){var g=b.a,k=e.a,p=String(L(e));if(p in b.f)g.bindBuffer(d,b.f[p].buffer);else{var q=g.createBuffer();g.bindBuffer(d,q);var u;34962==d?u=new Float32Array(k):34963==d?u=b.b?new Uint32Array(k):new Uint16Array(k):bb();g.bufferData(d,u,35044);b.f[p]={Ji:e,buffer:q}}}function El(b,d){var e=b.a,g=String(L(d)),k=b.f[g];e.isContextLost()||e.deleteBuffer(k.buffer);delete b.f[g]}
Cl.prototype.W=function(){Ia(this.j);var b=this.a;if(!b.isContextLost()){for(var d in this.f)b.deleteBuffer(this.f[d].buffer);for(d in this.g)b.deleteProgram(this.g[d]);for(d in this.h)b.deleteShader(this.h[d]);b.deleteFramebuffer(this.i);b.deleteRenderbuffer(this.s);b.deleteTexture(this.u)}};
function Fl(b){if(!b.i){var d=b.a,e=d.createFramebuffer();d.bindFramebuffer(d.FRAMEBUFFER,e);var g=Gl(d,1,1),k=d.createRenderbuffer();d.bindRenderbuffer(d.RENDERBUFFER,k);d.renderbufferStorage(d.RENDERBUFFER,d.DEPTH_COMPONENT16,1,1);d.framebufferTexture2D(d.FRAMEBUFFER,d.COLOR_ATTACHMENT0,d.TEXTURE_2D,g,0);d.framebufferRenderbuffer(d.FRAMEBUFFER,d.DEPTH_ATTACHMENT,d.RENDERBUFFER,k);d.bindTexture(d.TEXTURE_2D,null);d.bindRenderbuffer(d.RENDERBUFFER,null);d.bindFramebuffer(d.FRAMEBUFFER,null);b.i=e;
b.u=g;b.s=k}return b.i}function Hl(b,d){var e=String(L(d));if(e in b.h)return b.h[e];var g=b.a,k=g.createShader(d.ma());g.shaderSource(k,d.ha());g.compileShader(k);return b.h[e]=k}function Il(b,d,e){var g=L(d)+"/"+L(e);if(g in b.g)return b.g[g];var k=b.a,p=k.createProgram();k.attachShader(p,Hl(b,d));k.attachShader(p,Hl(b,e));k.linkProgram(p);return b.g[g]=p}Cl.prototype.w=function(){va(this.f);va(this.h);va(this.g);this.s=this.u=this.i=this.l=null};Cl.prototype.$=function(){};
function Jl(b,d){if(d==b.l)return!1;b.a.useProgram(d);b.l=d;return!0}function Kl(b,d,e){var g=b.createTexture();b.bindTexture(b.TEXTURE_2D,g);b.texParameteri(b.TEXTURE_2D,b.TEXTURE_MAG_FILTER,b.LINEAR);b.texParameteri(b.TEXTURE_2D,b.TEXTURE_MIN_FILTER,b.LINEAR);void 0!==d&&b.texParameteri(3553,10242,d);void 0!==e&&b.texParameteri(3553,10243,e);return g}function Gl(b,d,e){var g=Kl(b,void 0,void 0);b.texImage2D(b.TEXTURE_2D,0,b.RGBA,d,e,0,b.RGBA,b.UNSIGNED_BYTE,null);return g}
function Ll(b,d){var e=Kl(b,33071,33071);b.texImage2D(b.TEXTURE_2D,0,b.RGBA,b.RGBA,b.UNSIGNED_BYTE,d);return e};function Ml(b,d){this.B=this.ea=void 0;this.s=lc(d);this.$=[];this.i=[];this.aa=void 0;this.h=[];this.g=[];this.R=this.M=void 0;this.f=[];this.G=this.l=null;this.V=void 0;this.cb=Db();this.tb=Db();this.ra=this.ca=void 0;this.ub=Db();this.bb=this.wa=this.la=void 0;this.La=[];this.j=[];this.a=[];this.w=null;this.b=[];this.u=[];this.Ka=void 0}Q(Ml,Uc);
function Nl(b,d){var e=b.w,g=b.l,k=b.La,p=b.j,q=d.a;return function(){if(!q.isContextLost()){var b,v;b=0;for(v=k.length;b<v;++b)q.deleteTexture(k[b]);b=0;for(v=p.length;b<v;++b)q.deleteTexture(p[b])}El(d,e);El(d,g)}}
function Ol(b,d,e,g){var k=b.ea,p=b.B,q=b.aa,u=b.M,v=b.R,w=b.V,z=b.ca,B=b.ra,C=b.la?1:0,D=b.wa,F=b.bb,I=b.Ka,J=Math.cos(D),D=Math.sin(D),M=b.f.length,E=b.a.length,G,N,P,O,R,W;for(G=0;G<e;G+=g)R=d[G]-b.s[0],W=d[G+1]-b.s[1],N=E/8,P=-F*k,O=-F*(q-p),b.a[E++]=R,b.a[E++]=W,b.a[E++]=P*J-O*D,b.a[E++]=P*D+O*J,b.a[E++]=z/v,b.a[E++]=(B+q)/u,b.a[E++]=w,b.a[E++]=C,P=F*(I-k),O=-F*(q-p),b.a[E++]=R,b.a[E++]=W,b.a[E++]=P*J-O*D,b.a[E++]=P*D+O*J,b.a[E++]=(z+I)/v,b.a[E++]=(B+q)/u,b.a[E++]=w,b.a[E++]=C,P=F*(I-k),O=F*
p,b.a[E++]=R,b.a[E++]=W,b.a[E++]=P*J-O*D,b.a[E++]=P*D+O*J,b.a[E++]=(z+I)/v,b.a[E++]=B/u,b.a[E++]=w,b.a[E++]=C,P=-F*k,O=F*p,b.a[E++]=R,b.a[E++]=W,b.a[E++]=P*J-O*D,b.a[E++]=P*D+O*J,b.a[E++]=z/v,b.a[E++]=B/u,b.a[E++]=w,b.a[E++]=C,b.f[M++]=N,b.f[M++]=N+1,b.f[M++]=N+2,b.f[M++]=N,b.f[M++]=N+2,b.f[M++]=N+3}Ml.prototype.Id=function(b,d){this.b.push(this.f.length);this.u.push(d);var e=b.a;Ol(this,e,e.length,b.D)};
Ml.prototype.Jd=function(b,d){this.b.push(this.f.length);this.u.push(d);var e=b.a;Ol(this,e,e.length,b.D)};function Pl(b,d,e,g){var k,p,q,u=d.length;for(q=0;q<u;++q)k=d[q],p=L(k).toString(),p in e?k=e[p]:(k=Ll(g,k),e[p]=k),b[q]=k}
function Ql(b,d,e,g,k,p,q,u,v,w,z){var B=d.a;Dl(d,34962,b.w);Dl(d,34963,b.l);var C=yl.Tb(),D=zl.Tb(),D=Il(d,C,D);b.G?C=b.G:(C=new Al(B,D),b.G=C);Jl(d,D);B.enableVertexAttribArray(C.g);B.vertexAttribPointer(C.g,2,5126,!1,32,0);B.enableVertexAttribArray(C.a);B.vertexAttribPointer(C.a,2,5126,!1,32,8);B.enableVertexAttribArray(C.h);B.vertexAttribPointer(C.h,2,5126,!1,32,16);B.enableVertexAttribArray(C.f);B.vertexAttribPointer(C.f,1,5126,!1,32,24);B.enableVertexAttribArray(C.b);B.vertexAttribPointer(C.b,
1,5126,!1,32,28);D=b.ub;ih(D,0,0,2/(g*p[0]),2/(g*p[1]),-k,-(e[0]-b.s[0]),-(e[1]-b.s[1]));e=b.tb;g=2/p[0];p=2/p[1];Fb(e);e[0]=g;e[5]=p;e[10]=1;e[15]=1;p=b.cb;Fb(p);0!==k&&Jb(p,-k);B.uniformMatrix4fv(C.j,!1,D);B.uniformMatrix4fv(C.s,!1,e);B.uniformMatrix4fv(C.l,!1,p);B.uniform1f(C.i,q);var F;if(void 0===v)Rl(b,B,d,u,b.La,b.$);else{if(w)a:{k=d.b?5125:5123;d=d.b?4:2;p=b.b.length-1;for(q=b.j.length-1;0<=q;--q)for(B.bindTexture(3553,b.j[q]),w=0<q?b.i[q-1]:0,D=b.i[q];0<=p&&b.b[p]>=w;){F=b.b[p];e=b.u[p];
g=L(e).toString();if(void 0===u[g]&&e.C()&&(void 0===z||oc(z,e.C().I()))&&(B.clear(B.COLOR_BUFFER_BIT|B.DEPTH_BUFFER_BIT),B.drawElements(4,D-F,k,F*d),D=v(e))){b=D;break a}D=F;p--}b=void 0}else B.clear(B.COLOR_BUFFER_BIT|B.DEPTH_BUFFER_BIT),Rl(b,B,d,u,b.j,b.i),b=(b=v(null))?b:void 0;F=b}B.disableVertexAttribArray(C.g);B.disableVertexAttribArray(C.a);B.disableVertexAttribArray(C.h);B.disableVertexAttribArray(C.f);B.disableVertexAttribArray(C.b);return F}
function Rl(b,d,e,g,k,p){var q=e.b?5125:5123;e=e.b?4:2;if(ya(g)){var u;b=0;g=k.length;for(u=0;b<g;++b){d.bindTexture(3553,k[b]);var v=p[b];d.drawElements(4,v-u,q,u*e);u=v}}else{u=0;var w,v=0;for(w=k.length;v<w;++v){d.bindTexture(3553,k[v]);for(var z=0<v?p[v-1]:0,B=p[v],C=z;u<b.b.length&&b.b[u]<=B;){var D=L(b.u[u]).toString();void 0!==g[D]?(C!==z&&d.drawElements(4,z-C,q,C*e),z=C=u===b.b.length-1?B:b.b[u+1]):z=u===b.b.length-1?B:b.b[u+1];u++}C!==z&&d.drawElements(4,z-C,q,C*e)}}}
Ml.prototype.pd=function(b){var d=b.i,e=b.a,g=b.w,k=b.b,p=b.s,q=b.ob(),u=b.u,v=b.ga(),w=b.j;b=b.l;var z;0===this.h.length?this.h.push(e):(z=this.h[this.h.length-1],L(z)!=L(e)&&(this.$.push(this.f.length),this.h.push(e)));0===this.g.length?this.g.push(k):(z=this.g[this.g.length-1],L(z)!=L(k)&&(this.i.push(this.f.length),this.g.push(k)));this.ea=d[0];this.B=d[1];this.aa=w[1];this.M=g[1];this.R=g[0];this.V=p;this.ca=q[0];this.ra=q[1];this.wa=v;this.la=u;this.bb=b;this.Ka=w[0]};
function Sl(b,d,e){this.j=d;this.l=b;this.i=e;this.f={}}function Tl(b,d){var e=[],g;for(g in b.f)e.push(Nl(b.f[g],d));return function(){for(var b=e.length,d,g=0;g<b;g++)d=e[g].apply(this,arguments);return d}}
function Ul(b,d){for(var e in b.f){var g=b.f[e],k=d,p=k.a;g.$.push(g.f.length);g.i.push(g.f.length);g.w=new Bl(g.a);Dl(k,34962,g.w);g.l=new Bl(g.f);Dl(k,34963,g.l);k={};Pl(g.La,g.h,k,p);Pl(g.j,g.g,k,p);g.ea=void 0;g.B=void 0;g.aa=void 0;g.h=null;g.g=null;g.M=void 0;g.R=void 0;g.f=null;g.V=void 0;g.ca=void 0;g.ra=void 0;g.la=void 0;g.wa=void 0;g.bb=void 0;g.a=null;g.Ka=void 0}}Sl.prototype.a=function(b,d){var e=this.f[d];void 0===e&&(e=new Vl[d](this.l,this.j),this.f[d]=e);return e};
Sl.prototype.g=function(){return ya(this.f)};Sl.prototype.b=function(b,d,e,g,k,p,q,u){var v,w;p=0;for(v=Sj.length;p<v;++p)w=this.f[Sj[p]],void 0!==w&&Ql(w,b,d,e,g,k,q,u,void 0,!1)};function Wl(b,d,e,g,k,p,q,u,v){var w=Xl,z,B;for(z=Sj.length-1;0<=z;--z)if(B=b.f[Sj[z]],void 0!==B&&(B=Ql(B,d,e,g,k,w,p,q,u,!0,v)))return B}
Sl.prototype.h=function(b,d,e,g,k,p,q,u,v,w){var z=d.a;z.bindFramebuffer(z.FRAMEBUFFER,Fl(d));var B;void 0!==this.i&&(B=Wb(bc(b),g*this.i));return Wl(this,d,b,g,k,u,v,function(b){var d=new Uint8Array(4);z.readPixels(0,0,1,1,z.RGBA,z.UNSIGNED_BYTE,d);if(0<d[3]&&(b=w(b)))return b},B)};var Vl={Image:Ml},Xl=[1,1];function Yl(){this.a="precision mediump float;\nvarying vec2 v_texCoord;\n\n\nuniform float u_opacity;\nuniform sampler2D u_texture;\n\nvoid main(void) {\n  vec4 texColor = texture2D(u_texture, v_texCoord);\n  gl_FragColor.rgb = texColor.rgb;\n  gl_FragColor.a = texColor.a * u_opacity;\n}\n"}Q(Yl,wl);da(Yl);
function Zl(){this.a="varying vec2 v_texCoord;\n\n\nattribute vec2 a_position;\nattribute vec2 a_texCoord;\n\nuniform mat4 u_texCoordMatrix;\nuniform mat4 u_projectionMatrix;\n\nvoid main(void) {\n  gl_Position = u_projectionMatrix * vec4(a_position, 0., 1.);\n  v_texCoord = (u_texCoordMatrix * vec4(a_texCoord, 0., 1.)).st;\n}\n\n\n"}Q(Zl,xl);da(Zl);
function $l(b,d){this.b=b.getUniformLocation(d,"u_opacity");this.g=b.getUniformLocation(d,"u_projectionMatrix");this.i=b.getUniformLocation(d,"u_texCoordMatrix");this.h=b.getUniformLocation(d,"u_texture");this.a=b.getAttribLocation(d,"a_position");this.f=b.getAttribLocation(d,"a_texCoord")};function am(b,d){lh.call(this,d);this.g=b;this.ca=new Bl([-1,-1,0,0,1,-1,1,0,-1,1,0,1,1,1,1,1]);this.j=this.$a=null;this.l=void 0;this.G=Ab();this.V=Db();this.u=null}Q(am,lh);
function bm(b,d,e){var g=b.g.g;if(void 0===b.l||b.l!=e){d.hb.push(qa(function(b,d,e){b.isContextLost()||(b.deleteFramebuffer(d),b.deleteTexture(e))},g,b.j,b.$a));d=Gl(g,e,e);var k=g.createFramebuffer();g.bindFramebuffer(36160,k);g.framebufferTexture2D(36160,36064,3553,d,0);b.$a=d;b.j=k;b.l=e}else g.bindFramebuffer(36160,b.j)}
am.prototype.Se=function(b,d,e){cm(this,"precompose",b);Dl(e,34962,this.ca);var g=e.a,k=Yl.Tb(),p=Zl.Tb(),k=Il(e,k,p);this.u?p=this.u:this.u=p=new $l(g,k);Jl(e,k)&&(g.enableVertexAttribArray(p.a),g.vertexAttribPointer(p.a,2,5126,!1,16,0),g.enableVertexAttribArray(p.f),g.vertexAttribPointer(p.f,2,5126,!1,16,8),g.uniform1i(p.h,0));g.uniformMatrix4fv(p.i,!1,this.G);g.uniformMatrix4fv(p.g,!1,this.V);g.uniform1f(p.b,d.opacity);g.bindTexture(3553,this.$a);g.drawArrays(5,0,4);cm(this,"postcompose",b)};
function cm(b,d,e){b=b.a;jb(b,d)&&U(b,new Vc(d,b,0,e))}am.prototype.w=function(){this.j=this.$a=null;this.l=void 0};function dm(b,d){am.call(this,b,d);this.b=null}Q(dm,am);function em(b,d){var e=d.f();return Ll(b.g.g,e)}dm.prototype.Ib=function(b,d,e,g){var k=this.a;return k.ha().R(b,d.L.J,d.L.rotation,d.bc,function(b){return e.call(g,b,k)})};
dm.prototype.Td=function(b,d){var e=this.g.g,g=b.ia,k=b.L,p=k.T,q=k.J,u=k.rotation,v=this.b,w=this.$a,z=this.a.ha(),B=b.na,C=b.F;void 0!==d.F&&(C=nc(C,d.F));B[0]||B[1]||ic(C)||(k=zk(z,C,q,g,k.ba))&&nh(this,k)&&(v=k,w=em(this,k),this.$a&&b.hb.push(qa(function(b,d){b.isContextLost()||b.deleteTexture(d)},e,this.$a)));v&&(e=this.g.h.j,fm(this,e.width,e.height,g,p,q,u,v.I()),g=this.G,Fb(g),Ib(g,1,-1),Hb(g,0,-1),this.b=v,this.$a=w,ph(b.Aa,v.nb()),qh(b,z));return!0};
function fm(b,d,e,g,k,p,q,u){d*=p;e*=p;b=b.V;Fb(b);Ib(b,2*g/d,2*g/e);Jb(b,-q);Hb(b,u[0]-k[0],u[1]-k[1]);Ib(b,(u[2]-u[0])/2,(u[3]-u[1])/2);Hb(b,1,1)};function gm(){this.a="precision mediump float;\nvarying vec2 v_texCoord;\n\n\nuniform sampler2D u_texture;\n\nvoid main(void) {\n  gl_FragColor = texture2D(u_texture, v_texCoord);\n}\n"}Q(gm,wl);da(gm);function hm(){this.a="varying vec2 v_texCoord;\n\n\nattribute vec2 a_position;\nattribute vec2 a_texCoord;\nuniform vec4 u_tileOffset;\n\nvoid main(void) {\n  gl_Position = vec4(a_position * u_tileOffset.xy + u_tileOffset.zw, 0., 1.);\n  v_texCoord = a_texCoord;\n}\n\n\n"}Q(hm,xl);da(hm);
function im(b,d){this.b=b.getUniformLocation(d,"u_texture");this.g=b.getUniformLocation(d,"u_tileOffset");this.a=b.getAttribLocation(d,"a_position");this.f=b.getAttribLocation(d,"a_texCoord")};function jm(b,d){am.call(this,b,d);this.M=gm.Tb();this.la=hm.Tb();this.b=null;this.aa=new Bl([0,0,0,1,1,0,1,1,0,1,0,0,1,1,1,0]);this.B=this.h=null;this.s=-1;this.R=[0,0]}Q(jm,am);jm.prototype.W=function(){El(this.g.h,this.aa);jm.xa.W.call(this)};jm.prototype.i=function(b,d,e){var g=this.g;return function(k,p){return eh(b,d,k,p,function(b){var d=Lg(g.f,b.getKey());d&&(e[k]||(e[k]={}),e[k][b.qa.toString()]=b);return d})}};jm.prototype.w=function(){jm.xa.w.call(this);this.b=null};
jm.prototype.Td=function(b,d,e){var g=this.g,k=e.a,p=b.L,q=p.ba,u=this.a,v=u.ha(),w=v.pb(q),z=$g(w,p.J),B=w.N(z),C=fh(v,z,q),D=C[0]/Sb(Zg(w,z),this.R)[0],F=B/D,I=v.cd(q),J=p.T,M;B==p.J?(J=sh(J,B,b.size),M=mc(J,B,p.rotation,b.size)):M=b.F;B=Wg(w,M,B);if(this.h&&Nc(this.h,B)&&this.s==v.f)F=this.B;else{var E=[B.f-B.a+1,B.g-B.b+1],G=Math.pow(2,Math.ceil(Math.log(Math.max(E[0]*C[0],E[1]*C[1]))/Math.LN2)),E=F*G,N=w.ob(z),P=N[0]+B.a*C[0]*F,F=N[1]+B.b*C[1]*F,F=[P,F,P+E,F+E];bm(this,b,G);k.viewport(0,0,G,
G);k.clearColor(0,0,0,0);k.clear(16384);k.disable(3042);G=Il(e,this.M,this.la);Jl(e,G);this.b||(this.b=new im(k,G));Dl(e,34962,this.aa);k.enableVertexAttribArray(this.b.a);k.vertexAttribPointer(this.b.a,2,5126,!1,16,0);k.enableVertexAttribArray(this.b.f);k.vertexAttribPointer(this.b.f,2,5126,!1,16,8);k.uniform1i(this.b.b,0);e={};e[z]={};var O=this.i(v,q,e),R=Zc(u),G=!0,P=Ub(),W=new Lc(0,0,0,0),K,T,ba;for(T=B.a;T<=B.f;++T)for(ba=B.b;ba<=B.g;++ba){N=uh(v,z,T,ba,D,q);if(void 0!==d.F&&(K=Tg(w,N.qa,P),
!oc(K,d.F)))continue;K=N.Z();K=2==K||4==K||3==K&&!R;!K&&N.a&&(N=N.a);K=N.Z();if(2==K){if(Lg(g.f,N.getKey())){e[z][N.qa.toString()]=N;continue}}else if(4==K||3==K&&!R)continue;G=!1;K=Sg(w,N.qa,O,W,P);K||(N=Vg(w,N.qa,W,P))&&O(z+1,N)}d=Object.keys(e).map(Number);d.sort(bd);for(var O=new Float32Array(4),Y,ca,X,R=0,W=d.length;R<W;++R)for(Y in ca=e[d[R]],ca)N=ca[Y],K=Tg(w,N.qa,P),T=2*(K[2]-K[0])/E,ba=2*(K[3]-K[1])/E,X=2*(K[0]-F[0])/E-1,K=2*(K[1]-F[1])/E-1,zb(O,T,ba,X,K),k.uniform4fv(this.b.g,O),km(g,N,
C,I*D),k.drawArrays(5,0,4);G?(this.h=B,this.B=F,this.s=v.f):(this.B=this.h=null,this.s=-1,b.vb=!0)}rh(b.Uc,v,z,B);var wa=g.j;th(b,v,w,D,q,M,z,u.get("preload"),function(b){var d;(d=2!=b.Z()||Lg(g.f,b.getKey()))||(d=b.getKey()in wa.pc);d||wa.enqueue([b,Yg(w,b.qa),w.N(b.qa[0]),C,I*D])},this);oh(b,v);qh(b,v);k=this.G;Fb(k);Hb(k,(J[0]-F[0])/(F[2]-F[0]),(J[1]-F[1])/(F[3]-F[1]));0!==p.rotation&&Jb(k,p.rotation);Ib(k,b.size[0]*p.J/(F[2]-F[0]),b.size[1]*p.J/(F[3]-F[1]));Hb(k,-.5,-.5);return!0};function lm(b,d){am.call(this,b,d);this.h=!1;this.R=-1;this.M=NaN;this.B=Ub();this.s=this.b=this.aa=null}Q(lm,am);A=lm.prototype;A.Se=function(b,d,e){this.s=d;var g=b.L,k=this.b;k&&!k.g()&&k.b(e,g.T,g.J,g.rotation,b.size,b.ia,d.opacity,d.Jc?b.bc:{})};A.W=function(){var b=this.b;b&&(Tl(b,this.g.h)(),this.b=null);lm.xa.W.call(this)};
A.Ib=function(b,d,e,g){if(this.b&&this.s){var k=d.L,p=this.a,q={};return this.b.h(b,this.g.h,k.T,k.J,k.rotation,d.size,d.ia,this.s.opacity,{},function(b){var d=L(b).toString();if(!(d in q))return q[d]=!0,e.call(g,b,p)})}};A.Te=function(){mh(this)};
A.Td=function(b,d,e){function g(b){var d,e=b.h;e?d=e.call(b,w):(e=k.i)&&(d=e(b,w));if(d){if(d){e=!1;if(Array.isArray(d))for(var g=0,p=d.length;g<p;++g)e=ok(C,b,d[g],nk(w,z),this.Te,this)||e;else e=ok(C,b,d,nk(w,z),this.Te,this)||e;b=e}else b=!1;this.h=this.h||b}}var k=this.a;d=k.ha();ph(b.Aa,d.nb());qh(b,d);var p=b.na[0],q=b.na[1],u=k.j,v=k.l;if(!this.h&&!u&&p||!v&&q)return!0;var q=b.F,u=b.L,p=u.ba,w=u.J,z=b.ia,u=k.f,B=k.a,v=k.get("renderOrder");void 0===v&&(v=mk);q=Wb(q,B*w);if(!this.h&&this.M==
w&&this.R==u&&this.aa==v&&Yb(this.B,q))return!0;this.b&&b.hb.push(Tl(this.b,e));this.h=!1;var C=new Sl(.5*w/z,q,k.a);bl(d,q,w,p);if(v){var D=[];d.Rb(q,function(b){D.push(b)},this);D.sort(v);D.forEach(g,this)}else d.Rb(q,g,this);Ul(C,e);this.M=w;this.R=u;this.aa=v;this.B=q;this.b=C;return!0};function mm(b,d){yh.call(this,0,d);this.a=document.createElement("CANVAS");this.a.style.width="100%";this.a.style.height="100%";this.a.className="ol-unselectable";Ze(b,this.a,0);this.w=this.$=0;this.ea=vf();this.l=!0;this.g=Df(this.a,{antialias:!0,depth:!1,failIfMajorPerformanceCaveat:!0,preserveDrawingBuffer:!1,stencil:!0});this.h=new Cl(this.a,this.g);S(this.a,"webglcontextlost",this.dh,this);S(this.a,"webglcontextrestored",this.eh,this);this.f=new Kg;this.u=null;this.j=new Dh(function(b){var d=
b[1];b=b[2];var k=d[0]-this.u[0],d=d[1]-this.u[1];return 65536*Math.log(b)+Math.sqrt(k*k+d*d)/b}.bind(this),function(b){return b[0].getKey()});this.G=function(){if(0!==this.j.a.length){Hh(this.j);var b=Eh(this.j);km(this,b[0],b[3],b[4])}return!1}.bind(this);this.i=0;nm(this)}Q(mm,yh);
function km(b,d,e,g){var k=b.g,p=d.getKey();if(Lg(b.f,p))b=b.f.get(p),k.bindTexture(3553,b.$a),9729!=b.Ke&&(k.texParameteri(3553,10240,9729),b.Ke=9729),9729!=b.Ne&&(k.texParameteri(3553,10240,9729),b.Ne=9729);else{var q=k.createTexture();k.bindTexture(3553,q);if(0<g){var u=b.ea.canvas,v=b.ea;b.$!==e[0]||b.w!==e[1]?(u.width=e[0],u.height=e[1],b.$=e[0],b.w=e[1]):v.clearRect(0,0,e[0],e[1]);v.drawImage(d.rb(),g,g,e[0],e[1],0,0,e[0],e[1]);k.texImage2D(3553,0,6408,6408,5121,u)}else k.texImage2D(3553,0,
6408,6408,5121,d.rb());k.texParameteri(3553,10240,9729);k.texParameteri(3553,10241,9729);k.texParameteri(3553,10242,33071);k.texParameteri(3553,10243,33071);b.f.set(p,{$a:q,Ke:9729,Ne:9729})}}A=mm.prototype;A.Gd=function(b){if(b instanceof ij)return new dm(this,b);if(b instanceof Yc)return new jm(this,b);if(b instanceof Cj)return new lm(this,b);bb("unexpected layer configuration");return null};function om(b,d,e){b=b.da();jb(b,d)&&U(b,new Vc(d,b,0,e))}
A.W=function(){var b=this.g;b.isContextLost()||this.f.forEach(function(d){d&&b.deleteTexture(d.$a)});this.h.oa();mm.xa.W.call(this)};A.Mf=function(b,d){for(var e=this.g,g;1024<this.f.g-this.i;){if(g=this.f.a.fc)e.deleteTexture(g.$a);else if(+this.f.a.Qd==d.index)break;else--this.i;this.f.pop()}};A.ma=function(){return"webgl"};A.dh=function(b){b.preventDefault();this.f.clear();this.i=0;b=this.b;for(var d in b)b[d].w()};A.eh=function(){nm(this);this.da().P()};
function nm(b){b=b.g;b.activeTexture(33984);b.blendFuncSeparate(770,771,1,771);b.disable(2884);b.disable(2929);b.disable(3089);b.disable(2960)}
A.md=function(b){var d=this.h,e=this.g;if(e.isContextLost())return!1;if(!b)return this.l&&(lf(this.a,!1),this.l=!1),!1;this.u=b.focus;this.f.set((-b.index).toString(),null);++this.i;om(this,"precompose",b);var g=[],k=b.Vb;gd(k);var p=b.L.J,q,u,v,w;q=0;for(u=k.length;q<u;++q)w=k[q],Xc(w,p)&&"ready"==w.be&&(v=Bh(this,w.Eb),v.Td(b,w,d)&&g.push(w));k=b.size[0]*b.ia;p=b.size[1]*b.ia;if(this.a.width!=k||this.a.height!=p)this.a.width=k,this.a.height=p;e.bindFramebuffer(36160,null);e.clearColor(0,0,0,0);
e.clear(16384);e.enable(3042);e.viewport(0,0,this.a.width,this.a.height);q=0;for(u=g.length;q<u;++q)w=g[q],v=Bh(this,w.Eb),v.Se(b,w,d);this.l||(lf(this.a,!0),this.l=!0);zh(b);1024<this.f.g-this.i&&b.hb.push(this.Mf.bind(this));0!==this.j.a.length&&(b.hb.push(this.G),b.vb=!0);om(this,"postcompose",b);Ch(this,b);b.hb.push(Ah)};
A.Pe=function(b,d,e,g,k,p){var q;if(this.g.isContextLost())return!1;var u=d.L,v=d.Vb,w;for(w=v.length-1;0<=w;--w){q=v[w];var z=q.Eb;if(Xc(q,u.J)&&k.call(p,z)&&(q=Bh(this,z).Ib(b,d,e,g)))return q}};var pm=["canvas","webgl","dom"];
function qm(b){nb.call(this);var d=rm(b);this.tb=void 0!==b.Cg?b.Cg:!1;this.ub=void 0!==b.Dg?b.Dg:!1;this.Pb=void 0!==b.ia?b.ia:Jf;this.Ob=d.nc;this.Ka=function(){this.j=void 0;this.Fh.call(this,Date.now())}.bind(this);this.La=Ab();this.gc=Ab();this.cb=0;this.b=null;this.la=Ub();this.w=this.G=null;this.a=document.createElement("DIV");this.a.className="ol-viewport"+(Mf?" ol-touch":"");this.a.style.position="relative";this.a.style.overflow="hidden";this.a.style.width="100%";this.a.style.height="100%";
this.a.style.msTouchAction="none";this.a.style.f="none";this.u=document.createElement("DIV");this.u.className="ol-overlaycontainer";this.a.appendChild(this.u);this.s=document.createElement("DIV");this.s.className="ol-overlaycontainer-stopevent";b=["click","dblclick","mousedown","touchstart","mspointerdown",Eg,"mousewheel","wheel"];for(var e=0,g=b.length;e<g;++e)S(this.s,b[e],gb);this.a.appendChild(this.s);this.ca=new wg(this);for(var k in Hg)S(this.ca,Hg[k],this.Fe,this);this.V=d.Hc;this.l=null;S(this.a,
"wheel",this.lc,this);S(this.a,"mousewheel",this.lc,this);this.i=d.controls;this.Ta=d.Ub;this.h=d.Mc;this.Ye={};this.R=new d.Gh(this.a,this);this.M=null;this.B=[];this.ra=[];this.wa=new Ih(this.Uf.bind(this),this.pg.bind(this));this.vd={};S(this,qb("layergroup"),this.$f,this);S(this,qb("view"),this.qg,this);S(this,qb("size"),this.mg,this);S(this,qb("target"),this.og,this);ob(this,d.values);this.i.forEach(function(b){b.ja(this)},this);S(this.i,"add",function(b){b.element.ja(this)},this);S(this.i,"remove",
function(b){b.element.ja(null)},this);this.Ta.forEach(function(b){b.ja(this)},this);S(this.Ta,"add",function(b){b.element.ja(this)},this);S(this.Ta,"remove",function(b){b.element.ja(null)},this);this.h.forEach(this.me,this);S(this.h,"add",function(b){this.me(b.element)},this);S(this.h,"remove",function(b){var d=b.element.Fa();void 0!==d&&delete this.Ye[d.toString()];b.element.ja(null)},this)}Q(qm,nb);A=qm.prototype;A.ib=function(b){this.Ta.push(b)};function sm(b,d){tm(b).get("layers").push(d)}
A.me=function(b){var d=b.Fa();void 0!==d&&(this.Ye[d.toString()]=b);b.ja(this)};A.eb=function(b){this.P();Array.prototype.push.apply(this.B,arguments)};A.W=function(){this.ca.oa();this.R.oa();Ha(this.a,"wheel",this.lc,this);Ha(this.a,"mousewheel",this.lc,this);void 0!==this.g&&(H.removeEventListener("resize",this.g,!1),this.g=void 0);this.j&&(H.cancelAnimationFrame(this.j),this.j=void 0);this.set("target",null);qm.xa.W.call(this)};
function um(b,d,e,g,k){if(b.b)return d=b.Ea(d),b.R.Pe(d,b.b,e,void 0!==g?g:null,void 0!==k?k:qd,null)}function vm(b){b=b.get("target");return void 0!==b?Re(b):null}A.Ea=function(b){var d=this.b;return d?(b=b.slice(),kh(d.Ze,b,b)):null};function tm(b){return b.get("layergroup")}function wm(b){return tm(b).get("layers")}function si(b,d){var e=b.b;if(e){var g=d.slice(0,2);return kh(e.ic,g,g)}return null}function xi(b){return b.get("size")}function V(b){return b.get("view")}
A.Uf=function(b,d,e,g){var k=this.b;if(!(k&&d in k.Vc&&k.Vc[d][b.qa.toString()]))return Infinity;b=e[0]-k.focus[0];e=e[1]-k.focus[1];return 65536*Math.log(g)+Math.sqrt(b*b+e*e)/g};A.lc=function(b,d){var e=new ug(d||b.type,this,b);this.Fe(e)};A.Fe=function(b){if(this.b){this.M=b.b;b.Sb=this.b;var d=this.Ta.a,e;if(!1!==U(this,b))for(e=d.length-1;0<=e;e--){var g=d[e];if(g.get("active")&&!g.handleEvent(b))break}}};
A.lg=function(){var b=this.b,d=this.wa;if(0!==d.a.length){var e=16,g=e;if(b){var k=b.na;k[0]&&(e=this.tb?8:0,g=2);k[1]&&(e=this.ub?8:0,g=2)}if(d.g<e){Hh(d);for(var k=0,p,q;d.g<e&&k<g&&0<d.a.length;)p=Eh(d)[0],q=p.getKey(),0!==p.Z()||q in d.b||(d.b[q]=!0,++d.g,++k,p.load())}}d=this.ra;e=0;for(g=d.length;e<g;++e)d[e](this,b);d.length=0};A.mg=function(){this.P()};
A.og=function(){var b;this.get("target")&&(b=vm(this));if(this.l){for(var d=0,e=this.l.length;d<e;++d)Ba(this.l[d]);this.l=null}b?(b.appendChild(this.a),b=this.V?this.V:b,this.l=[S(b,"keydown",this.lc,this),S(b,"keypress",this.lc,this)],this.g||(this.g=this.sc.bind(this),H.addEventListener("resize",this.g,!1))):($e(this.a),void 0!==this.g&&(H.removeEventListener("resize",this.g,!1),this.g=void 0));this.sc()};A.pg=function(){this.P()};A.rg=function(){this.P()};
A.qg=function(){this.G&&(Ba(this.G),this.G=null);var b=V(this);b&&(this.G=S(b,"propertychange",this.rg,this));this.P()};A.ag=function(){this.P()};A.bg=function(){this.P()};A.$f=function(){this.w&&(this.w.forEach(Ba),this.w=null);var b=tm(this);b&&(this.w=[S(b,"propertychange",this.bg,this),S(b,"change",this.ag,this)]);this.P()};A.P=function(){void 0===this.j&&(this.j=H.requestAnimationFrame(this.Ka))};
A.Fh=function(b){var d,e,g,k=xi(this),p=V(this),q=null;if(void 0!==k&&0<k[0]&&0<k[1]&&p&&ce(p)){var q=p.g.slice(),u=tm(this).Md(),v={};d=0;for(e=u.length;d<e;++d)v[L(u[d].Eb)]=u[d];g=p.Z();q={vb:!1,Aa:{},ic:this.La,F:null,focus:this.M?this.M:g.T,index:this.cb++,Ic:v,Vb:u,nc:ua({},this.Ob),ia:this.Pb,Ze:this.gc,hb:[],size:k,bc:this.vd,Vh:this.wa,time:b,Uc:{},L:g,na:q,Vc:{}}}if(q){b=this.B;d=k=0;for(e=b.length;d<e;++d)p=b[d],p(this,q)&&(b[k++]=p);b.length=k;q.F=mc(g.T,g.J,g.rotation,q.size)}this.b=
q;this.R.md(q);q&&(q.vb&&this.P(),Array.prototype.push.apply(this.ra,q.hb),0!==this.B.length||q.na[0]||q.na[1]||cc(q.F,this.la)||(U(this,new qf("moveend",this,q)),Xb(q.F,this.la)));U(this,new qf("postrender",this,q));e=d=this.lg;this&&(e=pa(d,this));!ja(H.setImmediate)||H.Window&&H.Window.prototype&&!ne("Edge")&&H.Window.prototype.setImmediate==H.setImmediate?(ve||(ve=we()),ve(e)):H.setImmediate(e)};
A.sc=function(){var b=vm(this);if(b){var d=Qe(b),e=ye&&b.currentStyle;if(e&&"CSS1Compat"==Oe(d).a.compatMode&&"auto"!=e.width&&"auto"!=e.height&&!e.boxSizing)d=mf(b,e.width,"width","pixelWidth"),b=mf(b,e.height,"height","pixelHeight"),b=new Ne(d,b);else{e=new Ne(b.offsetWidth,b.offsetHeight);if(ye)var d=nf(b,"paddingLeft"),g=nf(b,"paddingRight"),k=nf(b,"paddingTop"),p=nf(b,"paddingBottom"),d=new cf(k,g,p,d);else d=gf(b,"paddingLeft"),g=gf(b,"paddingRight"),k=gf(b,"paddingTop"),p=gf(b,"paddingBottom"),
d=new cf(parseFloat(k),parseFloat(g),parseFloat(p),parseFloat(d));!ye||9<=Number(Ke)?(g=gf(b,"borderLeftWidth"),k=gf(b,"borderRightWidth"),p=gf(b,"borderTopWidth"),b=gf(b,"borderBottomWidth"),b=new cf(parseFloat(p),parseFloat(k),parseFloat(b),parseFloat(g))):(g=pf(b,"borderLeft"),k=pf(b,"borderRight"),p=pf(b,"borderTop"),b=pf(b,"borderBottom"),b=new cf(p,k,b,g));b=new Ne(e.width-b.left-d.left-d.right-b.right,e.height-b.top-d.top-d.bottom-b.bottom)}this.set("size",[b.width,b.height])}else this.set("size",
void 0)};
function rm(b){var d=null;void 0!==b.Hc&&(d="string"===typeof b.Hc?document.getElementById(b.Hc):b.Hc);var e={},g={};if(void 0===b.Ga||"boolean"===typeof b.Ga&&b.Ga)g["data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAMAAABEpIrGAAAAA3NCSVQICAjb4U/gAAAACXBIWXMAAAHGAAABxgEXwfpGAAAAGXRFWHRTb2Z0d2FyZQB3d3cuaW5rc2NhcGUub3Jnm+48GgAAAhNQTFRF////AP//AICAgP//AFVVQECA////K1VVSbbbYL/fJ05idsTYJFtbbcjbJllmZszWWMTOIFhoHlNiZszTa9DdUcHNHlNlV8XRIVdiasrUHlZjIVZjaMnVH1RlIFRkH1RkH1ZlasvYasvXVsPQH1VkacnVa8vWIVZjIFRjVMPQa8rXIVVkXsXRsNveIFVkIFZlIVVj3eDeh6GmbMvXH1ZkIFRka8rWbMvXIFVkIFVjIFVkbMvWH1VjbMvWIFVlbcvWIFVla8vVIFVkbMvWbMvVH1VkbMvWIFVlbcvWIFVkbcvVbMvWjNPbIFVkU8LPwMzNIFVkbczWIFVkbsvWbMvXIFVkRnB8bcvW2+TkW8XRIFVkIlZlJVloJlpoKlxrLl9tMmJwOWd0Omh1RXF8TneCT3iDUHiDU8LPVMLPVcLPVcPQVsPPVsPQV8PQWMTQWsTQW8TQXMXSXsXRX4SNX8bSYMfTYcfTYsfTY8jUZcfSZsnUaIqTacrVasrVa8jTa8rWbI2VbMvWbcvWdJObdcvUdszUd8vVeJaee87Yfc3WgJyjhqGnitDYjaarldPZnrK2oNbborW5o9bbo9fbpLa6q9ndrL3ArtndscDDutzfu8fJwN7gwt7gxc/QyuHhy+HizeHi0NfX0+Pj19zb1+Tj2uXk29/e3uLg3+Lh3+bl4uXj4ufl4+fl5Ofl5ufl5ujm5+jmySDnBAAAAFp0Uk5TAAECAgMEBAYHCA0NDg4UGRogIiMmKSssLzU7PkJJT1JTVFliY2hrdHZ3foSFhYeJjY2QkpugqbG1tre5w8zQ09XY3uXn6+zx8vT09vf4+Pj5+fr6/P39/f3+gz7SsAAAAVVJREFUOMtjYKA7EBDnwCPLrObS1BRiLoJLnte6CQy8FLHLCzs2QUG4FjZ5GbcmBDDjxJBXDWxCBrb8aM4zbkIDzpLYnAcE9VXlJSWlZRU13koIeW57mGx5XjoMZEUqwxWYQaQbSzLSkYGfKFSe0QMsX5WbjgY0YS4MBplemI4BdGBW+DQ11eZiymfqQuXZIjqwyadPNoSZ4L+0FVM6e+oGI6g8a9iKNT3o8kVzNkzRg5lgl7p4wyRUL9Yt2jAxVh6mQCogae6GmflI8p0r13VFWTHBQ0rWPW7ahgWVcPm+9cuLoyy4kCJDzCm6d8PSFoh0zvQNC5OjDJhQopPPJqph1doJBUD5tnkbZiUEqaCnB3bTqLTFG1bPn71kw4b+GFdpLElKIzRxxgYgWNYc5SCENVHKeUaltHdXx0dZ8uBI1hJ2UUDgq82CM2MwKeibqAvSO7MCABq0wXEPiqWEAAAAAElFTkSuQmCC"]="http://openlayers.org/";
else{var k=b.Ga;"string"===typeof k?g[k]="":ka(k)&&(g[k.src]=k.href)}k=b.Fb instanceof Wi?b.Fb:new Wi({Fb:b.Fb});e.layergroup=k;e.target=b.target;e.view=void 0!==b.view?b.view:new Yd;var k=yh,p;void 0!==b.Nc?Array.isArray(b.Nc)?p=b.Nc:"string"===typeof b.Nc?p=[b.Nc]:bb("Incorrect format for renderer option"):p=pm;var q,u;q=0;for(u=p.length;q<u;++q){var v=p[q];if("canvas"==v){if(Lf){k=ll;break}}else if("dom"==v){k=tl;break}else if("webgl"==v&&Ef){k=mm;break}}void 0!==b.controls?p=Array.isArray(b.controls)?
new sb(b.controls.slice()):b.controls:(p={},q=new sb,(void 0!==p.zoom?p.zoom:1)&&q.push(new Uh(p.Ui)),(void 0!==p.rotate?p.rotate:1)&&q.push(new Sh(p.Si)),(void 0!==p.uf?p.uf:1)&&q.push(new Kh(p.Gi)),p=q);if(void 0!==b.Ub)q=Array.isArray(b.Ub)?new sb(b.Ub.slice()):b.Ub;else{q={};u=new sb;v=new Vh;(void 0!==q.tf?q.tf:1)&&u.push(new ti);(void 0!==q.Cf?q.Cf:1)&&u.push(new ai({Qb:q.mi,duration:q.ud}));(void 0!==q.Df?q.Df:1)&&u.push(new oi({Ag:v}));(void 0!==q.qh?q.qh:1)&&u.push(new Oi);(void 0!==q.rh?
q.rh:1)&&u.push(new Si({duration:q.ud}));if(void 0!==q.zg?q.zg:1)u.push(new Ii),u.push(new Ki({Qb:q.mi,duration:q.ud}));(void 0!==q.Jg?q.Jg:1)&&u.push(new Mi({duration:q.ud}));(void 0!==q.Rh?q.Rh:1)&&u.push(new Hi({duration:q.ud}));q=u}b=void 0!==b.Mc?Array.isArray(b.Mc)?new sb(b.Mc.slice()):b.Mc:new sb;return{controls:p,Ub:q,Hc:d,nc:g,Mc:b,Gh:k,values:e}}yc(aj);yc(hj);hj.forEach(function(b){aj.forEach(function(d){zc(b,d,bj);zc(d,b,cj)})});function Z(b,d){nb.call(this);var e=d||{};this.ya=b||-1;try{this.ya=parseInt(this.ya)}catch(g){b=-1}this.Va=xm.se(e.server||"");this.a=xm.gd(this.Va)?!0:!1;this.a||-1===window.location.href.indexOf("haveMadeCrossOriginLogin_")||(this.a=!0);this.ad="ome_viewer";"string"===typeof e.zf&&(this.ad=e.zf);this.v=this.Xa=null;this.ab=new ym;this.o=null;this.b="object"===typeof e.eventbus&&"function"===typeof e.eventbus.subscribe&&"function"===typeof e.eventbus.unsubscribe&&"function"===typeof e.eventbus.publish?
e.eventbus:null;this.h=function(b,d){0>b.ya||xm.Pc({server:b.Va,uri:"/webgateway/imgData/"+b.ya,jsonp:!0,success:function(e){if("string"===typeof e)try{e=JSON.parse(e)}catch(D){console.error("Failed to parse json response!")}if("object"!==typeof e)console.error("Image Request did not receive proper response!");else if(b.Xa=e,"undefined"===typeof b.Xa.size)console.error("Image Info does not contain size info!");else{var q=null;e=b.Xa.size;if(b.Xa.zoomLevelScaling){q=[];for(r in b.Xa.zoomLevelScaling)q.push(1/
b.Xa.zoomLevelScaling[r]);q=q.reverse()}var u=q?q.length:-1,v=[e.width/2,-e.height/2],w=new uc({code:"OMERO",units:"pixels",F:[0,0,e.width,e.height]}),z=[],B;for(B in b.Xa.channels){var C=b.Xa.channels[B];z.push({active:C.active,color:C.color,min:C.window.min,max:C.window.max,start:C.window.start,end:C.window.end})}B=new zm({Lh:b.Va,uri:"/webgateway/render_image_region",Sa:b.ya,width:e.width,height:e.height,uh:1<e.z?parseInt(e.z/2):0,Ad:z,Bb:1<u?q:[1],Yh:b.Xa.tile_size?b.Xa.tile_size:null});e=new Yd({ba:w,
T:v,F:[0,-e.height,e.width,0],Bb:Am(q),J:1<u?q[0]:1});u=Bm();q=new sb;for(inter in u)q.push(u[inter].ref),b.ab.set(inter,u[inter]);u=Cm();v=new sb;for(contr in u)v.push(u[contr].ref),b.ab.set(contr,u[contr]);b.o=new qm({Ga:!1,controls:v,Ub:q,Nc:"canvas",Fb:[new Yc({source:B,Wd:Infinity})],target:b.ad,view:e});"function"===typeof d&&d.call(b)}},error:function(d){console.error("Error retrieving image info for id: "+b.ya+(d&&0<d.length?"\\n"+d:""))}})};xm.gd(this.Va)||this.a?this.h(this):xm.Le(this.Va)}
Q(Z,nb);A=Z.prototype;A.ih=function(){var b=Re(this.ad);b&&df(b,"visibility","visible")};A.sg=function(){var b=Re(this.ad);b&&df(b,"visibility","hidden")};A.yf=function(b,d){var e=this.oa("boolean"===typeof d?d:!1);this.ya=b;try{this.ya=parseInt(this.ya)}catch(g){}xm.gd(this.Va)||this.a?this.h(this,function(){for(c in e){var b=e[c];Dm(this,b.key,b.type)}}):xm.Le(this.Va)};
A.yd=function(b){this.o instanceof qm&&!(this.v instanceof Em)&&(this.v=new Em(this,b),sm(this.o,new Cj({source:this.v})),Fm(this.v,[Gm.SELECT]),this.g=S(V(this.o),"change:rotation",function(){var b=Hm(this);b&&b.A()},this))};
A.Ph=function(b,d){var e=Im(this);if(e){var g=b||!1;if(fa(d)&&0!==d.length){if(e=Hm(this),"boolean"!==typeof g&&(g=!0),fa(d))for(var k in d){var p=d[k],q=p.indexOf(":");if(!(1>q)){var u=p.substring(0,q),p=p.substring(q+1);try{u=parseInt(u),p=parseInt(p)}catch(v){continue}e.g&&e.g[""+u+":"+p]instanceof Gk&&(e.g[""+u+":"+p].visible=g);e.A()}}}else e.set("visible",g)}};
A.Yd=function(b){var d=!1;"boolean"===typeof b&&(d=b);!d&&this.v instanceof Em&&(Fm(this.v,[Gm.DEFAULT]),this.v.oa(),this.v=null);"undefined"!==typeof this.g&&this.g&&Ba(this.g);if(Im(this))for(b=ub(wm(this.o)),d&&--b,d=b-1;0<d;d--)b=wm(this.o).item(d),b.set("source",null),b.b=null,wb(wm(this.o),d)};A.Qh=function(b,d){if(Im(this)){var e=Hm(this);"boolean"===typeof b&&(e.od=b,e.A());e=Hm(this);"boolean"===typeof d&&(e.Jb=d,e.A())}};
A.ib=function(b,d){if(ka(d)){var e=Jm.get(b,null);null!=e&&d instanceof e.clazz&&this.o instanceof qm&&"string"===typeof b&&null==this.ab.get(b,null)&&(this.o.ib(d),this.ab.set(b,{type:"interaction",ref:d,defaults:!1,links:[]}))}else Dm(this,b,"interaction")};A.fh=function(b){Dm(this,b,"control")};
function Dm(b,d,e,g){if(b.o instanceof qm&&"string"===typeof d&&"string"===typeof e&&null==b.ab.get(d,null)){var k=!0;"boolean"===typeof g&&(k=g);g="control"===e?Km.get(d,null):Jm.get(d,null);if(null!=g&&(newComponent=new g.clazz(g.options),"control"===e?b.o.i.push(newComponent):b.o.ib(newComponent),b.ab.set(d,{type:e,ref:newComponent,defaults:g.defaults,links:g.links}),k))for(link in g.links)Dm(b,g.links[link],"control"===e?"interaction":"control",!1)}}
A.ld=function(b,d){if(this.o instanceof qm&&"string"===typeof b){var e=this.ab.get(b,null);if(null!=e){var g=!0;"boolean"===typeof d&&(g=d);"control"===e.type?this.o.i.remove(e.ref):this.o.Ta.remove(e.ref);"function"===typeof e.ref.W&&"function"===typeof e.ref.oa&&e.ref.oa();this.ab.remove(b);if(g)for(link in e.links)this.ld(e.links[link],!1)}}};
A.Nh=function(b,d){if("string"===typeof b&&0!==b.length){var e=b.substr(0,1).toLowerCase(),g=Lm(this),k=Mm.get(e,null);if(null!==g&&null!=k&&k.settable){var e=Array.prototype.slice.call(arguments,1),p=0;try{for(c in"x"===b&&(b="width"),"y"===b&&(b="height"),p=this.Xa.size[b],e){"string"===typeof e[c]&&(e[c]=parseInt(e[c]));if("number"!==typeof e[c]||0>e[c])return;e[c]=parseInt(e[c]);if(e[c]>p)return}}catch(q){return}k="set"+k.method;try{g[k]("c"!==b?e[0]:e)}catch(q){return}if(Im(this)){e=Hm(this);
e.O&&Nm(e.O);e.o.Yd(!0);k=[];p=e.a.getAll();for(f in p)2!==p[f].state||"number"===typeof p[f].theZ&&-1!==p[f].theZ||"number"===typeof p[f].theT&&-1!==p[f].theT||"number"===typeof p[f].theC&&-1!==p[f].theC||k.push(p[f]);e.clear();p=Om(e);fa(p)||(p=[]);p=p.concat(k);0<p.length&&e.Cb(p)}Pm(g)}}};A.Ld=function(b){if("string"===typeof b&&0!==b.length){var d=b.substr(0,1).toLowerCase();b=Lm(this);if(null!=b&&(d=Mm.get(d,null),null!=d)){d="get"+d.method;try{return b[d]()}catch(e){return null}}}};
A.sf=function(b){var d=Lm(this);d&&"function"===typeof b&&(d.Vd=b,Pm(d))};A.Dh=function(){var b=Lm(this);b&&(b.Vd=null,Pm(b))};function Im(b){return!(b.o instanceof qm)||2>ub(wm(b.o))?null:wm(b.o).item(ub(wm(b.o))-1)}function Lm(b){return(b=b.o instanceof qm&&0!=ub(wm(b.o))?wm(b.o).item(0):null)?b.ha():null}function Hm(b){return(b=Im(b))?b.ha():null}A.Fa=function(){return this.ya};A.Tf=function(){return this.Va};A.$d=function(b){Im(this)&&Fm(Hm(this),b)};
A.Of=function(b,d,e,g){fa(g)&&0!==g.length||(g=V(this.o).a.I());b=Qm(b,d,g,e);if(null!==b)if(Im(this)){for(s in b)d=b[s],V(this.o).N(),e=V(this.o).ga(),d.C()instanceof Rm&&0!==e&&!Hm(this).Jb&&d.C().rotate(-e),Sm(d,this.v);Hm(this).Cb(b)}else this.yd({features:b})};function Tm(b){return b.o instanceof qm?b.o&&V(b.o)&&V(b.o).Z()?(V(b.o).Z(),mc($d(V(b.o)),V(b.o).N(),V(b.o).ga(),xi(b.o))):V(b.o)&&V(b.o).a?(b=V(b.o).a.I(),[b[0],-b[3],b[2],-b[1]]):null:null}
A.rf=function(b){null===Hm(this)&&this.yd();"boolean"!==typeof b&&(b=!1);b!==this.v.i&&(this.v.i=b,this.v.O&&(Nm(this.v.O),b=this.ab.get("boxSelect",null))&&(b=b.ref,Um(b),b.l()),vm(this.o).style="",this.v.i?Vm(this.v):(this.B=null,this.v.j=null,this.v.b=null,this.v.G=0))};A.Ig=function(b){this.v instanceof Em&&"object"===typeof b&&null!==b&&Wm(b,this.v)};
A.jh=function(b,d){if(this.v instanceof Em){d="boolean"===typeof d?d:!0;var e="boolean"===typeof b&&b&&this.v.O?this.v.O.pa():new sb(this.v.pa()),e=Xm(e,d);null!==e&&0!==e.count&&Ym(this.v,e)}};A.Kf=function(b){this.v instanceof Em&&this.v.O instanceof Zm&&this.v.O.b(b)};
A.hh=function(b){if(this.v instanceof Em&&"string"===typeof b&&0!==b.length){var d=this.v.s.slice();this.$d([$m]);if(this.v.lb instanceof an){if(d=this.v.lb,"string"===typeof b&&0!==b.length){var e=null;switch(b.toLowerCase()){case "point":e=an.prototype.Hf;break;case "polygon":e=an.prototype.If;break;case "ellipse":e=an.prototype.Ef;break;case "line":e=an.prototype.Gf;break;case "rectangle":e=an.prototype.Jf;break;case "label":e=an.prototype.Ff;break;default:console.error("shape type not supported"),
Fm(d.v,d.Xd)}e&&e.call(d)}}else this.$d(d),console.error("Could not get instance of Draw")}};A.oa=function(b){this.Yd();"boolean"!==typeof b&&(b=!1);var d=b?[]:null;this.o instanceof qm&&(b&&viewer_state?(this.ab.forEach(function(b,g){this.ld(g);"object"===typeof b&&b.defaults&&d.push({key:g,type:b.type})},this),this.ab.clear()):(this.ab.clear(),this.o.i.clear(),this.o.Ta.clear()),(b=Lm(this))&&b.oa(),wm(this.o).clear(),this.o.h.clear(),this.o.oa());this.o=this.Xa=null;return d};
A.Bf=function(){this.oa();this.b&&this.b.unsubscribe(this);this.b=null};A.gh=function(b,d,e){if(null!==Lm(this)){var g=Lm(this);"number"!==typeof b||"number"!==typeof d||"number"!==typeof e||0>b||b>=g.jb.length||d>e||d<g.jb[b].min||e>g.jb[b].max||(g.jb[b].start=d,g.jb[b].end=e,Pm(g))}};aa("ome.ol3.Viewer",Z,OME);Z.prototype.show=Z.prototype.ih;Z.prototype.hide=Z.prototype.sg;Z.prototype.addControl=Z.prototype.fh;Z.prototype.addInteraction=Z.prototype.ib;Z.prototype.removeInteractionOrControl=Z.prototype.ld;
Z.prototype.changeToImage=Z.prototype.yf;Z.prototype.addPostTileLoadHook=Z.prototype.sf;Z.prototype.removePostTileLoadHook=Z.prototype.Dh;Z.prototype.setDimensionIndex=Z.prototype.Nh;Z.prototype.getDimensionIndex=Z.prototype.Ld;Z.prototype.getId=Z.prototype.Fa;Z.prototype.getServer=Z.prototype.Tf;Z.prototype.addRegions=Z.prototype.yd;Z.prototype.removeRegions=Z.prototype.Yd;Z.prototype.setRegionsVisibility=Z.prototype.Ph;Z.prototype.setTextBehaviorForRegions=Z.prototype.Qh;
Z.prototype.setRegionsModes=Z.prototype.$d;Z.prototype.generateShapes=Z.prototype.Of;Z.prototype.activateClustering=Z.prototype.rf;Z.prototype.modifyRegionsStyle=Z.prototype.Ig;Z.prototype.storeRegions=Z.prototype.jh;Z.prototype.enableRegionsContextMenu=Z.prototype.Kf;Z.prototype.drawShape=Z.prototype.hh;Z.prototype.destroyViewer=Z.prototype.Bf;Z.prototype.changeChannelRange=Z.prototype.gh;var bn=Be?"webkitfullscreenchange":Ae?"mozfullscreenchange":ye?"MSFullscreenChange":"fullscreenchange";function cn(){var b=Oe().a,d=b.body;return!!(d.webkitRequestFullscreen||d.mozRequestFullScreen&&b.mozFullScreenEnabled||d.msRequestFullscreen&&b.msFullscreenEnabled||d.requestFullscreen&&b.fullscreenEnabled)}
function dn(b){b.webkitRequestFullscreen?b.webkitRequestFullscreen():b.mozRequestFullScreen?b.mozRequestFullScreen():b.msRequestFullscreen?b.msRequestFullscreen():b.requestFullscreen&&b.requestFullscreen()}function en(){var b=Oe().a;return!!(b.webkitIsFullScreen||b.mozFullScreen||b.msFullscreenElement||b.fullscreenElement)};function fn(b){b=b?b:{};this.a=void 0!==b.className?b.className:"ol-full-screen";var d=void 0!==b.label?b.label:"\u2922";this.b="string"===typeof d?document.createTextNode(d):d;d=void 0!==b.Bg?b.Bg:"\u00d7";this.h="string"===typeof d?document.createTextNode(d):d;d=b.dc?b.dc:"Toggle full-screen";d=Ue("BUTTON",{"class":this.a+"-"+en(),type:"button",title:d},this.b);S(d,"click",this.u,this);var e=this.a+" ol-unselectable ol-control "+(cn()?"":"ol-unsupported"),d=Ue("DIV",e,d);Jh.call(this,{element:d,
target:b.target});this.l=void 0!==b.keys?b.keys:!1;this.i=b.source}Q(fn,Jh);fn.prototype.u=function(b){b.preventDefault();cn()&&(b=this.da())&&(en()?(b=Oe().a,b.webkitCancelFullScreen?b.webkitCancelFullScreen():b.mozCancelFullScreen?b.mozCancelFullScreen():b.msExitFullscreen?b.msExitFullscreen():b.exitFullscreen&&b.exitFullscreen()):(b=this.i?Re(this.i):vm(b),this.l?b.mozRequestFullScreenWithKeys?b.mozRequestFullScreenWithKeys():b.webkitRequestFullscreen?b.webkitRequestFullscreen():dn(b):dn(b)))};
fn.prototype.j=function(){var b=this.element.firstElementChild,d=this.da();en()?(b.className=this.a+"-true",af(this.h,this.b)):(b.className=this.a+"-false",af(this.b,this.h));d&&d.sc()};fn.prototype.ja=function(b){fn.xa.ja.call(this,b);b&&this.g.push(S(H.document,bn,this.j,this))};function ym(b,d){this.wb={};this.Ha=[];this.a=0;var e=arguments.length;if(1<e){if(e%2)throw Error("Uneven number of arguments");for(var g=0;g<e;g+=2)this.set(arguments[g],arguments[g+1])}else if(b){var k;if(b instanceof ym)for(g=gn(b),hn(b),k=[],e=0;e<b.Ha.length;e++)k.push(b.wb[b.Ha[e]]);else{var e=[],p=0;for(g in b)e[p++]=g;g=e;e=[];p=0;for(k in b)e[p++]=b[k];k=e}for(e=0;e<g.length;e++)this.set(g[e],k[e])}}function gn(b){hn(b);return b.Ha.concat()}A=ym.prototype;
A.clear=function(){this.wb={};this.a=this.Ha.length=0};A.remove=function(b){return Object.prototype.hasOwnProperty.call(this.wb,b)?(delete this.wb[b],this.a--,this.Ha.length>2*this.a&&hn(this),!0):!1};
function hn(b){if(b.a!=b.Ha.length){for(var d=0,e=0;d<b.Ha.length;){var g=b.Ha[d];Object.prototype.hasOwnProperty.call(b.wb,g)&&(b.Ha[e++]=g);d++}b.Ha.length=e}if(b.a!=b.Ha.length){for(var k={},e=d=0;d<b.Ha.length;)g=b.Ha[d],Object.prototype.hasOwnProperty.call(k,g)||(b.Ha[e++]=g,k[g]=1),d++;b.Ha.length=e}}A.get=function(b,d){return Object.prototype.hasOwnProperty.call(this.wb,b)?this.wb[b]:d};
A.set=function(b,d){Object.prototype.hasOwnProperty.call(this.wb,b)||(this.a++,this.Ha.push(b));this.wb[b]=d};A.forEach=function(b,d){for(var e=gn(this),g=0;g<e.length;g++){var k=e[g],p=this.get(k);b.call(d,p,k,this)}};A.clone=function(){return new ym(this)};var jn=[2.25,2,1.75,1.5,1.25,1,.75,.5,.25],Mm=new ym({x:{method:"Width",settable:!1},width:{method:"Width",settable:!1},y:{method:"Height",settable:!1},height:{method:"Width",settable:!1},z:{method:"Plane",settable:!0},t:{method:"Time",settable:!0},c:{method:"Channels",settable:!0}}),Km=new ym({attribution:{clazz:Kh,options:{},defaults:!0,enabled:!1,links:[]},zoom:{clazz:Uh,options:{},defaults:!0,enabled:!0,links:[]},rotate:{clazz:Sh,options:{ne:!1},defaults:!0,enabled:!0,links:["shiftRotate"]},fullscreen:{clazz:fn,
options:{},defaults:!0,enabled:!0,links:[]},birdseye:{clazz:kn,options:{collapsed:!1,$c:"\u00bb",label:"\u00ab"},defaults:!0,enabled:!0,links:[]}}),Jm=new ym({dragPan:{clazz:oi,options:{kinetic:new Vh},defaults:!0,enabled:!0,links:[]},pinchZoom:{clazz:Si,options:{zoomDuration:null},defaults:!0,enabled:!0,links:[]},mouseWheelZoom:{clazz:Mi,options:{zoomDuration:null},defaults:!0,enabled:!0,links:[]},keyboardPan:{clazz:Ii,options:{},defaults:!0,enabled:!1,links:[]},keyboardZoom:{clazz:Ki,options:{zoomDuration:null,
zoomDelta:null},defaults:!0,enabled:!1,links:[]},shiftDragZoom:{clazz:Hi,options:{zoomDuration:null},defaults:!0,enabled:!1,links:[]},doubleClickZoom:{clazz:ai,options:{zoomDuration:null,zoomDelta:null},defaults:!0,enabled:!1,links:[]},pinchRotate:{clazz:Oi,options:{},defaults:!0,enabled:!1,links:["rotate"]},shiftRotate:{clazz:ln,options:{},defaults:!0,enabled:!0,links:["rotate"]},boxSelect:{clazz:mn,options:{},defaults:!1,enabled:!1,links:[]}});
function Cm(){var b={};Km.forEach(function(d,e){if(d.defaults&&d.enabled)try{b[e]={type:"control",ref:new d.clazz(d.options),defaults:d.defaults}}catch(g){console.error("Failed to construct control: "+g)}});return b}function Bm(){var b={};Jm.forEach(function(d,e){if(d.defaults&&d.enabled)try{b[e]={type:"interaction",ref:new d.clazz(d.options),defaults:d.defaults}}catch(g){console.error("Failed to construct interaction: "+g)}});return b}var $m=4,Gm={DEFAULT:0,SELECT:1,TRANSLATE:2,MODIFY:3,DRAW:$m};
aa("ome.ol3.REGIONS_MODE",Gm,OME);var nn=Wa()&&!te()?1E3:re()||ne("Safari")&&!(se()||ne("Coast")||re()||ne("Edge")||ne("Silk")||ne("Android"))?800:ue()||sa()&&(ne("Trident")||ne("MSIE")||te())?500:250;function on(b,d,e,g,k){Jg.call(this,b,d);this.j=e;this.b=new Image;null!==g&&(this.b.crossOrigin=g);this.f={};this.i=null;this.l=k}Q(on,Jg);A=on.prototype;A.W=function(){1==this.state&&pn(this);this.a&&this.a.oa();this.state=5;this.A();on.xa.W.call(this)};A.rb=function(b){if(void 0!==b){var d=L(b);if(d in this.f)return this.f[d];b=ya(this.f)?this.b:this.b.cloneNode(!1);return this.f[d]=b}return this.b};A.getKey=function(){return this.j};A.Zg=function(){this.state=3;pn(this);this.A()};
A.$g=function(){this.state=this.b.naturalWidth&&this.b.naturalHeight?2:4;pn(this);this.A()};A.load=function(){0==this.state&&(this.state=1,this.A(),this.i=[Ga(this.b,"error",this.Zg,this),Ga(this.b,"load",this.$g,this)],this.l(this,this.j))};function pn(b){b.i.forEach(Ba);b.i=null};function qn(b,d,e,g,k){on.call(this,b,d,e,g,k);this.f={}}Q(qn,on);qn.prototype.h=function(b,d){if("object"!==typeof b||"number"!==typeof b.width||"number"!==typeof b.height)return null;var e=b.width,g=b.height;fa(d)&&(e=d[0],g=d[1]);e=vf(e,g);e.drawImage(b,0,0);return e};
qn.prototype.rb=function(b){b=qn.xa.rb.call(this,b);var d=L(b);if(d in this.f)return this.f[d];if(2==this.state){var e=this.source.Da.cc;if(e=b.width!==e[0]||b.height!==e[1]?this.h(b,e):this.h(b))b=e.canvas;try{var g=this.source.Vd;"function"!==typeof g&&(g=null);var k=g?g.call(this,b):b;null===k&&(k=b);return this.f[d]=k}catch(p){return console.error("Error running post tile load hook: "+p),b}}else return b};qn.prototype.getRenderedTileAsContext=qn.prototype.h;function rn(b,d,e){ud.call(this);sn(this,b,d?d:0,e)}Q(rn,ud);A=rn.prototype;A.clone=function(){var b=new rn(null);xd(b,this.g,this.a.slice());b.A();return b};A.Kc=function(b,d){var e=this.a,g=b-e[0],e=d-e[1];return g*g+e*e<=tn(this)};function Kj(b){return b.a.slice(0,b.D)}A.Ed=function(b){var d=this.a,e=d[this.D]-d[0];return ac(d[0]-e,d[1]-e,d[0]+e,d[1]+e,b)};A.Ec=function(){return Math.sqrt(tn(this))};function tn(b){var d=b.a[b.D]-b.a[0];b=b.a[b.D+1]-b.a[1];return d*d+b*b}A.ma=function(){return"Circle"};
A.fb=function(b){var d=this.I();return oc(b,d)?(d=Kj(this),b[0]<=d[0]&&b[2]>=d[0]||b[1]<=d[1]&&b[3]>=d[1]?!0:ec(b,this.wa,this)):!1};A.Oa=function(b){var d=this.D,e=b.slice();e[d]=e[0]+(this.a[d]-this.a[0]);var g;for(g=1;g<d;++g)e[d+g]=b[g];xd(this,this.g,e);this.A()};function sn(b,d,e,g){if(d){yd(b,g,d,0);b.a||(b.a=[]);g=b.a;d=Ad(g,d);g[d++]=g[0]+e;var k;e=1;for(k=b.D;e<k;++e)g[d++]=g[e];g.length=d}else xd(b,"XY",null);b.A()}A.Zd=function(b){this.a[this.D]=this.a[0]+b;this.A()};function un(b,d,e,g,k){var p=NaN,q=NaN,u=(e-d)/g;if(0===u)bb("n cannot be 0");else if(1==u)p=b[d],q=b[d+1];else if(2==u)p=.5*b[d]+.5*b[d+g],q=.5*b[d+1]+.5*b[d+g+1];else{var q=b[d],u=b[d+1],v=0,p=[0],w;for(w=d+g;w<e;w+=g){var z=b[w],B=b[w+1],v=v+Math.sqrt((z-q)*(z-q)+(B-u)*(B-u));p.push(v);q=z;u=B}e=.5*v;v=0;w=p.length;for(z=!1;v<w;)q=v+(w-v>>1),u=+bd(p[q],e),0>u?v=q+1:(w=q,z=!u);q=z?v:~v;0>q?(e=(e-p[-q-2])/(p[-q-1]-p[-q-2]),d+=(-q-2)*g,p=b[d],p=p+e*(b[d+g]-p),q=b[d+1],q=q+e*(b[d+g+1]-q)):(p=b[d+q*
g],q=b[d+q*g+1])}return k?(k[0]=p,k[1]=q,k):[p,q]};function vn(b,d){ud.call(this);this.b=null;this.h=-1;this.za(b,d)}Q(vn,ud);A=vn.prototype;A.clone=function(){var b=new vn(null);xd(b,this.g,this.a.slice());b.A();return b};A.ua=function(){return Dd(this.a,0,this.a.length,this.D)};function Lj(b){if(b.h!=b.f){var d;d=un(b.a,0,b.a.length,b.D,b.b);b.b=d;b.h=b.f}return b.b}A.kc=function(b){var d=[];d.length=Fd(this.a,0,this.a.length,this.D,b,d,0);b=new vn(null);xd(b,"XY",d);b.A();return b};A.ma=function(){return"LineString"};
A.fb=function(b){return Od(this.a,0,this.a.length,this.D,b)};A.za=function(b,d){b?(yd(this,d,b,1),this.a||(this.a=[]),this.a.length=Bd(this.a,0,b,this.D)):xd(this,"XY",null);this.A()};function wn(b,d){ud.call(this);this.b=[];this.za(b,d)}Q(wn,ud);A=wn.prototype;A.clone=function(){var b=new wn(null),d=this.b.slice();xd(b,this.g,this.a.slice());b.b=d;b.A();return b};A.ua=function(){return Ed(this.a,0,this.b,this.D)};A.Dc=function(){return this.b};function Mj(b){var d=[],e=b.a,g=0,k=b.b;b=b.D;var p,q;p=0;for(q=k.length;p<q;++p){var u=k[p],g=un(e,g,u,b);dd(d,g);g=u}return d}
A.kc=function(b){var d=[],e=[],g=this.a,k=this.b,p=this.D,q=0,u=0,v,w;v=0;for(w=k.length;v<w;++v){var z=k[v],u=Fd(g,q,z,p,b,d,u);e.push(u);q=z}d.length=u;b=new wn(null);xd(b,"XY",d);b.b=e;b.A();return b};A.ma=function(){return"MultiLineString"};A.fb=function(b){a:{var d=this.a,e=this.b,g=this.D,k=0,p,q;p=0;for(q=e.length;p<q;++p){if(Od(d,k,e[p],g,b)){b=!0;break a}k=e[p]}b=!1}return b};
A.za=function(b,d){if(b){yd(this,d,b,2);this.a||(this.a=[]);var e=Cd(this.a,0,b,this.D,this.b);this.a.length=0===e.length?0:e[e.length-1]}else e=this.b,xd(this,"XY",null),this.b=e;this.A()};function xn(b,d){ud.call(this);this.za(b,d)}Q(xn,ud);A=xn.prototype;A.clone=function(){var b=new xn(null);xd(b,this.g,this.a.slice());b.A();return b};A.ua=function(){return Dd(this.a,0,this.a.length,this.D)};A.ma=function(){return"MultiPoint"};A.fb=function(b){var d=this.a,e=this.D,g,k,p,q;g=0;for(k=d.length;g<k;g+=e)if(p=d[g],q=d[g+1],Zb(b,p,q))return!0;return!1};A.za=function(b,d){b?(yd(this,d,b,1),this.a||(this.a=[]),this.a.length=Bd(this.a,0,b,this.D)):xd(this,"XY",null);this.A()};function yn(b,d){ud.call(this);this.b=[];this.i=-1;this.j=null;this.l=-1;this.h=null;this.za(b,d)}Q(yn,ud);A=yn.prototype;A.clone=function(){for(var b=new yn(null),d=this.b.length,e=Array(d),g=0;g<d;++g)e[g]=this.b[g].slice();xd(b,this.g,this.a.slice());b.b=e;b.A();return b};A.Kc=function(b,d){var e;a:{e=Nj(this);var g=this.b,k=0;if(0!==g.length){var p,q;p=0;for(q=g.length;p<q;++p){var u=g[p];if(Ld(e,k,u,this.D,b,d)){e=!0;break a}k=u[u.length-1]}}e=!1}return e};
A.ua=function(b){var d;void 0!==b?(d=Nj(this).slice(),Td(d,this.b,this.D,b)):d=this.a;b=d;d=this.b;var e=this.D,g=0,k=[],p=0,q,u;q=0;for(u=d.length;q<u;++q){var v=d[q];k[p++]=Ed(b,g,v,e,k[p]);g=v[v.length-1]}k.length=p;return k};
function Oj(b){if(b.i!=b.f){var d=b.a,e=b.b,g=b.D,k=0,p=[],q,u,v=Ub();q=0;for(u=e.length;q<u;++q){var w=e[q],v=dc(ac(Infinity,Infinity,-Infinity,-Infinity,void 0),d,k,w[0],g);p.push((v[0]+v[2])/2,(v[1]+v[3])/2);k=w[w.length-1]}d=Nj(b);e=b.b;g=b.D;k=0;q=[];u=0;for(v=e.length;u<v;++u)w=e[u],q=Md(d,k,w,g,p,2*u,q),k=w[w.length-1];b.j=q;b.i=b.f}return b.j}
function Nj(b){if(b.l!=b.f){var d=b.a,e;a:{e=b.b;var g,k;g=0;for(k=e.length;g<k;++g)if(!Rd(d,e[g],b.D,void 0)){e=!1;break a}e=!0}e?b.h=d:(b.h=d.slice(),b.h.length=Td(b.h,b.b,b.D));b.l=b.f}return b.h}A.kc=function(b){var d=[],e=[],g=this.a,k=this.b,p=this.D;b=Math.sqrt(b);var q=0,u=0,v,w;v=0;for(w=k.length;v<w;++v){var z=k[v],B=[],u=Gd(g,q,z,p,b,d,u,B);e.push(B);q=z[z.length-1]}d.length=u;g=new yn(null);xd(g,"XY",d);g.b=e;g.A();return g};A.ma=function(){return"MultiPolygon"};
A.fb=function(b){a:{var d=Nj(this),e=this.b,g=this.D,k=0,p,q;p=0;for(q=e.length;p<q;++p){var u=e[p];if(Pd(d,k,u,g,b)){b=!0;break a}k=u[u.length-1]}b=!1}return b};A.za=function(b,d){if(b){yd(this,d,b,3);this.a||(this.a=[]);var e=this.a,g=this.D,k=this.b,p=0,k=k?k:[],q=0,u,v;u=0;for(v=b.length;u<v;++u)p=Cd(e,p,b[u],g,k[q]),k[q++]=p,p=p[p.length-1];k.length=q;0===k.length?this.a.length=0:(e=k[k.length-1],this.a.length=0===e.length?0:e[e.length-1])}else e=this.b,xd(this,"XY",null),this.b=e;this.A()};function zn(b,d){fb.call(this,b);this.fa=d}Q(zn,fb);
function An(b){li.call(this,{qb:Bn,handleEvent:Cn,xb:Dn});this.V=null;this.u=!1;this.Ob=b.source?b.source:null;this.K=b.Ra?b.Ra:null;this.vd=b.Sh?b.Sh:12;this.M=b.type;this.b=En(this.M);this.tb=b.Hg?b.Hg:this.b===Fn?3:2;this.wa=b.Gg?b.Gg:Infinity;var d=b.Pf;if(!d)if("Circle"===this.M)d=function(b,d){var e=d?d:new rn([NaN,NaN]);sn(e,b[0],Math.sqrt(Rb(b[0],b[1])));return e};else{var e,d=this.b;d===Gn?e=Id:d===Hn?e=vn:d===Fn&&(e=Ud);d=function(b,d){var p=d;p?p.za(b):p=new e(b);return p}}this.w=d;this.G=
this.j=this.a=this.l=this.h=this.i=null;this.hf=b.ve?b.ve*b.ve:36;this.ca=new Cj({source:new Uk({sd:!1,Pa:b.Pa?b.Pa:!1}),style:b.style?b.style:In()});this.ub=b.Li;this.Ma=b.Qa?b.Qa:gi;this.la=b.Nf?b.Nf:ii;S(this,qb("active"),this.gc,this)}Q(An,li);function In(){var b=Bj();return function(d){return b[d.C().ma()]}}An.prototype.ja=function(b){An.xa.ja.call(this,b);this.gc()};
function Cn(b){this.b!==Hn&&this.b!==Fn||!this.la(b)||(this.u=!0);var d=!this.u;this.u&&b.type===Gg?(Jn(this,b),d=!1):b.type===Fg?d=Kn(this,b):b.type===zg&&(d=!1);return mi.call(this,b)&&d}function Bn(b){return this.Ma(b)?(this.V=b.f,!0):this.u?(this.V=b.f,this.i||Ln(this,b),!0):!1}function Dn(b){this.u=!1;var d=this.V,e=b.f,g=d[0]-e[0],d=d[1]-e[1],e=!0;g*g+d*d<=this.hf&&(Kn(this,b),this.i?this.b===Mn?Nn(this):On(this,b)?Nn(this):Jn(this,b):(Ln(this,b),this.b===Gn&&Nn(this)),e=!1);return e}
function Kn(b,d){if(b.i){var e=d.b,g=b.h.C(),k;b.b===Gn?k=b.a:b.b===Fn?(k=b.a[0],k=k[k.length-1],On(b,d)&&(e=b.i.slice())):(k=b.a,k=k[k.length-1]);k[0]=e[0];k[1]=e[1];b.w(b.a,g);b.l&&b.l.C().za(e);g instanceof Ud&&b.b!==Fn?(b.j||(b.j=new Gk(new vn(null))),0>=g.b.length?g=null:(e=new Hd(null),xd(e,g.g,g.a.slice(0,g.b[0])),e.A(),g=e),e=b.j.C(),xd(e,g.g,g.a),e.A()):b.G&&(e=b.j.C(),e.za(b.G));Pn(b)}else g=d.b.slice(),b.l?b.l.C().za(g):(b.l=new Gk(new Id(g)),Pn(b));return!0}
function On(b,d){var e=!1;if(b.h){var g=!1,k=[b.i];b.b===Hn?g=b.a.length>b.tb:b.b===Fn&&(g=b.a[0].length>b.tb,k=[b.a[0][0],b.a[0][b.a[0].length-2]]);if(g)for(var g=d.map,p=0,q=k.length;p<q;p++){var u=k[p],v=si(g,u),w=d.f,e=w[0]-v[0],v=w[1]-v[1],w=b.u&&b.la(d)?1:b.vd;if(e=Math.sqrt(e*e+v*v)<=w){b.i=u;break}}}return e}
function Ln(b,d){var e=d.b;b.i=e;b.b===Gn?b.a=e.slice():b.b===Fn?(b.a=[[e.slice(),e.slice()]],b.G=b.a[0]):(b.a=[e.slice(),e.slice()],b.b===Mn&&(b.G=b.a));b.G&&(b.j=new Gk(new vn(b.G)));e=b.w(b.a);b.h=new Gk;b.ub&&Ik(b.h,b.ub);Hk(b.h,e);Pn(b);U(b,new zn("drawstart",b.h))}function Jn(b,d){var e=d.b,g=b.h.C(),k,p;if(b.b===Hn)b.i=e.slice(),p=b.a,p.push(e.slice()),k=p.length>b.wa,b.w(p,g);else if(b.b===Fn){p=b.a[0];p.push(e.slice());if(k=p.length>b.wa)b.i=p[0];b.w(b.a,g)}Pn(b);k&&Nn(b)}
function Nn(b){var d=Qn(b),e=b.a,g=d.C();b.b===Hn?(e.pop(),b.w(e,g)):b.b===Fn&&(e[0].pop(),e[0].push(e[0][0]),b.w(e,g));"MultiPoint"===b.M?Hk(d,new xn([e])):"MultiLineString"===b.M?Hk(d,new wn([e])):"MultiPolygon"===b.M&&Hk(d,new yn([e]));U(b,new zn("drawend",d));b.K&&b.K.push(d);b.Ob&&b.Ob.vc(d)}function Qn(b){b.i=null;var d=b.h;d&&(b.h=null,b.l=null,b.j=null,b.ca.ha().clear(!0));return d}An.prototype.B=rd;
function Pn(b){var d=[];b.h&&d.push(b.h);b.j&&d.push(b.j);b.l&&d.push(b.l);b=b.ca.ha();b.clear(!0);b.Cb(d)}An.prototype.gc=function(){var b=this.da(),d=this.get("active");b&&d||Qn(this);this.ca.ja(d?b:null)};function En(b){var d;"Point"===b||"MultiPoint"===b?d=Gn:"LineString"===b||"MultiLineString"===b?d=Hn:"Polygon"===b||"MultiPolygon"===b?d=Fn:"Circle"===b&&(d=Mn);return d}var Gn="Point",Hn="LineString",Fn="Polygon",Mn="Circle";function an(b,d){this.v=d;this.Xd=b;this.sb=null}Q(an,{});
function Rn(b,d,e,g){if("string"===typeof d&&"string"===typeof e&&0!==d.length&&0!==e.length){var k="function"===typeof onDrawEnd?onDrawEnd:null;b.sb&&b.v.o.o.Ta.remove(b.sb);b.sb=new An({source:b.v,type:d,Pf:"function"===typeof g?g:null});"point"===e&&(b.sb.mode=b.mode=Gn);b.v.o.o.ib(b.sb);lb(b.sb,function(b){k&&k.call(this,b);if(b.fa instanceof Gk){var d=b.fa,g="-1:"+L(b.fa);d.ya=g;d.A();b.fa.state=2;b.fa.type=e;d=V(this.v.o.o).ga();b.fa.C()instanceof Rm&&0!==d&&!this.v.Jb&&b.fa.C().rotate(-d);
d="label"===e?new Sn({text:"new label",font:"normal 10px sans-serif",stroke:new tj({color:"rgba(51, 153, 204, 0.9)",width:1})}):null;Jk(b.fa,new vj({fill:null===d?new oj({color:"rgba(255,255,255,0.5)"}):null,stroke:null===d?new tj({color:"rgba(51, 153, 204, 0.9)",width:1}):null,text:d}));Sm(b.fa,this.v)}this.v.O&&Nm(this.v.O);this.sb&&(this.v.o.o.Ta.remove(this.sb),Fm(this.v,this.Xd))},b)}}A=an.prototype;A.If=function(){Rn(this,"Polygon","polygon")};A.Gf=function(){Rn(this,"LineString","polyline")};
A.Hf=function(){Rn(this,"Point","point",function(b){return new rn(b,2)})};A.Jf=function(){Rn(this,"Circle","rectangle",function(b,d){var e=b[0],g=b[1],k=Math.abs(g[0]-e[0]),p=Math.abs(e[1]-g[1]);0===k&&(k=1);0===p&&(p=1);e=new Tn(g[0]<e[0]?g[0]:e[0],g[1]>e[1]?g[1]:e[1],k,p);d&&(g=Un(e),fa(g),Vn(d,g[0],g[1]),d.ac(Wn(e)),g=Xn(e),Vn(d,null,null,null,g));return e})};A.Ff=function(){Rn(this,"Circle","label",function(b){var d=Yn("new label","normal 10px sans-serif");return new Rm(b[0][0],b[0][1],d)})};
A.Ef=function(){Rn(this,"Circle","ellipse",function(b,d){var e=b[0],g=b[1],e=new Zn(e[0],e[1],Math.abs(e[0]-g[0]),Math.abs(e[1]-g[1]));d&&(d.za(e.ua()),d.Zd(e.Ec()));return e})};A.oa=function(){this.sb&&(this.v.o.o.Ta.remove(this.sb),this.Xd=null);this.v=null};function ln(){ti.call(this);this.Ma=ii}Q(ln,ti);function $n(b){nb.call(this);this.ya=b.id;this.j=void 0!==b.wg?b.wg:!0;this.l=void 0!==b.Th?b.Th:!0;this.b=document.createElement("DIV");this.b.className="ol-overlay-container";this.b.style.position="absolute";this.Wc=void 0!==b.Wc?b.Wc:!1;this.h=void 0!==b.vf?b.vf:{};this.i=void 0!==b.wf?b.wf:20;this.a={Xc:"",hd:"",nd:"",rd:"",visible:!0};this.g=null;S(this,qb("element"),this.Wf,this);S(this,qb("map"),this.gg,this);S(this,qb("offset"),this.hg,this);S(this,qb("position"),this.jg,this);S(this,qb("positioning"),
this.kg,this);void 0!==b.element&&this.set("element",b.element);this.set("offset",void 0!==b.offset?b.offset:[0,0]);this.set("positioning",void 0!==b.$e?b.$e:"top-left");void 0!==b.position&&ao(this,b.position)}Q($n,nb);function bo(b){return b.get("element")}A=$n.prototype;A.Fa=function(){return this.ya};A.da=function(){return this.get("map")};A.Wf=function(){Ye(this.b);var b=bo(this);b&&this.b.appendChild(b)};
A.gg=function(){this.g&&($e(this.b),Ba(this.g),this.g=null);var b=this.da();b&&(this.g=S(b,"postrender",this.P,this),co(this),b=this.l?b.s:b.u,this.j?Ze(b,this.b,0):b.appendChild(this.b))};A.P=function(){co(this)};A.hg=function(){co(this)};
A.jg=function(){co(this);if(void 0!==this.get("position")&&this.Wc){var b=this.da();if(void 0!==b&&vm(b)){var d=eo(vm(b),xi(b)),e=bo(this),g=eo(e,[Af(e),Bf(e)]),e=this.i;if(!Yb(d,g)){var k=g[0]-d[0],p=d[2]-g[2],q=g[1]-d[1],g=d[3]-g[3],d=[0,0];0>k?d[0]=k-e:0>p&&(d[0]=Math.abs(p)+e);0>q?d[1]=q-e:0>g&&(d[1]=Math.abs(g)+e);if(0!==d[0]||0!==d[1])e=$d(V(b)),k=si(b,e),k=[k[0]+d[0],k[1]+d[1]],this.h&&(this.h.source=e,b.eb(Ph(this.h))),V(b).Oa(b.Ea(k))}}}};A.kg=function(){co(this)};
A.ja=function(b){this.set("map",b)};function ao(b,d){b.set("position",d)}
function eo(b,d){var e=Qe(b),g=new Me(0,0),k;k=e?Qe(e):document;k=!ye||9<=Number(Ke)||"CSS1Compat"==Oe(k).a.compatMode?k.documentElement:k.body;if(b!=k){k=hf(b);var p=Oe(e).a,e=p.scrollingElement?p.scrollingElement:Be||"CSS1Compat"!=p.compatMode?p.body||p.documentElement:p.documentElement,p=p.parentWindow||p.defaultView,e=ye&&Ie("10")&&p.pageYOffset!=e.scrollTop?new Me(e.scrollLeft,e.scrollTop):new Me(p.pageXOffset||e.scrollLeft,p.pageYOffset||e.scrollTop);g.x=k.left+e.x;g.y=k.top+e.y}return[g.x,
g.y,g.x+d[0],g.y+d[1]]}function fo(b,d){b.a.visible!==d&&(lf(b.b,d),b.a.visible=d)}
function co(b){var d=b.da(),e=b.get("position");if(void 0!==d&&d.b&&void 0!==e){var e=si(d,e),g=xi(d),d=b.b.style,k=b.get("offset"),p=b.get("positioning"),q=k[0],k=k[1];if("bottom-right"==p||"center-right"==p||"top-right"==p)""!==b.a.hd&&(b.a.hd=d.left=""),q=Math.round(g[0]-e[0]-q)+"px",b.a.nd!=q&&(b.a.nd=d.right=q);else{""!==b.a.nd&&(b.a.nd=d.right="");if("bottom-center"==p||"center-center"==p||"top-center"==p)q-=jf(b.b).width/2;q=Math.round(e[0]+q)+"px";b.a.hd!=q&&(b.a.hd=d.left=q)}if("bottom-left"==
p||"bottom-center"==p||"bottom-right"==p)""!==b.a.rd&&(b.a.rd=d.top=""),e=Math.round(g[1]-e[1]-k)+"px",b.a.Xc!=e&&(b.a.Xc=d.bottom=e);else{""!==b.a.Xc&&(b.a.Xc=d.bottom="");if("center-left"==p||"center-center"==p||"center-right"==p)k-=jf(b.b).height/2;e=Math.round(e[1]+k)+"px";b.a.rd!=e&&(b.a.rd=d.top=e)}fo(b,!0)}else fo(b,!1)};function Zm(b){this.v=b;Xh.call(this,{});this.handleEvent=go;this.Ma=function(d){return di.call(b.O,d)};this.K=new sb;this.g=!1;this.a=null;var d=Im(this.v.o);this.Je=function(b){return 0<=[d].indexOf(b)};this.bd=qd;this.g&&Zm.prototype.b.call(this,!0)}Q(Zm,Xh);function Nm(b){b.pa().forEach(function(b){b.selected=!1},b);b.pa().clear();b.v.A()}
Zm.prototype.h=function(b){var d=null;b=[b.offsetX,b.offsetY];ho(b,this.o.o,this.Nb,this.O,function(b,g){if(this.bd(b,g))return d=b,!0},this.O.Je);io(this.O,b,d)};
function go(b){if(!this.Ma(b)||b.h||b instanceof vg&&b.a instanceof MouseEvent&&"number"===typeof b.a.which&&3===b.a.which)return!0;var d=null;ho(b.f,b.map,this.v.Nb,this,function(b,e){if(this.bd(b,e))return d=b,!0},this.Je);var e=d&&d.selected;if(null===d||!ii(b))if(Nm(this),null===d)return;e?(d.selected=!1,this.pa().remove(d)):(d.selected=!0,this.pa().push(d));!(d instanceof jo)&&d.cluster instanceof jo&&(d.cluster.selected=!1,d.cluster.group_selected=!1,this.pa().remove(d.cluster));this.v.A();
return"pointermove"==b.type}
function io(b,d,e){if(fa(d)&&2===d.length&&e instanceof Gk&&b.a instanceof $n){var g=Ue("DIV",{id:"ome_context_menu"});if(null!==g){d=b.v.o.o.Ea([d[0]-10,d[1]-10]);var k=b.a,p=Ue("SPAN",{"class":"title"},e instanceof jo?"Cluster: "+e.K.length:"Feature: "+e.Fa()),q=Ue("A",{href:"#","class":"close"},"\u2716");q.onclick=function(){ao(k,void 0);return!1};p=Ue("DIV",{"class":"header"},p,q);g.appendChild(p);e instanceof jo?ko(b,g,"(Un)Select Cluster Features",function(){if(e instanceof jo){var b=!0===("boolean"===
typeof e.group_selected?e.group_selected:!1)?!1:!0;e.group_selected=b;e.selected=!1;this.v.O.pa().remove(e);for(f in e.K)(e.K[f].selected=b)?(this.v.O.pa().remove(e.K[f]),this.v.O.pa().push(e.K[f])):this.v.O.pa().remove(e.K[f]),this.v.A()}}):ko(b,g,"(Un)Select Feature",function(){if(e instanceof Gk){var b=!0===e.selected?!1:!0;e.selected=b;var d=e instanceof jo?e.K:[e];for(f in d)(d[f].selected=b)?this.v.O.pa().push(d[f]):(this.v.O.pa().remove(d[f]),d[f].cluster instanceof jo&&(d[f].cluster.group_selected=
!1)),this.v.A()}});b.a.set("element",g);ao(b.a,d);df(g.parentNode,"margin: 1px");vm(b.v.o.o).onmouseover=function(b){"ome_context_menu"!==b.target.id&&"ome_context_menu"!==b.target.parentNode.id&&"ome_context_menu"!==b.target.parentNode.parentNode.id&&ao(k,void 0);return!1}}}}
function ko(b,d,e,g){if("object"===typeof d&&"string"===typeof e&&0!==e.length){var k="function"===typeof g?g:null,p=null;if(1>d.childNodes||"DIV"!==d.childNodes[d.childNodes.length-1].tagName.toUpperCase()||!lo(d.childNodes[d.childNodes.length-1]))Xe(d,Ue("HR",{})),Xe(d,Ue("DIV",{"class":"content"}));p=d.childNodes[d.childNodes.length-1];null!==p&&(d=Ue("SPAN",{},e),d.onmouseover=function(b){mo(b.target,"selected")},d.onmouseout=function(b){mo(b.target,"")},k&&(d.onclick=function(d){g.call(b,d)}),
p.appendChild(d))}}Zm.prototype.pa=function(){return this.K};Zm.prototype.b=function(b){"boolean"!==typeof b&&(b=!1);if(this.g!=b)if(this.g=b){this.a=new $n({Wc:!0});this.v.o.o.h.push(this.a);var d=this.v;vm(this.v.o.o).oncontextmenu=function(b){if(null!==d.O)return Zm.prototype.h.call(d,b),b.stopPropagation?b.stopPropagation():b.cancelBubble=!0,!1}}else this.a instanceof $n&&(this.v.o.o.h.remove(this.a),this.a=null),vm(this.v.o.o).oncontextmenu=null,vm(this.v.o.o).onmouseover=null};
Zm.prototype.W=function(){this.b(!1);this.v=null};function mn(b){Ci.call(this);this.Ma=hi;b instanceof Em&&(this.v=b,this.G=function(){this.v.O&&Nm(this.v.O)},this.i=null,this.w=function(){if(null!==this.v.O){var b=this.C().I(),e=function(e){e.C()&&e.C().fb(b)?(e.selected=!0,this.v.O.pa().push(e)):e.selected=!1};this.v.i&&(e=function(e){var k=[e];!this.v.Nb&&e instanceof jo&&(oc(b,e.wc)?k=e.K:k=[]);for(f in k)e=k[f],e.C()&&e.C().fb(b)&&(e.selected=!0,this.v.O.pa().push(e))});this.v.pa().forEach(e,this);this.v.A()}},this.h=null,this.l=function(){this.i=
S(this,"boxstart",this.G,this);this.h=S(this,"boxend",this.w,this)},this.l())}Q(mn,Ci);function Um(b){b.i&&Ba(b.i);b.h&&Ba(b.h)}mn.prototype.W=function(){Um(this);this.v=null};function no(b,d){fb.call(this,b);this.Ra=d}Q(no,fb);
function oo(b){li.call(this,{qb:po,Db:qo,handleEvent:ro,xb:so});this.ca=b.Af?b.Af:ge(gi,fi);this.wa=this.a=null;this.la=[0,0];this.l=this.u=!1;this.b=new Pk;this.i=void 0!==b.th?b.th:10;this.V=this.G=!1;this.h=null;this.w=new Cj({source:new Uk({sd:!1,Pa:!!b.Pa}),style:b.style?b.style:to(),ee:!0,fe:!0});this.M={Point:this.li,LineString:this.ff,LinearRing:this.ff,Polygon:this.gf,MultiPoint:this.ji,MultiLineString:this.ii,MultiPolygon:this.ki,GeometryCollection:this.hi};this.K=b.Ra;this.K.forEach(this.xd,
this);S(this.K,"add",this.Xf,this);S(this.K,"remove",this.Yf,this)}Q(oo,li);A=oo.prototype;A.xd=function(b){var d=b.C();d.ma()in this.M&&this.M[d.ma()].call(this,b,d);(d=this.da())&&this.Gc(this.la,d);S(b,"change",this.Oe,this)};function uo(b){b.l||(b.l=!0,U(b,new no("modifystart",b.K)))}function vo(b,d){wo(b,d);b.a&&0===ub(b.K)&&(b.w.ha().Yb(b.a),b.a=null);Ha(d,"change",b.Oe,b)}
function wo(b,d){var e=b.b,g=[];e.forEach(function(b){d===b.fa&&g.push(b)});for(var k=g.length-1;0<=k;--k)e.remove(g[k])}A.ja=function(b){this.w.ja(b);oo.xa.ja.call(this,b)};A.Xf=function(b){this.xd(b.element)};A.Oe=function(b){this.V||(b=b.target,vo(this,b),this.xd(b))};A.Yf=function(b){vo(this,b.element)};A.li=function(b,d){var e=d.ua(),e={fa:b,ta:d,ka:[e,e]};this.b.Ia(d.I(),e)};
A.ji=function(b,d){var e=d.ua(),g,k,p;k=0;for(p=e.length;k<p;++k)g=e[k],g={fa:b,ta:d,depth:[k],index:k,ka:[g,g]},this.b.Ia(d.I(),g)};A.ff=function(b,d){var e=d.ua(),g,k,p,q;g=0;for(k=e.length-1;g<k;++g)p=e.slice(g,g+2),q={fa:b,ta:d,index:g,ka:p},this.b.Ia(Tb(p),q)};A.ii=function(b,d){var e=d.ua(),g,k,p,q,u,v,w;q=0;for(u=e.length;q<u;++q)for(g=e[q],k=0,p=g.length-1;k<p;++k)v=g.slice(k,k+2),w={fa:b,ta:d,depth:[q],index:k,ka:v},this.b.Ia(Tb(v),w)};
A.gf=function(b,d){var e=d.ua(),g,k,p,q,u,v,w;q=0;for(u=e.length;q<u;++q)for(g=e[q],k=0,p=g.length-1;k<p;++k)v=g.slice(k,k+2),w={fa:b,ta:d,depth:[q],index:k,ka:v},this.b.Ia(Tb(v),w)};A.ki=function(b,d){var e=d.ua(),g,k,p,q,u,v,w,z,B,C;v=0;for(w=e.length;v<w;++v)for(z=e[v],q=0,u=z.length;q<u;++q)for(g=z[q],k=0,p=g.length-1;k<p;++k)B=g.slice(k,k+2),C={fa:b,ta:d,depth:[q,v],index:k,ka:B},this.b.Ia(Tb(B),C)};A.hi=function(b,d){var e,g=d.Rf();for(e=0;e<g.length;++e)this.M[g[e].ma()].call(this,b,g[e])};
function xo(b,d){var e=b.a;e?e.C().za(d):(e=new Gk(new Id(d)),b.a=e,b.w.ha().vc(e))}function yo(b,d){return b.index-d.index}
function po(b){this.Gc(b.f,b.map);this.h=[];this.l=!1;var d=this.a;if(d){b=[];var d=d.C().ua(),e=Tb([d]),e=Rk(this.b,e),g={};e.sort(yo);for(var k=0,p=e.length;k<p;++k){var q=e[k],u=q.ka,v=L(q.fa),w=q.depth;w&&(v+="-"+w.join("-"));g[v]||(g[v]=Array(2));if(Pb(u[0],d)&&!g[v][0])this.h.push([q,0]),g[v][0]=q;else if(Pb(u[1],d)&&!g[v][1]){if("LineString"!==q.ta.ma()&&"MultiLineString"!==q.ta.ma()||!g[v][0]||0!==g[v][0].index)this.h.push([q,1]),g[v][1]=q}else L(u)in this.wa&&!g[v][0]&&!g[v][1]&&b.push([q,
d])}b.length&&uo(this);for(d=b.length-1;0<=d;--d)this.xg.apply(this,b[d])}return!!this.a}
function qo(b){this.u=!1;uo(this);b=b.b;for(var d=0,e=this.h.length;d<e;++d){for(var g=this.h[d],k=g[0],p=k.depth,q=k.ta,u=q.ua(),v=k.ka,g=g[1];b.length<q.D;)b.push(0);switch(q.ma()){case "Point":u=b;v[0]=v[1]=b;break;case "MultiPoint":u[k.index]=b;v[0]=v[1]=b;break;case "LineString":u[k.index+g]=b;v[g]=b;break;case "MultiLineString":u[p[0]][k.index+g]=b;v[g]=b;break;case "Polygon":u[p[0]][k.index+g]=b;v[g]=b;break;case "MultiPolygon":u[p[1]][p[0]][k.index+g]=b,v[g]=b}zo(this,q,u)}xo(this,b)}
function so(){for(var b,d=this.h.length-1;0<=d;--d)b=this.h[d][0],Qk(this.b,Tb(b.ka),b);this.l&&(U(this,new no("modifyend",this.K)),this.l=!1);return!1}function ro(b){if(!(b instanceof vg))return!0;var d;V(b.map).g.slice()[1]||b.type!=Fg||this.s||(this.la=b.f,this.Gc(b.f,b.map));this.a&&this.ca(b)&&(b.type==Ag&&this.u?d=!0:(this.a.C(),uo(this),d=Ao(this),U(this,new no("modifyend",this.K)),this.l=!1));b.type==Ag&&(this.u=!1);return mi.call(this,b)&&!d}
A.Gc=function(b,d){function e(b,d){return Rb(g,Ob(g,b.ka))-Rb(g,Ob(g,d.ka))}var g=d.Ea(b),k=d.Ea([b[0]-this.i,b[1]+this.i]),p=d.Ea([b[0]+this.i,b[1]-this.i]),k=Tb([k,p]),k=Rk(this.b,k);if(0<k.length){k.sort(e);var p=k[0].ka,q=Ob(g,p),u=si(d,q);if(Math.sqrt(Rb(b,u))<=this.i){var v=si(d,p[0]),w=si(d,p[1]),v=Rb(u,v),u=Rb(u,w);(this.G=Math.sqrt(Math.min(v,u))<=this.i)&&(q=v>u?p[1]:p[0]);xo(this,q);q={};q[L(p)]=!0;w=1;for(v=k.length;w<v;++w)if(u=k[w].ka,Pb(p[0],u[0])&&Pb(p[1],u[1])||Pb(p[0],u[1])&&Pb(p[1],
u[0]))q[L(u)]=!0;else break;this.wa=q;return}}this.a&&(this.w.ha().Yb(this.a),this.a=null)};
A.xg=function(b,d){for(var e=b.ka,g=b.fa,k=b.ta,p=b.depth,q=b.index,u;d.length<k.D;)d.push(0);switch(k.ma()){case "MultiLineString":u=k.ua();u[p[0]].splice(q+1,0,d);break;case "Polygon":u=k.ua();u[p[0]].splice(q+1,0,d);break;case "MultiPolygon":u=k.ua();u[p[1]][p[0]].splice(q+1,0,d);break;case "LineString":u=k.ua();u.splice(q+1,0,d);break;default:return}zo(this,k,u);u=this.b;u.remove(b);Bo(this,k,q,p,1);var v={ka:[e[0],d],fa:g,ta:k,depth:p,index:q};u.Ia(Tb(v.ka),v);this.h.push([v,1]);e={ka:[d,e[1]],
fa:g,ta:k,depth:p,index:q+1};u.Ia(Tb(e.ka),e);this.h.push([e,0]);this.u=!0};
function Ao(b){var d=b.h,e={},g,k,p,q,u,v,w,z,B;for(u=d.length-1;0<=u;--u)if(p=d[u],z=p[0],q=z.ta,k=q.ua(),B=L(z.fa),z.depth&&(B+="-"+z.depth.join("-")),g=w=v=void 0,0===p[1]?(w=z,v=z.index):1==p[1]&&(g=z,v=z.index+1),B in e||(e[B]=[g,w,v]),p=e[B],void 0!==g&&(p[0]=g),void 0!==w&&(p[1]=w),void 0!==p[0]&&void 0!==p[1]){g=k;B=!1;w=v-1;switch(q.ma()){case "MultiLineString":k[z.depth[0]].splice(v,1);B=!0;break;case "LineString":k.splice(v,1);B=!0;break;case "MultiPolygon":g=g[z.depth[1]];case "Polygon":g=
g[z.depth[0]],4<g.length&&(v==g.length-1&&(v=0),g.splice(v,1),B=!0,0===v&&(g.pop(),g.push(g[0]),w=g.length-1))}B&&(b.b.remove(p[0]),b.b.remove(p[1]),zo(b,q,k),k={depth:z.depth,fa:z.fa,ta:z.ta,index:w,ka:[p[0].ka[0],p[1].ka[1]]},b.b.Ia(Tb(k.ka),k),Bo(b,q,v,z.depth,-1),b.a&&(b.w.ha().Yb(b.a),b.a=null))}return!0}function zo(b,d,e){b.V=!0;d.za(e);b.V=!1}function Bo(b,d,e,g,k){Tk(b.b,d.I(),function(b){b.ta===d&&(void 0===g||void 0===b.depth||fd(b.depth,g))&&b.index>e&&(b.index+=k)})}
function to(){var b=Bj();return function(){return b.Point}};function Co(b){oo.call(this,b);this.La=Do;this.handleEvent=Eo;this.ra=Fo;this.ca=function(b){return gi(b)&&di(b)}}Q(Co,oo);
Co.prototype.Gc=function(b,d){if(this.K instanceof sb&&0!==ub(this.K)){var e=d.Ea(b),g=function(b,d){return Rb(e,Ob(e,b.ka))-Rb(e,Ob(e,d.ka))},k=d.Ea([b[0]-this.i,b[1]+this.i]),p=d.Ea([b[0]+this.i,b[1]-this.i]),k=Tb([k,p]),k=Rk(this.b,k);if(0<k.length&&(k.sort(g),p=k[0],!(p.ta instanceof Rm))){var g=p.ka,q=Ob(e,g),u=si(d,q);if(Math.sqrt(Rb(b,u))<=this.i){var v=si(d,g[0]),w=si(d,g[1]),v=Rb(u,v),u=Rb(u,w);this.G=Math.sqrt(Math.min(v,u))<=this.i;if((p.ta instanceof Tn||p.ta instanceof Zn)&&!this.G)return;
this.G&&(q=v>u?g[1]:g[0]);xo(this,q);p={};p[L(g)]=!0;u=1;for(w=k.length;u<w;++u)if(q=k[u].ka,Pb(g[0],q[0])&&Pb(g[1],q[1])||Pb(g[0],q[1])&&Pb(g[1],q[0]))p[L(q)]=!0;else break;this.wa=p;return}}this.a&&(this.w.ha().Yb(this.a),this.a=null)}};
function Do(b){if(!(b instanceof vg&&b.a instanceof MouseEvent&&"number"===typeof b.a.which&&3===b.a.which)){this.u=!1;uo(this);b=b.b;for(var d=0,e=this.h.length;d<e;++d){for(var g=this.h[d],k=g[0],p=k.depth,q=k.ta,u=q.ua(),v=k.ka,g=g[1];b.length<q.D;)b.push(0);if(q instanceof Id)u=b,v[0]=v[1]=b;else if(q instanceof xn)u[k.index]=b,v[0]=v[1]=b;else if(q instanceof vn)u[k.index+g]=b,v[g]=b;else if(q instanceof wn)u[p[0]][k.index+g]=b,v[g]=b;else if(q instanceof Zn)q.l=Math.abs(q.h-b[0]),q.s=Math.abs(q.i-
b[1]),u=(new Zn(q.h,q.i,q.l,q.s)).ua();else if(q instanceof Tn){k=this.a.C().ua();if(null==this.j)for(var w=0;w<u[p[0]].length;w++)if(u[p[0]][w][0]!=k[0]&&u[p[0]][w][1]!=k[1]){this.j=u[p[0]][w];break}var k=b[0]<this.j[0]?b[0]:this.j[0],w=b[0]>this.j[0]?b[0]:this.j[0],z=-b[1]<-this.j[1]?b[1]:this.j[1],B=-b[1]>-this.j[1]?b[1]:this.j[1];u[p[0]][0]=[k,z];u[p[0]][1]=[w,z];u[p[0]][2]=[w,B];u[p[0]][3]=[k,B];u[p[0]][4]=[k,z];v[g]=q.I().slice(2*g,2*(g+1))}else q instanceof Ud?(u[p[0]][k.index+g]=b,v[g]=b):
q instanceof yn&&(u[p[1]][p[0]][k.index+g]=b,v[g]=b);zo(this,q,u)}xo(this,b)}}function Fo(b){if(b instanceof vg&&b.a instanceof MouseEvent&&"number"===typeof b.a.which&&3===b.a.which)return!1;this.j=null;for(var d=this.h.length-1;0<=d;--d)b=this.h[d][0],b.ta instanceof Tn||b.ta instanceof Zn?(wo(this,b.fa),this.gf(b.fa,b.ta)):(Qk(this.b,Tb(b.ka),b),this.a&&this.K.remove(this.a)),0===b.fa.state&&(b.fa.state=1);this.l&&(U(this,new no("modifyend",this.K)),this.l=!1);return!1}
function Eo(b){if(!(b instanceof vg)||b.a instanceof MouseEvent&&"number"===typeof b.a.which&&3===b.a.which)return!0;var d;V(b.map).g.slice()[1]||b.type!=Fg||this.s||(this.la=b.f,this.Gc(b.f,b.map));this.a&&this.ca(b)&&(b.type==Ag&&this.u?d=!0:this.K instanceof sb&&0<ub(this.K)&&(this.K.item(0).C()instanceof Tn||this.K.item(0).C()instanceof Zn)?d=!0:(this.a.C(),uo(this),d=Ao(this),U(this,new no("modifyend",this.K)),this.l=!1));b.type==Ag&&(this.u=!1);return mi.call(this,b)&&!d};function Go(b,d){fb.call(this,b);this.Ra=d}Q(Go,fb);function Ho(b){li.call(this,{qb:Io,Db:Jo,Pd:Ko,xb:Lo});this.b=void 0;this.a=null;this.K=void 0!==b.Ra?b.Ra:null;this.h=null}Q(Ho,li);function Io(b){this.h=this.i(b.f,b.map);return!this.a&&this.h?(this.a=b.b,Ko.call(this,b),U(this,new Go("translatestart",this.K)),!0):!1}function Lo(b){return this.a?(this.a=null,Ko.call(this,b),U(this,new Go("translateend",this.K)),!0):!1}
function Jo(b){if(this.a){b=b.b;var d=b[0]-this.a[0],e=b[1]-this.a[1];if(this.K)this.K.forEach(function(b){var g=b.C();g.Ya(d,e);Hk(b,g)});else if(this.h){var g=this.h.C();g.Ya(d,e);Hk(this.h,g)}this.a=b;U(this,new Go("translating",this.K))}}
function Ko(b){var d=vm(b.map);if(b=um(b.map,b.f,function(b){return b})){var e=!1;this.K&&0<=this.K.a.indexOf(b)&&(e=!0);this.b=d.style.cursor;d.style.cursor=this.a?"-webkit-grabbing":e?"-webkit-grab":"pointer";d.style.cursor=this.a?e?"grab":"pointer":"grabbing"}else d.style.cursor=void 0!==this.b?this.b:"",this.b=void 0}Ho.prototype.i=function(b,d){var e=null,g=um(d,b,function(b){return b});this.K&&0<=this.K.a.indexOf(g)&&(e=g);return e};function Mo(b){this.v=b;Ho.call(this,{});this.Ka=No;this.cb=Oo;this.ra=Po;this.b=null;this.K=this.v.O.pa();S(this,"translateend",Mo.prototype.j,this)}Q(Mo,Ho);Mo.prototype.j=function(b){var d=b.Ra.a;for(f in d)d[f].C()instanceof Rm&&Qo(d[f].C(),V(b.target.da()).ga(),V(b.target.da()).N()),0===d[f].state&&(d[f].state=1);this.v.i&&Vm(this.v)};
function No(b){if(!(b instanceof vg)||b.a instanceof MouseEvent&&"number"===typeof b.a.which&&3===b.a.which)return!1;this.h=this.i(b.f,b.map);return!this.a&&this.h?(this.a=b.b,Oo.call(this,b),U(this,new Go("translatestart",this.K)),!0):!1}
function Oo(b){if(b instanceof vg&&!(b.a instanceof MouseEvent&&"number"===typeof b.a.which&&3===b.a.which)){var d=vm(b.map),e=null;ho(b.f,b.map,this.v.Nb,this,function(b){e=b});e?(b=!1,this.K&&0<=this.K.a.indexOf(e)&&(b=!0),this.b="string"===typeof d.style.cursor?d.style.cursor:null,d.style.cursor=Wa()&&!te()?this.a?"-webkit-grabbing":b?"-webkit-grab":"pointer":this.a?"grabbing":b?"grab":"pointer"):(d.style.cursor=null!==this.b?this.b:"",this.b=null)}}
function Po(b){return!(b instanceof vg)||b.a instanceof MouseEvent&&"number"===typeof b.a.which&&3===b.a.which?!0:this.a?(this.a=null,Oo.call(this,b),U(this,new Go("translateend",this.K)),!0):!1}Mo.prototype.i=function(b,d){var e=null,g=null;ho(b,d,this.v.Nb,this,function(b){g=b});this.K&&0<=this.K.a.indexOf(g)&&(e=g);return e};Mo.prototype.W=function(){this.v=this.K=null};function Tn(b,d,e,g){Ud.call(this,[[[b,d],[b+e,d],[b+e,d-g],[b,d-g],[b,d]]],"XY")}Q(Tn,Ud);function Un(b){b=b.a;return fa(b)&&10==b.length?[b[0],b[1]]:null}function Wn(b){b=b.a;return fa(b)&&10==b.length?b[2]-b[0]:0}Tn.prototype.ac=function(b){Vn(this,null,null,b,null)};function Xn(b){b=b.a;return fa(b)&&10==b.length?Math.abs(b[5]-b[3]):0}
function Vn(b,d,e,g,k){var p=b.a;fa(p)&&10==p.length&&("number"!==typeof d&&(d=p[0]),"number"!==typeof e&&(e=p[1]),"number"!==typeof g&&(g=Wn(b)),"number"!==typeof k&&(k=Xn(b)),b.za([[[d,e],[d+g,e],[d+g,e-k],[d,e-k],[d,e]]]))}Tn.prototype.clone=function(){var b=Un(this);return new Tn(b[0],b[1],Wn(this),Xn(this))};
function Rm(b,d,e){e=e||null;if(null==e||"number"!==typeof e.width||"number"!==typeof e.height)e={width:10,height:10};Tn.call(this,b,d,e.width,e.height);this.i=function(){this.h=[];var b=this.a;for(c in b)this.h.push(b[c])};this.i()}Q(Rm,Tn);
function Qo(b,d,e){"number"!==typeof d&&(d=0);"number"!==typeof e&&(e=1);if(0!=d){var g=[];e=b.a;for(c in e)g.push(e[c]);var k=Wn(b),p=Xn(b);zd(b,function(b,d){d[0]=b[0];d[1]=b[1];d[2]=b[0]+k;d[3]=b[1];d[4]=b[0]+k;d[5]=b[1]-p;d[6]=b[0];d[7]=b[1]-p;d[8]=b[0];d[9]=b[1];return d})}b.i();0!=d&&zd(b,function(b,d){for(i in g)d[i]=g[i];return d})}
function Ro(b,d,e){if("number"===typeof d){var g=b.h;zd(b,function(b,d){for(i in g)d[i]=g[i];return d});var k=b.h[2]-b.h[0],p=Math.abs(b.h[5]-b.h[3]);"object"===typeof e&&null!==e&&"number"===typeof e.width&&"number"===typeof e.height&&(k=0<e.width?e.width:1,p=0<e.height?e.height:1);So(b,{width:k,height:p});0!==d&&b.rotate(d)}}
Rm.prototype.rotate=function(b){zd(this,function(d,e){for(var g=Math.cos(b),k=Math.sin(b),p=[d[0],d[1]],q=2,u=d.length;q<u;q+=2){var v=d[q],w=d[q+1];e[q]=g*(v-p[0])+k*(w-p[1])+p[0];e[q+1]=g*(w-p[1])-k*(v-p[0])+p[1]}return e})};function So(b,d){"object"===typeof d&&null!==d&&"number"===typeof d.width&&"number"===typeof d.height&&(0>d.width&&(d.width=1),0>d.height&&(d.height=1),zd(b,function(b,g){g[2]=g[0]+d.width;g[4]=g[0]+d.width;g[5]=g[1]-d.height;g[7]=g[1]-d.height;return g}))}
Rm.prototype.Ya=function(b,d){ud.prototype.Ya.call(this,b,d);this.i()};Rm.prototype.clone=function(){var b=Un(this);return new Rm(b[0],b[1],{width:Wn(this),height:Xn(this)})};function Zn(b,d,e,g,k,p){this.h=b;this.i=d;this.l=e;this.s=g;k={theta:k||0,step:p||.1};for(o in k){if("string"===typeof k[o])try{k[o]=parseInt(k[o])}catch(u){}"number"!==typeof k[o]&&("theta"===o&&(k[o]=0),"step"===o&&(k[o]=.1))}this.u=k.theta;this.la=k.step;k=[];p=0*Math.PI;for(var q=2*Math.PI;p<q;p+=this.la)x=b-g*Math.sin(p)*Math.sin(this.u*Math.PI)+e*Math.cos(p)*Math.cos(this.u*Math.PI),y=d+e*Math.cos(p)*Math.sin(this.u*Math.PI)+g*Math.sin(p)*Math.cos(this.u*Math.PI),k.push([x,y]);0<k.length&&
k.push(k[0]);Ud.call(this,[k])}Q(Zn,Ud);A=Zn.prototype;A.Oa=function(b){fa(b);this.h=b[0];this.i=b[1]};A.Ec=function(){return[this.l,this.s]};A.Zd=function(b){fa(b);this.l=b[0];this.s=b[1]};A.Ya=function(b,d){ud.prototype.Ya.call(this,b,d);this.Oa([this.h+b,this.i+d])};A.clone=function(){return new Zn(this.h,this.i,this.l,this.s,this.u,this.la)};function To(b){vn.call(this,b)}Q(To,vn);To.prototype.clone=function(){return new To(this.ua().slice())};function jo(b,d){Gk.call(this);this.K=this.wc=null;this.visible=!0;"undefined"!==typeof b&&"undefined"!==typeof d&&Uo(this,b,d,!0)}Q(jo,Gk);
function Uo(b,d,e,g){b.wc=d;b.K=e;if("boolean"===typeof g&&g)for(f in b.K)b.K[f].cluster=b;d=new rn(lc(b.wc),10);d.Ya=function(b,d){ud.prototype.Ya.call(this,b,d);for(f in e)e[f].C().Ya(b,d);this.A()};Hk(b,d);d=new vj({fill:new oj({color:"rgba(255,255,0,0.25)"}),stroke:new tj({color:"rgba(255,255,0, 1)"}),text:new Sn({font:"normal 12px arial",stroke:new tj({color:"rgba(255,255,0, 1)"}),text:""+b.K.length})});Jk(b,d)};function Vo(b){b=b?b:{};this.b=void 0!==b.collapsed?b.collapsed:!0;this.h=void 0!==b.Bd?b.Bd:!0;this.h||(this.b=!1);var d=void 0!==b.className?b.className:"ol-overviewmap",e=void 0!==b.dc?b.dc:"Overview map",g=void 0!==b.$c?b.$c:"\u00ab";this.i="string"===typeof g?Ue("SPAN",{},g):g;g=void 0!==b.label?b.label:"\u00bb";this.j="string"===typeof g?Ue("SPAN",{},g):g;e=Ue("BUTTON",{type:"button",title:e},this.h&&!this.b?this.i:this.j);S(e,"click",this.M,this);g=document.createElement("DIV");g.className=
"ol-overviewmap-map";var k=this.va=new qm({controls:new sb,Ub:new sb,target:g,view:b.view});b.Fb&&b.Fb.forEach(function(b){sm(k,b)},this);var p=document.createElement("DIV");p.className="ol-overviewmap-box";p.style.boxSizing="border-box";this.a=new $n({position:[0,0],$e:"bottom-left",element:p});this.va.h.push(this.a);d=Ue("DIV",d+" ol-unselectable ol-control"+(this.b&&this.h?" ol-collapsed":"")+(this.h?"":" ol-uncollapsible"),g,e);Jh.call(this,{element:d,P:b.P?b.P:Wo,target:b.target})}Q(Vo,Jh);
Vo.prototype.ja=function(b){var d=this.da();b!==d&&(d&&(d=V(d))&&Xo(this,d),Vo.xa.ja.call(this,b),b&&(this.g.push(S(b,"propertychange",this.w,this)),0===ub(wm(this.va))&&(d=tm(b),this.va.set("layergroup",d)),b=V(b)))&&(Yo(this,b),ce(b)&&(this.va.sc(),Zo(this)))};Vo.prototype.w=function(b){"view"===b.a&&((b=b.f)&&Xo(this,b),b=V(this.da()),Yo(this,b))};function Yo(b,d){S(d,qb("rotation"),b.B,b)}function Xo(b,d){Ha(d,qb("rotation"),b.B,b)}Vo.prototype.B=function(){V(this.va).Kb(V(this.da()).ga())};
function Wo(){$o(this);ap(this)}function $o(b){var d=b.da(),e=b.va;if(d.b&&e.b){var g=xi(d),d=ae(V(d),g),k=xi(e),g=ae(V(e),k),p=si(e,gc(d)),q=si(e,[d[2],d[1]]),e=Math.abs(p[0]-q[0]),p=Math.abs(p[1]-q[1]),q=k[0],k=k[1];e<.1*q||p<.1*k||e>.75*q||p>.75*k?Zo(b):Yb(g,d)||(d=b.da(),b=b.va,d=V(d),V(b).Oa($d(d)))}}
function Zo(b){var d=b.da();b=b.va;var e=xi(d),e=ae(V(d),e),d=xi(b);b=V(b);pc(e,1/(.1*Math.pow(2,Math.log(7.5)/Math.LN2/2)));var g=e;if(!(g instanceof ud)){var e=g[0],k=g[1],p=g[2],q=g[3],e=[e,k,e,q,p,q,p,k,e,k],k=new Ud(null);Vd(k,"XY",e,[e.length]);g=k}var k={},e=void 0!==k.padding?k.padding:[0,0,0,0],u=void 0!==k.kb?k.kb:!0,p=void 0!==k.Yg?k.Yg:!1,v;void 0!==k.yb?v=k.yb:void 0!==k.Hb?v=b.kb(b.h,k.Hb-b.i,0):v=0;for(var w=g.a,q=b.ga(),k=Math.cos(-q),q=Math.sin(-q),z=Infinity,B=Infinity,C=-Infinity,
D=-Infinity,g=g.D,F=0,I=w.length;F<I;F+=g)var J=w[F]*k-w[F+1]*q,M=w[F]*q+w[F+1]*k,z=Math.min(z,J),B=Math.min(B,M),C=Math.max(C,J),D=Math.max(D,M);d=be([z,B,C,D],[d[0]-e[1]-e[3],d[1]-e[0]-e[2]]);d=isNaN(d)?v:Math.max(d,v);u&&(v=b.kb(d,0,0),!p&&v<d&&(v=b.kb(v,-1,0)),d=v);ee(b,d);q=-q;v=(z+C)/2+(e[1]-e[3])/2*d;d=(B+D)/2+(e[0]-e[2])/2*d;b.Oa([v*k-d*q,d*k+v*q])}
function ap(b){var d=b.da(),e=b.va;if(d.b&&e.b){var g=xi(d),k=V(d),p=V(e);xi(e);var e=k.ga(),d=b.a,q=bo(b.a),k=ae(k,g),g=p.N(),p=fc(k),k=[k[2],k[3]],u;if(b=$d(V(b.da())))u=[p[0]-b[0],p[1]-b[1]],Qb(u,e),Nb(u,b);ao(d,u);q&&(q.style.width=Math.abs((p[0]-k[0])/g)+"px",q.style.height=Math.abs((k[1]-p[1])/g)+"px")}}Vo.prototype.M=function(b){b.preventDefault();bp(this)};
function bp(b){b.element.classList.toggle("ol-collapsed");b.b?af(b.i,b.j):af(b.j,b.i);b.b=!b.b;var d=b.va;b.b||d.b||(d.sc(),Zo(b),Ga(d,"postrender",function(){ap(this)},b))};function kn(b){"object"!==typeof b&&(b={});b.P=cp.bind(this);Vo.call(this,b);this.mc=this.u=null;this.va.ib(new li({qb:function(b){if(!(b instanceof vg)||dp(this,b.f))return!1;var e=ep(this),e=[b.f[0]-e[0]/2,b.f[1]+e[1]/2];this.u=!0;ao(this.a,this.va.Ea(e));V(this.da()).Oa(this.va.Ea(b.f));return!1}.bind(this),Pd:function(b){if(b instanceof vg&&b.a instanceof MouseEvent&&0!==b.a.buttons&&(dp(this,b.f)||null!==this.mc)){this.mc=b.f;var e=ep(this);ao(this.a,this.va.Ea([b.f[0]-e[0]/2,b.f[1]+e[1]/2]))}}.bind(this)}));
this.l=S(this.va.get("target"),"mouseup",function(){if(null!==this.mc){var b=this.va.Ea(this.mc);V(this.da()).Oa(b);this.mc=null}},this)}Q(kn,Vo);kn.prototype.ja=function(b){var d=this.da();b!==d&&(d&&(d=V(d))&&Xo(this,d),Jh.prototype.ja.call(this,b),b&&(V(this.va).a=V(b).a,this.g.push(S(b,"propertychange",this.w,this)),0===ub(wm(this.va))&&wm(b).forEach(function(b){b instanceof Yc&&sm(this.va,b)}.bind(this)),b=V(b)))&&(Yo(this,b),ce(b)&&(this.va.sc(),Zo(this)))};
function cp(){null!==this.mc||this.u?this.u=!1:($o(this),ap(this))}function ep(b){return[Af(bo(b.a)),Bf(bo(b.a))]}function dp(b,d){var e=si(b.va,b.a.get("position")),g=ep(b);return Zb([e[0],e[1]-g[1],e[0]+g[0],e[1]],d[0],d[1])}kn.prototype.W=function(){"undefined"!==typeof this.l&&this.l&&Ba(this.l);kn.xa.W.call(this);this.va&&this.va.oa()};function fp(b,d,e,g,k,p,q,u,v,w,z){Jg.call(this,k,0);this.G=void 0!==z?z:!1;this.B=q;this.w=u;this.h=null;this.b={};this.i=d;this.l=g;this.s=p?p:k;this.f=[];this.qc=null;this.j=0;p=Tg(g,this.s);u=this.l.I();k=this.i.I();p=u?nc(p,u):p;if(0===hc(p))this.state=4;else if((u=b.I())&&(k?k=nc(k,u):k=u),g=g.N(this.s[0]),g=rk(b,e,lc(p),g),!isFinite(g)||0>=g)this.state=4;else if(this.u=new uk(b,e,p,k,g*(void 0!==w?w:.5)),0===this.u.g.length)this.state=4;else if(this.j=$g(d,g),e=wk(this.u),k&&(b.hc?(e[1]=Kb(e[1],
k[1],k[3]),e[3]=Kb(e[3],k[1],k[3])):e=nc(e,k)),hc(e))if(b=Ug(d,e,this.j),100>(b.f-b.a+1)*(b.g-b.b+1)){for(d=b.a;d<=b.f;d++)for(e=b.b;e<=b.g;e++)(w=v(this.j,d,e,q))&&this.f.push(w);0===this.f.length&&(this.state=4)}else this.state=3;else this.state=4}Q(fp,Jg);fp.prototype.W=function(){1==this.state&&(this.qc.forEach(Ba),this.qc=null);fp.xa.W.call(this)};fp.prototype.rb=function(b){if(void 0!==b){var d=L(b);if(d in this.b)return this.b[d];b=ya(this.b)?this.h:this.h.cloneNode(!1);return this.b[d]=b}return this.h};
fp.prototype.Oc=function(){var b=[];this.f.forEach(function(d){d&&2==d.Z()&&b.push({F:Tg(this.i,d.qa),Sa:d.rb()})},this);this.f.length=0;if(0===b.length)this.state=3;else{var d=this.s[0],e=Zg(this.l,d),g=ia(e)?e:e[0],e=ia(e)?e:e[1],d=this.l.N(d),k=this.i.N(this.j),p=Tg(this.l,this.s);this.h=tk(g,e,this.B,k,this.i.I(),d,p,this.u,b,this.w,this.G);this.state=2}this.A()};
fp.prototype.load=function(){if(0==this.state){this.state=1;this.A();var b=0;this.qc=[];this.f.forEach(function(d){var e=d.Z();if(0==e||1==e){b++;var g;g=S(d,"change",function(){var e=d.Z();if(2==e||3==e||4==e)Ba(g),b--,0===b&&(this.qc.forEach(Ba),this.qc=null,this.Oc())},this);this.qc.push(g)}},this);this.f.forEach(function(b){0==b.Z()&&b.load()});0===b&&H.setTimeout(this.Oc.bind(this),0)}};function gp(b){jl.call(this,{Aa:b.Aa,Yc:b.Yc,F:b.F,Ga:b.Ga,Lc:b.Lc,ba:b.ba,state:b.state,Da:b.Da,rc:b.rc?b.rc:hp,Tc:b.Tc,Mb:b.Mb,url:b.url,tc:b.tc,Pa:b.Pa});this.crossOrigin=void 0!==b.crossOrigin?b.crossOrigin:null;this.Sc=void 0!==b.Sc?b.Sc:on;this.b={};this.h={};this.G=b.Ri}Q(gp,jl);A=gp.prototype;A.Ue=function(){if(Ng(this.a))return!0;for(var b in this.b)if(Ng(this.b[b]))return!0;return!1};
A.Ve=function(b,d){var e=this.Fc(b);Og(this.a,this.a==e?d:{});for(var g in this.b){var k=this.b[g];Og(k,k==e?d:{})}};A.cd=function(){return 0};A.Nd=function(b){return this.l&&b&&!Ic(this.l,b)?!1:gp.xa.Nd.call(this,b)};A.pb=function(b){var d=this.l;return!this.Da||d&&!Ic(d,b)?(d=L(b).toString(),d in this.h||(this.h[d]=bh(b)),this.h[d]):this.Da};A.Fc=function(b){var d=this.l;if(!d||Ic(d,b))return this.a;b=L(b).toString();b in this.b||(this.b[b]=new Mg);return this.b[b]};
A.Hd=function(b,d,e,g,k,p){b=[b,d,e];g=(d=gh(this,b,k))?this.Mb(d,g,k):void 0;g=new this.Sc(b,void 0!==g?0:4,void 0!==g?g:"",this.crossOrigin,this.rc);g.g=p;S(g,"change",this.j,this);return g};function uh(b,d,e,g,k,p){if(b.l&&p&&!Ic(b.l,p)){k=b.Fc(p);e=[d,e,g];d=b.dd.apply(b,e);if(Lg(k,d))return k.get(d);var q=b.l;g=b.pb(q);var u=b.pb(p),v=gh(b,e,p);b=new fp(q,g,p,u,e,v,b.i,0,function(b,d,e,g){return ip(this,b,d,e,g,q)}.bind(b),b.G,!1);k.set(d,b);return b}return ip(b,d,e,g,k,p)}
function ip(b,d,e,g,k,p){var q=null,u=b.dd(d,e,g);if(Lg(b.a,u)){if(q=b.a.get(u),""!=q.g){var v=q;q.a&&""==q.a.g?(q=q.a,2==v.Z()&&(q.a=v)):(q=b.Hd(d,e,g,k,p,""),2==v.Z()?q.a=v:v.a&&2==v.a.Z()&&(q.a=v.a,v.a=null));q.a&&(q.a.a=null);b.a.replace(u,q)}}else q=b.Hd(d,e,g,k,p,""),b.a.set(u,q);return q}function hp(b,d){b.rb().src=d};function zm(b){b=b||{};this.ya=b.Sa||-1;this.u=b.width||-1;this.s=b.height||-1;this.Ud=b.uh||0;this.de=b.time||0;this.jb=[];this.uc=[];if(fa(b.Ad))for(var d in b.Ad){var e=b.Ad[d];this.jb.push(e);!0===e.active&&this.uc.push(parseInt(d))}this.Va=b.Lh;this.ei=xm.te(b.uri);this.Vd=null;d=b.Yh||{width:256,height:256};e=[0,-this.s,this.u,0];d=new Pg({ce:[d.width,d.height],F:e,origin:gc(e),Bb:b.Bb||[1]});gp.call(this,{crossOrigin:b.crossOrigin,Sc:qn,Da:d,Mb:function(b){if(b){var d=this.Da.Zb.length-b[0]-
1,e=this.Va.full+"/"+this.ei.full+"/"+this.ya+"/"+this.Ud+"/"+this.de+"/?",e=1<this.Da.Zb.length?e+("tile="+d+","+b[1]+","+(-b[2]-1)):e+("region="+b[1]*this.Da.cc[0]+","+(-b[2]-1)*this.Da.cc[1]),e=e+(","+this.Da.cc[0]+","+this.Da.cc[1]);b=this.uc.length;if(0<b)for(var e=e+"&c=",q=d=0;q<b;q++){var u=this.uc[q];if("object"===typeof this.jb[u]){var v=this.jb[u];0!=d&&(e+=",");e+=u+1;e+="|"+v.start+":"+v.end;e+="$"+v.color;d++}}else{b="&c=";for(d=0;d<this.jb.length;d++)0!==d&&(b+=","),b+="-"+(d+1);e+=
b}return e+"&q=0.9"}}})}Q(zm,gp);A=zm.prototype;A.Hd=function(b,d,e,g,k,p){b=[b,d,e];g=(d=gh(this,b,k))?this.Mb(d,g,k):void 0;g=new this.Sc(b,void 0!==g?0:4,void 0!==g?g:"",this.crossOrigin,this.rc);g.g=p;g.source=this;S(g,"change",this.j,this);return g};A.mh=function(){return this.u};A.kh=function(){return this.s};A.Sf=function(){return this.Ud};A.Oh=function(b){this.Ud=b};A.lh=function(){return this.de};A.nh=function(b){this.de=b};A.Qf=function(){return this.uc};
A.Mh=function(b){for(c in b);this.uc=b};function Pm(b){b.a instanceof Kg&&b.a.clear();b.A()}A.W=function(){this.a instanceof Kg&&this.a.clear();this.jb=[]};zm.prototype.getWidth=zm.prototype.mh;zm.prototype.getHeight=zm.prototype.kh;zm.prototype.getPlane=zm.prototype.Sf;zm.prototype.setPlane=zm.prototype.Oh;zm.prototype.getTime=zm.prototype.lh;zm.prototype.setTime=zm.prototype.nh;zm.prototype.getChannels=zm.prototype.Qf;zm.prototype.setChannels=zm.prototype.Mh;function jp(b,d,e,g,k,p,q){Ig.call(this,b,d,e,0,g);this.j=k;this.a=new Image;null!==p&&(this.a.crossOrigin=p);this.g={};this.b=null;this.state=0;this.i=q}Q(jp,Ig);jp.prototype.f=function(b){if(void 0!==b){var d;b=L(b);if(b in this.g)return this.g[b];ya(this.g)?d=this.a:d=this.a.cloneNode(!1);return this.g[b]=d}return this.a};jp.prototype.s=function(){this.state=3;this.b.forEach(Ba);this.b=null;this.A()};
jp.prototype.u=function(){void 0===this.J&&(this.J=kc(this.F)/this.a.height);this.state=2;this.b.forEach(Ba);this.b=null;this.A()};jp.prototype.load=function(){0==this.state&&(this.state=1,this.A(),this.b=[Ga(this.a,"error",this.s,this),Ga(this.a,"load",this.u,this)],this.i(this,this.j))};function kp(b){var d=b.tg,e=void 0!==b.crossOrigin?b.crossOrigin:null,g=void 0!==b.ug?b.ug:Fk;yk.call(this,{Aa:b.Aa,Ga:b.Ga,ba:xc(b.ba)});this.b=new jp(d,void 0,1,this.nb(),b.url,e,g);this.h=b.vg?b.vg:null;S(this.b,"change",this.g,this)}Q(kp,yk);function Ak(b,d){return oc(d,b.b.I())?b.b:null}
kp.prototype.g=function(b){if(2==this.b.Z()){var d=this.b.I(),e=this.b.f(),g,k;this.h?(g=this.h[0],k=this.h[1]):(g=e.width,k=e.height);d=Math.ceil(jc(d)/(kc(d)/k));if(d!=g){var p=document.createElement("canvas");p.width=d;p.height=k;p.getContext("2d").drawImage(e,0,0,g,k,0,0,p.width,p.height);this.b.a=p}}kp.xa.g.call(this,b)};function Em(b,d){var e=d||{};e.sd=!0;var g=null;fa(e.features)&&(g=d.features,e.features=null,e.Ra=null);Uk.call(this,e);this.od=!0;"boolean"===typeof e.scaleText&&(this.od=e.scaleText);this.Jb=!1;"boolean"===typeof e.rotateText&&(this.Jb=e.rotateText);this.i=!0;this.Nb=!1;this.b=this.B=null;this.G=0;this.Ba=null;this.o=b;this.lb=this.Wb=this.ec=this.O=null;this.s=[];this.La=function(b){xm.Pc({server:b.o.Va,uri:"/webgateway/get_rois_json/"+b.o.Fa(),jsonp:!0,success:function(d){if("string"===typeof d)try{d=
JSON.parse(d)}catch(e){console.error("Failed to parse json response!")}"object"!==typeof d?console.error("Regions Request did not receive proper response!"):(b.Ba=d,d=Om(b),fa(d)&&0<d.length&&b.Cb(d))},error:function(d){console.error("Error retrieving regions info for id: "+b.o.Fa()+(d&&0<d.length?"\\n"+d:""))}})};if(g){for(s in g){var e=g[s],k=V(this.o.o).ga();V(this.o.o).N();e.C()instanceof Rm&&0!==k&&!this.Jb&&e.C().rotate(-k);Sm(e,this)}this.Cb(g)}this.La(this)}Q(Em,Uk);
function Fm(b,d){if(fa(d)){var e=!1,g=!1,k=!1,p=!1,q=!1,u=b.s.slice();b.s=[];for(m in d)if(!("number"!==typeof d[m]||0>d[m]||4<d[m])){if(d[m]===Gm.DEFAULT){e=!0;g=k=p=q=!1;break}d[m]===Gm.SELECT?(g=!0,q=!1):d[m]===Gm.TRANSLATE?(k=g=!0,q=!1):d[m]===Gm.MODIFY?(p=g=!0,q=!1):d[m]===Gm.DRAW&&(p=k=g=!1,q=!0)}var v=function(){this.Wb&&(this.o.o.Ta.remove(this.Wb),this.Wb.oa(),this.Wb=null);this.ec&&(this.o.o.Ta.remove(this.ec),this.ec.oa(),vm(this.o.o).style.cursor="",this.ec=null);this.O&&(this.o.ld("boxSelect"),
this.O.pa().forEach(function(b){b instanceof Gk&&(b.selected=!1)},this),this.O.pa().clear(),this.o.o.Ta.remove(this.O),this.O.oa(),this.A(),this.O=null)},w=function(){this.lb&&(this.lb.oa(),this.lb=null)},z=function(){null===this.O&&(this.O=new Zm(this),this.o.o.ib(this.O),this.o.ib("boxSelect",new mn(this)))};e?(w.call(b),v.call(b),b.s.push(0)):q?(v.call(b),null===b.lb&&(b.lb=new an(u,b)),b.s.push($m)):(p&&(w.call(b),z.call(b),null===b.Wb&&(b.Wb=new Co({Ra:b.O.pa()}),b.o.o.ib(b.Wb)),b.s.push(3)),
k&&(w.call(b),z.call(b),null===b.ec&&(b.ec=new Mo(b),b.o.o.ib(b.ec)),b.s.push(2)),g&&(w.call(b),z.call(b),b.s.push(1)))}}function Vm(b){setTimeout(function(){lp(this)}.bind(b),0)}function lp(b){if(b.i&&(b.b=mp(b.a),fa(b.b)&&0!==b.b.length)){for(l in b.b)b.b[l].forEach(function(b){b instanceof jo&&(Sm(b,this),b.group_selected=!1)},b);b.A()}}A=Em.prototype;A.Cb=function(b){this.i?(Vk(this,b),lp(this)):Uk.prototype.Cb.call(this,b)};
A.vc=function(b){this.i?(Xk(this,b),Vm(this)):Uk.prototype.vc.call(this,b)};A.Yb=function(b){if(this.i){var d=L(b).toString();d in this.h?delete this.h[d]:this.a&&this.a.remove(b);this.kd(b);Vm(this)}else Uk.prototype.Yb.call(this,b)};A.clear=function(){if(fa(this.b)){for(l in this.b)this.b[l]instanceof Pk&&this.b[l].clear();delete this.b[l]}Uk.prototype.clear.call(this,!0);this.w={};this.g={};this.u={};this.j=null;this.Nb=!1;this.b=this.B=null;this.G=0};
A.Rb=function(b,d,e){if("undefined"===typeof e||null===e)e=this;var g=np(this),k=null!==this.B&&this.B!==g&&this.B&&!g;this.B=g;var p=0;if(g)for(var q=0;q<this.b.length;q++)if(!np(this,null,q)){p=q;break}q=this.G!=p;this.G=p;if(this.O)for(var u=this.O.pa().a,v=u.length-1;0<=v;){var w=u[v];(q||k)&&w instanceof jo&&(w.selected=!1,wb(this.O.pa(),v));w instanceof jo||!g||!w.C().fb(b)||d.call(e,w);v--}return g&&fa(this.b)&&0!==this.b.length?Tk(this.b[p],b,function(p){k&&p instanceof jo&&(p.selected=!1);
if(p instanceof jo&&(!g||p.selected)&&oc(b,p.wc))for(f in g&&p.visible&&d.call(e,p),p.K){var q=!0;"boolean"!==typeof p.visible||p.visible||(q=!1);var u=p.K[f].C();q&&u&&u.fb(b)&&d.call(e,p.K[f])}else p.C()&&("boolean"!==typeof p.visible||"boolean"===typeof p.visible&&p.visible)&&p.C().fb(b)&&d.call(e,p)},e):Tk(this.a,b,function(b){("boolean"!==typeof b.visible||b.visible)&&d.call(e,b)},e)};
A.pa=function(){if(!this.i||!fa(this.b)||0===this.b.length)return this.a.getAll();var b=this.G;if(0>b||b>=this.b.length)b=0;return this.b[b].getAll()};function np(b,d,e){if(!b.i)return b.Nb=!1;var g=!1;fa(d)&&4===d.length||(d=Tm(b.o));var k=e="number"===typeof e?e:-1;d=fa(b.b)&&0<=k&&k<b.b.length?b.b[k].Ua.search(d):b.a&&b.a.Ua?b.a.Ua.search(d):null;fa(d)&&d.length>nn&&V(b.o.o).N()!==V(b.o.o).j&&(g=!0);-1===e&&(b.Nb=g);return g}
function Ym(b,d){var e=op();if(""!==e){var g={nextRoiId:"",nextShapeId:"",storedCount:0},k=b.o.ya,p=function(b){var e=0,g={};for(r in d.rois)if(""===b.nextRoiId||r===b.nextRoiId){b.nextRoiId="";if(250<=e){b.nextRoiId=r;b.nextShapeId=s;break}for(s in d.rois[r].shapes)if(""===b.nextShapeId||s===b.nextShapeId){b.nextShapeId="";if(250<=e){b.nextRoiId=r;b.nextShapeId=s;break}"object"!==typeof g[r]&&(g[r]={"@id":parseInt(r),"@type":"http://www.openmicroscopy.org/Schemas/ROI/2015-01#ROI",shapes:[]});g[r].shapes.push(d.rois[r].shapes[s]);
++e}}250>e&&(b.nextRoiId="",b.nextShapeId="");if(0===e)return"";try{return b={imageId:k,count:e},b.rois=g,JSON.stringify(b)}catch(p){return null}},q=p(g),u={server:b.o.Va,uri:"/ome-ol3-viewer/postrois",method:"POST",content:q,headers:{"X-CSRFToken":e},jsonp:!1,error:function(b){console.error("Failed to store regions: "+(b&&0<b.length?"\\n"+b:""))},success:function(e){"string"!==typeof e&&console.error("Did not receive any data after regions post");try{e=JSON.parse(e)}catch(k){console.error("Failed to parse json response for regions storage!")}if("string"===
typeof e.error)console.error("Failed to store rois: "+e.error);else if("object"===typeof e.ids){for(id in e.ids)try{b.g[id].state=0;var q=b.g[id];q.ya=e.ids[id];q.A();g.storedCount++}catch(k){}if(""!==g.nextRoiId&&""!==g.nextShapeId){u.content=p(g);if(null===u.content){console.error("Failed to construct json for rois request!");return}if(""===u.content)return;xm.Pc(u,this)}g.storedCount!==d.count&&console.error("Not all added/modified rois were stored: "+g.storedCount+"/"+d.count)}else console.error("Received unexpected data after regions post")}};
null===q?console.error("Failed to construct json for rois request!"):""!==q&&xm.Pc(u,b)}}A.W=function(){this.clear();this.o=this.Ba=this.h=this.M=this.a=null};function Sn(b){b=b||{};this.mb=b.font;this.j=b.rotation;this.g=b.scale;this.l=b.text;this.h=b.textAlign;this.i=b.textBaseline;this.a=void 0!==b.fill?b.fill:new oj({color:"#333"});this.Ja=void 0!==b.stroke?b.stroke:null;this.f=void 0!==b.offsetX?b.offsetX:0;this.b=void 0!==b.offsetY?b.offsetY:0}A=Sn.prototype;A.ga=function(){return this.j};A.S=function(){return this.Ja};A.H=function(){return this.l};A.Kb=function(b){this.j=b};A.qd=function(b){this.g=b};function pp(b,d){if("object"!=typeof b)return null;var e="boolean"===typeof d?d:!1,g={count:0},k={count:0};"string"===typeof b.fillColor&&(k.color=qp(b.fillColor,b.fillAlpha),k.color=rp(k.color),null!=k.color&&k.count++);"string"===typeof b.strokeColor&&(g.color=qp(b.strokeColor,b.strokeAlpha),g.color=rp(g.color),null!=g.color&&g.count++);"number"===typeof b.strokeWidth?(g.width=b.strokeWidth,g.count++):g.width=1;0<g.count&&(g.lineCap="butt",g.lineJoin="miter",g.miterLimit=20);var p=0<g.count?new tj(g):
null,k=0<k.count?new oj(k):null,q={};if("string"===typeof b.textValue){var u={text:b.textValue},v="",v="string"===typeof b.fontStyle?v+(b.fontStyle+" "):v+"normal ",v="number"===typeof b.fontSize?v+(b.fontSize+"px "):v+"10px ";"string"===typeof b.fontFamily?v+=b.fontFamily:v+="sans-serif";u.font=v;p&&(g.lineCap="round",g.lineJoin="round",u.fill=new oj(g),u.stroke=new tj(g),e||u.stroke.ac(1));q.text=new Sn(u)}p&&(q.stroke=p);k&&(q.fill=k);e&&(q.stroke=new tj({color:"rgba(255,255,255,0)",width:1,lineCap:"butt",
lineJoin:"miter",miterLimit:20}),q.fill=new oj({color:"rgba(255,255,255,0)"}));return new vj(q)}
function Sm(b,d){var e=!0,g=b.a;if(null!=g){var k=V(d.o.o);"function"===typeof g&&(g=g.call(b,k.N()));b.regions=d;var p=g.S();"object"!==typeof b.oldStrokeStyle&&(b.oldStrokeStyle=p?{color:p.h,width:p.i,lineDash:p.j,lineCap:p.a,lineJoin:p.f,miterLimit:p.b}:null);b.C()instanceof Rm&&("undefined"===typeof b.oldRotation&&(b.oldRotation=k.ga()),"undefined"===typeof b.oldScale&&(b.oldScale=k.N()),"undefined"===typeof b.oldRotationFlag&&(b.oldRotationFlag=d.Jb),"undefined"===typeof b.oldScaleFlag&&(b.oldScaleFlag=
d.od));b instanceof jo&&(b.oldRadius=b.C().Ec());Jk(b,function(d){if(!(this.regions instanceof Em))return g;var p=this.regions,v=p.od,p=p.Jb,w=k.ga();b instanceof jo&&b.C().Zd(b.oldRadius*d);var z=g.H();!z||b instanceof jo||(v?z.qd(1/d):z.qd(1),p?z.Kb(w):z.Kb(0),e=e||!1,b.C()instanceof Rm&&(e||b.oldRotation!==w||b.oldScale!==d||b.oldRotationFlag!==p||b.oldScaleFlag!==v)&&(b.oldRotation!==w&&(b.oldRotation=w),b.oldScale!==d&&(b.oldScale=d),b.oldRotationFlag!==p&&(b.oldRotationFlag=p),b.oldScaleFlag!==
v&&(b.oldScaleFlag=v),e&&(e=!1),d=Yn(z.H(),z.mb,v?null:d),v=p?0:0-w,Ro(b.C(),v,d)));typeof("boolean"===b.selected)&&b.selected?(d=new tj,d.Qc("rgba(255,255,255,1)"),d.ac(3),d.setLineDash([.1,5]),g.Ja=d):b.oldStrokeStyle?(g.S().Qc(b.oldStrokeStyle.color),g.S().ac(b.oldStrokeStyle.width),g.S().setLineDash(b.oldStrokeStyle.lineDash),d=g.S(),d.a=b.oldStrokeStyle.lineCap,d.g=void 0,d=g.S(),d.f=b.oldStrokeStyle.lineJoin,d.g=void 0,d=g.S(),d.b=b.oldStrokeStyle.miterLimit,d.g=void 0):g.Ja=null;return g})}}
function Yn(b,d,e){if("string"!==typeof b||"string"!==typeof d)return null;var g=10;e="number"===typeof e&&0<e?e:1;var k=d.split(" ");if(3!=k.length)return null;try{g=parseInt(k[1]),g*=e,g=Math.ceil(g),d=k[0]+" "+g+"px "+k[2]}catch(p){}e=document.createElement("canvas").getContext("2d");e.font=d;b=e.measureText(b);return{width:0<b.width?b.width:5,height:g}}
function sp(b){if(!(b instanceof vj))return null;var d=null,e=null;b.f&&(e=new oj({color:b.f.a}));var g=tp(b.S()),k=null;b.H()&&(k=new Sn({font:b.H().mb?b.H().mb:null,text:b.H().H()?b.H().H():null,stroke:tp(b.H().S()),fill:b.H().a?new oj({color:b.H().a.a}):null}));if(null!==e||null!==g||null!==k)d=new vj({fill:e,stroke:g,text:k});return d}
function tp(b){return b instanceof tj?new tj({color:b.h?b.h:null,lineCap:b.a?b.a:"butt",lineDash:b.j?b.j:null,lineJoin:b.f?b.f:"miter",miterLimit:b.b?b.b:20,width:b.i?b.i:1}):null}
function Wm(b,d){var e;if(d instanceof Em&&"object"===typeof b&&"string"===typeof b.type){if(!(e instanceof sb)){if(null===d.O)return;e=d.O.pa()}var g=b.type.toLowerCase(),k=pp(b,"label"===g);null!==k&&e.forEach(function(b){if(b instanceof Gk&&!(b instanceof jo)&&b.type===g){var e=b.a;"function"===typeof e&&(e=e(V(d.o.o).N()));if(k){var u=k.f?k.f:e.f,v=null;if("object"===typeof b.oldStrokeStyle&&null!==b.oldStrokeStyle){v=new tj;v.Qc(b.oldStrokeStyle.color);v.ac(b.oldStrokeStyle.width);v.setLineDash(b.oldStrokeStyle.lineDash);
var w=v;w.a=b.oldStrokeStyle.lineCap;w.g=void 0;w=v;w.f=b.oldStrokeStyle.lineJoin;w.g=void 0;w=v;w.b=b.oldStrokeStyle.miterLimit;w.g=void 0}k.S()&&(null===v&&(v=new tj),k.S().h&&v.Qc(k.S().h),k.S().a&&(w=v,w.a=k.S().a,w.g=void 0),k.S().j&&v.setLineDash(k.S().j),k.S().f&&(w=v,w.f=k.S().f,w.g=void 0),k.S().b&&(w=v,w.b=k.S().b,w.g=void 0),k.S().i&&v.ac(k.S().i));e=e.H();null===e?e=k.H():k.H()&&(k.H().mb&&(e.mb=k.H().mb),k.H().f&&(e.f=k.H().f),k.H().b&&(e.b=k.H().b),k.H().a&&(e.a=k.H().a),k.H().ga()&&
e.Kb(k.H().ga()),k.H().g&&e.qd(k.H().g),k.H().S()&&(e.Ja=k.H().S()),k.H().H()&&(e.l=k.H().H()),k.H().h&&(e.h=k.H().h),k.H().i&&(e.i=k.H().i));u=new vj({fill:u,stroke:v,text:e});delete b.oldStrokeStyle;Jk(b,u);Sm(b,d);0===b.state&&(b.state=1)}}})}}function up(b){"object"===typeof b&&"string"!==typeof b.fillColor&&"string"!==typeof b.strokeColor&&(b.strokeColor="#FFFFFF","number"!==typeof b.strokeAlpha&&(b.strokeAlpha=1),"number"!==typeof b.strokeWidth&&(b.strokeWidth=1))};var vp={};function wp(b,d){if("string"!==typeof b||0===b.length)return null;"number"!==typeof d&&(d=1);try{var e=b.replace(/\(rgba|\(|rgba|rgb|\)/g,"").split(",");if(3>e.length)return null;var g={red:255,green:255,blue:255,alpha:d};g.red=parseInt(e[0],10);g.green=parseInt(e[1],10);g.blue=parseInt(e[2],10);3<e.length&&(g.alpha=parseFloat(e[3],10))}catch(k){return null}return g}
function qp(b,d){if("string"!==typeof b||0===b.length)return null;"number"!==typeof d&&(d=1);try{var e=b.replace(/#|\s/g,"");if(6!=e.length)return null;var g={red:255,green:255,blue:255,alpha:d};g.red=parseInt(e.substring(0,2),16);g.green=parseInt(e.substring(2,4),16);g.blue=parseInt(e.substring(4,6),16);return g}catch(k){return null}}
function rp(b){b=xp(b);if(null==b)return null;var d;d="rgba("+(b.red.toString(10)+",");d+=b.green.toString(10)+",";d+=b.blue.toString(10)+",";d+=b.alpha.toString(10);return d+")"}function xp(b){if("object"!==typeof b)return null;var d=["red","green","blue"];for(n in d){if("undefined"===typeof b[d[n]])return null;var e=b[d[n]];if(0>e||255<e)return null}"undefined"===typeof b.alpha&&(b.alpha=1);return b}
function yp(b){var d;if("number"!==typeof d)try{d=parseInt(d)}catch(k){d=1}"string"==typeof b&&(b=-1!=b.indexOf("rgba")?wp(b,d):qp(b,d));if("object"!==typeof b||"object"!==typeof(b=xp(b)))return null;d=255*b.alpha;d=("00"+(.5>=d-parseInt(d)?Math.floor(d):Math.ceil(d)).toString(16)).substr(-2);var e=("00"+b.red.toString(16)).substr(-2),g=("00"+b.green.toString(16)).substr(-2);b=("00"+b.blue.toString(16)).substr(-2);return 0|parseInt("0x"+d+e+g+b,16)}
function zp(b,d){if(!(b instanceof vn))throw"shape type line must be of instance ol.geom.LineString!";var e="number"===typeof d?d:-1,g={};0<=e&&(g["@id"]=e);e=b.a;if(4<e.length)return vp.Oi.call(null,b,d);g["@type"]="http://www.openmicroscopy.org/Schemas/ROI/2015-01#Line";g.X1=e[0];g.X2=e[2];g.Y1=-e[1];g.Y2=-e[3];return g}
var Ap={point:function(b,d){if(!(b instanceof rn))throw"shape type point must be of instance ol.geom.Circle!";var e="number"===typeof d?d:-1,g={};0<=e&&(g["@id"]=e);g["@type"]="http://www.openmicroscopy.org/Schemas/ROI/2015-01#Point";e=Kj(b);g.X=e[0];g.Y=-e[1];return g},ellipse:function(b,d){if(!(b instanceof Zn))throw"shape type ellipse must be of instance ome.ol3.geom.Ellipse!";var e="number"===typeof d?d:-1,g={};0<=e&&(g["@id"]=e);g["@type"]="http://www.openmicroscopy.org/Schemas/ROI/2015-01#Ellipse";
e=[b.h,b.i];g.X=e[0];g.Y=-e[1];e=b.Ec();g.RadiusX=e[0];g.RadiusY=e[1];return g},rectangle:function(b,d){if(!(b instanceof Tn))throw"shape type rectangle must be of instance ome.ol3.geom.Rectangle!";var e="number"===typeof d?d:-1,g={};0<=e&&(g["@id"]=e);g["@type"]="http://www.openmicroscopy.org/Schemas/ROI/2015-01#Rectangle";e=Un(b);g.X=e[0];g.Y=-e[1];g.Width=Wn(b);g.Height=Xn(b);return g},line:zp,polyline:function(b,d){if(!(b instanceof vn))throw"shape type polyline must be of instance ol.geom.LineString!";
var e="number"===typeof d?d:-1,g={};0<=e&&(g["@id"]=e);e=b.a;if(5>e.length)return zp.call(null,b,d);g["@type"]="http://www.openmicroscopy.org/Schemas/ROI/2015-01#Polyline";g.Points="";for(var k=0;k<e.length;k+=2)0!==k&&0===k%2&&(g.Points+=" "),g.Points+=e[k]+","+-e[k+1];return g},label:function(b,d){if(!(b instanceof Rm))throw"shape type label must be of instance ome.ol3.geom.Label!";var e="number"===typeof d?d:-1,g={};0<=e&&(g["@id"]=e);g["@type"]="http://www.openmicroscopy.org/Schemas/ROI/2015-01#Label";
e=Un(b);g.X=e[0];g.Y=-e[1];return g},polygon:function(b,d){if(!(b instanceof Ud))throw"shape type polygon must be of instance ol.geom.Polygon!";var e="number"===typeof d?d:-1,g={};0<=e&&(g["@id"]=e);g["@type"]="http://www.openmicroscopy.org/Schemas/ROI/2015-01#Polygon";e=b.a;g.Points="";for(var k=0;k<e.length;k+=2)0!==k&&0===k%2&&(g.Points+=" "),g.Points+=e[k]+","+-e[k+1];return g}};
function Xm(b,d){if(!(b instanceof sb)||0===ub(b))return null;var e="boolean"===typeof d?d:!1,g=-1,k={count:0,rois:{}};b.forEach(function(b){var d=[];b instanceof jo?d=d.concat(b.K):d.push(b);for(f in d)if(b=d[f],b instanceof Gk&&null!==b.C()&&"number"===typeof b.state&&0!==b.state){var u=-1,v=-1;if(!("string"!==typeof b.Fa()||3>b.Fa().length)){var w=b.Fa().indexOf(":");if(!(1>w)){u=b.Fa().substring(0,w);v=b.Fa().substring(w+1);try{u=parseInt(u),v=parseInt(v)}catch(M){continue}w=u;2===b.state&&e&&
(w=g--);u=null;"object"!==typeof k.rois[w]&&(k.rois[w]={"@type":"http://www.openmicroscopy.org/Schemas/ROI/2015-01#ROI",shapes:[]});u=k.rois[w];w=b.type;try{var z=Ap[w].call(this,b.C(),2===b.state?-1:v),v=b,B=z;if("object"===typeof B&&"string"===typeof B["@type"]&&v instanceof Gk&&(v.a instanceof vj||"function"===typeof v.a)){var C=v.a;"function"===typeof C&&(C=C(1));if(C instanceof vj){var D="http://www.openmicroscopy.org/Schemas/ROI/2015-01#Label"===B["@type"];!D&&C.f&&(B.FillColor=yp(C.f.a));var F=
D&&C.H()&&C.H().S()?C.H().S().h:"object"===typeof v.oldStrokeStyle&&"string"===typeof v.oldStrokeStyle.color?v.oldStrokeStyle.color:null;F&&(B.StrokeColor=yp(F));var I="object"===typeof v.oldStrokeStyle&&null!==v.oldStrokeStyle&&"number"===typeof v.oldStrokeStyle.width?v.oldStrokeStyle.width:1;B.StrokeWidth={"@type":"TBD#LengthI",Unit:"PIXEL",Symbol:"px",Value:D&&C.H()&&C.H().S()?C.H().S().i:I};if(C.H()&&(C.H().H()&&(B.Text=C.H().H()),C.H().mb)){var J=C.H().mb.split(" ");if(3==J.length)try{B.FontStyle=
J[0],B.FontSize={"@type":"TBD#LengthI",Unit:"PIXEL",Symbol:"px",Value:parseInt(J[1])},B.FontFamily=J[2]}catch(M){}}}}v=b;B=z;"object"===typeof B&&v instanceof Gk&&("number"===typeof v.theT&&-1!==v.theT&&(B.TheT=v.theT),"number"===typeof v.theZ&&-1!==v.theZ&&(B.TheZ=v.theZ),"number"===typeof v.theC&&-1!==v.theC&&(B.TheC=v.theC));z.oldId=b.Fa();u.shapes.push(z)}catch(M){console.error("Failed to turn feature "+w+"("+b.Fa()+") into json => "+M);continue}k.count++}}}});return 0===k.count?null:k};function Am(b){if(!fa(b)||0===b.length||1===b.length&&1===b[0])return jn;var d=jn.length;if(b.length>=d)return b;b=[].concat(b);var e=-1;for(i in b)if(1===b[i]){e=i;break}if(0>e){for(i in b)if(1>b[i]){e=i;break}0>e?(b.push(1),e=b.length-1):b.splice(e,0,1)}if(b.length>=d)return b;for(i in jn)if(1==jn[i])break;var d=d-b.length,g=!0;for(b.length-e<e&&(g=!1);0<d;)g?(g=!1,b.splice(0,0,1.5*b[0])):(g=!0,b.push(b[b.length-1]/1.5)),d--;return b}
function Bp(b){if("string"!=typeof b||0==b.length)return null;for(var d=0,e=b.length,g=[],k=-1,p=0<b.indexOf(",");0<e-d;){if(" "==b[d]){if(d+1>=e)break;if(!p||p&&" "===b[d+1])if(d++,p)continue}var q=b[d].toLowerCase();if("m"===q||"l"===q||"z"===q||" "===q)if(0>k){for(;d+1<e&&" "===q&&(" "===b[d+1]||"z"===b[d+1].toLowerCase());)q=b[++d].toLowerCase();if("z"==q){g.push(g[0]);k=-1;break}for(k=d+1;0<e-d&&(" "===b[++d]||"M"===b[d]);)k++}else try{var u=b.substring(k,p?d:d-1).split(p?",":" ");if("object"!=
typeof u||2>u.length)return null;var v=null,w=null;for(t in u)if(""!==u[t])if(null===v)v=u[t];else if(null===w)w=u[t];else break;if(null===v&&null===w)return null;g.push([parseInt(v),-parseInt(w)]);k=-1;d--}catch(z){return null}d++}if(-1!==k)try{u=b.substring(k,e).split(p?",":" ");if("object"!=typeof u||2>u.length)return null;w=v=null;for(t in u)if(""!==u[t])if(null===v)v=u[t];else if(null===w)w=u[t];else break;if(null===v&&null===w)return null;g.push([parseInt(v),-parseInt(w)])}catch(z){return null}return g}
function ho(b,d,e,g,k,p){fa(b);var q=[];g="undefined"!==typeof g?g:window;e="boolean"===typeof e?e:!1;p="undefined"!==typeof p?p:fe;var u=null;um(d,b,function(b,d){if("boolean"!==typeof b.visible||b.visible)"function"===typeof this.bd&&this.bd(b,d)?(q.push(b),u=d):q.push(b)},g,p);k="function"===typeof k?k:function(){};if(0!=q.length)if(1===q.length)k.call(g,q[0],u);else{b=[];for(i in q)e&&q[i]instanceof jo?b.push(q[i]):0<b.length?(d=b[0].C(),Yb(d.I(),q[i].C().I())&&(b[0]=q[i])):b.push(q[i]);if(e&&
1<b.length)for(i in b)Yb(b[0].C().I(),b[i].C().I())&&(b[0]=b[1]);k.call(g,b[0],u)}}function mo(b,d){"object"===typeof b&&"string"===typeof b.className&&"string"===typeof d&&(b.className=d)}function lo(b){b="object"!==typeof b||"string"!==typeof b.className?null:b.className.match(/\S+/g)||null;return null===b?!1:0<=he(b,"content")}
function op(){for(var b=document.cookie.split(";"),d=0,e=b.length;d<e;d++){for(var g=b[d];" "==g.charAt(0);)g=g.substring(1);if(0==g.indexOf("csrftoken="))return g.substring(10,g.length)}return""};var xm={te:function(b){if("string"!==typeof b)return null;try{var d={path:"/",query:"",full:"/",relative:!0};b=b.replace(/\s/g,"");if(0===b.length)return d;for(var e=b.length,g=0;g<e&&"/"===b.charAt(g);g++)d.relative=!1,b=b.substring(g+1),g--;var k=b.indexOf("?");-1!==k&&(d.query=b.substring(k+1),b=b.substring(0,k));e=b.length;if(0<e)for(g=e-1;0<=g&&"/"===b.charAt(g);g--)b=b.substring(0,g);d.path=b;d.full=d.path;0<d.query.length&&(d.full+="/?"+d.query);return d}catch(p){return null}},se:function(b){if("string"!==
typeof b)return null;try{var d={protocol:"",server:"",full:""};b=b.replace(/\s/g,"");if(0===b.length)return d;var e=b.indexOf("://");if(-1===e)d.protocol="http";else{var g=b.substring(0,e).toLowerCase();if("http"!==g&&"https"!==g&&"file"!==g)return null;d.protocol=g;b=b.substring(e+3)}var k=b.length;if(0<k)for(e=k-1;0<e&&"/"===b.charAt(e);e--)b=b.substring(0,e);d.server=b;d.full=d.protocol+"://"+d.server;return d}catch(p){return null}},gd:function(b){if("object"!==typeof b||"string"!==typeof b.protocol||
"string"!==typeof b.server||"string"!==typeof b.full)return!1;if(""===b.full)return!0;var d="",d="file:"===window.location.protocol?window.location.href:window.location.protocol+"//"+window.location.hostname,d=d.toLowerCase();return d===b.full.toLowerCase()?!0:!1},Ni:function(b,d,e){xm.Pc({server:b,uri:"/webclient/keepalive_ping/",jsonp:!1,success:function(b){d&&e?d.call(e,b):d?d(b):console.info("Received: "+b)},error:function(){console.error("keep alive failed")}},e)},Pc:function(b,d){var e=b||{},
g=e.server||"";"string"===typeof g&&(g=xm.se(g));var k=e.uri||"",k=xm.te(k),p="string"===typeof e.method?e.method.toUpperCase():"GET",q="object"===typeof e.headers?e.headers:{},u="string"===typeof e.content?e.content:null,v="number"===typeof e.timeout?e.timeout:6E4,w="function"===typeof e.success?e.success:function(b){console.info(b)},e="function"===typeof e.error?e.error:function(b){console.error(b)};xm.gd(g)?xm.Kh(g,k,w,e,p,q,v,u,d):xm.Jh(g,k,w,e,d)},ue:function(b){cb(b,"this method needs the is_jsonp_request flag as first argument!")},
Kh:function(b,d,e,g,k,p,q,u,v){xm.ue(!1,b,d,e,g,k,p,q,u);var w="undefined"!==typeof window.XMLHttpRequest?new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP");b=""===b.full&&d.relative?d.full:b.full+"/"+d.full;""===d.query&&(b+="/");w.open(k,b,!0);for(h in p)w.setRequestHeader(h,p[h]);w.timeout=q;w.ontimeout=function(){console.info("xhr request timed out!")};w.onerror=function(b){b="undefined"!=typeof b.target?b.target.responseText:null;console.error(null===b?"xhr: an error occured":"xhr error: "+
b)};w.onreadystatechange=function(){if(4==w.readyState&&200<=w.status&&300>w.status){var b=w.responseText;"undefined"===typeof b&&(b=null);if(null!==b){var d="string"===typeof w.responseURL,k=d?w.responseURL.lastIndexOf("webclient/login/?url="):w.responseText.lastIndexOf("webclient/login/?url=");if(-1!==k){var b="webclient/login/?url=",p=window.location.href;d&&(b=w.responseURL.substring(0,k+21));window.location.href=b+p;return!0}v?e.call(v,b):e(b)}else v?g.call(v,w.statusText):g(w.statusText);return!0}return 4==
w.readyState?(v?g.call(v,w.statusText):g(w.statusText),!0):!1};w.send("POST"===k?u:null)},Le:function(b){if("object"===typeof b&&"string"===typeof b.full){var d=window.location.href,e=!1;-1!==d.indexOf("?")&&(e=!0);b=b.full+"/webclient/login/?url="+d;window.location.href=(e?b+"&":b+"?")+"haveMadeCrossOriginLogin_"}},yg:function(b){xm.jsonpCallback_&&xm.jsonpCallback_(b)},Jh:function(b,d,e,g,k){function p(b){try{var d=document.head,e=document.createElement("script");e.onerror=function(b){console.error("JSONP request failed!");
k?g.call(k,g):g(b);delete xm.jsonpCallback_};e.src=b;d.appendChild(e);d.removeChild(e)}catch(p){console.error("failed to setup jsonp request: "+p)}}xm.ue(!0,b,d,e,g);xm.jsonpCallback_=function(b){try{k?e.call(k,b):e(b)}catch(d){k?g.call(k,d):g(d)}delete xm.jsonpCallback_};try{var q=b.full+"/"+d.full,q=""==d.query?q+"/?":q+"&";p(q+"callback=ome.ol3.utils.Net.jsonpCallback")}catch(u){delete xm.jsonpCallback_,console.error("jsonp: failed to issue request: "+u)}}};
aa("ome.ol3.utils.Net.jsonpCallback",xm.yg,OME);var Cp={point:function(b){var d=new Gk({geometry:new rn(["number"===typeof b.cx?b.cx:"number"===typeof b.x?b.x:-1,-("number"===typeof b.cy?b.cy:"number"===typeof b.y?b.y:-1)],2)});d.type="point";Jk(d,pp(b));return d},ellipse:function(b){var d=new Gk({geometry:new Zn(b.cx,-b.cy,b.rx,b.ry)});d.type="ellipse";Jk(d,pp(b));return d},rectangle:function(b){var d=new Gk({geometry:new Tn(b.x,-b.y,b.width,b.height)});d.type="rectangle";Jk(d,pp(b));return d},line:function(b){var d=new Gk({geometry:new vn([[b.x1,
-b.y1],[b.x2,-b.y2]])});d.type="line";Jk(d,pp(b));return d},polyline:function(b){if("string"!=typeof b.points)return null;var d=Bp(b.points);if(null===d)return null;d=new Gk({geometry:new To(d)});d.type="polyline";Jk(d,pp(b));return d},label:function(b){if("string"!==typeof b.textValue||0===b.textValue.length)b.textValue="missing textValue";if("number"!==typeof b.fontSize)try{b.fontSize=parseInt(b.fontSize)}catch(e){b.fontSize=10}"string"!==typeof b.fontFamily&&(b.fontFamily="sans-serif");"string"!==
typeof b.fontStyle&&(b.fontStyle="normal");var d=Yn(b.textValue,b.fontStyle+" "+b.fontSize+"px "+b.fontFamily),d=new Gk({geometry:new Rm(b.x,-b.y,d)});d.type="label";Jk(d,pp(b,!0));return d},polygon:function(b){if("string"!=typeof b.points)return null;var d=Bp(b.points);if(null===d)return null;d=new Gk({geometry:new Ud([d])});d.type="polygon";Jk(d,pp(b));return d}};function Dp(b){if("string"!==typeof b||0===b.length)return null;b=b.toLowerCase();return"undefined"===typeof Cp?null:Cp[b]}
function Ep(b){var d=Dp(b.type);if("function"!==typeof d)return null;up(b);b=d(b);return b instanceof Gk?b:null}
function Qm(b,d,e,g){if(null==Dp(b.type)||!fa(e)||4!=e.length)return null;if("number"!==typeof d||0>d)d=1;if(5E4<d)return console.info("The generation is limited to 50,000 at once for now!"),null;"boolean"!==typeof g&&(g=!1);up(b);var k=e;"object"===typeof b&&"string"===typeof b.type&&0!==b.type.length&&fa(k)&&4==k.length&&(k=b.type.toLowerCase(),"point"===k?("number"!==typeof b.cx&&(b.cx=6),"number"!==typeof b.cy&&(b.cy=6)):"line"===k?("number"!==typeof b.x1&&(b.x1=2),"number"!==typeof b.x2&&(b.x2=
17),"number"!==typeof b.y1&&(b.y1=2),"number"!==typeof b.y2&&(b.y2=2)):"polyline"===k?"string"!==typeof b.points&&(b.points="M 2 2 L 7 7 L12 2 L17 7"):"polygon"===k?"string"!==typeof b.points&&(b.points="M 2 2 L 7 7 L12 2 L17 7 Z"):"rectangle"===k?("number"!==typeof b.x&&(b.x=2),"number"!==typeof b.y&&(b.y=2),"number"!==typeof b.width&&(b.width=15),"number"!==typeof b.height&&(b.height=15)):"ellipse"===k?("number"!==typeof b.cx&&(b.cx=20),"number"!==typeof b.cy&&(b.cy=15),"number"!==typeof b.rx&&
(b.rx=8),"number"!==typeof b.ry&&(b.ry=5)):"label"===k&&("string"!==typeof b.fontFamily&&(b.fontFamily="sans-serif"),"number"!==typeof b.fontSize&&(b.fontSize=15),"string"!==typeof b.fontStyle&&(b.fontStyle="normal"),"string"!==typeof b.textValue&&(b.textValue="generated"),"number"!==typeof b.x&&(b.x=10),"number"!==typeof b.y&&(b.y=10)));b=Ep(b);if(null==b)return console.error("Failed to create generation prototype!"),null;b.state=2;var p=b.C().I(),q=jc(p),u=kc(p);0===u&&(u=1);0===q&&(q=1);var v=
jc(e),w=kc(e);if(0===v||0===w||q>v||u>w)return console.error("the protoype shape to be generated does not fit into the given extent!"),null;var k=[],z=gc(e),B=[e[2],e[1]],p=gc(p);b.C().Ya(-(p[0]-z[0]),-(p[1]+B[1]));if(g){e=[0,0,v-q,w-u];for(v=0;v<d;v++){w=e;fa(w)&&4==w.length?(g=w[2],u=Math.floor(Math.random()*(g-0+1))+0,g=w[3],w=[u,Math.floor(Math.random()*(g-0+1))+0]):w=null;if(null===w){console.error("couldn't get random coordinate");break}g=new Gk({geometry:b.C().clone()});g.type=b.type;Jk(g,
sp(b.a));g.C().Ya(w[0],-w[1]);w=g;u="-1:"+L(g);w.ya=u;w.A();g.state=2;k.push(g)}return k}g=d;z=e;e=q;0>=e&&(e=1);0>=u&&(u=1);e={fitsPerRow:parseInt(jc(z)/e),fitsPerColumn:parseInt(kc(z)/u)};u=g/(e.fitsPerRow*e.fitsPerColumn);if(1<u){for(;1<u;)e.fitsPerRow*=2,e.fitsPerColumn*=2,u=g/(e.fitsPerRow*e.fitsPerColumn);e.stepX=parseInt(jc(z)/e.fitsPerRow)}else e.stepX=e.fitsPerRow>g?parseInt(jc(z)/g):parseInt(jc(z)/e.fitsPerRow);e.stepY=parseInt(kc(z)/e.fitsPerColumn);for(q=u=0;q*e.stepY<w&&!(u>=d);q++)for(z=
0;z*e.stepX<v&&!(u>=d);z++)g=new Gk({geometry:b.C().clone()}),g.type=b.type,Jk(g,sp(b.a)),g.C().Ya(z*e.stepX,-q*e.stepY),B=g,p="-1:"+L(g),B.ya=p,B.A(),g.state=2,k.push(g),u++;return k}
function mp(b){var d=nn;if(!(b instanceof Pk)||"object"!==typeof b.Ua||"object"!==typeof b.Ua.data)return null;if("number"!==typeof d||100>=d)d=100;var e=[];Fp(b.Ua.data,e);b=[];for(l in e){var g=new Pk,k=[],p=[],q=e[l];for(f in q){var u=q[f];k.push(u.wc);p.push(u)}g.load(k,p);b.push(g);if(e[l].length<d)break}return b}
function Fp(b,d){if("object"!==typeof b||!fa(d)||"number"!==typeof b.height&&"boolean"!==typeof b.Ca&&!fa(b.children)&&!fa(b.sa))return null;if("boolean"===typeof b.Ca&&b.Ca||"number"===typeof b.height&&1==b.height){var e=[],g=new jo;for(child in b.children){if(!fa(b.children[child])||5!=b.children[child].length)return null;var k=b.children[child][4];k.cluster=g;e.push(k)}Uo(g,b.sa,e);fa(d[0])||d.push([]);d[0].push(g);return g}k=[];for(child in b.children)k.push(Fp(b.children[child],d));g=b.height-
1;fa(d[g])||d.push([]);e=[];for(r in k)e=e.concat(k[r].K);e=new jo(b.sa,e);d[g].push(e);return e}
function Om(b){if(!(b instanceof Em&&fa(b.Ba)))return null;var d=[];for(roi in b.Ba)if("number"===typeof b.Ba[roi].id&&fa(b.Ba[roi].shapes)){var e=b.Ba[roi].id;b.Ba[roi].state=0;for(shape in b.Ba[roi].shapes)if("number"===typeof b.Ba[roi].shapes[shape].id){var g=b.Ba[roi].shapes[shape].id,k=b.Ba[roi].shapes[shape].type,p="number"===typeof b.Ba[roi].shapes[shape].theT?b.Ba[roi].shapes[shape].theT:-1,q="number"===typeof b.Ba[roi].shapes[shape].theZ?b.Ba[roi].shapes[shape].theZ:-1;if(!(null===b.o||"string"!==
typeof k||-1!==p&&b.o.Ld("t")!==p||-1!==q&&b.o.Ld("z")!==q)){b.Ba[roi].shapes[shape].state=0;var u=null,v=null;try{var v=Ep(b.Ba[roi].shapes[shape]),w=null;"string"===typeof b.Ba[roi].shapes[shape].type&&(w=b.Ba[roi].shapes[shape].type.toLowerCase());if("mask"===w){var u=b,z=b.Ba[roi].shapes[shape];if(u instanceof Em&&"object"===typeof z&&"string"===typeof z.type&&"mask"===z.type.toLowerCase()){var B=ub(wm(u.o.o))-1;vb(wm(u.o.o),B,new ij({source:new kp({Aa:null,url:u.o.Va.full+"/webgateway/render_shape_mask/"+
z.id,ba:V(u.o.o).a,tg:[z.x,-z.y-z.height,z.x+z.width,-z.y]})}))}continue}var C=V(b.o.o).ga();v.C()instanceof Rm&&0!==C&&!b.Jb&&v.C().rotate(-C);Sm(v,b)}catch(D){u=D}g=""+e+":"+g;v instanceof Gk?(k=v,k.ya=g,k.A(),-1!=p&&(v.theT=p),-1!=q&&(v.theZ=q),v.state=0,d.push(v)):(console.error("Failed to construct "+k+"("+g+") from shape info!"),null!=u&&console.error(u))}}}return d};    return {ol: OPENLAYERS.ol, ome: OME.ome};   }));
